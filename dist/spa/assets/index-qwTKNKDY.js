var zg=s=>{throw TypeError(s)};var Qu=(s,t,r)=>t.has(s)||zg("Cannot "+r);var Ne=(s,t,r)=>(Qu(s,t,"read from private field"),r?r.call(s):t.get(s)),As=(s,t,r)=>t.has(s)?zg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),cs=(s,t,r,a)=>(Qu(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),bt=(s,t,r)=>(Qu(s,t,"access private method"),r);var yc=(s,t,r,a)=>({set _(n){cs(s,t,n,r)},get _(){return Ne(s,t,a)}});import{r as Yh,a as Ty,g as Zh,b as U4}from"./vendor-DyFf35aq.js";import{r as d,R as Re,a as Iy,b as Ay,l as z4,E as q4,u as V4,c as J4,P as W4}from"./stripe-ngUR4aDN.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var em={exports:{}},Po={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function H4(){if(qg)return Po;qg=1;var s=Yh(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,l,u){var m,x={},f=null,p=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(m in l)a.call(l,m)&&!i.hasOwnProperty(m)&&(x[m]=l[m]);if(c&&c.defaultProps)for(m in l=c.defaultProps,l)x[m]===void 0&&(x[m]=l[m]);return{$$typeof:t,type:c,key:f,ref:p,props:x,_owner:n.current}}return Po.Fragment=r,Po.jsx=o,Po.jsxs=o,Po}var Vg;function G4(){return Vg||(Vg=1,em.exports=H4()),em.exports}var e=G4();const X4=1,Y4=1e6;let sm=0;function Z4(){return sm=(sm+1)%Number.MAX_SAFE_INTEGER,sm.toString()}const tm=new Map,Jg=s=>{if(tm.has(s))return;const t=setTimeout(()=>{tm.delete(s),Bo({type:"REMOVE_TOAST",toastId:s})},Y4);tm.set(s,t)},K4=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,X4)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Jg(r):s.toasts.forEach(a=>{Jg(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},Zc=[];let Kc={toasts:[]};function Bo(s){Kc=K4(Kc,s),Zc.forEach(t=>{t(Kc)})}function Q4({...s}){const t=Z4(),r=n=>Bo({type:"UPDATE_TOAST",toast:{...n,id:t}}),a=()=>Bo({type:"DISMISS_TOAST",toastId:t});return Bo({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||a()}}}),{id:t,dismiss:a,update:r}}function et(){const[s,t]=d.useState(Kc);return d.useEffect(()=>(Zc.push(t),()=>{const r=Zc.indexOf(t);r>-1&&Zc.splice(r,1)}),[s]),{...s,toast:Q4,dismiss:r=>Bo({type:"DISMISS_TOAST",toastId:r})}}var On=Ty();const Dn=Zh(On);function ye(s,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(s==null||s(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function ek(s,t){typeof s=="function"?s(t):s!=null&&(s.current=t)}function Cd(...s){return t=>s.forEach(r=>ek(r,t))}function qe(...s){return d.useCallback(Cd(...s),s)}function sk(s,t){const r=d.createContext(t);function a(i){const{children:o,...c}=i,l=d.useMemo(()=>c,Object.values(c));return e.jsx(r.Provider,{value:l,children:o})}function n(i){const o=d.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${s}\``)}return a.displayName=s+"Provider",[a,n]}function ft(s,t=[]){let r=[];function a(i,o){const c=d.createContext(o),l=r.length;r=[...r,o];function u(x){const{scope:f,children:p,...v}=x,g=(f==null?void 0:f[s][l])||c,b=d.useMemo(()=>v,Object.values(v));return e.jsx(g.Provider,{value:b,children:p})}function m(x,f){const p=(f==null?void 0:f[s][l])||c,v=d.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${x}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,m]}const n=()=>{const i=r.map(o=>d.createContext(o));return function(c){const l=(c==null?void 0:c[s])||i;return d.useMemo(()=>({[`__scope${s}`]:{...c,[s]:l}}),[c,l])}};return n.scopeName=s,[a,tk(n,...t)]}function tk(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const a=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const o=a.reduce((c,{useScope:l,scopeName:u})=>{const x=l(i)[`__scope${u}`];return{...c,...x}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Yr=d.forwardRef((s,t)=>{const{children:r,...a}=s,n=d.Children.toArray(r),i=n.find(rk);if(i){const o=i.props.children,c=n.map(l=>l===i?d.Children.count(o)>1?d.Children.only(null):d.isValidElement(o)?o.props.children:null:l);return e.jsx(Zm,{...a,ref:t,children:d.isValidElement(o)?d.cloneElement(o,void 0,c):null})}return e.jsx(Zm,{...a,ref:t,children:r})});Yr.displayName="Slot";var Zm=d.forwardRef((s,t)=>{const{children:r,...a}=s;if(d.isValidElement(r)){const n=nk(r);return d.cloneElement(r,{...ak(a,r.props),ref:t?Cd(t,n):n})}return d.Children.count(r)>1?d.Children.only(null):null});Zm.displayName="SlotClone";var Kh=({children:s})=>e.jsx(e.Fragment,{children:s});function rk(s){return d.isValidElement(s)&&s.type===Kh}function ak(s,t){const r={...t};for(const a in t){const n=s[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...c)=>{i(...c),n(...c)}:n&&(r[a]=n):a==="style"?r[a]={...n,...i}:a==="className"&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...s,...r}}function nk(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}function kd(s){const t=s+"CollectionProvider",[r,a]=ft(t),[n,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:g}=p,b=Re.useRef(null),w=Re.useRef(new Map).current;return e.jsx(n,{scope:v,itemMap:w,collectionRef:b,children:g})};o.displayName=t;const c=s+"CollectionSlot",l=Re.forwardRef((p,v)=>{const{scope:g,children:b}=p,w=i(c,g),y=qe(v,w.collectionRef);return e.jsx(Yr,{ref:y,children:b})});l.displayName=c;const u=s+"CollectionItemSlot",m="data-radix-collection-item",x=Re.forwardRef((p,v)=>{const{scope:g,children:b,...w}=p,y=Re.useRef(null),_=qe(v,y),N=i(u,g);return Re.useEffect(()=>(N.itemMap.set(y,{ref:y,...w}),()=>void N.itemMap.delete(y))),e.jsx(Yr,{[m]:"",ref:_,children:b})});x.displayName=u;function f(p){const v=i(s+"CollectionConsumer",p);return Re.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((N,C)=>w.indexOf(N.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:x},f,a]}var ik=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ae=ik.reduce((s,t)=>{const r=d.forwardRef((a,n)=>{const{asChild:i,...o}=a,c=i?Yr:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${t}`,{...s,[t]:r}},{});function sn(s,t){s&&On.flushSync(()=>s.dispatchEvent(t))}function Ns(s){const t=d.useRef(s);return d.useEffect(()=>{t.current=s}),d.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}function Xi(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s);d.useEffect(()=>{const a=n=>{n.key==="Escape"&&r(n)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var ok="DismissableLayer",Km="dismissableLayer.update",lk="dismissableLayer.pointerDownOutside",ck="dismissableLayer.focusOutside",Wg,My=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ry=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(My),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=uk(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=mk(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Wg=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),Hg(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Wg)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),Hg())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener(Km,E),()=>document.removeEventListener(Km,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});Ry.displayName=ok;var dk="DismissableLayerBranch",Oy=d.forwardRef((s,t)=>{const r=d.useContext(My),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});Oy.displayName=dk;function uk(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){Dy(lk,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function mk(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&Dy(ck,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Hg(){const s=new CustomEvent(Km);document.dispatchEvent(s)}function Dy(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var hk=Ry,fk=Oy,Fs=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},xk="Portal",Fy=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});Fy.displayName=xk;function pk(s,t){return d.useReducer((r,a)=>t[r][a]??r,s)}var xt=s=>{const{present:t,children:r}=s,a=gk(t),n=typeof r=="function"?r({present:a.isPresent}):d.Children.only(r),i=qe(a.ref,vk(n));return typeof r=="function"||a.isPresent?d.cloneElement(n,{ref:i}):null};xt.displayName="Presence";function gk(s){const[t,r]=d.useState(),a=d.useRef({}),n=d.useRef(s),i=d.useRef("none"),o=s?"mounted":"unmounted",[c,l]=pk(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=jc(a.current);i.current=c==="mounted"?u:"none"},[c]),Fs(()=>{const u=a.current,m=n.current;if(m!==s){const f=i.current,p=jc(u);s?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,l]),Fs(()=>{if(t){const u=x=>{const p=jc(a.current).includes(x.animationName);x.target===t&&p&&On.flushSync(()=>l("ANIMATION_END"))},m=x=>{x.target===t&&(i.current=jc(a.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:d.useCallback(u=>{u&&(a.current=getComputedStyle(u)),r(u)},[])}}function jc(s){return(s==null?void 0:s.animationName)||"none"}function vk(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}function hr({prop:s,defaultProp:t,onChange:r=()=>{}}){const[a,n]=bk({defaultProp:t,onChange:r}),i=s!==void 0,o=i?s:a,c=Ns(r),l=d.useCallback(u=>{if(i){const x=typeof u=="function"?u(s):u;x!==s&&c(x)}else n(u)},[i,s,n,c]);return[o,l]}function bk({defaultProp:s,onChange:t}){const r=d.useState(s),[a]=r,n=d.useRef(a),i=Ns(t);return d.useEffect(()=>{n.current!==a&&(i(a),n.current=a)},[a,n,i]),r}var yk="VisuallyHidden",ul=d.forwardRef((s,t)=>e.jsx(Ae.span,{...s,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...s.style}}));ul.displayName=yk;var jk=ul,Qh="ToastProvider",[ef,wk,Nk]=kd("Toast"),[Ly,I9]=ft("Toast",[Nk]),[_k,Ed]=Ly(Qh),$y=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:o}=s,[c,l]=d.useState(null),[u,m]=d.useState(0),x=d.useRef(!1),f=d.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qh}\`. Expected non-empty \`string\`.`),e.jsx(ef.Provider,{scope:t,children:e.jsx(_k,{scope:t,label:r,duration:a,swipeDirection:n,swipeThreshold:i,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:d.useCallback(()=>m(p=>p+1),[]),onToastRemove:d.useCallback(()=>m(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:f,children:o})})};$y.displayName=Qh;var By="ToastViewport",Sk=["F8"],Qm="toast.viewportPause",eh="toast.viewportResume",Uy=d.forwardRef((s,t)=>{const{__scopeToast:r,hotkey:a=Sk,label:n="Notifications ({hotkey})",...i}=s,o=Ed(By,r),c=wk(r),l=d.useRef(null),u=d.useRef(null),m=d.useRef(null),x=d.useRef(null),f=qe(t,x,o.onViewportChange),p=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;d.useEffect(()=>{const b=w=>{var _;a.every(N=>w[N]||w.code===N)&&((_=x.current)==null||_.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a]),d.useEffect(()=>{const b=l.current,w=x.current;if(v&&b&&w){const y=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(Qm);w.dispatchEvent(R),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(eh);w.dispatchEvent(R),o.isClosePausedRef.current=!1}},N=R=>{!b.contains(R.relatedTarget)&&_()},C=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",y),b.addEventListener("focusout",N),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",C),window.addEventListener("blur",y),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",C),window.removeEventListener("blur",y),window.removeEventListener("focus",_)}}},[v,o.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:b})=>{const y=c().map(_=>{const N=_.ref.current,C=[N,...Lk(N)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?y.reverse():y).flat()},[c]);return d.useEffect(()=>{const b=x.current;if(b){const w=y=>{var C,R,E;const _=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!_){const I=document.activeElement,M=y.shiftKey;if(y.target===b&&M){(C=u.current)==null||C.focus();return}const z=g({tabbingDirection:M?"backwards":"forwards"}),X=z.findIndex(T=>T===I);rm(z.slice(X+1))?y.preventDefault():M?(R=u.current)==null||R.focus():(E=m.current)==null||E.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[c,g]),e.jsxs(fk,{ref:l,role:"region","aria-label":n.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&e.jsx(sh,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});rm(b)}}),e.jsx(ef.Slot,{scope:r,children:e.jsx(Ae.ol,{tabIndex:-1,...i,ref:f})}),v&&e.jsx(sh,{ref:m,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});rm(b)}})]})});Uy.displayName=By;var zy="ToastFocusProxy",sh=d.forwardRef((s,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...n}=s,i=Ed(zy,r);return e.jsx(ul,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const c=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(c))&&a()}})});sh.displayName=zy;var Pd="Toast",Ck="toast.swipeStart",kk="toast.swipeMove",Ek="toast.swipeCancel",Pk="toast.swipeEnd",qy=d.forwardRef((s,t)=>{const{forceMount:r,open:a,defaultOpen:n,onOpenChange:i,...o}=s,[c=!0,l]=hr({prop:a,defaultProp:n,onChange:i});return e.jsx(xt,{present:r||c,children:e.jsx(Ak,{open:c,...o,ref:t,onClose:()=>l(!1),onPause:Ns(s.onPause),onResume:Ns(s.onResume),onSwipeStart:ye(s.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(s.onSwipeMove,u=>{const{x:m,y:x}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:ye(s.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(s.onSwipeEnd,u=>{const{x:m,y:x}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),l(!1)})})})});qy.displayName=Pd;var[Tk,Ik]=Ly(Pd,{onClose(){}}),Ak=d.forwardRef((s,t)=>{const{__scopeToast:r,type:a="foreground",duration:n,open:i,onClose:o,onEscapeKeyDown:c,onPause:l,onResume:u,onSwipeStart:m,onSwipeMove:x,onSwipeCancel:f,onSwipeEnd:p,...v}=s,g=Ed(Pd,r),[b,w]=d.useState(null),y=qe(t,T=>w(T)),_=d.useRef(null),N=d.useRef(null),C=n||g.duration,R=d.useRef(0),E=d.useRef(C),I=d.useRef(0),{onToastAdd:M,onToastRemove:U}=g,D=Ns(()=>{var A;(b==null?void 0:b.contains(document.activeElement))&&((A=g.viewport)==null||A.focus()),o()}),z=d.useCallback(T=>{!T||T===1/0||(window.clearTimeout(I.current),R.current=new Date().getTime(),I.current=window.setTimeout(D,T))},[D]);d.useEffect(()=>{const T=g.viewport;if(T){const A=()=>{z(E.current),u==null||u()},O=()=>{const $=new Date().getTime()-R.current;E.current=E.current-$,window.clearTimeout(I.current),l==null||l()};return T.addEventListener(Qm,O),T.addEventListener(eh,A),()=>{T.removeEventListener(Qm,O),T.removeEventListener(eh,A)}}},[g.viewport,C,l,u,z]),d.useEffect(()=>{i&&!g.isClosePausedRef.current&&z(C)},[i,C,g.isClosePausedRef,z]),d.useEffect(()=>(M(),()=>U()),[M,U]);const X=d.useMemo(()=>b?Yy(b):null,[b]);return g.viewport?e.jsxs(e.Fragment,{children:[X&&e.jsx(Mk,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:X}),e.jsx(Tk,{scope:r,onClose:D,children:On.createPortal(e.jsx(ef.ItemSlot,{scope:r,children:e.jsx(hk,{asChild:!0,onEscapeKeyDown:ye(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:ye(s.onKeyDown,T=>{T.key==="Escape"&&(c==null||c(T.nativeEvent),T.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:ye(s.onPointerDown,T=>{T.button===0&&(_.current={x:T.clientX,y:T.clientY})}),onPointerMove:ye(s.onPointerMove,T=>{if(!_.current)return;const A=T.clientX-_.current.x,O=T.clientY-_.current.y,$=!!N.current,F=["left","right"].includes(g.swipeDirection),q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,te=F?q(0,A):0,re=F?0:q(0,O),be=T.pointerType==="touch"?10:2,Me={x:te,y:re},je={originalEvent:T,delta:Me};$?(N.current=Me,wc(kk,x,je,{discrete:!1})):Gg(Me,g.swipeDirection,be)?(N.current=Me,wc(Ck,m,je,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(A)>be||Math.abs(O)>be)&&(_.current=null)}),onPointerUp:ye(s.onPointerUp,T=>{const A=N.current,O=T.target;if(O.hasPointerCapture(T.pointerId)&&O.releasePointerCapture(T.pointerId),N.current=null,_.current=null,A){const $=T.currentTarget,F={originalEvent:T,delta:A};Gg(A,g.swipeDirection,g.swipeThreshold)?wc(Pk,p,F,{discrete:!0}):wc(Ek,f,F,{discrete:!0}),$.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Mk=s=>{const{__scopeToast:t,children:r,...a}=s,n=Ed(Pd,t),[i,o]=d.useState(!1),[c,l]=d.useState(!1);return Dk(()=>o(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:e.jsx(Fy,{asChild:!0,children:e.jsx(ul,{...a,children:i&&e.jsxs(e.Fragment,{children:[n.label," ",r]})})})},Rk="ToastTitle",Vy=d.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(Ae.div,{...a,ref:t})});Vy.displayName=Rk;var Ok="ToastDescription",Jy=d.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(Ae.div,{...a,ref:t})});Jy.displayName=Ok;var Wy="ToastAction",Hy=d.forwardRef((s,t)=>{const{altText:r,...a}=s;return r.trim()?e.jsx(Xy,{altText:r,asChild:!0,children:e.jsx(sf,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Wy}\`. Expected non-empty \`string\`.`),null)});Hy.displayName=Wy;var Gy="ToastClose",sf=d.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s,n=Ik(Gy,r);return e.jsx(Xy,{asChild:!0,children:e.jsx(Ae.button,{type:"button",...a,ref:t,onClick:ye(s.onClick,n.onClose)})})});sf.displayName=Gy;var Xy=d.forwardRef((s,t)=>{const{__scopeToast:r,altText:a,...n}=s;return e.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...n,ref:t})});function Yy(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),Fk(a)){const n=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Yy(a))}}),t}function wc(s,t,r,{discrete:a}){const n=r.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var Gg=(s,t,r=0)=>{const a=Math.abs(s.x),n=Math.abs(s.y),i=a>n;return t==="left"||t==="right"?i&&a>r:!i&&n>r};function Dk(s=()=>{}){const t=Ns(s);Fs(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function Fk(s){return s.nodeType===s.ELEMENT_NODE}function Lk(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function rm(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var $k=$y,Zy=Uy,Ky=qy,Qy=Vy,e0=Jy,s0=Hy,t0=sf;function r0(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=r0(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function a0(){for(var s,t,r=0,a="",n=arguments.length;r<n;r++)(s=arguments[r])&&(t=r0(s))&&(a&&(a+=" "),a+=t);return a}const Xg=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Yg=a0,ml=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return Yg(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(u=>{const m=r==null?void 0:r[u],x=i==null?void 0:i[u];if(m===null)return null;const f=Xg(m)||Xg(x);return n[u][f]}),c=r&&Object.entries(r).reduce((u,m)=>{let[x,f]=m;return f===void 0||(u[x]=f),u},{}),l=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,m)=>{let{class:x,className:f,...p}=m;return Object.entries(p).every(v=>{let[g,b]=v;return Array.isArray(b)?b.includes({...i,...c}[g]):{...i,...c}[g]===b})?[...u,x,f]:u},[]);return Yg(s,o,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n0=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=d.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...c},l)=>d.createElement("svg",{ref:l,...Uk,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:n0("lucide",n),...c},[...o.map(([u,m])=>d.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(s,t)=>{const r=d.forwardRef(({className:a,...n},i)=>d.createElement(zk,{ref:i,iconNode:t,className:n0(`lucide-${Bk(s)}`,a),...n}));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=Pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Pe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Pe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Pe("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=Pe("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Pe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Pe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=Pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=Pe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Pe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Pe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=Pe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Pe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=Pe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Pe("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Pe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Pe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Pe("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Pe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Pe("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=Pe("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Pe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Pe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Pe("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Pe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Pe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Pe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Pe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Pe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Pe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Pe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),of="-",oE=s=>{const t=cE(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:o=>{const c=o.split(of);return c[0]===""&&c.length!==1&&c.shift(),m0(c,t)||lE(o)},getConflictingClassGroupIds:(o,c)=>{const l=r[o]||[];return c&&a[o]?[...l,...a[o]]:l}}},m0=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),n=a?m0(s.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(of);return(o=t.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},iv=/^\[(.+)\]$/,lE=s=>{if(iv.test(s)){const t=iv.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},cE=s=>{const{theme:t,prefix:r}=s,a={nextPart:new Map,validators:[]};return uE(Object.entries(s.classGroups),r).forEach(([i,o])=>{ah(o,a,i,t)}),a},ah=(s,t,r,a)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:ov(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(dE(n)){ah(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,o])=>{ah(o,ov(t,i),r,a)})})},ov=(s,t)=>{let r=s;return t.split(of).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},dE=s=>s.isThemeGetter,uE=(s,t)=>t?s.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[t+o,c])):i);return[r,n]}):s,mE=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(i,o)=>{r.set(i,o),t++,t>s&&(t=0,a=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){r.has(i)?r.set(i,o):n(i,o)}}},h0="!",hE=s=>{const{separator:t,experimentalParseClassName:r}=s,a=t.length===1,n=t[0],i=t.length,o=c=>{const l=[];let u=0,m=0,x;for(let b=0;b<c.length;b++){let w=c[b];if(u===0){if(w===n&&(a||c.slice(b,b+i)===t)){l.push(c.slice(m,b)),m=b+i;continue}if(w==="/"){x=b;continue}}w==="["?u++:w==="]"&&u--}const f=l.length===0?c:c.substring(m),p=f.startsWith(h0),v=p?f.substring(1):f,g=x&&x>m?x-m:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return r?c=>r({className:c,parseClassName:o}):o},fE=s=>{if(s.length<=1)return s;const t=[];let r=[];return s.forEach(a=>{a[0]==="["?(t.push(...r.sort(),a),r=[]):r.push(a)}),t.push(...r.sort()),t},xE=s=>({cache:mE(s.cacheSize),parseClassName:hE(s),...oE(s)}),pE=/\s+/,gE=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=t,i=[],o=s.trim().split(pE);let c="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:m,hasImportantModifier:x,baseClassName:f,maybePostfixModifierPosition:p}=r(u);let v=!!p,g=a(v?f.substring(0,p):f);if(!g){if(!v){c=u+(c.length>0?" "+c:c);continue}if(g=a(f),!g){c=u+(c.length>0?" "+c:c);continue}v=!1}const b=fE(m).join(":"),w=x?b+h0:b,y=w+g;if(i.includes(y))continue;i.push(y);const _=n(g,v);for(let N=0;N<_.length;++N){const C=_[N];i.push(w+C)}c=u+(c.length>0?" "+c:c)}return c};function vE(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=f0(t))&&(a&&(a+=" "),a+=r);return a}const f0=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=f0(s[a]))&&(r&&(r+=" "),r+=t);return r};function bE(s,...t){let r,a,n,i=o;function o(l){const u=t.reduce((m,x)=>x(m),s());return r=xE(u),a=r.cache.get,n=r.cache.set,i=c,c(l)}function c(l){const u=a(l);if(u)return u;const m=gE(l,r);return n(l,m),m}return function(){return i(vE.apply(null,arguments))}}const qs=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},x0=/^\[(?:([a-z-]+):)?(.+)\]$/i,yE=/^\d+\/\d+$/,jE=new Set(["px","full","screen"]),wE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_E=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oa=s=>ki(s)||jE.has(s)||yE.test(s),Ta=s=>Yi(s,"length",RE),ki=s=>!!s&&!Number.isNaN(Number(s)),nm=s=>Yi(s,"number",ki),Io=s=>!!s&&Number.isInteger(Number(s)),kE=s=>s.endsWith("%")&&ki(s.slice(0,-1)),os=s=>x0.test(s),Ia=s=>wE.test(s),EE=new Set(["length","size","percentage"]),PE=s=>Yi(s,EE,p0),TE=s=>Yi(s,"position",p0),IE=new Set(["image","url"]),AE=s=>Yi(s,IE,DE),ME=s=>Yi(s,"",OE),Ao=()=>!0,Yi=(s,t,r)=>{const a=x0.exec(s);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):r(a[2]):!1},RE=s=>NE.test(s)&&!_E.test(s),p0=()=>!1,OE=s=>SE.test(s),DE=s=>CE.test(s),FE=()=>{const s=qs("colors"),t=qs("spacing"),r=qs("blur"),a=qs("brightness"),n=qs("borderColor"),i=qs("borderRadius"),o=qs("borderSpacing"),c=qs("borderWidth"),l=qs("contrast"),u=qs("grayscale"),m=qs("hueRotate"),x=qs("invert"),f=qs("gap"),p=qs("gradientColorStops"),v=qs("gradientColorStopPositions"),g=qs("inset"),b=qs("margin"),w=qs("opacity"),y=qs("padding"),_=qs("saturate"),N=qs("scale"),C=qs("sepia"),R=qs("skew"),E=qs("space"),I=qs("translate"),M=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",os,t],z=()=>[os,t],X=()=>["",oa,Ta],T=()=>["auto",ki,os],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",os],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[ki,os];return{cacheSize:500,separator:":",theme:{colors:[Ao],spacing:[oa,Ta],blur:["none","",Ia,os],brightness:re(),borderColor:[s],borderRadius:["none","","full",Ia,os],borderSpacing:z(),borderWidth:X(),contrast:re(),grayscale:q(),hueRotate:re(),invert:q(),gap:z(),gradientColorStops:[s],gradientColorStopPositions:[kE,Ta],inset:D(),margin:D(),opacity:re(),padding:z(),saturate:re(),scale:re(),sepia:q(),skew:re(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",os]}],container:["container"],columns:[{columns:[Ia]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),os]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Io,os]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",os]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Io,os]}],"grid-cols":[{"grid-cols":[Ao]}],"col-start-end":[{col:["auto",{span:["full",Io,os]},os]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[Ao]}],"row-start-end":[{row:["auto",{span:[Io,os]},os]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",os]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",os]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",os,t]}],"min-w":[{"min-w":[os,t,"min","max","fit"]}],"max-w":[{"max-w":[os,t,"none","full","min","max","fit","prose",{screen:[Ia]},Ia]}],h:[{h:[os,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[os,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[os,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[os,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ia,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nm]}],"font-family":[{font:[Ao]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",os]}],"line-clamp":[{"line-clamp":["none",ki,nm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oa,os]}],"list-image":[{"list-image":["none",os]}],"list-style-type":[{list:["none","disc","decimal",os]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oa,Ta]}],"underline-offset":[{"underline-offset":["auto",oa,os]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",os]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",os]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),TE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",PE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},AE]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:O()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[oa,os]}],"outline-w":[{outline:[oa,Ta]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[oa,Ta]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",Ia,ME]}],"shadow-color":[{shadow:[Ao]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ia,os]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[x]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",os]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",os]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",os]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Io,os]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",os]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",os]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",os]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[oa,Ta,nm]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LE=bE(FE);function Oe(...s){return LE(a0(s))}const $E=$k,g0=d.forwardRef(({className:s,...t},r)=>e.jsx(Zy,{ref:r,className:Oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));g0.displayName=Zy.displayName;const BE=ml("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),v0=d.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Ky,{ref:a,className:Oe(BE({variant:t}),s),...r}));v0.displayName=Ky.displayName;const UE=d.forwardRef(({className:s,...t},r)=>e.jsx(s0,{ref:r,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));UE.displayName=s0.displayName;const b0=d.forwardRef(({className:s,...t},r)=>e.jsx(t0,{ref:r,className:Oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(wt,{className:"h-4 w-4"})}));b0.displayName=t0.displayName;const y0=d.forwardRef(({className:s,...t},r)=>e.jsx(Qy,{ref:r,className:Oe("text-sm font-semibold",s),...t}));y0.displayName=Qy.displayName;const j0=d.forwardRef(({className:s,...t},r)=>e.jsx(e0,{ref:r,className:Oe("text-sm opacity-90",s),...t}));j0.displayName=e0.displayName;function zE(){const{toasts:s}=et();return e.jsxs($E,{children:[s.map(function({id:t,title:r,description:a,action:n,...i}){return e.jsxs(v0,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(y0,{children:r}),a&&e.jsx(j0,{children:a})]}),n,e.jsx(b0,{})]},t)}),e.jsx(g0,{})]})}var _c={},lv;function qE(){if(lv)return _c;lv=1;var s=Ty();return _c.createRoot=s.createRoot,_c.hydrateRoot=s.hydrateRoot,_c}var VE=qE(),JE=s=>{switch(s){case"success":return GE;case"info":return YE;case"warning":return XE;case"error":return ZE;default:return null}},WE=Array(12).fill(0),HE=({visible:s})=>Re.createElement("div",{className:"sonner-loading-wrapper","data-visible":s},Re.createElement("div",{className:"sonner-spinner"},WE.map((t,r)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),GE=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),XE=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),YE=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZE=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KE=()=>{let[s,t]=Re.useState(document.hidden);return Re.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),s},nh=1,QE=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:r,...a}=s,n=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:nh++,i=this.toasts.find(c=>c.id===n),o=s.dismissible===void 0?!0:s.dismissible;return i?this.toasts=this.toasts.map(c=>c.id===n?(this.publish({...c,...s,id:n,title:r}),{...c,...s,id:n,dismissible:o,title:r}):c):this.addToast({title:r,...a,dismissible:o,id:n}),n},this.dismiss=s=>(s||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let a=s instanceof Promise?s:s(),n=r!==void 0;return a.then(async i=>{if(sP(i)&&!i.ok){n=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,c=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:r,type:"error",message:o,description:c})}else if(t.success!==void 0){n=!1;let o=typeof t.success=="function"?await t.success(i):t.success,c=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"success",message:o,description:c})}}).catch(async i=>{if(t.error!==void 0){n=!1;let o=typeof t.error=="function"?await t.error(i):t.error,c=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"error",message:o,description:c})}}).finally(()=>{var i;n&&(this.dismiss(r),r=void 0),(i=t.finally)==null||i.call(t)}),r},this.custom=(s,t)=>{let r=(t==null?void 0:t.id)||nh++;return this.create({jsx:s(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Xt=new QE,eP=(s,t)=>{let r=(t==null?void 0:t.id)||nh++;return Xt.addToast({title:s,...t,id:r}),r},sP=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",tP=eP,rP=()=>Xt.toasts;Object.assign(tP,{success:Xt.success,info:Xt.info,warning:Xt.warning,error:Xt.error,custom:Xt.custom,message:Xt.message,promise:Xt.promise,dismiss:Xt.dismiss,loading:Xt.loading},{getHistory:rP});function aP(s,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s))}aP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sc(s){return s.label!==void 0}var nP=3,iP="32px",oP=4e3,lP=356,cP=14,dP=20,uP=200;function mP(...s){return s.filter(Boolean).join(" ")}var hP=s=>{var t,r,a,n,i,o,c,l,u,m;let{invert:x,toast:f,unstyled:p,interacting:v,setHeights:g,visibleToasts:b,heights:w,index:y,toasts:_,expanded:N,removeToast:C,defaultRichColors:R,closeButton:E,style:I,cancelButtonStyle:M,actionButtonStyle:U,className:D="",descriptionClassName:z="",duration:X,position:T,gap:A,loadingIcon:O,expandByDefault:$,classNames:F,icons:q,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:re,cn:be}=s,[Me,je]=Re.useState(!1),[Y,we]=Re.useState(!1),[Q,pe]=Re.useState(!1),[J,H]=Re.useState(!1),[oe,de]=Re.useState(0),[Te,De]=Re.useState(0),Le=Re.useRef(null),$e=Re.useRef(null),Be=y===0,es=y+1<=b,ee=f.type,Fe=f.dismissible!==!1,Ke=f.className||"",Ue=f.descriptionClassName||"",ze=Re.useMemo(()=>w.findIndex(ke=>ke.toastId===f.id)||0,[w,f.id]),G=Re.useMemo(()=>{var ke;return(ke=f.closeButton)!=null?ke:E},[f.closeButton,E]),ue=Re.useMemo(()=>f.duration||X||oP,[f.duration,X]),xe=Re.useRef(0),Ie=Re.useRef(0),Ye=Re.useRef(0),We=Re.useRef(null),[Ls,ys]=T.split("-"),Hs=Re.useMemo(()=>w.reduce((ke,Je,He)=>He>=ze?ke:ke+Je.height,0),[w,ze]),Gs=KE(),ne=f.invert||x,le=ee==="loading";Ie.current=Re.useMemo(()=>ze*A+Hs,[ze,Hs]),Re.useEffect(()=>{je(!0)},[]),Re.useLayoutEffect(()=>{if(!Me)return;let ke=$e.current,Je=ke.style.height;ke.style.height="auto";let He=ke.getBoundingClientRect().height;ke.style.height=Je,De(He),g(rs=>rs.find(Is=>Is.toastId===f.id)?rs.map(Is=>Is.toastId===f.id?{...Is,height:He}:Is):[{toastId:f.id,height:He,position:f.position},...rs])},[Me,f.title,f.description,g,f.id]);let fe=Re.useCallback(()=>{we(!0),de(Ie.current),g(ke=>ke.filter(Je=>Je.toastId!==f.id)),setTimeout(()=>{C(f)},uP)},[f,C,g,Ie]);Re.useEffect(()=>{if(f.promise&&ee==="loading"||f.duration===1/0||f.type==="loading")return;let ke,Je=ue;return N||v||re&&Gs?(()=>{if(Ye.current<xe.current){let He=new Date().getTime()-xe.current;Je=Je-He}Ye.current=new Date().getTime()})():Je!==1/0&&(xe.current=new Date().getTime(),ke=setTimeout(()=>{var He;(He=f.onAutoClose)==null||He.call(f,f),fe()},Je)),()=>clearTimeout(ke)},[N,v,$,f,ue,fe,f.promise,ee,re,Gs]),Re.useEffect(()=>{let ke=$e.current;if(ke){let Je=ke.getBoundingClientRect().height;return De(Je),g(He=>[{toastId:f.id,height:Je,position:f.position},...He]),()=>g(He=>He.filter(rs=>rs.toastId!==f.id))}},[g,f.id]),Re.useEffect(()=>{f.delete&&fe()},[fe,f.delete]);function Cs(){return q!=null&&q.loading?Re.createElement("div",{className:"sonner-loader","data-visible":ee==="loading"},q.loading):O?Re.createElement("div",{className:"sonner-loader","data-visible":ee==="loading"},O):Re.createElement(HE,{visible:ee==="loading"})}return Re.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:$e,className:be(D,Ke,F==null?void 0:F.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[ee],(r=f==null?void 0:f.classNames)==null?void 0:r[ee]),"data-sonner-toast":"","data-rich-colors":(a=f.richColors)!=null?a:R,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":Me,"data-promise":!!f.promise,"data-removed":Y,"data-visible":es,"data-y-position":Ls,"data-x-position":ys,"data-index":y,"data-front":Be,"data-swiping":Q,"data-dismissible":Fe,"data-type":ee,"data-invert":ne,"data-swipe-out":J,"data-expanded":!!(N||$&&Me),style:{"--index":y,"--toasts-before":y,"--z-index":_.length-y,"--offset":`${Y?oe:Ie.current}px`,"--initial-height":$?"auto":`${Te}px`,...I,...f.style},onPointerDown:ke=>{le||!Fe||(Le.current=new Date,de(Ie.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(pe(!0),We.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,Je,He,rs;if(J||!Fe)return;We.current=null;let Is=Number(((ke=$e.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount").replace("px",""))||0),gt=new Date().getTime()-((Je=Le.current)==null?void 0:Je.getTime()),Rt=Math.abs(Is)/gt;if(Math.abs(Is)>=dP||Rt>.11){de(Ie.current),(He=f.onDismiss)==null||He.call(f,f),fe(),H(!0);return}(rs=$e.current)==null||rs.style.setProperty("--swipe-amount","0px"),pe(!1)},onPointerMove:ke=>{var Je;if(!We.current||!Fe)return;let He=ke.clientY-We.current.y,rs=ke.clientX-We.current.x,Is=(Ls==="top"?Math.min:Math.max)(0,He),gt=ke.pointerType==="touch"?10:2;Math.abs(Is)>gt?(Je=$e.current)==null||Je.style.setProperty("--swipe-amount",`${He}px`):Math.abs(rs)>gt&&(We.current=null)}},G&&!f.jsx?Re.createElement("button",{"aria-label":te,"data-disabled":le,"data-close-button":!0,onClick:le||!Fe?()=>{}:()=>{var ke;fe(),(ke=f.onDismiss)==null||ke.call(f,f)},className:be(F==null?void 0:F.closeButton,(n=f==null?void 0:f.classNames)==null?void 0:n.closeButton)},Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||Re.isValidElement(f.title)?f.jsx||f.title:Re.createElement(Re.Fragment,null,ee||f.icon||f.promise?Re.createElement("div",{"data-icon":"",className:be(F==null?void 0:F.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Cs():null,f.type!=="loading"?f.icon||(q==null?void 0:q[ee])||JE(ee):null):null,Re.createElement("div",{"data-content":"",className:be(F==null?void 0:F.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},Re.createElement("div",{"data-title":"",className:be(F==null?void 0:F.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},f.title),f.description?Re.createElement("div",{"data-description":"",className:be(z,Ue,F==null?void 0:F.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),Re.isValidElement(f.cancel)?f.cancel:f.cancel&&Sc(f.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||M,onClick:ke=>{var Je,He;Sc(f.cancel)&&Fe&&((He=(Je=f.cancel).onClick)==null||He.call(Je,ke),fe())},className:be(F==null?void 0:F.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,Re.isValidElement(f.action)?f.action:f.action&&Sc(f.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||U,onClick:ke=>{var Je,He;Sc(f.action)&&(ke.defaultPrevented||((He=(Je=f.action).onClick)==null||He.call(Je,ke),fe()))},className:be(F==null?void 0:F.actionButton,(m=f==null?void 0:f.classNames)==null?void 0:m.actionButton)},f.action.label):null))};function cv(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}var fP=s=>{let{invert:t,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:n,closeButton:i,className:o,offset:c,theme:l="light",richColors:u,duration:m,style:x,visibleToasts:f=nP,toastOptions:p,dir:v=cv(),gap:g=cP,loadingIcon:b,icons:w,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:_,cn:N=mP}=s,[C,R]=Re.useState([]),E=Re.useMemo(()=>Array.from(new Set([r].concat(C.filter(re=>re.position).map(re=>re.position)))),[C,r]),[I,M]=Re.useState([]),[U,D]=Re.useState(!1),[z,X]=Re.useState(!1),[T,A]=Re.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Re.useRef(null),$=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Re.useRef(null),q=Re.useRef(!1),te=Re.useCallback(re=>{var be;(be=C.find(Me=>Me.id===re.id))!=null&&be.delete||Xt.dismiss(re.id),R(Me=>Me.filter(({id:je})=>je!==re.id))},[C]);return Re.useEffect(()=>Xt.subscribe(re=>{if(re.dismiss){R(be=>be.map(Me=>Me.id===re.id?{...Me,delete:!0}:Me));return}setTimeout(()=>{Dn.flushSync(()=>{R(be=>{let Me=be.findIndex(je=>je.id===re.id);return Me!==-1?[...be.slice(0,Me),{...be[Me],...re},...be.slice(Me+1)]:[re,...be]})})})}),[]),Re.useEffect(()=>{if(l!=="system"){A(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:re})=>{A(re?"dark":"light")})},[l]),Re.useEffect(()=>{C.length<=1&&D(!1)},[C]),Re.useEffect(()=>{let re=be=>{var Me,je;a.every(Y=>be[Y]||be.code===Y)&&(D(!0),(Me=O.current)==null||Me.focus()),be.code==="Escape"&&(document.activeElement===O.current||(je=O.current)!=null&&je.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[a]),Re.useEffect(()=>{if(O.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,q.current=!1)}},[O.current]),C.length?Re.createElement("section",{"aria-label":`${y} ${$}`,tabIndex:-1},E.map((re,be)=>{var Me;let[je,Y]=re.split("-");return Re.createElement("ol",{key:re,dir:v==="auto"?cv():v,tabIndex:-1,ref:O,className:o,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":je,"data-x-position":Y,style:{"--front-toast-height":`${((Me=I[0])==null?void 0:Me.height)||0}px`,"--offset":typeof c=="number"?`${c}px`:c||iP,"--width":`${lP}px`,"--gap":`${g}px`,...x},onBlur:we=>{q.current&&!we.currentTarget.contains(we.relatedTarget)&&(q.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||q.current||(q.current=!0,F.current=we.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{z||D(!1)},onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||X(!0)},onPointerUp:()=>X(!1)},C.filter(we=>!we.position&&be===0||we.position===re).map((we,Q)=>{var pe,J;return Re.createElement(hP,{key:we.id,icons:w,index:Q,toast:we,defaultRichColors:u,duration:(pe=p==null?void 0:p.duration)!=null?pe:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:f,closeButton:(J=p==null?void 0:p.closeButton)!=null?J:i,interacting:z,position:re,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:te,toasts:C.filter(H=>H.position==we.position),heights:I.filter(H=>H.position==we.position),setHeights:M,expandByDefault:n,gap:g,loadingIcon:b,expanded:U,pauseWhenPageIsHidden:_,cn:N})}))})):null};const xP=({...s})=>e.jsx(fP,{theme:"light",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s});function pP(s,t=[]){let r=[];function a(i,o){const c=d.createContext(o),l=r.length;r=[...r,o];const u=x=>{var w;const{scope:f,children:p,...v}=x,g=((w=f==null?void 0:f[s])==null?void 0:w[l])||c,b=d.useMemo(()=>v,Object.values(v));return e.jsx(g.Provider,{value:b,children:p})};u.displayName=i+"Provider";function m(x,f){var g;const p=((g=f==null?void 0:f[s])==null?void 0:g[l])||c,v=d.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[u,m]}const n=()=>{const i=r.map(o=>d.createContext(o));return function(c){const l=(c==null?void 0:c[s])||i;return d.useMemo(()=>({[`__scope${s}`]:{...c,[s]:l}}),[c,l])}};return n.scopeName=s,[a,gP(n,...t)]}function gP(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const a=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const o=a.reduce((c,{useScope:l,scopeName:u})=>{const x=l(i)[`__scope${u}`];return{...c,...x}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var vP="DismissableLayer",ih="dismissableLayer.update",bP="dismissableLayer.pointerDownOutside",yP="dismissableLayer.focusOutside",dv,w0=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lf=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(w0),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=NP(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=_P(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(dv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),uv(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=dv)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),uv())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener(ih,E),()=>document.removeEventListener(ih,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});lf.displayName=vP;var jP="DismissableLayerBranch",wP=d.forwardRef((s,t)=>{const r=d.useContext(w0),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});wP.displayName=jP;function NP(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){N0(bP,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function _P(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&N0(yP,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function uv(){const s=new CustomEvent(ih);document.dispatchEvent(s)}function N0(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var SP=Iy.useId||(()=>{}),CP=0;function Ut(s){const[t,r]=d.useState(SP());return Fs(()=>{r(a=>a??String(CP++))},[s]),t?`radix-${t}`:""}const kP=["top","right","bottom","left"],Za=Math.min,Yt=Math.max,cd=Math.round,Cc=Math.floor,Ka=s=>({x:s,y:s}),EP={left:"right",right:"left",bottom:"top",top:"bottom"},PP={start:"end",end:"start"};function oh(s,t,r){return Yt(s,Za(t,r))}function ga(s,t){return typeof s=="function"?s(t):s}function va(s){return s.split("-")[0]}function Zi(s){return s.split("-")[1]}function cf(s){return s==="x"?"y":"x"}function df(s){return s==="y"?"height":"width"}function Qa(s){return["top","bottom"].includes(va(s))?"y":"x"}function uf(s){return cf(Qa(s))}function TP(s,t,r){r===void 0&&(r=!1);const a=Zi(s),n=uf(s),i=df(n);let o=n==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=dd(o)),[o,dd(o)]}function IP(s){const t=dd(s);return[lh(s),t,lh(t)]}function lh(s){return s.replace(/start|end/g,t=>PP[t])}function AP(s,t,r){const a=["left","right"],n=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(s){case"top":case"bottom":return r?t?n:a:t?a:n;case"left":case"right":return t?i:o;default:return[]}}function MP(s,t,r,a){const n=Zi(s);let i=AP(va(s),r==="start",a);return n&&(i=i.map(o=>o+"-"+n),t&&(i=i.concat(i.map(lh)))),i}function dd(s){return s.replace(/left|right|bottom|top/g,t=>EP[t])}function RP(s){return{top:0,right:0,bottom:0,left:0,...s}}function _0(s){return typeof s!="number"?RP(s):{top:s,right:s,bottom:s,left:s}}function ud(s){const{x:t,y:r,width:a,height:n}=s;return{width:a,height:n,top:r,left:t,right:t+a,bottom:r+n,x:t,y:r}}function mv(s,t,r){let{reference:a,floating:n}=s;const i=Qa(t),o=uf(t),c=df(o),l=va(t),u=i==="y",m=a.x+a.width/2-n.width/2,x=a.y+a.height/2-n.height/2,f=a[c]/2-n[c]/2;let p;switch(l){case"top":p={x:m,y:a.y-n.height};break;case"bottom":p={x:m,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:x};break;case"left":p={x:a.x-n.width,y:x};break;default:p={x:a.x,y:a.y}}switch(Zi(t)){case"start":p[o]-=f*(r&&u?-1:1);break;case"end":p[o]+=f*(r&&u?-1:1);break}return p}const OP=async(s,t,r)=>{const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:o}=r,c=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:s,floating:t,strategy:n}),{x:m,y:x}=mv(u,a,l),f=a,p={},v=0;for(let g=0;g<c.length;g++){const{name:b,fn:w}=c[g],{x:y,y:_,data:N,reset:C}=await w({x:m,y:x,initialPlacement:a,placement:f,strategy:n,middlewareData:p,rects:u,platform:o,elements:{reference:s,floating:t}});m=y??m,x=_??x,p={...p,[b]:{...p[b],...N}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:s,floating:t,strategy:n}):C.rects),{x:m,y:x}=mv(u,f,l)),g=-1)}return{x:m,y:x,placement:f,strategy:n,middlewareData:p}};async function Ko(s,t){var r;t===void 0&&(t={});const{x:a,y:n,platform:i,rects:o,elements:c,strategy:l}=s,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:x="floating",altBoundary:f=!1,padding:p=0}=ga(t,s),v=_0(p),b=c[f?x==="floating"?"reference":"floating":x],w=ud(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:l})),y=x==="floating"?{x:a,y:n,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),N=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},C=ud(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:_,strategy:l}):y);return{top:(w.top-C.top+v.top)/N.y,bottom:(C.bottom-w.bottom+v.bottom)/N.y,left:(w.left-C.left+v.left)/N.x,right:(C.right-w.right+v.right)/N.x}}const DP=s=>({name:"arrow",options:s,async fn(t){const{x:r,y:a,placement:n,rects:i,platform:o,elements:c,middlewareData:l}=t,{element:u,padding:m=0}=ga(s,t)||{};if(u==null)return{};const x=_0(m),f={x:r,y:a},p=uf(n),v=df(p),g=await o.getDimensions(u),b=p==="y",w=b?"top":"left",y=b?"bottom":"right",_=b?"clientHeight":"clientWidth",N=i.reference[v]+i.reference[p]-f[p]-i.floating[v],C=f[p]-i.reference[p],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=R?R[_]:0;(!E||!await(o.isElement==null?void 0:o.isElement(R)))&&(E=c.floating[_]||i.floating[v]);const I=N/2-C/2,M=E/2-g[v]/2-1,U=Za(x[w],M),D=Za(x[y],M),z=U,X=E-g[v]-D,T=E/2-g[v]/2+I,A=oh(z,T,X),O=!l.arrow&&Zi(n)!=null&&T!==A&&i.reference[v]/2-(T<z?U:D)-g[v]/2<0,$=O?T<z?T-z:T-X:0;return{[p]:f[p]+$,data:{[p]:A,centerOffset:T-A-$,...O&&{alignmentOffset:$}},reset:O}}}),FP=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var r,a;const{placement:n,middlewareData:i,rects:o,initialPlacement:c,platform:l,elements:u}=t,{mainAxis:m=!0,crossAxis:x=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=ga(s,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const w=va(n),y=Qa(c),_=va(c)===c,N=await(l.isRTL==null?void 0:l.isRTL(u.floating)),C=f||(_||!g?[dd(c)]:IP(c)),R=v!=="none";!f&&R&&C.push(...MP(c,g,v,N));const E=[c,...C],I=await Ko(t,b),M=[];let U=((a=i.flip)==null?void 0:a.overflows)||[];if(m&&M.push(I[w]),x){const T=TP(n,o,N);M.push(I[T[0]],I[T[1]])}if(U=[...U,{placement:n,overflows:M}],!M.every(T=>T<=0)){var D,z;const T=(((D=i.flip)==null?void 0:D.index)||0)+1,A=E[T];if(A)return{data:{index:T,overflows:U},reset:{placement:A}};let O=(z=U.filter($=>$.overflows[0]<=0).sort(($,F)=>$.overflows[1]-F.overflows[1])[0])==null?void 0:z.placement;if(!O)switch(p){case"bestFit":{var X;const $=(X=U.filter(F=>{if(R){const q=Qa(F.placement);return q===y||q==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(q=>q>0).reduce((q,te)=>q+te,0)]).sort((F,q)=>F[1]-q[1])[0])==null?void 0:X[0];$&&(O=$);break}case"initialPlacement":O=c;break}if(n!==O)return{reset:{placement:O}}}return{}}}};function hv(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function fv(s){return kP.some(t=>s[t]>=0)}const LP=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...n}=ga(s,t);switch(a){case"referenceHidden":{const i=await Ko(t,{...n,elementContext:"reference"}),o=hv(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fv(o)}}}case"escaped":{const i=await Ko(t,{...n,altBoundary:!0}),o=hv(i,r.floating);return{data:{escapedOffsets:o,escaped:fv(o)}}}default:return{}}}}};async function $P(s,t){const{placement:r,platform:a,elements:n}=s,i=await(a.isRTL==null?void 0:a.isRTL(n.floating)),o=va(r),c=Zi(r),l=Qa(r)==="y",u=["left","top"].includes(o)?-1:1,m=i&&l?-1:1,x=ga(t,s);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return c&&typeof v=="number"&&(p=c==="end"?v*-1:v),l?{x:p*m,y:f*u}:{x:f*u,y:p*m}}const BP=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var r,a;const{x:n,y:i,placement:o,middlewareData:c}=t,l=await $P(t,s);return o===((r=c.offset)==null?void 0:r.placement)&&(a=c.arrow)!=null&&a.alignmentOffset?{}:{x:n+l.x,y:i+l.y,data:{...l,placement:o}}}}},UP=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:r,y:a,placement:n}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:b=>{let{x:w,y}=b;return{x:w,y}}},...l}=ga(s,t),u={x:r,y:a},m=await Ko(t,l),x=Qa(va(n)),f=cf(x);let p=u[f],v=u[x];if(i){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=p+m[b],_=p-m[w];p=oh(y,p,_)}if(o){const b=x==="y"?"top":"left",w=x==="y"?"bottom":"right",y=v+m[b],_=v-m[w];v=oh(y,v,_)}const g=c.fn({...t,[f]:p,[x]:v});return{...g,data:{x:g.x-r,y:g.y-a,enabled:{[f]:i,[x]:o}}}}}},zP=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:r,y:a,placement:n,rects:i,middlewareData:o}=t,{offset:c=0,mainAxis:l=!0,crossAxis:u=!0}=ga(s,t),m={x:r,y:a},x=Qa(n),f=cf(x);let p=m[f],v=m[x];const g=ga(c,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=f==="y"?"height":"width",N=i.reference[f]-i.floating[_]+b.mainAxis,C=i.reference[f]+i.reference[_]-b.mainAxis;p<N?p=N:p>C&&(p=C)}if(u){var w,y;const _=f==="y"?"width":"height",N=["top","left"].includes(va(n)),C=i.reference[x]-i.floating[_]+(N&&((w=o.offset)==null?void 0:w[x])||0)+(N?0:b.crossAxis),R=i.reference[x]+i.reference[_]+(N?0:((y=o.offset)==null?void 0:y[x])||0)-(N?b.crossAxis:0);v<C?v=C:v>R&&(v=R)}return{[f]:p,[x]:v}}}},qP=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var r,a;const{placement:n,rects:i,platform:o,elements:c}=t,{apply:l=()=>{},...u}=ga(s,t),m=await Ko(t,u),x=va(n),f=Zi(n),p=Qa(n)==="y",{width:v,height:g}=i.floating;let b,w;x==="top"||x==="bottom"?(b=x,w=f===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=x,b=f==="end"?"top":"bottom");const y=g-m.top-m.bottom,_=v-m.left-m.right,N=Za(g-m[b],y),C=Za(v-m[w],_),R=!t.middlewareData.shift;let E=N,I=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(I=_),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(E=y),R&&!f){const U=Yt(m.left,0),D=Yt(m.right,0),z=Yt(m.top,0),X=Yt(m.bottom,0);p?I=v-2*(U!==0||D!==0?U+D:Yt(m.left,m.right)):E=g-2*(z!==0||X!==0?z+X:Yt(m.top,m.bottom))}await l({...t,availableWidth:I,availableHeight:E});const M=await o.getDimensions(c.floating);return v!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function Id(){return typeof window<"u"}function Ki(s){return S0(s)?(s.nodeName||"").toLowerCase():"#document"}function Qt(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function ea(s){var t;return(t=(S0(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function S0(s){return Id()?s instanceof Node||s instanceof Qt(s).Node:!1}function kr(s){return Id()?s instanceof Element||s instanceof Qt(s).Element:!1}function Kr(s){return Id()?s instanceof HTMLElement||s instanceof Qt(s).HTMLElement:!1}function xv(s){return!Id()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Qt(s).ShadowRoot}function fl(s){const{overflow:t,overflowX:r,overflowY:a,display:n}=Er(s);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(n)}function VP(s){return["table","td","th"].includes(Ki(s))}function Ad(s){return[":popover-open",":modal"].some(t=>{try{return s.matches(t)}catch{return!1}})}function mf(s){const t=hf(),r=kr(s)?Er(s):s;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(a=>(r.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(r.contain||"").includes(a))}function JP(s){let t=en(s);for(;Kr(t)&&!Ui(t);){if(mf(t))return t;if(Ad(t))return null;t=en(t)}return null}function hf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ui(s){return["html","body","#document"].includes(Ki(s))}function Er(s){return Qt(s).getComputedStyle(s)}function Md(s){return kr(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function en(s){if(Ki(s)==="html")return s;const t=s.assignedSlot||s.parentNode||xv(s)&&s.host||ea(s);return xv(t)?t.host:t}function C0(s){const t=en(s);return Ui(t)?s.ownerDocument?s.ownerDocument.body:s.body:Kr(t)&&fl(t)?t:C0(t)}function Qo(s,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const n=C0(s),i=n===((a=s.ownerDocument)==null?void 0:a.body),o=Qt(n);if(i){const c=ch(o);return t.concat(o,o.visualViewport||[],fl(n)?n:[],c&&r?Qo(c):[])}return t.concat(n,Qo(n,[],r))}function ch(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function k0(s){const t=Er(s);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const n=Kr(s),i=n?s.offsetWidth:r,o=n?s.offsetHeight:a,c=cd(r)!==i||cd(a)!==o;return c&&(r=i,a=o),{width:r,height:a,$:c}}function ff(s){return kr(s)?s:s.contextElement}function Ei(s){const t=ff(s);if(!Kr(t))return Ka(1);const r=t.getBoundingClientRect(),{width:a,height:n,$:i}=k0(t);let o=(i?cd(r.width):r.width)/a,c=(i?cd(r.height):r.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const WP=Ka(0);function E0(s){const t=Qt(s);return!hf()||!t.visualViewport?WP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function HP(s,t,r){return t===void 0&&(t=!1),!r||t&&r!==Qt(s)?!1:t}function Tn(s,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=s.getBoundingClientRect(),i=ff(s);let o=Ka(1);t&&(a?kr(a)&&(o=Ei(a)):o=Ei(s));const c=HP(i,r,a)?E0(i):Ka(0);let l=(n.left+c.x)/o.x,u=(n.top+c.y)/o.y,m=n.width/o.x,x=n.height/o.y;if(i){const f=Qt(i),p=a&&kr(a)?Qt(a):a;let v=f,g=ch(v);for(;g&&a&&p!==v;){const b=Ei(g),w=g.getBoundingClientRect(),y=Er(g),_=w.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,N=w.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,u*=b.y,m*=b.x,x*=b.y,l+=_,u+=N,v=Qt(g),g=ch(v)}}return ud({width:m,height:x,x:l,y:u})}function GP(s){let{elements:t,rect:r,offsetParent:a,strategy:n}=s;const i=n==="fixed",o=ea(a),c=t?Ad(t.floating):!1;if(a===o||c&&i)return r;let l={scrollLeft:0,scrollTop:0},u=Ka(1);const m=Ka(0),x=Kr(a);if((x||!x&&!i)&&((Ki(a)!=="body"||fl(o))&&(l=Md(a)),Kr(a))){const f=Tn(a);u=Ei(a),m.x=f.x+a.clientLeft,m.y=f.y+a.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+m.x,y:r.y*u.y-l.scrollTop*u.y+m.y}}function XP(s){return Array.from(s.getClientRects())}function dh(s,t){const r=Md(s).scrollLeft;return t?t.left+r:Tn(ea(s)).left+r}function YP(s){const t=ea(s),r=Md(s),a=s.ownerDocument.body,n=Yt(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=Yt(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+dh(s);const c=-r.scrollTop;return Er(a).direction==="rtl"&&(o+=Yt(t.clientWidth,a.clientWidth)-n),{width:n,height:i,x:o,y:c}}function ZP(s,t){const r=Qt(s),a=ea(s),n=r.visualViewport;let i=a.clientWidth,o=a.clientHeight,c=0,l=0;if(n){i=n.width,o=n.height;const u=hf();(!u||u&&t==="fixed")&&(c=n.offsetLeft,l=n.offsetTop)}return{width:i,height:o,x:c,y:l}}function KP(s,t){const r=Tn(s,!0,t==="fixed"),a=r.top+s.clientTop,n=r.left+s.clientLeft,i=Kr(s)?Ei(s):Ka(1),o=s.clientWidth*i.x,c=s.clientHeight*i.y,l=n*i.x,u=a*i.y;return{width:o,height:c,x:l,y:u}}function pv(s,t,r){let a;if(t==="viewport")a=ZP(s,r);else if(t==="document")a=YP(ea(s));else if(kr(t))a=KP(t,r);else{const n=E0(s);a={...t,x:t.x-n.x,y:t.y-n.y}}return ud(a)}function P0(s,t){const r=en(s);return r===t||!kr(r)||Ui(r)?!1:Er(r).position==="fixed"||P0(r,t)}function QP(s,t){const r=t.get(s);if(r)return r;let a=Qo(s,[],!1).filter(c=>kr(c)&&Ki(c)!=="body"),n=null;const i=Er(s).position==="fixed";let o=i?en(s):s;for(;kr(o)&&!Ui(o);){const c=Er(o),l=mf(o);!l&&c.position==="fixed"&&(n=null),(i?!l&&!n:!l&&c.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||fl(o)&&!l&&P0(s,o))?a=a.filter(m=>m!==o):n=c,o=en(o)}return t.set(s,a),a}function eT(s){let{element:t,boundary:r,rootBoundary:a,strategy:n}=s;const o=[...r==="clippingAncestors"?Ad(t)?[]:QP(t,this._c):[].concat(r),a],c=o[0],l=o.reduce((u,m)=>{const x=pv(t,m,n);return u.top=Yt(x.top,u.top),u.right=Za(x.right,u.right),u.bottom=Za(x.bottom,u.bottom),u.left=Yt(x.left,u.left),u},pv(t,c,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function sT(s){const{width:t,height:r}=k0(s);return{width:t,height:r}}function tT(s,t,r){const a=Kr(t),n=ea(t),i=r==="fixed",o=Tn(s,!0,i,t);let c={scrollLeft:0,scrollTop:0};const l=Ka(0);if(a||!a&&!i)if((Ki(t)!=="body"||fl(n))&&(c=Md(t)),a){const p=Tn(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else n&&(l.x=dh(n));let u=0,m=0;if(n&&!a&&!i){const p=n.getBoundingClientRect();m=p.top+c.scrollTop,u=p.left+c.scrollLeft-dh(n,p)}const x=o.left+c.scrollLeft-l.x-u,f=o.top+c.scrollTop-l.y-m;return{x,y:f,width:o.width,height:o.height}}function im(s){return Er(s).position==="static"}function gv(s,t){if(!Kr(s)||Er(s).position==="fixed")return null;if(t)return t(s);let r=s.offsetParent;return ea(s)===r&&(r=r.ownerDocument.body),r}function T0(s,t){const r=Qt(s);if(Ad(s))return r;if(!Kr(s)){let n=en(s);for(;n&&!Ui(n);){if(kr(n)&&!im(n))return n;n=en(n)}return r}let a=gv(s,t);for(;a&&VP(a)&&im(a);)a=gv(a,t);return a&&Ui(a)&&im(a)&&!mf(a)?r:a||JP(s)||r}const rT=async function(s){const t=this.getOffsetParent||T0,r=this.getDimensions,a=await r(s.floating);return{reference:tT(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function aT(s){return Er(s).direction==="rtl"}const nT={convertOffsetParentRelativeRectToViewportRelativeRect:GP,getDocumentElement:ea,getClippingRect:eT,getOffsetParent:T0,getElementRects:rT,getClientRects:XP,getDimensions:sT,getScale:Ei,isElement:kr,isRTL:aT};function iT(s,t){let r=null,a;const n=ea(s);function i(){var c;clearTimeout(a),(c=r)==null||c.disconnect(),r=null}function o(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),i();const{left:u,top:m,width:x,height:f}=s.getBoundingClientRect();if(c||t(),!x||!f)return;const p=Cc(m),v=Cc(n.clientWidth-(u+x)),g=Cc(n.clientHeight-(m+f)),b=Cc(u),y={rootMargin:-p+"px "+-v+"px "+-g+"px "+-b+"px",threshold:Yt(0,Za(1,l))||1};let _=!0;function N(C){const R=C[0].intersectionRatio;if(R!==l){if(!_)return o();R?o(!1,R):a=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{r=new IntersectionObserver(N,{...y,root:n.ownerDocument})}catch{r=new IntersectionObserver(N,y)}r.observe(s)}return o(!0),i}function oT(s,t,r,a){a===void 0&&(a={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=a,u=ff(s),m=n||i?[...u?Qo(u):[],...Qo(t)]:[];m.forEach(w=>{n&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});const x=u&&c?iT(u,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[y]=w;y&&y.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let v,g=l?Tn(s):null;l&&b();function b(){const w=Tn(s);g&&(w.x!==g.x||w.y!==g.y||w.width!==g.width||w.height!==g.height)&&r(),g=w,v=requestAnimationFrame(b)}return r(),()=>{var w;m.forEach(y=>{n&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),x==null||x(),(w=p)==null||w.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const lT=BP,cT=UP,dT=FP,uT=qP,mT=LP,vv=DP,hT=zP,fT=(s,t,r)=>{const a=new Map,n={platform:nT,...r},i={...n.platform,_c:a};return OP(s,t,{...n,platform:i})};var ed=typeof document<"u"?d.useLayoutEffect:d.useEffect;function md(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let r,a,n;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(r=s.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!md(s[a],t[a]))return!1;return!0}if(n=Object.keys(s),r=n.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,n[a]))return!1;for(a=r;a--!==0;){const i=n[a];if(!(i==="_owner"&&s.$$typeof)&&!md(s[i],t[i]))return!1}return!0}return s!==s&&t!==t}function I0(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function bv(s,t){const r=I0(s);return Math.round(t*r)/r}function om(s){const t=d.useRef(s);return ed(()=>{t.current=s}),t}function xT(s){s===void 0&&(s={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:n,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:l,open:u}=s,[m,x]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=d.useState(a);md(f,a)||p(a);const[v,g]=d.useState(null),[b,w]=d.useState(null),y=d.useCallback(F=>{F!==R.current&&(R.current=F,g(F))},[]),_=d.useCallback(F=>{F!==E.current&&(E.current=F,w(F))},[]),N=i||v,C=o||b,R=d.useRef(null),E=d.useRef(null),I=d.useRef(m),M=l!=null,U=om(l),D=om(n),z=om(u),X=d.useCallback(()=>{if(!R.current||!E.current)return;const F={placement:t,strategy:r,middleware:f};D.current&&(F.platform=D.current),fT(R.current,E.current,F).then(q=>{const te={...q,isPositioned:z.current!==!1};T.current&&!md(I.current,te)&&(I.current=te,On.flushSync(()=>{x(te)}))})},[f,t,r,D,z]);ed(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,x(F=>({...F,isPositioned:!1})))},[u]);const T=d.useRef(!1);ed(()=>(T.current=!0,()=>{T.current=!1}),[]),ed(()=>{if(N&&(R.current=N),C&&(E.current=C),N&&C){if(U.current)return U.current(N,C,X);X()}},[N,C,X,U,M]);const A=d.useMemo(()=>({reference:R,floating:E,setReference:y,setFloating:_}),[y,_]),O=d.useMemo(()=>({reference:N,floating:C}),[N,C]),$=d.useMemo(()=>{const F={position:r,left:0,top:0};if(!O.floating)return F;const q=bv(O.floating,m.x),te=bv(O.floating,m.y);return c?{...F,transform:"translate("+q+"px, "+te+"px)",...I0(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:te}},[r,c,O.floating,m.x,m.y]);return d.useMemo(()=>({...m,update:X,refs:A,elements:O,floatingStyles:$}),[m,X,A,O,$])}const pT=s=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:s,fn(r){const{element:a,padding:n}=typeof s=="function"?s(r):s;return a&&t(a)?a.current!=null?vv({element:a.current,padding:n}).fn(r):{}:a?vv({element:a,padding:n}).fn(r):{}}}},gT=(s,t)=>({...lT(s),options:[s,t]}),vT=(s,t)=>({...cT(s),options:[s,t]}),bT=(s,t)=>({...hT(s),options:[s,t]}),yT=(s,t)=>({...dT(s),options:[s,t]}),jT=(s,t)=>({...uT(s),options:[s,t]}),wT=(s,t)=>({...mT(s),options:[s,t]}),NT=(s,t)=>({...pT(s),options:[s,t]});var _T="Arrow",A0=d.forwardRef((s,t)=>{const{children:r,width:a=10,height:n=5,...i}=s;return e.jsx(Ae.svg,{...i,ref:t,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});A0.displayName=_T;var ST=A0;function Rd(s){const[t,r]=d.useState(void 0);return Fs(()=>{if(s){r({width:s.offsetWidth,height:s.offsetHeight});const a=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let o,c;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,c=u.blockSize}else o=s.offsetWidth,c=s.offsetHeight;r({width:o,height:c})});return a.observe(s,{box:"border-box"}),()=>a.unobserve(s)}else r(void 0)},[s]),t}var xf="Popper",[M0,tn]=ft(xf),[CT,R0]=M0(xf),O0=s=>{const{__scopePopper:t,children:r}=s,[a,n]=d.useState(null);return e.jsx(CT,{scope:t,anchor:a,onAnchorChange:n,children:r})};O0.displayName=xf;var D0="PopperAnchor",F0=d.forwardRef((s,t)=>{const{__scopePopper:r,virtualRef:a,...n}=s,i=R0(D0,r),o=d.useRef(null),c=qe(t,o);return d.useEffect(()=>{i.onAnchorChange((a==null?void 0:a.current)||o.current)}),a?null:e.jsx(Ae.div,{...n,ref:c})});F0.displayName=D0;var pf="PopperContent",[kT,ET]=M0(pf),L0=d.forwardRef((s,t)=>{var Q,pe,J,H,oe,de;const{__scopePopper:r,side:a="bottom",sideOffset:n=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:x="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=s,b=R0(pf,r),[w,y]=d.useState(null),_=qe(t,Te=>y(Te)),[N,C]=d.useState(null),R=Rd(N),E=(R==null?void 0:R.width)??0,I=(R==null?void 0:R.height)??0,M=a+(i!=="center"?"-"+i:""),U=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},D=Array.isArray(u)?u:[u],z=D.length>0,X={padding:U,boundary:D.filter(TT),altBoundary:z},{refs:T,floatingStyles:A,placement:O,isPositioned:$,middlewareData:F}=xT({strategy:"fixed",placement:M,whileElementsMounted:(...Te)=>oT(...Te,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[gT({mainAxis:n+I,alignmentAxis:o}),l&&vT({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?bT():void 0,...X}),l&&yT({...X}),jT({...X,apply:({elements:Te,rects:De,availableWidth:Le,availableHeight:$e})=>{const{width:Be,height:es}=De.reference,ee=Te.floating.style;ee.setProperty("--radix-popper-available-width",`${Le}px`),ee.setProperty("--radix-popper-available-height",`${$e}px`),ee.setProperty("--radix-popper-anchor-width",`${Be}px`),ee.setProperty("--radix-popper-anchor-height",`${es}px`)}}),N&&NT({element:N,padding:c}),IT({arrowWidth:E,arrowHeight:I}),f&&wT({strategy:"referenceHidden",...X})]}),[q,te]=U0(O),re=Ns(v);Fs(()=>{$&&(re==null||re())},[$,re]);const be=(Q=F.arrow)==null?void 0:Q.x,Me=(pe=F.arrow)==null?void 0:pe.y,je=((J=F.arrow)==null?void 0:J.centerOffset)!==0,[Y,we]=d.useState();return Fs(()=>{w&&we(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:$?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(H=F.transformOrigin)==null?void 0:H.x,(oe=F.transformOrigin)==null?void 0:oe.y].join(" "),...((de=F.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(kT,{scope:r,placedSide:q,onArrowChange:C,arrowX:be,arrowY:Me,shouldHideArrow:je,children:e.jsx(Ae.div,{"data-side":q,"data-align":te,...g,ref:_,style:{...g.style,animation:$?void 0:"none"}})})})});L0.displayName=pf;var $0="PopperArrow",PT={top:"bottom",right:"left",bottom:"top",left:"right"},B0=d.forwardRef(function(t,r){const{__scopePopper:a,...n}=t,i=ET($0,a),o=PT[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(ST,{...n,ref:r,style:{...n.style,display:"block"}})})});B0.displayName=$0;function TT(s){return s!==null}var IT=s=>({name:"transformOrigin",options:s,fn(t){var b,w,y;const{placement:r,rects:a,middlewareData:n}=t,o=((b=n.arrow)==null?void 0:b.centerOffset)!==0,c=o?0:s.arrowWidth,l=o?0:s.arrowHeight,[u,m]=U0(r),x={start:"0%",center:"50%",end:"100%"}[m],f=(((w=n.arrow)==null?void 0:w.x)??0)+c/2,p=(((y=n.arrow)==null?void 0:y.y)??0)+l/2;let v="",g="";return u==="bottom"?(v=o?x:`${f}px`,g=`${-l}px`):u==="top"?(v=o?x:`${f}px`,g=`${a.floating.height+l}px`):u==="right"?(v=`${-l}px`,g=o?x:`${p}px`):u==="left"&&(v=`${a.floating.width+l}px`,g=o?x:`${p}px`),{data:{x:v,y:g}}}});function U0(s){const[t,r="center"]=s.split("-");return[t,r]}var gf=O0,xl=F0,Od=L0,Dd=B0,AT="Portal",z0=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});z0.displayName=AT;function MT(s,t){return d.useReducer((r,a)=>t[r][a]??r,s)}var q0=s=>{const{present:t,children:r}=s,a=RT(t),n=typeof r=="function"?r({present:a.isPresent}):d.Children.only(r),i=qe(a.ref,OT(n));return typeof r=="function"||a.isPresent?d.cloneElement(n,{ref:i}):null};q0.displayName="Presence";function RT(s){const[t,r]=d.useState(),a=d.useRef({}),n=d.useRef(s),i=d.useRef("none"),o=s?"mounted":"unmounted",[c,l]=MT(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=kc(a.current);i.current=c==="mounted"?u:"none"},[c]),Fs(()=>{const u=a.current,m=n.current;if(m!==s){const f=i.current,p=kc(u);s?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,l]),Fs(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,x=p=>{const g=kc(a.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!n.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=p=>{p.target===t&&(i.current=kc(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:d.useCallback(u=>{u&&(a.current=getComputedStyle(u)),r(u)},[])}}function kc(s){return(s==null?void 0:s.animationName)||"none"}function OT(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var[Fd,A9]=pP("Tooltip",[tn]),vf=tn(),V0="TooltipProvider",DT=700,yv="tooltip.open",[FT,J0]=Fd(V0),W0=s=>{const{__scopeTooltip:t,delayDuration:r=DT,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=s,[o,c]=d.useState(!0),l=d.useRef(!1),u=d.useRef(0);return d.useEffect(()=>{const m=u.current;return()=>window.clearTimeout(m)},[]),e.jsx(FT,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:d.useCallback(()=>{window.clearTimeout(u.current),c(!1)},[]),onClose:d.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c(!0),a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(m=>{l.current=m},[]),disableHoverableContent:n,children:i})};W0.displayName=V0;var H0="Tooltip",[M9,Ld]=Fd(H0),uh="TooltipTrigger",LT=d.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,n=Ld(uh,r),i=J0(uh,r),o=vf(r),c=d.useRef(null),l=qe(t,c,n.onTriggerChange),u=d.useRef(!1),m=d.useRef(!1),x=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(xl,{asChild:!0,...o,children:e.jsx(Ae.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:l,onPointerMove:ye(s.onPointerMove,f=>{f.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:ye(s.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:ye(s.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:ye(s.onFocus,()=>{u.current||n.onOpen()}),onBlur:ye(s.onBlur,n.onClose),onClick:ye(s.onClick,n.onClose)})})});LT.displayName=uh;var $T="TooltipPortal",[R9,BT]=Fd($T,{forceMount:void 0}),zi="TooltipContent",G0=d.forwardRef((s,t)=>{const r=BT(zi,s.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...i}=s,o=Ld(zi,s.__scopeTooltip);return e.jsx(q0,{present:a||o.open,children:o.disableHoverableContent?e.jsx(X0,{side:n,...i,ref:t}):e.jsx(UT,{side:n,...i,ref:t})})}),UT=d.forwardRef((s,t)=>{const r=Ld(zi,s.__scopeTooltip),a=J0(zi,s.__scopeTooltip),n=d.useRef(null),i=qe(t,n),[o,c]=d.useState(null),{trigger:l,onClose:u}=r,m=n.current,{onPointerInTransitChange:x}=a,f=d.useCallback(()=>{c(null),x(!1)},[x]),p=d.useCallback((v,g)=>{const b=v.currentTarget,w={x:v.clientX,y:v.clientY},y=JT(w,b.getBoundingClientRect()),_=WT(w,y),N=HT(g.getBoundingClientRect()),C=XT([..._,...N]);c(C),x(!0)},[x]);return d.useEffect(()=>()=>f(),[f]),d.useEffect(()=>{if(l&&m){const v=b=>p(b,m),g=b=>p(b,l);return l.addEventListener("pointerleave",v),m.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",v),m.removeEventListener("pointerleave",g)}}},[l,m,p,f]),d.useEffect(()=>{if(o){const v=g=>{const b=g.target,w={x:g.clientX,y:g.clientY},y=(l==null?void 0:l.contains(b))||(m==null?void 0:m.contains(b)),_=!GT(w,o);y?f():_&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,m,o,u,f]),e.jsx(X0,{...s,ref:i})}),[zT,qT]=Fd(H0,{isInside:!1}),X0=d.forwardRef((s,t)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o,...c}=s,l=Ld(zi,r),u=vf(r),{onClose:m}=l;return d.useEffect(()=>(document.addEventListener(yv,m),()=>document.removeEventListener(yv,m)),[m]),d.useEffect(()=>{if(l.trigger){const x=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&m()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[l.trigger,m]),e.jsx(lf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:x=>x.preventDefault(),onDismiss:m,children:e.jsxs(Od,{"data-state":l.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Kh,{children:a}),e.jsx(zT,{scope:r,isInside:!0,children:e.jsx(jk,{id:l.contentId,role:"tooltip",children:n||a})})]})})});G0.displayName=zi;var Y0="TooltipArrow",VT=d.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,n=vf(r);return qT(Y0,r).isInside?null:e.jsx(Dd,{...n,...a,ref:t})});VT.displayName=Y0;function JT(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),n=Math.abs(t.right-s.x),i=Math.abs(t.left-s.x);switch(Math.min(r,a,n,i)){case i:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function WT(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function HT(s){const{top:t,right:r,bottom:a,left:n}=s;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}function GT(s,t){const{x:r,y:a}=s;let n=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i].x,l=t[i].y,u=t[o].x,m=t[o].y;l>a!=m>a&&r<(u-c)*(a-l)/(m-l)+c&&(n=!n)}return n}function XT(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),YT(t)}function YT(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const n=s[a];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const n=s[a];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var ZT=W0,Z0=G0;const KT=ZT,QT=d.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Z0,{ref:a,sideOffset:t,className:Oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));QT.displayName=Z0.displayName;var $d=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bd=typeof window>"u"||"Deno"in globalThis;function jr(){}function e5(s,t){return typeof s=="function"?s(t):s}function s5(s){return typeof s=="number"&&s>=0&&s!==1/0}function t5(s,t){return Math.max(s+(t||0)-Date.now(),0)}function jv(s,t){return typeof s=="function"?s(t):s}function r5(s,t){return typeof s=="function"?s(t):s}function wv(s,t){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:c}=s;if(o){if(a){if(t.queryHash!==bf(o,t.options))return!1}else if(!sl(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||n&&n!==t.state.fetchStatus||i&&!i(t))}function Nv(s,t){const{exact:r,status:a,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(r){if(el(t.options.mutationKey)!==el(i))return!1}else if(!sl(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function bf(s,t){return((t==null?void 0:t.queryKeyHashFn)||el)(s)}function el(s){return JSON.stringify(s,(t,r)=>mh(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function sl(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!sl(s[r],t[r])):!1}function K0(s,t){if(s===t)return s;const r=_v(s)&&_v(t);if(r||mh(s)&&mh(t)){const a=r?s:Object.keys(s),n=a.length,i=r?t:Object.keys(t),o=i.length,c=r?[]:{};let l=0;for(let u=0;u<o;u++){const m=r?u:i[u];(!r&&a.includes(m)||r)&&s[m]===void 0&&t[m]===void 0?(c[m]=void 0,l++):(c[m]=K0(s[m],t[m]),c[m]===s[m]&&s[m]!==void 0&&l++)}return n===o&&l===n?s:c}return t}function _v(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function mh(s){if(!Sv(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Sv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Sv(s){return Object.prototype.toString.call(s)==="[object Object]"}function a5(s){return new Promise(t=>{setTimeout(t,s)})}function n5(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?K0(s,t):t}function i5(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function o5(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Q0=Symbol();function ej(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Q0?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var bn,La,Ii,wy,l5=(wy=class extends $d{constructor(){super();As(this,bn);As(this,La);As(this,Ii);cs(this,Ii,t=>{if(!Bd&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ne(this,La)||this.setEventListener(Ne(this,Ii))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,La))==null||t.call(this),cs(this,La,void 0))}setEventListener(t){var r;cs(this,Ii,t),(r=Ne(this,La))==null||r.call(this),cs(this,La,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){Ne(this,bn)!==t&&(cs(this,bn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ne(this,bn)=="boolean"?Ne(this,bn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},bn=new WeakMap,La=new WeakMap,Ii=new WeakMap,wy),sj=new l5,Ai,$a,Mi,Ny,c5=(Ny=class extends $d{constructor(){super();As(this,Ai,!0);As(this,$a);As(this,Mi);cs(this,Mi,t=>{if(!Bd&&window.addEventListener){const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){Ne(this,$a)||this.setEventListener(Ne(this,Mi))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,$a))==null||t.call(this),cs(this,$a,void 0))}setEventListener(t){var r;cs(this,Mi,t),(r=Ne(this,$a))==null||r.call(this),cs(this,$a,t(this.setOnline.bind(this)))}setOnline(t){Ne(this,Ai)!==t&&(cs(this,Ai,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return Ne(this,Ai)}},Ai=new WeakMap,$a=new WeakMap,Mi=new WeakMap,Ny),hd=new c5;function d5(s){return Math.min(1e3*2**s,3e4)}function tj(s){return(s??"online")==="online"?hd.isOnline():!0}var rj=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function lm(s){return s instanceof rj}function aj(s){let t=!1,r=0,a=!1,n,i,o;const c=new Promise((w,y)=>{i=w,o=y}),l=w=>{var y;a||(v(new rj(w)),(y=s.abort)==null||y.call(s))},u=()=>{t=!0},m=()=>{t=!1},x=()=>sj.isFocused()&&(s.networkMode==="always"||hd.isOnline())&&s.canRun(),f=()=>tj(s.networkMode)&&s.canRun(),p=w=>{var y;a||(a=!0,(y=s.onSuccess)==null||y.call(s,w),n==null||n(),i(w))},v=w=>{var y;a||(a=!0,(y=s.onError)==null||y.call(s,w),n==null||n(),o(w))},g=()=>new Promise(w=>{var y;n=_=>{(a||x())&&w(_)},(y=s.onPause)==null||y.call(s)}).then(()=>{var w;n=void 0,a||(w=s.onContinue)==null||w.call(s)}),b=()=>{if(a)return;let w;const y=r===0?s.initialPromise:void 0;try{w=y??s.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(p).catch(_=>{var I;if(a)return;const N=s.retry??(Bd?0:3),C=s.retryDelay??d5,R=typeof C=="function"?C(r,_):C,E=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,_);if(t||!E){v(_);return}r++,(I=s.onFail)==null||I.call(s,r,_),a5(R).then(()=>x()?void 0:g()).then(()=>{t?v(_):b()})})};return{promise:c,cancel:l,continue:()=>(n==null||n(),c),cancelRetry:u,continueRetry:m,canStart:f,start:()=>(f()?b():g().then(b),c)}}function u5(){let s=[],t=0,r=c=>{c()},a=c=>{c()},n=c=>setTimeout(c,0);const i=c=>{t?s.push(c):n(()=>{r(c)})},o=()=>{const c=s;s=[],c.length&&n(()=>{a(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||o()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{a=c},setScheduler:c=>{n=c}}}var Tt=u5(),yn,_y,nj=(_y=class{constructor(){As(this,yn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s5(this.gcTime)&&cs(this,yn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Bd?1/0:5*60*1e3))}clearGcTimeout(){Ne(this,yn)&&(clearTimeout(Ne(this,yn)),cs(this,yn,void 0))}},yn=new WeakMap,_y),Ri,Oi,dr,yt,cl,jn,wr,ca,Sy,m5=(Sy=class extends nj{constructor(t){super();As(this,wr);As(this,Ri);As(this,Oi);As(this,dr);As(this,yt);As(this,cl);As(this,jn);cs(this,jn,!1),cs(this,cl,t.defaultOptions),this.setOptions(t.options),this.observers=[],cs(this,dr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,cs(this,Ri,f5(this.options)),this.state=t.state??Ne(this,Ri),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ne(this,yt))==null?void 0:t.promise}setOptions(t){this.options={...Ne(this,cl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ne(this,dr).remove(this)}setData(t,r){const a=n5(this.state.data,t,this.options);return bt(this,wr,ca).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(t,r){bt(this,wr,ca).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var a,n;const r=(a=Ne(this,yt))==null?void 0:a.promise;return(n=Ne(this,yt))==null||n.cancel(t),r?r.then(jr).catch(jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,Ri))}isActive(){return this.observers.some(t=>r5(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!t5(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ne(this,yt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ne(this,yt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ne(this,dr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ne(this,yt)&&(Ne(this,jn)?Ne(this,yt).cancel({revert:!0}):Ne(this,yt).cancelRetry()),this.scheduleGc()),Ne(this,dr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bt(this,wr,ca).call(this,{type:"invalidate"})}fetch(t,r){var l,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,yt))return Ne(this,yt).continueRetry(),Ne(this,yt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(f=>f.options.queryFn);x&&this.setOptions(x.options)}const a=new AbortController,n=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(cs(this,jn,!0),a.signal)})},i=()=>{const x=ej(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return n(f),cs(this,jn,!1),this.options.persister?this.options.persister(x,f,this):x(f)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(o),(l=this.options.behavior)==null||l.onFetch(o,this),cs(this,Oi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&bt(this,wr,ca).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=x=>{var f,p,v,g;lm(x)&&x.silent||bt(this,wr,ca).call(this,{type:"error",error:x}),lm(x)||((p=(f=Ne(this,dr).config).onError)==null||p.call(f,x,this),(g=(v=Ne(this,dr).config).onSettled)==null||g.call(v,this.state.data,x,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return cs(this,yt,aj({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:x=>{var f,p,v,g;if(x===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(b){c(b);return}(p=(f=Ne(this,dr).config).onSuccess)==null||p.call(f,x,this),(g=(v=Ne(this,dr).config).onSettled)==null||g.call(v,x,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(x,f)=>{bt(this,wr,ca).call(this,{type:"failed",failureCount:x,error:f})},onPause:()=>{bt(this,wr,ca).call(this,{type:"pause"})},onContinue:()=>{bt(this,wr,ca).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Ne(this,yt).start()}},Ri=new WeakMap,Oi=new WeakMap,dr=new WeakMap,yt=new WeakMap,cl=new WeakMap,jn=new WeakMap,wr=new WeakSet,ca=function(t){const r=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...h5(a.data,this.options),fetchMeta:t.meta??null};case"success":return{...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return lm(n)&&n.revert&&Ne(this,Oi)?{...Ne(this,Oi),fetchStatus:"idle"}:{...a,error:n,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=r(this.state),Tt.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Ne(this,dr).notify({query:this,type:"updated",action:t})})},Sy);function h5(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tj(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function f5(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Vr,Cy,x5=(Cy=class extends $d{constructor(t={}){super();As(this,Vr);this.config=t,cs(this,Vr,new Map)}build(t,r,a){const n=r.queryKey,i=r.queryHash??bf(n,r);let o=this.get(i);return o||(o=new m5({cache:this,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){Ne(this,Vr).has(t.queryHash)||(Ne(this,Vr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ne(this,Vr).get(t.queryHash);r&&(t.destroy(),r===t&&Ne(this,Vr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ne(this,Vr).get(t)}getAll(){return[...Ne(this,Vr).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(a=>wv(r,a))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(a=>wv(t,a)):r}notify(t){Tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Vr=new WeakMap,Cy),Jr,Et,wn,Wr,Ra,ky,p5=(ky=class extends nj{constructor(t){super();As(this,Wr);As(this,Jr);As(this,Et);As(this,wn);this.mutationId=t.mutationId,cs(this,Et,t.mutationCache),cs(this,Jr,[]),this.state=t.state||g5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ne(this,Jr).includes(t)||(Ne(this,Jr).push(t),this.clearGcTimeout(),Ne(this,Et).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){cs(this,Jr,Ne(this,Jr).filter(r=>r!==t)),this.scheduleGc(),Ne(this,Et).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ne(this,Jr).length||(this.state.status==="pending"?this.scheduleGc():Ne(this,Et).remove(this))}continue(){var t;return((t=Ne(this,wn))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,i,o,c,l,u,m,x,f,p,v,g,b,w,y,_,N,C,R,E;cs(this,wn,aj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,M)=>{bt(this,Wr,Ra).call(this,{type:"failed",failureCount:I,error:M})},onPause:()=>{bt(this,Wr,Ra).call(this,{type:"pause"})},onContinue:()=>{bt(this,Wr,Ra).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,Et).canRun(this)}));const r=this.state.status==="pending",a=!Ne(this,wn).canStart();try{if(!r){bt(this,Wr,Ra).call(this,{type:"pending",variables:t,isPaused:a}),await((i=(n=Ne(this,Et).config).onMutate)==null?void 0:i.call(n,t,this));const M=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));M!==this.state.context&&bt(this,Wr,Ra).call(this,{type:"pending",context:M,variables:t,isPaused:a})}const I=await Ne(this,wn).start();return await((u=(l=Ne(this,Et).config).onSuccess)==null?void 0:u.call(l,I,t,this.state.context,this)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,I,t,this.state.context)),await((p=(f=Ne(this,Et).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((g=(v=this.options).onSettled)==null?void 0:g.call(v,I,null,t,this.state.context)),bt(this,Wr,Ra).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(b=Ne(this,Et).config).onError)==null?void 0:w.call(b,I,t,this.state.context,this)),await((_=(y=this.options).onError)==null?void 0:_.call(y,I,t,this.state.context)),await((C=(N=Ne(this,Et).config).onSettled)==null?void 0:C.call(N,void 0,I,this.state.variables,this.state.context,this)),await((E=(R=this.options).onSettled)==null?void 0:E.call(R,void 0,I,t,this.state.context)),I}finally{bt(this,Wr,Ra).call(this,{type:"error",error:I})}}finally{Ne(this,Et).runNext(this)}}},Jr=new WeakMap,Et=new WeakMap,wn=new WeakMap,Wr=new WeakSet,Ra=function(t){const r=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tt.batch(()=>{Ne(this,Jr).forEach(a=>{a.onMutationUpdate(t)}),Ne(this,Et).notify({mutation:this,type:"updated",action:t})})},ky);function g5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gt,dl,Ey,v5=(Ey=class extends $d{constructor(t={}){super();As(this,Gt);As(this,dl);this.config=t,cs(this,Gt,new Map),cs(this,dl,Date.now())}build(t,r,a){const n=new p5({mutationCache:this,mutationId:++yc(this,dl)._,options:t.defaultMutationOptions(r),state:a});return this.add(n),n}add(t){const r=Ec(t),a=Ne(this,Gt).get(r)??[];a.push(t),Ne(this,Gt).set(r,a),this.notify({type:"added",mutation:t})}remove(t){var a;const r=Ec(t);if(Ne(this,Gt).has(r)){const n=(a=Ne(this,Gt).get(r))==null?void 0:a.filter(i=>i!==t);n&&(n.length===0?Ne(this,Gt).delete(r):Ne(this,Gt).set(r,n))}this.notify({type:"removed",mutation:t})}canRun(t){var a;const r=(a=Ne(this,Gt).get(Ec(t)))==null?void 0:a.find(n=>n.state.status==="pending");return!r||r===t}runNext(t){var a;const r=(a=Ne(this,Gt).get(Ec(t)))==null?void 0:a.find(n=>n!==t&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Ne(this,Gt).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(a=>Nv(r,a))}findAll(t={}){return this.getAll().filter(r=>Nv(t,r))}notify(t){Tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Tt.batch(()=>Promise.all(t.map(r=>r.continue().catch(jr))))}},Gt=new WeakMap,dl=new WeakMap,Ey);function Ec(s){var t;return((t=s.options.scope)==null?void 0:t.id)??String(s.mutationId)}function Cv(s){return{onFetch:(t,r)=>{var m,x,f,p,v;const a=t.options,n=(f=(x=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:x.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=ej(t.options,t.fetchOptions),y=async(_,N,C)=>{if(g)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const R={queryKey:t.queryKey,pageParam:N,direction:C?"backward":"forward",meta:t.options.meta};b(R);const E=await w(R),{maxPages:I}=t.options,M=C?o5:i5;return{pages:M(_.pages,E,I),pageParams:M(_.pageParams,N,I)}};if(n&&i.length){const _=n==="backward",N=_?b5:kv,C={pages:i,pageParams:o},R=N(a,C);c=await y(C,R,_)}else{const _=s??i.length;do{const N=l===0?o[0]??a.initialPageParam:kv(a,c);if(l>0&&N==null)break;c=await y(c,N),l++}while(l<_)}return c};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function kv(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function b5(s,{pages:t,pageParams:r}){var a;return t.length>0?(a=s.getPreviousPageParam)==null?void 0:a.call(s,t[0],t,r[0],r):void 0}var Zs,Ba,Ua,Di,Fi,za,Li,$i,Py,y5=(Py=class{constructor(s={}){As(this,Zs);As(this,Ba);As(this,Ua);As(this,Di);As(this,Fi);As(this,za);As(this,Li);As(this,$i);cs(this,Zs,s.queryCache||new x5),cs(this,Ba,s.mutationCache||new v5),cs(this,Ua,s.defaultOptions||{}),cs(this,Di,new Map),cs(this,Fi,new Map),cs(this,za,0)}mount(){yc(this,za)._++,Ne(this,za)===1&&(cs(this,Li,sj.subscribe(async s=>{s&&(await this.resumePausedMutations(),Ne(this,Zs).onFocus())})),cs(this,$i,hd.subscribe(async s=>{s&&(await this.resumePausedMutations(),Ne(this,Zs).onOnline())})))}unmount(){var s,t;yc(this,za)._--,Ne(this,za)===0&&((s=Ne(this,Li))==null||s.call(this),cs(this,Li,void 0),(t=Ne(this,$i))==null||t.call(this),cs(this,$i,void 0))}isFetching(s){return Ne(this,Zs).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return Ne(this,Ba).findAll({...s,status:"pending"}).length}getQueryData(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=Ne(this,Zs).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(s){const t=this.getQueryData(s.queryKey);if(t===void 0)return this.fetchQuery(s);{const r=this.defaultQueryOptions(s),a=Ne(this,Zs).build(this,r);return s.revalidateIfStale&&a.isStaleByTime(jv(r.staleTime,a))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(s){return Ne(this,Zs).findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),n=Ne(this,Zs).get(a.queryHash),i=n==null?void 0:n.state.data,o=e5(t,i);if(o!==void 0)return Ne(this,Zs).build(this,a).setData(o,{...r,manual:!0})}setQueriesData(s,t,r){return Tt.batch(()=>Ne(this,Zs).findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=Ne(this,Zs).get(t.queryHash))==null?void 0:r.state}removeQueries(s){const t=Ne(this,Zs);Tt.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=Ne(this,Zs),a={type:"active",...s};return Tt.batch(()=>(r.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries(a,t)))}cancelQueries(s={},t={}){const r={revert:!0,...t},a=Tt.batch(()=>Ne(this,Zs).findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(jr).catch(jr)}invalidateQueries(s={},t={}){return Tt.batch(()=>{if(Ne(this,Zs).findAll(s).forEach(a=>{a.invalidate()}),s.refetchType==="none")return Promise.resolve();const r={...s,type:s.refetchType??s.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(s={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},a=Tt.batch(()=>Ne(this,Zs).findAll(s).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(jr)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(jr)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=Ne(this,Zs).build(this,t);return r.isStaleByTime(jv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(jr).catch(jr)}fetchInfiniteQuery(s){return s.behavior=Cv(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(jr).catch(jr)}ensureInfiniteQueryData(s){return s.behavior=Cv(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return hd.isOnline()?Ne(this,Ba).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,Zs)}getMutationCache(){return Ne(this,Ba)}getDefaultOptions(){return Ne(this,Ua)}setDefaultOptions(s){cs(this,Ua,s)}setQueryDefaults(s,t){Ne(this,Di).set(el(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...Ne(this,Di).values()];let r={};return t.forEach(a=>{sl(s,a.queryKey)&&(r={...r,...a.defaultOptions})}),r}setMutationDefaults(s,t){Ne(this,Fi).set(el(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...Ne(this,Fi).values()];let r={};return t.forEach(a=>{sl(s,a.mutationKey)&&(r={...r,...a.defaultOptions})}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...Ne(this,Ua).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=bf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Q0&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...Ne(this,Ua).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){Ne(this,Zs).clear(),Ne(this,Ba).clear()}},Zs=new WeakMap,Ba=new WeakMap,Ua=new WeakMap,Di=new WeakMap,Fi=new WeakMap,za=new WeakMap,Li=new WeakMap,$i=new WeakMap,Py),j5=d.createContext(void 0),w5=({client:s,children:t})=>(d.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(j5.Provider,{value:s,children:t}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},tl.apply(this,arguments)}var Va;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Va||(Va={}));const Ev="popstate";function N5(s){s===void 0&&(s={});function t(a,n){let{pathname:i,search:o,hash:c}=a.location;return hh("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:fd(n)}return S5(t,r,null,s)}function Qs(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ij(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _5(){return Math.random().toString(36).substr(2,8)}function Pv(s,t){return{usr:s.state,key:s.key,idx:t}}function hh(s,t,r,a){return r===void 0&&(r=null),tl({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Qi(t):t,{state:r,key:t&&t.key||a||_5()})}function fd(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Qi(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function S5(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,c=Va.Pop,l=null,u=m();u==null&&(u=0,o.replaceState(tl({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function x(){c=Va.Pop;let b=m(),w=b==null?null:b-u;u=b,l&&l({action:c,location:g.location,delta:w})}function f(b,w){c=Va.Push;let y=hh(g.location,b,w);u=m()+1;let _=Pv(y,u),N=g.createHref(y);try{o.pushState(_,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(N)}i&&l&&l({action:c,location:g.location,delta:1})}function p(b,w){c=Va.Replace;let y=hh(g.location,b,w);u=m();let _=Pv(y,u),N=g.createHref(y);o.replaceState(_,"",N),i&&l&&l({action:c,location:g.location,delta:0})}function v(b){let w=n.location.origin!=="null"?n.location.origin:n.location.href,y=typeof b=="string"?b:fd(b);return y=y.replace(/ $/,"%20"),Qs(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let g={get action(){return c},get location(){return s(n,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(Ev,x),l=b,()=>{n.removeEventListener(Ev,x),l=null}},createHref(b){return t(n,b)},createURL:v,encodeLocation(b){let w=v(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var Tv;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Tv||(Tv={}));function C5(s,t,r){return r===void 0&&(r="/"),k5(s,t,r)}function k5(s,t,r,a){let n=typeof t=="string"?Qi(t):t,i=yf(n.pathname||"/",r);if(i==null)return null;let o=oj(s);E5(o);let c=null;for(let l=0;c==null&&l<o.length;++l){let u=B5(i);c=F5(o[l],u)}return c}function oj(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,c)=>{let l={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Qs(l.relativePath.startsWith(a),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(a.length));let u=Ga([a,l.relativePath]),m=r.concat(l);i.children&&i.children.length>0&&(Qs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oj(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:O5(u,i.index),routesMeta:m})};return s.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))n(i,o);else for(let l of lj(i.path))n(i,o,l)}),t}function lj(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=lj(a.join("/")),c=[];return c.push(...o.map(l=>l===""?i:[i,l].join("/"))),n&&c.push(...o),c.map(l=>s.startsWith("/")&&l===""?"/":l)}function E5(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:D5(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const P5=/^:[\w-]+$/,T5=3,I5=2,A5=1,M5=10,R5=-2,Iv=s=>s==="*";function O5(s,t){let r=s.split("/"),a=r.length;return r.some(Iv)&&(a+=R5),t&&(a+=I5),r.filter(n=>!Iv(n)).reduce((n,i)=>n+(P5.test(i)?T5:i===""?A5:M5),a)}function D5(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function F5(s,t,r){let{routesMeta:a}=s,n={},i="/",o=[];for(let c=0;c<a.length;++c){let l=a[c],u=c===a.length-1,m=i==="/"?t:t.slice(i.length)||"/",x=L5({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},m),f=l.route;if(!x)return null;Object.assign(n,x.params),o.push({params:n,pathname:Ga([i,x.pathname]),pathnameBase:V5(Ga([i,x.pathnameBase])),route:f}),x.pathnameBase!=="/"&&(i=Ga([i,x.pathnameBase]))}return o}function L5(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=$5(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((u,m,x)=>{let{paramName:f,isOptional:p}=m;if(f==="*"){let g=c[x]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=c[x];return p&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:s}}function $5(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ij(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,l)=>(a.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function B5(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ij(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function yf(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function U5(s,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?Qi(s):s;return{pathname:r?r.startsWith("/")?r:z5(r,t):t,search:J5(a),hash:W5(n)}}function z5(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function cm(s,t,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q5(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function jf(s,t){let r=q5(s);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function wf(s,t,r,a){a===void 0&&(a=!1);let n;typeof s=="string"?n=Qi(s):(n=tl({},s),Qs(!n.pathname||!n.pathname.includes("?"),cm("?","pathname","search",n)),Qs(!n.pathname||!n.pathname.includes("#"),cm("#","pathname","hash",n)),Qs(!n.search||!n.search.includes("#"),cm("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=r;else{let x=t.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),x-=1;n.pathname=f.join("/")}c=x>=0?t[x]:"/"}let l=U5(n,c),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||m)&&(l.pathname+="/"),l}const Ga=s=>s.join("/").replace(/\/\/+/g,"/"),V5=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),J5=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,W5=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function H5(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const cj=["post","put","patch","delete"];new Set(cj);const G5=["get",...cj];new Set(G5);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},rl.apply(this,arguments)}const Nf=d.createContext(null),X5=d.createContext(null),rn=d.createContext(null),Ud=d.createContext(null),ba=d.createContext({outlet:null,matches:[],isDataRoute:!1}),dj=d.createContext(null);function Y5(s,t){let{relative:r}=t===void 0?{}:t;eo()||Qs(!1);let{basename:a,navigator:n}=d.useContext(rn),{hash:i,pathname:o,search:c}=mj(s,{relative:r}),l=o;return a!=="/"&&(l=o==="/"?a:Ga([a,o])),n.createHref({pathname:l,search:c,hash:i})}function eo(){return d.useContext(Ud)!=null}function ya(){return eo()||Qs(!1),d.useContext(Ud).location}function uj(s){d.useContext(rn).static||d.useLayoutEffect(s)}function Nt(){let{isDataRoute:s}=d.useContext(ba);return s?cI():Z5()}function Z5(){eo()||Qs(!1);let s=d.useContext(Nf),{basename:t,future:r,navigator:a}=d.useContext(rn),{matches:n}=d.useContext(ba),{pathname:i}=ya(),o=JSON.stringify(jf(n,r.v7_relativeSplatPath)),c=d.useRef(!1);return uj(()=>{c.current=!0}),d.useCallback(function(u,m){if(m===void 0&&(m={}),!c.current)return;if(typeof u=="number"){a.go(u);return}let x=wf(u,JSON.parse(o),i,m.relative==="path");s==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:Ga([t,x.pathname])),(m.replace?a.replace:a.push)(x,m.state,m)},[t,a,o,i,s])}function so(){let{matches:s}=d.useContext(ba),t=s[s.length-1];return t?t.params:{}}function mj(s,t){let{relative:r}=t===void 0?{}:t,{future:a}=d.useContext(rn),{matches:n}=d.useContext(ba),{pathname:i}=ya(),o=JSON.stringify(jf(n,a.v7_relativeSplatPath));return d.useMemo(()=>wf(s,JSON.parse(o),i,r==="path"),[s,o,i,r])}function K5(s,t){return Q5(s,t)}function Q5(s,t,r,a){eo()||Qs(!1);let{navigator:n}=d.useContext(rn),{matches:i}=d.useContext(ba),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ya(),m;if(t){var x;let b=typeof t=="string"?Qi(t):t;l==="/"||(x=b.pathname)!=null&&x.startsWith(l)||Qs(!1),m=b}else m=u;let f=m.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=C5(s,{pathname:p}),g=aI(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Ga([l,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Ga([l,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,a);return t&&g?d.createElement(Ud.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Va.Pop}},g):g}function eI(){let s=lI(),t=H5(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),r?d.createElement("pre",{style:n},r):null,null)}const sI=d.createElement(eI,null);class tI extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?d.createElement(ba.Provider,{value:this.props.routeContext},d.createElement(dj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rI(s){let{routeContext:t,match:r,children:a}=s,n=d.useContext(Nf);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(ba.Provider,{value:t},a)}function aI(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let o=s,c=(n=r)==null?void 0:n.errors;if(c!=null){let m=o.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);m>=0||Qs(!1),o=o.slice(0,Math.min(o.length,m+1))}let l=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let m=0;m<o.length;m++){let x=o[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(u=m),x.route.id){let{loaderData:f,errors:p}=r,v=x.route.loader&&f[x.route.id]===void 0&&(!p||p[x.route.id]===void 0);if(x.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,x,f)=>{let p,v=!1,g=null,b=null;r&&(p=c&&x.route.id?c[x.route.id]:void 0,g=x.route.errorElement||sI,l&&(u<0&&f===0?(dI("route-fallback"),v=!0,b=null):u===f&&(v=!0,b=x.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),y=()=>{let _;return p?_=g:v?_=b:x.route.Component?_=d.createElement(x.route.Component,null):x.route.element?_=x.route.element:_=m,d.createElement(rI,{match:x,routeContext:{outlet:m,matches:w,isDataRoute:r!=null},children:_})};return r&&(x.route.ErrorBoundary||x.route.errorElement||f===0)?d.createElement(tI,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var hj=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(hj||{}),fj=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(fj||{});function nI(s){let t=d.useContext(Nf);return t||Qs(!1),t}function iI(s){let t=d.useContext(X5);return t||Qs(!1),t}function oI(s){let t=d.useContext(ba);return t||Qs(!1),t}function xj(s){let t=oI(),r=t.matches[t.matches.length-1];return r.route.id||Qs(!1),r.route.id}function lI(){var s;let t=d.useContext(dj),r=iI(),a=xj();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}function cI(){let{router:s}=nI(hj.UseNavigateStable),t=xj(fj.UseNavigateStable),r=d.useRef(!1);return uj(()=>{r.current=!0}),d.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,rl({fromRouteId:t},i)))},[s,t])}const Av={};function dI(s,t,r){Av[s]||(Av[s]=!0)}function fh(s){let{to:t,replace:r,state:a,relative:n}=s;eo()||Qs(!1);let{future:i,static:o}=d.useContext(rn),{matches:c}=d.useContext(ba),{pathname:l}=ya(),u=Nt(),m=wf(t,jf(c,i.v7_relativeSplatPath),l,n==="path"),x=JSON.stringify(m);return d.useEffect(()=>u(JSON.parse(x),{replace:r,state:a,relative:n}),[u,x,n,r,a]),null}function vs(s){Qs(!1)}function uI(s){let{basename:t="/",children:r=null,location:a,navigationType:n=Va.Pop,navigator:i,static:o=!1,future:c}=s;eo()&&Qs(!1);let l=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:l,navigator:i,static:o,future:rl({v7_relativeSplatPath:!1},c)}),[l,c,i,o]);typeof a=="string"&&(a=Qi(a));let{pathname:m="/",search:x="",hash:f="",state:p=null,key:v="default"}=a,g=d.useMemo(()=>{let b=yf(m,l);return b==null?null:{location:{pathname:b,search:x,hash:f,state:p,key:v},navigationType:n}},[l,m,x,f,p,v,n]);return g==null?null:d.createElement(rn.Provider,{value:u},d.createElement(Ud.Provider,{children:r,value:g}))}function mI(s){let{children:t,location:r}=s;return K5(xh(t),r)}new Promise(()=>{});function xh(s,t){t===void 0&&(t=[]);let r=[];return d.Children.forEach(s,(a,n)=>{if(!d.isValidElement(a))return;let i=[...t,n];if(a.type===d.Fragment){r.push.apply(r,xh(a.props.children,i));return}a.type!==vs&&Qs(!1),!a.props.index||!a.props.children||Qs(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=xh(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ph.apply(this,arguments)}function hI(s,t){if(s==null)return{};var r={},a=Object.keys(s),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=s[n]);return r}function fI(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function xI(s,t){return s.button===0&&(!t||t==="_self")&&!fI(s)}function gh(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,r)=>{let a=s[r];return t.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function pI(s,t){let r=gh(s);return t&&t.forEach((a,n)=>{r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)})}),r}const gI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],vI="6";try{window.__reactRouterVersion=vI}catch{}const bI="startTransition",Mv=Iy[bI];function yI(s){let{basename:t,children:r,future:a,window:n}=s,i=d.useRef();i.current==null&&(i.current=N5({window:n,v5Compat:!0}));let o=i.current,[c,l]=d.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},m=d.useCallback(x=>{u&&Mv?Mv(()=>l(x)):l(x)},[l,u]);return d.useLayoutEffect(()=>o.listen(m),[o,m]),d.createElement(uI,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:a})}const jI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=d.forwardRef(function(t,r){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:c,target:l,to:u,preventScrollReset:m,unstable_viewTransition:x}=t,f=hI(t,gI),{basename:p}=d.useContext(rn),v,g=!1;if(typeof u=="string"&&wI.test(u)&&(v=u,jI))try{let _=new URL(window.location.href),N=u.startsWith("//")?new URL(_.protocol+u):new URL(u),C=yf(N.pathname,p);N.origin===_.origin&&C!=null?u=C+N.search+N.hash:g=!0}catch{}let b=Y5(u,{relative:n}),w=NI(u,{replace:o,state:c,target:l,preventScrollReset:m,relative:n,unstable_viewTransition:x});function y(_){a&&a(_),_.defaultPrevented||w(_)}return d.createElement("a",ph({},f,{href:v||b,onClick:g||i?a:y,ref:r,target:l}))});var Rv;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Rv||(Rv={}));var Ov;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Ov||(Ov={}));function NI(s,t){let{target:r,replace:a,state:n,preventScrollReset:i,relative:o,unstable_viewTransition:c}=t===void 0?{}:t,l=Nt(),u=ya(),m=mj(s,{relative:o});return d.useCallback(x=>{if(xI(x,r)){x.preventDefault();let f=a!==void 0?a:fd(u)===fd(m);l(s,{replace:f,state:n,preventScrollReset:i,relative:o,unstable_viewTransition:c})}},[u,l,m,a,n,r,s,i,o,c])}function to(s){let t=d.useRef(gh(s)),r=d.useRef(!1),a=ya(),n=d.useMemo(()=>pI(a.search,r.current?null:t.current),[a.search]),i=Nt(),o=d.useCallback((c,l)=>{const u=gh(typeof c=="function"?c(n):c);r.current=!0,i("?"+u,l)},[i,n]);return[n,o]}const _I="modulepreload",SI=function(s){return"/"+s},Dv={},ms=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=o(r.map(u=>{if(u=SI(u),u in Dv)return;Dv[u]=!0;const m=u.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${x}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":_I,m||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),m)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return n.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},CI=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>ms(async()=>{const{default:a}=await Promise.resolve().then(()=>ro);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class _f extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class kI extends _f{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fv extends _f{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Lv extends _f{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var vh;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(vh||(vh={}));var EI=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};class PI{constructor(t,{headers:r={},customFetch:a,region:n=vh.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=CI(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return EI(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let c={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(c["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let m;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",m=o):typeof o=="string"?(c["Content-Type"]="text/plain",m=o):typeof FormData<"u"&&o instanceof FormData?m=o:(c["Content-Type"]="application/json",m=JSON.stringify(o)));const x=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:m}).catch(g=>{throw new kI(g)}),f=x.headers.get("x-relay-error");if(f&&f==="true")throw new Fv(x);if(!x.ok)throw new Lv(x);let p=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield x.json():p==="application/octet-stream"?v=yield x.blob():p==="text/event-stream"?v=x:p==="multipart/form-data"?v=yield x.formData():v=yield x.text(),{data:v,error:null,response:x}}catch(n){return{data:null,error:n,response:n instanceof Lv||n instanceof Fv?n.context:void 0}}})}}var ct={},Qn={},ei={},si={},ti={},ri={},TI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qi=TI();const II=qi.fetch,pj=qi.fetch.bind(qi),gj=qi.Headers,AI=qi.Request,MI=qi.Response,ro=Object.freeze(Object.defineProperty({__proto__:null,Headers:gj,Request:AI,Response:MI,default:pj,fetch:II},Symbol.toStringTag,{value:"Module"})),RI=U4(ro);var Pc={},$v;function vj(){if($v)return Pc;$v=1,Object.defineProperty(Pc,"__esModule",{value:!0});class s extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Pc.default=s,Pc}var Bv;function bj(){if(Bv)return ri;Bv=1;var s=ri&&ri.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ri,"__esModule",{value:!0});const t=s(RI),r=s(vj());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let l=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var m,x,f;let p=null,v=null,g=null,b=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const C=await u.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=C:v=JSON.parse(C))}const _=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(x=u.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");_&&N&&N.length>1&&(g=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,b=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const _=await u.text();try{p=JSON.parse(_),Array.isArray(p)&&u.status===404&&(v=[],p=null,b=200,w="OK")}catch{u.status===404&&_===""?(b=204,w="No Content"):p={message:_}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,b=200,w="OK"),p&&this.shouldThrowOnError)throw new r.default(p)}return{error:p,data:v,count:g,status:b,statusText:w}});return this.shouldThrowOnError||(l=l.catch(u=>{var m,x,f;return{error:{message:`${(m=u==null?void 0:u.name)!==null&&m!==void 0?m:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(x=u==null?void 0:u.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return ri.default=a,ri}var Uv;function yj(){if(Uv)return ti;Uv=1;var s=ti&&ti.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ti,"__esModule",{value:!0});const t=s(bj());class r extends t.default{select(n){let i=!1;const o=(n??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:c,referencedTable:l=c}={}){const u=l?`${l}.order`:"order",m=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${m?`${m},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:c=o}={}){const l=typeof c>"u"?"offset":`${c}.offset`,u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:c=!1,wal:l=!1,format:u="text"}={}){var m;const x=[n?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${x};`,u==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ti.default=r,ti}var zv;function Sf(){if(zv)return si;zv=1;var s=si&&si.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(si,"__esModule",{value:!0});const t=s(yj());class r extends t.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${l}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return si.default=r,si}var qv;function jj(){if(qv)return ei;qv=1;var s=ei&&ei.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ei,"__esModule",{value:!0});const t=s(Sf());class r{constructor(n,{headers:i={},schema:o,fetch:c}){this.url=n,this.headers=i,this.schema=o,this.fetch=c}select(n,{head:i=!1,count:o}={}){const c=i?"HEAD":"GET";let l=!1;const u=(n??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:o=!0}={}){const c="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(n)){const u=n.reduce((m,x)=>m.concat(Object.keys(x)),[]);if(u.length>0){const m=[...new Set(u)].map(x=>`"${x}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:c,defaultToNull:l=!0}={}){const u="POST",m=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),l||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(n)){const x=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(x.length>0){const f=[...new Set(x)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ei.default=r,ei}var Mo={},Ro={},Vv;function OI(){return Vv||(Vv=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.version=void 0,Ro.version="0.0.0-automated"),Ro}var Jv;function DI(){if(Jv)return Mo;Jv=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.DEFAULT_HEADERS=void 0;const s=OI();return Mo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`},Mo}var Wv;function FI(){if(Wv)return Qn;Wv=1;var s=Qn&&Qn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Qn,"__esModule",{value:!0});const t=s(jj()),r=s(Sf()),a=DI();class n{constructor(o,{headers:c={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),c),this.schemaName=l,this.fetch=u}from(o){const c=new URL(`${this.url}/${o}`);return new t.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:l=!1,get:u=!1,count:m}={}){let x;const f=new URL(`${this.url}/rpc/${o}`);let p;l||u?(x=l?"HEAD":"GET",Object.entries(c).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{f.searchParams.append(g,b)})):(x="POST",p=c);const v=Object.assign({},this.headers);return m&&(v.Prefer=`count=${m}`),new r.default({method:x,url:f,headers:v,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return Qn.default=n,Qn}var Hv;function LI(){if(Hv)return ct;Hv=1;var s=ct&&ct.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ct,"__esModule",{value:!0}),ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const t=s(FI());ct.PostgrestClient=t.default;const r=s(jj());ct.PostgrestQueryBuilder=r.default;const a=s(Sf());ct.PostgrestFilterBuilder=a.default;const n=s(yj());ct.PostgrestTransformBuilder=n.default;const i=s(bj());ct.PostgrestBuilder=i.default;const o=s(vj());return ct.PostgrestError=o.default,ct.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},ct}var $I=LI();const BI=Zh($I),{PostgrestClient:UI,PostgrestQueryBuilder:O9,PostgrestFilterBuilder:D9,PostgrestTransformBuilder:F9,PostgrestBuilder:L9,PostgrestError:$9}=BI;class zI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const qI="2.15.1",VI=`realtime-js/${qI}`,JI="1.0.0",bh=1e4,WI=1e3,HI=100;var Jo;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Jo||(Jo={}));var nt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(nt||(nt={}));var Nr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Nr||(Nr={}));var yh;(function(s){s.websocket="websocket"})(yh||(yh={}));var vn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(vn||(vn={}));class GI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const c=a.decode(t.slice(o,o+n));o=o+n;const l=a.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:c,event:l,payload:u}}}class wj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $s;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})($s||($s={}));const Gv=(s,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,o)=>(i[o]=XI(o,s,t,n),i),{})},XI=(s,t,r,a)=>{const n=t.find(c=>c.name===s),i=n==null?void 0:n.type,o=r[s];return i&&!a.includes(i)?Nj(i,o):jh(o)},Nj=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return QI(t,r)}switch(s){case $s.bool:return YI(t);case $s.float4:case $s.float8:case $s.int2:case $s.int4:case $s.int8:case $s.numeric:case $s.oid:return ZI(t);case $s.json:case $s.jsonb:return KI(t);case $s.timestamp:return e6(t);case $s.abstime:case $s.date:case $s.daterange:case $s.int4range:case $s.int8range:case $s.money:case $s.reltime:case $s.text:case $s.time:case $s.timestamptz:case $s.timetz:case $s.tsrange:case $s.tstzrange:return jh(t);default:return jh(t)}},jh=s=>s,YI=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},ZI=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},KI=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},QI=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,a=s[r];if(s[0]==="{"&&a==="}"){let i;const o=s.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>Nj(t,c))}return s},e6=s=>typeof s=="string"?s.replace(" ","T"):s,_j=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class dm{constructor(t,r,a={},n=bh){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xv;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Xv||(Xv={}));class Wo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wo.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Wo.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Wo.syncDiff(this.state,n,i,o),c())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),o=this.transformState(r),c={},l={};return this.map(i,(u,m)=>{o[u]||(l[u]=m)}),this.map(o,(u,m)=>{const x=i[u];if(x){const f=m.map(b=>b.presence_ref),p=x.map(b=>b.presence_ref),v=m.filter(b=>p.indexOf(b.presence_ref)<0),g=x.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(c[u]=v),g.length>0&&(l[u]=g)}else c[u]=m}),this.syncDiff(i,{joins:c,leaves:l},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(c,l)=>{var u;const m=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(l),m.length>0){const x=t[c].map(p=>p.presence_ref),f=m.filter(p=>x.indexOf(p.presence_ref)<0);t[c].unshift(...f)}a(c,m,l)}),this.map(o,(c,l)=>{let u=t[c];if(!u)return;const m=l.map(x=>x.presence_ref);u=u.filter(x=>m.indexOf(x.presence_ref)<0),t[c]=u,n(c,u,l),u.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yv;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Yv||(Yv={}));var Ho;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ho||(Ho={}));var ua;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class Cf{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new dm(this,Nr.join,this.params,this.timeout),this.rejoinTimer=new wj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Wo(this),this.broadcastEndpointURL=_j(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:i,presence:o,private:c}}=this.params,l=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Ho.PRESENCE]&&this.bindings[Ho.PRESENCE].length>0,m={},x={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(ua.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:x},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(ua.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,g=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,b=[];for(let w=0;w<g;w++){const y=v[w],{filter:{event:_,schema:N,table:C,filter:R}}=y,E=f&&f[w];if(E&&E.event===_&&E.schema===N&&E.table===C&&E.filter===R)b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(ua.SUBSCRIBED);return}}).receive("error",f=>{this.state=nt.errored,t==null||t(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===nt.joined&&t===Ho.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new dm(this,Nr.leave,{},t),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dm(this,t,r,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>HI){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const o=t.toLocaleLowerCase(),{close:c,error:l,leave:u,join:m}=Nr;if(a&&[c,l,u,m].indexOf(o)>=0&&a!==this._joinRef())return;let f=this._onMessage(o,r,a);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var v,g,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,a)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,g,b,w,y,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const N=p.id,C=(v=p.filter)===null||v===void 0?void 0:v.event;return N&&((g=r.ids)===null||g===void 0?void 0:g.includes(N))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const N=(y=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:g,table:b,commit_timestamp:w,type:y,errors:_}=v;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:w,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(f,a)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&Cf.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nr.close,{},t)}_onError(t){this._on(Nr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gv(t.columns,t.old_record)),r}}const Zv=()=>{},Tc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s6=[1e3,2e3,5e3,1e4],t6=1e4,r6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a6{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bh,this.transport=null,this.heartbeatIntervalMs=Tc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zv,this.ref=0,this.reconnectTimer=null,this.logger=Zv,this.conn=null,this.sendBuffer=[],this.serializer=new GI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>ms(async()=>{const{default:c}=await Promise.resolve().then(()=>ro);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((a=r==null?void 0:r.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${yh.websocket}`,this.httpEndpoint=_j(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:JI}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Jo.connecting:return vn.Connecting;case Jo.open:return vn.Open;case Jo.closing:return vn.Closing;default:return vn.Closed}}isConnected(){return this.connectionState()===vn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new Cf(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(WI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:i,ref:o}=r,c=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${a} ${n} ${c}`.trim(),i),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(n,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([r6],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:VI};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(Nr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new wj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,n,i,o,c,l,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:bh,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Tc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>s6[m-1]||t6,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(m,x)=>x(JSON.stringify(m)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class kf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class n6 extends kf{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wh extends kf{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var i6=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};const Sj=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>ms(async()=>{const{default:a}=await Promise.resolve().then(()=>ro);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},o6=()=>i6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ms(()=>Promise.resolve().then(()=>ro),void 0)).Response:Response}),Nh=s=>{if(Array.isArray(s))return s.map(r=>Nh(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Nh(a)}),t},l6=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Fn=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};const um=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),c6=(s,t,r)=>Fn(void 0,void 0,void 0,function*(){const a=yield o6();s instanceof a&&!(r!=null&&r.noResolveJson)?s.json().then(n=>{const i=s.status||500,o=(n==null?void 0:n.statusCode)||i+"";t(new n6(um(n),i,o))}).catch(n=>{t(new wh(um(n),n))}):t(new wh(um(s),s))}),d6=(s,t,r,a)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!a?n:(l6(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,Object.assign(Object.assign({},n),r))};function pl(s,t,r,a,n,i){return Fn(this,void 0,void 0,function*(){return new Promise((o,c)=>{s(r,d6(t,a,n,i)).then(l=>{if(!l.ok)throw l;return a!=null&&a.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>c6(l,c,a))})})}function xd(s,t,r,a){return Fn(this,void 0,void 0,function*(){return pl(s,"GET",t,r,a)})}function ma(s,t,r,a,n){return Fn(this,void 0,void 0,function*(){return pl(s,"POST",t,a,n,r)})}function _h(s,t,r,a,n){return Fn(this,void 0,void 0,function*(){return pl(s,"PUT",t,a,n,r)})}function u6(s,t,r,a){return Fn(this,void 0,void 0,function*(){return pl(s,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Cj(s,t,r,a,n){return Fn(this,void 0,void 0,function*(){return pl(s,"DELETE",t,a,n,r)})}var Ft=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};const m6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class h6{constructor(t,r={},a,n){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Sj(n)}uploadOrUpdate(t,r,a,n){return Ft(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Kv),n);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=a,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(c=Object.assign(Object.assign({},c),n.headers));const u=this._removeEmptyFolders(r),m=this._getFinalPath(u),x=yield(t=="PUT"?_h:ma)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:x.Id,fullPath:x.Key},error:null}}catch(i){if(dt(i))return{data:null,error:i};throw i}})}upload(t,r,a){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return Ft(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Kv.upsert},n),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&a instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",a)):typeof FormData<"u"&&a instanceof FormData?(l=a,l.append("cacheControl",u.cacheControl)):(l=a,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType);const x=yield _h(this.fetch,c.toString(),l,{headers:m});return{data:{path:i,fullPath:x.Key},error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return Ft(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield ma(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new kf("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}update(t,r,a){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return Ft(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}copy(t,r,a){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return Ft(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield ma(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return Ft(this,void 0,void 0,function*(){try{const n=yield ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}download(t,r){return Ft(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield xd(this.fetch,`${this.url}/${n}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(dt(c))return{data:null,error:c};throw c}})}info(t){return Ft(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield xd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nh(a),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}exists(t){return Ft(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield u6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(dt(a)&&a instanceof wh){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${a}${u}`)}}}remove(t){return Ft(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}list(t,r,a){return Ft(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},m6),r),{prefix:t||""});return{data:yield ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const f6="2.10.4",x6={"X-Client-Info":`storage-js/${f6}`};var ai=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};class p6{constructor(t,r={},a,n){const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},x6),r),this.fetch=Sj(a)}listBuckets(){return ai(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}})}getBucket(t){return ai(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ai(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return ai(this,void 0,void 0,function*(){try{return{data:yield _h(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}emptyBucket(t){return ai(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ai(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}}class g6 extends p6{constructor(t,r={},a,n){super(t,r,a,n)}from(t){return new h6(this.url,this.headers,t,this.fetch)}}const v6="2.55.0";let Fo="";typeof Deno<"u"?Fo="deno":typeof document<"u"?Fo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fo="react-native":Fo="node";const b6={"X-Client-Info":`supabase-js-${Fo}/${v6}`},y6={headers:b6},j6={schema:"public"},w6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N6={};var _6=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};const S6=s=>{let t;return s?t=s:typeof fetch>"u"?t=pj:t=fetch,(...r)=>t(...r)},C6=()=>typeof Headers>"u"?gj:Headers,k6=(s,t,r)=>{const a=S6(r),n=C6();return(i,o)=>_6(void 0,void 0,void 0,function*(){var c;const l=(c=yield t())!==null&&c!==void 0?c:s;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),a(i,Object.assign(Object.assign({},o),{headers:u}))})};var E6=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};function P6(s){return s.endsWith("/")?s:s+"/"}function T6(s,t){var r,a;const{db:n,auth:i,realtime:o,global:c}=s,{db:l,auth:u,realtime:m,global:x}=t,f={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},m),o),storage:{},global:Object.assign(Object.assign(Object.assign({},x),c),{headers:Object.assign(Object.assign({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(a=c==null?void 0:c.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>E6(this,void 0,void 0,function*(){return""})};return s.accessToken?f.accessToken=s.accessToken:delete f.accessToken,f}const kj="2.71.1",Ni=30*1e3,Sh=3,mm=Sh*Ni,I6="http://localhost:9999",A6="supabase.auth.token",M6={"X-Client-Info":`gotrue-js/${kj}`},Ch="X-Supabase-Api-Version",Ej={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O6=10*60*1e3;class Ef extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function ns(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class D6 extends Ef{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function F6(s){return ns(s)&&s.name==="AuthApiError"}class Pj extends Ef{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class an extends Ef{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class Oa extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L6(s){return ns(s)&&s.name==="AuthSessionMissingError"}class Ic extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ac extends an{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mc extends an{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $6(s){return ns(s)&&s.name==="AuthImplicitGrantRedirectError"}class Qv extends an{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kh extends an{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function hm(s){return ns(s)&&s.name==="AuthRetryableFetchError"}class eb extends an{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Eh extends an{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sb=` 	
\r=`.split(""),B6=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<sb.length;t+=1)s[sb[t].charCodeAt(0)]=-2;for(let t=0;t<pd.length;t+=1)s[pd[t].charCodeAt(0)]=t;return s})();function tb(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(pd[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(pd[a]),t.queuedBits-=6}}function Tj(s,t,r){const a=B6[s];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function rb(s){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{q6(o,a,r)};for(let o=0;o<s.length;o+=1)Tj(s.charCodeAt(o),n,i);return t.join("")}function U6(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function z6(s,t){for(let r=0;r<s.length;r+=1){let a=s.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(s.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}U6(a,t)}}function q6(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let a=1;a<6;a+=1)if((s>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function V6(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<s.length;n+=1)Tj(s.charCodeAt(n),r,a);return new Uint8Array(t)}function J6(s){const t=[];return z6(s,r=>t.push(r)),new Uint8Array(t)}function W6(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return s.forEach(n=>tb(n,r,a)),tb(null,r,a),t.join("")}function H6(s){return Math.round(Date.now()/1e3)+s}function G6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const yr=()=>typeof window<"u"&&typeof document<"u",fn={tested:!1,writable:!1},Ij=()=>{if(!yr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fn.tested)return fn.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),fn.tested=!0,fn.writable=!0}catch{fn.tested=!0,fn.writable=!1}return fn.writable};function X6(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const Aj=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>ms(async()=>{const{default:a}=await Promise.resolve().then(()=>ro);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},Y6=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",_i=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},xn=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Aa=async(s,t)=>{await s.removeItem(t)};class zd{constructor(){this.promise=new zd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}zd.promiseConstructor=Promise;function fm(s){const t=s.split(".");if(t.length!==3)throw new Eh("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!R6.test(t[a]))throw new Eh("JWT not in base64url format");return{header:JSON.parse(rb(t[0])),payload:JSON.parse(rb(t[1])),signature:V6(t[2]),raw:{header:t[0],payload:t[1]}}}async function Z6(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function K6(s,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function Q6(s){return("0"+s.toString(16)).substr(-2)}function eA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Q6).join("")}async function sA(s){const r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function tA(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await sA(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ni(s,t,r=!1){const a=eA();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await _i(s,`${t}-code-verifier`,n);const i=await tA(a);return[i,a===i?"plain":"s256"]}const rA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aA(s){const t=s.headers.get(Ch);if(!t||!t.match(rA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function nA(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function iA(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ii(s){if(!oA.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xm(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ab(s){return JSON.parse(JSON.stringify(s))}var lA=function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};const pn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),cA=[502,503,504];async function nb(s){var t;if(!Y6(s))throw new kh(pn(s),0);if(cA.includes(s.status))throw new kh(pn(s),s.status);let r;try{r=await s.json()}catch(i){throw new Pj(pn(i),i)}let a;const n=aA(s);if(n&&n.getTime()>=Ej["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new eb(pn(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Oa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new eb(pn(r),s.status,r.weak_password.reasons);throw new D6(pn(r),s.status||500,a)}const dA=(s,t,r,a)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function ps(s,t,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[Ch]||(i[Ch]=Ej["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await uA(s,t,r+c,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(l):{data:Object.assign({},l),error:null}}async function uA(s,t,r,a,n,i){const o=dA(t,a,n,i);let c;try{c=await s(r,Object.assign({},o))}catch(l){throw console.error(l),new kh(pn(l),0)}if(c.ok||await nb(c),a!=null&&a.noResolveJson)return c;try{return await c.json()}catch(l){await nb(l)}}function da(s){var t;let r=null;xA(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=H6(s.expires_in)));const a=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:a},error:null}}function ib(s){const t=da(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Fa(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function mA(s){return{data:s,error:null}}function hA(s){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=s,o=lA(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function fA(s){return s}function xA(s){return s.access_token&&s.refresh_token&&s.expires_in}const pm=["global","local","others"];var pA=function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};class gA{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Aj(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=pm[0]){if(pm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pm.join(", ")}`);try{return await ps(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await ps(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fa})}catch(a){if(ns(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=pA(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await ps(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:hA,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ns(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ps(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Fa})}catch(r){if(ns(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,o,c,l;try{const u={nextPage:null,lastPage:0,total:0},m=await ps(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:fA});if(m.error)throw m.error;const x=await m.json(),f=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},x),u),error:null}}catch(u){if(ns(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ii(t);try{return await ps(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Fa})}catch(r){if(ns(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ii(t);try{return await ps(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Fa})}catch(a){if(ns(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){ii(t);try{return await ps(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fa})}catch(a){if(ns(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){ii(t.userId);try{const{data:r,error:a}=await ps(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(ns(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ii(t.userId),ii(t.id);try{return{data:await ps(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ns(r))return{data:null,error:r};throw r}}}function ob(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}function vA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const oi={debug:!!(globalThis&&Ij()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class bA extends Mj{}async function yA(s,t,r){oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await r()}finally{oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new bA(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(oi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}vA();const jA={url:I6,storageKey:A6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lb(s,t,r){return await r()}const li={};class al{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=al.nextInstanceID,al.nextInstanceID+=1,this.instanceID>0&&yr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},jA),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new gA({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Aj(n.fetch),this.lock=n.lock||lb,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:yr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=yA:this.lock=lb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Ij()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ob(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=ob(this.memoryStorage)),yr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=li[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=li[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=X6(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),yr()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$6(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ns(r)?{error:r}:{error:new Pj("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:da}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ns(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:m,password:x,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ni(this.storage,this.storageKey)),i=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:m,password:x,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:da})}else if("phone"in t){const{phone:m,password:x,options:f}=t;i=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:x,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:da})}else throw new Ac("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ns(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:c}=t;r=await ps(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ib})}else if("phone"in t){const{phone:i,password:o,options:c}=t;r=await ps(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ib})}else throw new Ac("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ic}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(ns(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,n,i,o,c,l,u,m,x,f,p;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:b,wallet:w,statement:y,options:_}=t;let N;if(yr())if(typeof w=="object")N=w;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))N=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=w}const C=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const R=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),y?{statement:y}:null));let E;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")E=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)E=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(n=(a=_==null?void 0:_.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((x=(m=_==null?void 0:_.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||x===void 0)&&x.length?["Resources",..._.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const R=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=R}}try{const{data:b,error:w}=await ps(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:W6(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:da});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ic}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(ns(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await xn(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:o}=await ps(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:da});if(await Aa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ic}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(ns(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:o}=t,c=await ps(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:da}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ic}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(ns(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,o;try{if("email"in t){const{email:c,options:l}=t;let u=null,m=null;this.flowType==="pkce"&&([u,m]=await ni(this.storage,this.storageKey));const{error:x}=await ps(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:m},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in t){const{phone:c,options:l}=t,{data:u,error:m}=await ps(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:m}}throw new Ac("You must provide either an email or phone number.")}catch(c){if(ns(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:c}=await ps(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:da});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(ns(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ni(this.storage,this.storageKey)),await ps(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:mA})}catch(i){if(ns(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Oa;const{error:n}=await ps(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(ns(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await ps(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:c}=await ps(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Ac("You must provide either an email or phone number and a type")}catch(r){if(ns(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<mm:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await xn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=xm()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,m)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,m))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ps(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Fa}):await this._useSession(async r=>{var a,n,i;const{data:o,error:c}=r;if(c)throw c;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oa}:await ps(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Fa})})}catch(r){if(ns(r))return L6(r)&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new Oa;const o=n.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await ni(this.storage,this.storageKey));const{data:u,error:m}=await ps(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:Fa});if(m)throw m;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(ns(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Oa;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:o}=fm(t.access_token);if(o.exp&&(a=o.exp,n=a<=r),n){const{session:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ns(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:c}=r;if(c)throw c;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Oa;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ns(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!yr())throw new Mc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Qv("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:c,expires_at:l,token_type:u}=t;if(!i||!c||!o||!u)throw new Mc("No session defined in URL");const m=Math.round(Date.now()/1e3),x=parseInt(c);let f=m+x;l&&(f=parseInt(l));const p=f-m;p*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${x}s`);const v=f-x;m-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,m):m-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,m);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:x,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(a){if(ns(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await xn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(F6(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=G6(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await ni(this.storage,this.storageKey,!0));try{return await ps(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ns(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ns(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var o,c,l,u,m;const{data:x,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ps(this.fetch,"GET",p,{headers:this.headers,jwt:(m=(u=x.session)===null||u===void 0?void 0:u.access_token)!==null&&m!==void 0?m:void 0})});if(n)throw n;return yr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ns(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)throw o;return await ps(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(ns(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await K6(async n=>(n>0&&await Z6(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await ps(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:da})),(n,i)=>{const o=200*Math.pow(2,n);return i&&hm(i)&&Date.now()+o-a<Ni})}catch(a){if(this._debug(r,"error",a),ns(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),yr()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await xn(this.storage,this.storageKey);if(n&&this.userStorage){let o=await xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await _i(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xm()}else if(n&&!n.user&&!n.user){const o=await xn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await Aa(this.storage,this.storageKey+"-user"),await _i(this.storage,this.storageKey,n)):n.user=xm()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<mm;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${mm}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),hm(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(n.access_token);!c&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Oa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new zd;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Oa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(n,"error",i),ns(i)){const o={session:null,error:i};return hm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await _i(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=ab(n);await _i(this.storage,this.storageKey,i)}else{const n=ab(r);await _i(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Aa(this.storage,this.storageKey),await Aa(this.storage,this.storageKey+"-code-verifier"),await Aa(this.storage,this.storageKey+"-user"),this.userStorage&&await Aa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ni}ms, refresh threshold is ${Sh} ticks`),n<=Sh&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Mj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await ni(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(c.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await ps(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ns(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await ps(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ns(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:c}=await ps(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(r){if(ns(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await ps(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ns(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=fm(n.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(l="aal2");const m=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(c=>c.kid===t);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(c=>c.kid===t),a&&this.jwks_cached_at+O6>n)return a;const{data:i,error:o}=await ps(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,a=i.keys.find(c=>c.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};a=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:c,payload:l}}=fm(a);r!=null&&r.allowExpired||nA(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(a);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const m=iA(n.alg),x=await crypto.subtle.importKey("jwk",u,m,!0,["verify"]);if(!await crypto.subtle.verify(m,x,o,J6(`${c}.${l}`)))throw new Eh("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}}}al.nextInstanceID=0;const wA=al;class NA extends wA{constructor(t){super(t)}}var _A=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{u(a.next(m))}catch(x){o(x)}}function l(m){try{u(a.throw(m))}catch(x){o(x)}}function u(m){m.done?i(m.value):n(m.value).then(c,l)}u((a=a.apply(s,t||[])).next())})};class SA{constructor(t,r,a){var n,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const c=P6(t),l=new URL(c);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,m={db:j6,realtime:N6,auth:Object.assign(Object.assign({},w6),{storageKey:u}),global:y6},x=T6(a??{},m);this.storageKey=(n=x.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=x.global.headers)!==null&&i!==void 0?i:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=x.auth)!==null&&o!==void 0?o:{},this.headers,x.global.fetch),this.fetch=k6(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new UI(new URL("rest/v1",l).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new g6(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new PI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return _A(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,storageKey:i,flowType:o,lock:c,debug:l},u,m){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NA({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,flowType:o,lock:c,debug:l,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new a6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CA=(s,t,r)=>new SA(s,t,r);function kA(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}kA()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const EA="https://vssomyuyhicaxsgiaupo.supabase.co",PA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",W=CA(EA,PA),TA=Object.freeze(Object.defineProperty({__proto__:null,supabase:W},Symbol.toStringTag,{value:"Module"}));console.log("🔥 AuthContext.tsx file is being loaded...");const Rj=d.createContext(void 0),Ss=()=>{const s=d.useContext(Rj);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},IA=({children:s})=>{console.log("🚀 AuthProvider component is mounting...");const[t,r]=d.useState(null),[a,n]=d.useState(null),[i,o]=d.useState(null),[c,l]=d.useState(!0),u=()=>{localStorage.removeItem("roam_user"),localStorage.removeItem("roam_customer"),localStorage.removeItem("roam_access_token"),localStorage.removeItem("roam_user_type")};d.useEffect(()=>{const T=async()=>{var A;try{console.log("AuthContext: Initializing with session restoration...");const O=localStorage.getItem("roam_user"),$=localStorage.getItem("roam_customer"),F=localStorage.getItem("roam_access_token"),q=localStorage.getItem("roam_user_type");if((O||$)&&F&&q){console.log("AuthContext: Found stored session and token",{hasUser:!!O,hasCustomer:!!$,userType:q});const{directSupabaseAPI:te}=await ms(async()=>{const{directSupabaseAPI:re}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:re}},[]);if(te.currentAccessToken=F,q==="provider"&&O){const re=JSON.parse(O);r(re),o("provider"),console.log("AuthContext: Provider session restored",re)}else if(q==="customer"&&$){const re=JSON.parse($);if(console.log("🔐 AuthContext: Customer session restored from localStorage",re),console.log("🔐 AuthContext: Customer user_id from localStorage:",re.user_id),!re.user_id)console.log("🔐 AuthContext: user_id missing from localStorage, clearing and fetching fresh data..."),u();else{n(re),o("customer"),l(!1);return}}l(!1);return}else(O||$)&&(!F||!q)&&(console.log("AuthContext: Found incomplete stored session, clearing data"),u());try{const{data:{session:te}}=await W.auth.getSession();if(te!=null&&te.user){console.log("AuthContext: Found active Supabase session, fetching provider...");const{data:re}=await W.from("providers").select("*").eq("user_id",te.user.id).eq("is_active",!0).single();if(re){const be={id:te.user.id,email:re.email,provider_id:re.id,business_id:re.business_id,location_id:re.location_id,provider_role:re.provider_role,first_name:re.first_name,last_name:re.last_name};r(be),o("provider"),localStorage.setItem("roam_user",JSON.stringify(be)),localStorage.setItem("roam_user_type","provider"),console.log("AuthContext: Provider session restored successfully")}else{console.log("Session user found, checking for customer profile",te.user.id);const{data:be,error:Me}=await W.from("customer_profiles").select("id, user_id, email, first_name, last_name, phone, image_url").eq("user_id",te.user.id).single();if(console.log("Customer profile query result:",{customerProfile:be,customerError:Me}),be){const je={id:be.id,user_id:be.user_id,email:be.email,customer_id:be.id,first_name:be.first_name,last_name:be.last_name,phone:be.phone,image_url:be.image_url};console.log("Customer data structure:",je),n(je),o("customer"),localStorage.setItem("roam_customer",JSON.stringify(je)),localStorage.setItem("roam_user_type","customer"),console.log("AuthContext: Customer session restored successfully")}else(A=te.user.app_metadata)!=null&&A.provider?(console.log("AuthContext: OAuth user without profile, creating customer profile..."),await w(te.user)):(console.log("AuthContext: No provider or customer profile found, clearing session"),u())}}else console.log("AuthContext: No active session, clearing stored data if any"),u()}catch(te){console.log("AuthContext: Error during session restoration:",te),u()}}catch(O){console.error("AuthContext: Error during initialization:",O)}finally{l(!1)}};console.log("🔐 AuthContext: useEffect triggered, initializing auth..."),T()},[]);const m=async(T,A)=>{var O,$;l(!0);try{console.log("AuthContext signIn: Starting authentication...");const{data:F,error:q}=await W.auth.signInWithPassword({email:T,password:A});if(q)throw console.error("AuthContext signIn: Auth error:",q),q.message==="Invalid login credentials"?new Error("Invalid email or password"):q.message.includes("Email not confirmed")?new Error("Please check your email and click the confirmation link before signing in."):q.message.includes("Too many requests")?new Error("Too many login attempts. Please wait a few minutes before trying again."):new Error(`Authentication failed: ${q.message}`);if(!F.user)throw console.error("AuthContext signIn: No user returned"),new Error("Authentication failed - no user returned");console.log("AuthContext signIn: Auth successful, fetching profile...");const{data:te,error:re}=await W.from("providers").select("*").eq("user_id",F.user.id).eq("is_active",!0).single();if(te&&!re){console.log("AuthContext signIn: Provider found:",te);const be={id:F.user.id,email:te.email,provider_id:te.id,business_id:te.business_id,location_id:te.location_id,provider_role:te.provider_role,first_name:te.first_name,last_name:te.last_name};r(be),o("provider"),localStorage.setItem("roam_user",JSON.stringify(be)),localStorage.setItem("roam_access_token",((O=F.session)==null?void 0:O.access_token)||""),localStorage.setItem("roam_user_type","provider")}else{console.log("AuthContext signIn: Provider not found, checking for business owner...");const{data:be,error:Me}=await W.from("business_profiles").select("*").eq("owner_user_id",F.user.id).eq("is_active",!0).single();if(be&&!Me){console.log("AuthContext signIn: Business owner found:",be);const je={id:F.user.id,email:F.user.email||be.contact_email,business_id:be.id,business_name:be.business_name,owner_user_id:be.owner_user_id,provider_role:"owner",first_name:be.owner_first_name,last_name:be.owner_last_name};r(je),o("provider"),localStorage.setItem("roam_user",JSON.stringify(je)),localStorage.setItem("roam_access_token",(($=F.session)==null?void 0:$.access_token)||""),localStorage.setItem("roam_user_type","provider")}else throw console.error("AuthContext signIn: No provider or business owner found",{providerError:(re==null?void 0:re.message)||re,businessError:(Me==null?void 0:Me.message)||Me,userEmail:F.user.email,userId:F.user.id}),await W.auth.signOut(),new Error("Account not found or inactive. Please contact support if you believe this is an error.")}console.log("AuthContext signIn: Provider state updated and persisted successfully")}catch(F){throw console.error("AuthContext signIn: Error:",F),F}finally{l(!1)}},x=async(T,A)=>{var O,$;l(!0);try{console.log("AuthContext signInCustomer: Starting authentication...");const{data:F,error:q}=await W.auth.signInWithPassword({email:T,password:A});if(q)throw console.error("AuthContext signInCustomer: Auth error:",q),q.message==="Invalid login credentials"?new Error("Invalid email or password"):q.message.includes("Email not confirmed")?new Error("Please check your email and click the confirmation link before signing in."):q.message.includes("Too many requests")?new Error("Too many login attempts. Please wait a few minutes before trying again."):new Error(`Authentication failed: ${q.message}`);if(!F.user)throw console.error("AuthContext signInCustomer: No user returned"),new Error("Authentication failed - no user returned");console.log("AuthContext signInCustomer: Auth successful, fetching customer profile...");const{data:te,error:re}=await W.from("customer_profiles").select("*").eq("user_id",F.user.id).single();if(re&&re.code!=="PGRST116")throw console.error("AuthContext signInCustomer: Error fetching customer profile:",re),new Error("Failed to fetch customer profile");let be;if(te)be={id:te.id,user_id:te.user_id,email:te.email,customer_id:te.id,first_name:te.first_name,last_name:te.last_name,phone:te.phone,image_url:te.image_url};else{console.log("AuthContext signInCustomer: Creating customer profile...");const je=(((O=F.user.email)==null?void 0:O.split("@")[0])||"").split("."),{data:Y,error:we}=await W.from("customer_profiles").insert({user_id:F.user.id,email:F.user.email||T,first_name:je[0]||"Customer",last_name:je[1]||""}).select().single();if(we)throw console.error("AuthContext signInCustomer: Error creating customer profile:",we),new Error("Failed to create customer profile");be={id:Y.id,email:Y.email,customer_id:Y.id,first_name:Y.first_name,last_name:Y.last_name,phone:Y.phone,image_url:Y.image_url}}n(be),o("customer"),localStorage.setItem("roam_customer",JSON.stringify(be)),localStorage.setItem("roam_access_token",(($=F.session)==null?void 0:$.access_token)||""),localStorage.setItem("roam_user_type","customer"),console.log("AuthContext signInCustomer: Customer state updated and persisted successfully")}catch(F){throw console.error("AuthContext signInCustomer: Error:",F),F}finally{l(!1)}},f=async T=>{l(!0);try{console.log("AuthContext signUpCustomer: Starting registration...");const{directSupabaseAPI:A}=await ms(async()=>{const{directSupabaseAPI:$}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:$}},[]),O=await A.signUpWithPassword(T.email,T.password);if(console.log("AuthContext signUpCustomer: Sign up response:",O),!O.user&&!O.session){console.log("AuthContext signUpCustomer: Email confirmation required");return}console.log("AuthContext signUpCustomer: Auth user created successfully"),console.log("AuthContext signUpCustomer: Customer registration completed successfully")}catch(A){throw console.error("AuthContext signUpCustomer: Error:",A),A}finally{l(!1)}},p=async()=>{l(!0);try{const T=`${window.location.origin}/home`,{data:A,error:O}=await W.auth.signInWithOAuth({provider:"google",options:{redirectTo:T,queryParams:{access_type:"offline",prompt:"consent",authuser:"0",login_hint:"",disable_hi_res:"1",flowName:"GlifWebSignIn"}}});if(O)throw console.error("Google sign-in error:",O),O}catch(T){throw console.error("Google sign-in error:",T),T}finally{l(!1)}},v=async(T,A)=>{var O;l(!0);try{console.log("AuthContext signInWithGoogleIdToken: Starting Google ID token authentication...");const{data:$,error:F}=await W.auth.signInWithIdToken({provider:"google",token:T,nonce:A});if(F)throw console.error("Google ID token sign-in error:",F),F;if($.user){console.log("AuthContext signInWithGoogleIdToken: Google authentication successful");const{data:q,error:te}=await W.from("customer_profiles").select("*").eq("user_id",$.user.id).single();if(te&&te.code!=="PGRST116")throw console.error("Error fetching customer profile:",te),new Error("Failed to fetch customer profile");if(!q)console.log("Creating customer profile from Google OAuth data..."),await w($.user);else{const re={id:q.id,user_id:q.user_id,email:q.email,customer_id:q.id,first_name:q.first_name,last_name:q.last_name,phone:q.phone,image_url:q.image_url};n(re),o("customer"),localStorage.setItem("roam_customer",JSON.stringify(re)),localStorage.setItem("roam_user_type","customer"),(O=$.session)!=null&&O.access_token&&localStorage.setItem("roam_access_token",$.session.access_token)}console.log("AuthContext signInWithGoogleIdToken: Authentication completed successfully")}}catch($){throw console.error("Google ID token sign-in error:",$),$}finally{l(!1)}},g=async()=>{l(!0);try{const T=`${window.location.origin}/home`,{data:A,error:O}=await W.auth.signInWithOAuth({provider:"apple",options:{redirectTo:T,queryParams:{access_type:"offline",prompt:"consent"}}});if(O)throw console.error("Apple sign-in error:",O),O;console.log("Apple OAuth initiated successfully")}catch(T){throw console.error("Apple sign-in error:",T),T}finally{l(!1)}},b=async T=>{l(!0);try{console.log("Resending verification email for:",T);const{error:A}=await W.auth.resend({type:"signup",email:T,options:{emailRedirectTo:window.location.origin}});if(A)throw console.error("Resend verification email error:",A),A;console.log("Verification email resent successfully")}catch(A){throw console.error("Resend verification email error:",A),A}finally{l(!1)}},w=async T=>{var A,O,$,F,q,te,re,be,Me,je,Y,we;try{console.log("Creating customer profile from OAuth user:",T);const{data:Q,error:pe}=await W.from("customer_profiles").insert({user_id:T.id,email:T.email,first_name:((O=(A=T.user_metadata)==null?void 0:A.full_name)==null?void 0:O.split(" ")[0])||((F=($=T.user_metadata)==null?void 0:$.name)==null?void 0:F.split(" ")[0])||"",last_name:((te=(q=T.user_metadata)==null?void 0:q.full_name)==null?void 0:te.split(" ").slice(1).join(" "))||((be=(re=T.user_metadata)==null?void 0:re.name)==null?void 0:be.split(" ").slice(1).join(" "))||"",phone:((Me=T.user_metadata)==null?void 0:Me.phone)||"",image_url:((je=T.user_metadata)==null?void 0:je.avatar_url)||((Y=T.user_metadata)==null?void 0:Y.picture)||"",date_of_birth:null,bio:null}).select().single();if(pe)throw console.error("Error creating customer profile:",pe),pe;const J={id:Q.id,user_id:Q.user_id,email:Q.email,customer_id:Q.id,first_name:Q.first_name,last_name:Q.last_name,phone:Q.phone,image_url:Q.image_url};return n(J),o("customer"),localStorage.setItem("roam_customer",JSON.stringify(J)),localStorage.setItem("roam_user_type","customer"),localStorage.setItem("roam_access_token",((we=(await W.auth.getSession()).data.session)==null?void 0:we.access_token)||""),console.log("AuthContext: OAuth customer profile created successfully"),J}catch(Q){throw console.error("Error creating OAuth customer profile:",Q),Q}},y=async T=>{if(!a)throw new Error("No customer logged in");l(!0);try{console.log("AuthContext updateCustomerProfile: Starting update...");const{directSupabaseAPI:A}=await ms(async()=>{const{directSupabaseAPI:F}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:F}},[]),O=localStorage.getItem("roam_access_token");if(O)A.currentAccessToken=O,console.log("AuthContext updateCustomerProfile: Using stored access token");else throw console.warn("AuthContext updateCustomerProfile: No access token found in localStorage"),await N(),new Error("Your session has expired. Please sign in again to continue.");try{console.log("AuthContext updateCustomerProfile: Updating database...",{customerId:a.customer_id,hasToken:!!A.currentAccessToken,updateData:{first_name:T.firstName,last_name:T.lastName,email:T.email,phone:T.phone||null,date_of_birth:T.dateOfBirth||null,bio:T.bio||null,image_url:T.imageUrl||null}});const{updateCustomerProfileViaEdgeFunction:F}=await ms(async()=>{const{updateCustomerProfileViaEdgeFunction:q}=await import("./directSupabase_new-CYaPd1cl.js");return{updateCustomerProfileViaEdgeFunction:q}},[]);await F(A.baseURL,A.apiKey,A.accessToken,a.customer_id,{first_name:T.firstName,last_name:T.lastName,email:T.email,phone:T.phone||null,date_of_birth:T.dateOfBirth||null,bio:T.bio||null,image_url:T.imageUrl||null}),console.log("AuthContext updateCustomerProfile: Database update successful")}catch(F){throw console.error("AuthContext updateCustomerProfile: Database update failed:",F),F.message&&(F.message.includes("Authentication failed")||F.message.includes("401"))?(console.log("AuthContext updateCustomerProfile: Authentication error detected, clearing session"),await N(),new Error("Your session has expired. Please sign in again to save your changes.")):F.message&&(F.message.includes("no longer valid in the authentication system")||F.message.includes("foreign key"))?(console.log("AuthContext updateCustomerProfile: User does not exist in auth system, clearing session"),await N(),new Error("Your account is no longer valid in the authentication system. Please sign up again to continue.")):F.message&&F.message.includes("profile already exists")?(console.log("AuthContext updateCustomerProfile: Duplicate profile detected"),new Error("A profile already exists for this account. Please refresh the page and try again.")):F.message&&F.message.includes("HTTP 409")?(console.log("AuthContext updateCustomerProfile: Database conflict detected"),new Error("A database conflict occurred. Please try again or contact support if the issue persists.")):new Error(`Database update failed: ${F.message||F}`)}const $={...a,first_name:T.firstName,last_name:T.lastName,email:T.email,phone:T.phone||null,image_url:T.imageUrl||a.image_url};n($),localStorage.setItem("roam_customer",JSON.stringify($)),console.log("AuthContext updateCustomerProfile: Profile updated successfully")}catch(A){throw console.error("AuthContext updateCustomerProfile: Error:",A),A}finally{l(!1)}},_=async T=>{if(!a)throw new Error("No customer logged in");l(!0);try{console.log("AuthContext uploadCustomerAvatar: Starting upload...");const{directSupabaseAPI:A}=await ms(async()=>{const{directSupabaseAPI:F}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:F}},[]),O=await A.uploadCustomerAvatar(a.customer_id,T);console.log("AuthContext uploadCustomerAvatar: Upload successful",O);const $={...a,image_url:O.publicUrl};return n($),localStorage.setItem("roam_customer",JSON.stringify($)),O.publicUrl}catch(A){throw console.error("AuthContext uploadCustomerAvatar: Error:",A),A}finally{l(!1)}},N=async()=>{try{const{directSupabaseAPI:T}=await ms(async()=>{const{directSupabaseAPI:A}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:A}},[]);await T.signOut()}catch(T){console.warn("SignOut error:",T)}finally{r(null),n(null),o(null),u()}},C=async()=>{console.log("refreshUser: Not implemented - using direct auth management")},R=T=>t?T.includes(t.provider_role):!1,E=T=>t?AA(t.provider_role).includes(T):!1,I=(t==null?void 0:t.provider_role)==="owner",M=(t==null?void 0:t.provider_role)==="dispatcher",U=(t==null?void 0:t.provider_role)==="provider",X={user:t,customer:a,userType:i,loading:c,signIn:m,signInCustomer:x,signUpCustomer:f,signInWithGoogle:p,signInWithGoogleIdToken:v,signInWithApple:g,resendVerificationEmail:b,updateCustomerProfile:y,uploadCustomerAvatar:_,signOut:N,refreshUser:C,hasRole:R,hasPermission:E,isOwner:I,isDispatcher:M,isProvider:U,isCustomer:i==="customer",isAuthenticated:!!(t||a)};return e.jsx(Rj.Provider,{value:X,children:s})},AA=s=>{const t=["view_own_profile","edit_own_profile"];switch(s){case"owner":return[...t,"manage_business_profile","manage_services_pricing","manage_staff","view_all_bookings","manage_all_bookings","reassign_bookings","view_all_provider_data","view_all_revenue","send_all_messages","manage_all_calendars","send_all_notifications","manage_integrations","view_analytics","manage_subscription","manage_locations"];case"dispatcher":return[...t,"manage_business_profile","manage_services_pricing","manage_staff","view_all_bookings","manage_all_bookings","reassign_bookings","view_all_provider_data","view_all_revenue","send_all_messages","manage_all_calendars","send_all_notifications","manage_integrations","view_analytics","manage_subscription","manage_locations"];case"provider":return[...t,"view_business_profile","view_services_pricing","view_own_bookings","manage_own_bookings","view_own_revenue","send_own_messages","manage_own_calendar","receive_notifications"];default:return t}},Lt=({children:s,allowedRoles:t=[],requiredPermissions:r=[],redirectTo:a="/provider-portal",fallback:n=null})=>{const{user:i,customer:o,userType:c,loading:l}=Ss(),u=ya(),m=!!(i||o);if(l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white rounded-full"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Loading..."})]})});if(!m){const x=u.pathname==="/my-bookings"?"/":a;return e.jsx(fh,{to:x,state:{from:u},replace:!0})}if(t.length>0&&c==="provider"&&i&&!t.includes(i.provider_role))return n||e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-foreground/70 mb-6",children:"You don't have permission to access this area. Contact your administrator if you believe this is an error."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-roam-blue text-white rounded-lg hover:bg-roam-blue/90",children:"Go Back"})]})});if(r.length>0&&c==="provider"){const{hasPermission:x}=Ss();if(!r.every(p=>x(p)))return n||e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Insufficient Permissions"}),e.jsx("p",{className:"text-foreground/70 mb-6",children:"You don't have the required permissions to perform this action."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-roam-blue text-white rounded-lg hover:bg-roam-blue/90",children:"Go Back"})]})})}return e.jsx(e.Fragment,{children:s})},cb=()=>{var l,u;const{user:s,customer:t,userType:r,loading:a}=Ss(),n=ya();if(a)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white rounded-full"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Redirecting..."})]})});if(!s&&!t)return e.jsx(fh,{to:"/provider-portal",replace:!0});const o=(()=>{if(r==="customer")return"/";if(s)switch(s.provider_role){case"owner":return"/owner/dashboard";case"dispatcher":return"/dispatcher/dashboard";case"provider":return"/provider/dashboard";default:return"/provider-portal"}return"/provider-portal"})(),c=((u=(l=n.state)==null?void 0:l.from)==null?void 0:u.pathname)||o;return e.jsx(fh,{to:c,replace:!0})};async function Oj(){try{const{data:s,error:t}=await W.from("system_config").select("config_key, config_value").in("config_key",["favicon","site_logo"]);if(t)return console.error("Error fetching system config:",t),{};const r={};return s==null||s.forEach(a=>{a.config_key==="favicon"?r.favicon=a.config_value:a.config_key==="site_logo"&&(r.site_logo=a.config_value)}),r}catch(s){return console.error("Error fetching system config:",s),{}}}function MA(s){try{document.querySelectorAll('link[rel*="icon"]').forEach(a=>a.remove());const r=document.createElement("link");r.rel="icon",r.type="image/x-icon",r.href=s,document.head.appendChild(r),console.log("✅ Favicon updated:",s)}catch(t){console.error("❌ Error updating favicon:",t)}}async function RA(){console.log("🎨 Initializing system branding...");const s=await Oj();return s.favicon&&MA(s.favicon),s.site_logo&&console.log("🖼️ Site logo URL:",s.site_logo),s}function Dj(){const[s,t]=d.useState({}),[r,a]=d.useState(!0),[n,i]=d.useState(null);return d.useEffect(()=>{(async()=>{try{a(!0),i(null);const l=await RA();t(l),console.log("✅ System config loaded:",l)}catch(l){console.error("❌ Error loading system config:",l),i(l.message||"Failed to load system configuration")}finally{a(!1)}})()},[]),{config:s,loading:r,error:n,refreshConfig:async()=>{try{a(!0);const c=await Oj();t(c)}catch(c){i(c.message||"Failed to refresh system configuration")}finally{a(!1)}},favicon:s.favicon,siteLogo:s.site_logo}}function OA(){const{config:s,loading:t,error:r}=Dj();return d.useEffect(()=>{!t&&!r&&(console.log("🎨 System branding initialized successfully"),s.site_logo&&console.log("🖼️ Site logo available:",s.site_logo),s.favicon&&console.log("🔗 Favicon updated:",s.favicon)),r&&console.warn("⚠️ System branding initialization failed:",r)},[s,t,r]),null}const nl=ml("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=d.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...n},i)=>{const o=a?Yr:"button";return e.jsx(o,{className:Oe(nl({variant:t,size:r,className:s})),ref:i,...n})});P.displayName="Button";const V=d.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:Oe("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));V.displayName="Card";const Se=d.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:Oe("flex flex-col space-y-1.5 p-6",s),...t}));Se.displayName="CardHeader";const Ce=d.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:Oe("text-2xl font-semibold leading-none tracking-tight",s),...t}));Ce.displayName="CardTitle";const sd=d.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:Oe("text-sm text-muted-foreground",s),...t}));sd.displayName="CardDescription";const K=d.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:Oe("p-6 pt-0",s),...t}));K.displayName="CardContent";const DA=d.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:Oe("flex items-center p-6 pt-0",s),...t}));DA.displayName="CardFooter";const FA=ml("inline-flex items-center rounded-full border px-3 py-1 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 capitalize",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ge({className:s,variant:t,icon:r,children:a,...n}){return e.jsxs("div",{className:Oe(FA({variant:t}),s),...n,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),a]})}const LA=async()=>{const s=btoa(String.fromCharCode(...crypto.getRandomValues(new Uint8Array(32)))),r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r),i=Array.from(new Uint8Array(a)).map(o=>o.toString(16).padStart(2,"0")).join("");return[s,i]},Fj=({clientId:s,onSuccess:t,onError:r})=>{const{customer:a,signInWithGoogleIdToken:n}=Ss(),i=d.useRef(!1),o=d.useRef(!1);return d.useEffect(()=>{if(a)return;const c=()=>{if(i.current)return;const u=document.createElement("script");u.src="https://accounts.google.com/gsi/client",u.async=!0,u.defer=!0,u.onload=l,document.head.appendChild(u),i.current=!0},l=async()=>{var u,m,x,f;if(!(o.current||!((m=(u=window.google)==null?void 0:u.accounts)!=null&&m.id)))try{console.log("Initializing Google One Tap",{clientId:s,origin:window.location.origin,hostname:window.location.hostname});const[p,v]=await LA();window.google.accounts.id.initialize({client_id:s,callback:async g=>{try{if(console.log("Google One Tap callback received"),n)await n(g.credential,p);else{const{supabase:b}=await ms(async()=>{const{supabase:_}=await Promise.resolve().then(()=>TA);return{supabase:_}},void 0),{data:w,error:y}=await b.auth.signInWithIdToken({provider:"google",token:g.credential,nonce:p});if(y)throw y;console.log("Successfully signed in with Google One Tap")}t==null||t()}catch(b){console.error("Error signing in with Google One Tap:",b),r==null||r(b)}},nonce:v,auto_select:!1,cancel_on_tap_outside:!0,use_fedcm_for_prompt:!1}),window.google.accounts.id.prompt(g=>{if(g.isNotDisplayed()){const b=g.getNotDisplayedReason();console.log("Google One Tap not displayed:",b),(b.includes("origin")||b.includes("domain"))&&console.warn("Google OAuth origin error detected. Check that the current domain is configured in Google Cloud Console:",window.location.origin)}else g.isSkippedMoment()?console.log("Google One Tap skipped:",g.getSkippedReason()):g.isDismissedMoment()&&console.log("Google One Tap dismissed:",g.getDismissedReason())}),o.current=!0}catch(p){console.error("Error initializing Google One Tap:",p),((x=p.message)!=null&&x.includes("origin")||(f=p.message)!=null&&f.includes("domain"))&&console.error("Google OAuth Configuration Error:",`The current domain (${window.location.origin}) is not authorized for this Google Client ID.`,"Please add this domain to the OAuth consent screen in Google Cloud Console."),r==null||r(p)}};return c(),()=>{var u,m;(m=(u=window.google)==null?void 0:u.accounts)!=null&&m.id&&window.google.accounts.id.cancel()}},[s,a,t,r,n]),null};function $A({className:s="",maxPosts:t=6}){const[r,a]=d.useState([]),[n,i]=d.useState(!0),[o,c]=d.useState(null),[l,u]=d.useState("");d.useEffect(()=>{m()},[t]);const m=async()=>{try{i(!0),c(null);const f=!1,p=await fetch(`/api/instagram-feed?limit=${t}`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const v=await p.json();if(v.success)a(v.data),u(v.source),console.log(`Instagram data loaded from: ${v.source}`);else throw new Error(v.error||"Failed to fetch Instagram data")}catch(f){console.error("Error fetching Instagram posts:",f),c(f.message),a([])}finally{i(!1)}},x=(f,p=80)=>f.length<=p?f:f.substring(0,p)+"...";return e.jsxs("div",{className:`w-full ${s}`,children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(zo,{className:"w-8 h-8 text-roam-blue"}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground",children:"Follow Our Journey"})]}),e.jsx("p",{className:"text-xl text-foreground/70 max-w-2xl mx-auto mb-6",children:"Stay connected with ROAM on Instagram for the latest updates, client transformations, and behind-the-scenes content."}),e.jsx(P,{asChild:!0,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold px-6 py-3",children:e.jsxs("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(zo,{className:"w-5 h-5"}),"Follow @roam_yourbestlife",e.jsx(Wa,{className:"w-4 h-4"})]})})]}),n&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(rt,{className:"w-8 h-8 animate-spin text-roam-blue"}),e.jsx("span",{className:"ml-2 text-foreground/70",children:"Loading Instagram posts..."})]}),o&&!n&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ht,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Unable to load Instagram posts"}),e.jsx("p",{className:"text-foreground/70 mb-4",children:"Don't worry! You can still visit our Instagram directly."}),e.jsx(P,{onClick:m,variant:"outline",className:"mr-3",children:"Try Again"}),e.jsx(P,{asChild:!0,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:e.jsx("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",children:"Visit Instagram"})})]}),!n&&r.length>0&&l&&e.jsx("div",{className:"text-center mb-6",children:e.jsxs("span",{className:"text-xs text-foreground/50 bg-foreground/5 px-2 py-1 rounded",children:["Data source:"," ",l==="instagram_api"?"Live Instagram API":"Fallback Content"]})}),!n&&!o&&r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(f=>e.jsxs(V,{className:"overflow-hidden group cursor-pointer hover:shadow-xl transition-all duration-300 border-border/50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f.media_url,alt:"Instagram post",className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cr,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:f.likes||0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:f.comments||0})]})]}),e.jsx("p",{className:"text-sm font-medium",children:"View on Instagram"})]})})]}),e.jsxs(K,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-foreground/80 leading-relaxed",children:x(f.caption||"")}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cr,{className:"w-4 h-4"}),e.jsx("span",{children:f.likes||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:f.comments||0})]})]}),e.jsx("a",{href:f.permalink,target:"_blank",rel:"noopener noreferrer",className:"text-roam-blue hover:text-roam-blue/80 transition-colors",children:e.jsx(Wa,{className:"w-4 h-4"})})]})]})]},f.id))}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("p",{className:"text-foreground/70 mb-4",children:"Want to see more? Check out our full Instagram profile!"}),e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:["View More Posts",e.jsx(Wa,{className:"w-4 h-4"})]})})]})]}),!n&&!o&&r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zo,{className:"w-16 h-16 text-foreground/30 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No posts available"}),e.jsx("p",{className:"text-foreground/70 mb-4",children:"Check out our Instagram profile for the latest content!"}),e.jsx(P,{asChild:!0,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:e.jsx("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",children:"Visit Instagram"})})]})]})}var BA=d.createContext(void 0);function ao(s){const t=d.useContext(BA);return s||t||"ltr"}var gm="rovingFocusGroup.onEntryFocus",UA={bubbles:!1,cancelable:!0},qd="RovingFocusGroup",[Ph,Lj,zA]=kd(qd),[qA,no]=ft(qd,[zA]),[VA,JA]=qA(qd),$j=d.forwardRef((s,t)=>e.jsx(Ph.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Ph.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(WA,{...s,ref:t})})}));$j.displayName=qd;var WA=d.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:n=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...x}=s,f=d.useRef(null),p=qe(t,f),v=ao(i),[g=null,b]=hr({prop:o,defaultProp:c,onChange:l}),[w,y]=d.useState(!1),_=Ns(u),N=Lj(r),C=d.useRef(!1),[R,E]=d.useState(0);return d.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(gm,_),()=>I.removeEventListener(gm,_)},[_]),e.jsx(VA,{scope:r,orientation:a,dir:v,loop:n,currentTabStopId:g,onItemFocus:d.useCallback(I=>b(I),[b]),onItemShiftTab:d.useCallback(()=>y(!0),[]),onFocusableItemAdd:d.useCallback(()=>E(I=>I+1),[]),onFocusableItemRemove:d.useCallback(()=>E(I=>I-1),[]),children:e.jsx(Ae.div,{tabIndex:w||R===0?-1:0,"data-orientation":a,...x,ref:p,style:{outline:"none",...s.style},onMouseDown:ye(s.onMouseDown,()=>{C.current=!0}),onFocus:ye(s.onFocus,I=>{const M=!C.current;if(I.target===I.currentTarget&&M&&!w){const U=new CustomEvent(gm,UA);if(I.currentTarget.dispatchEvent(U),!U.defaultPrevented){const D=N().filter(O=>O.focusable),z=D.find(O=>O.active),X=D.find(O=>O.id===g),A=[z,X,...D].filter(Boolean).map(O=>O.ref.current);zj(A,m)}}C.current=!1}),onBlur:ye(s.onBlur,()=>y(!1))})})}),Bj="RovingFocusGroupItem",Uj=d.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:n=!1,tabStopId:i,...o}=s,c=Ut(),l=i||c,u=JA(Bj,r),m=u.currentTabStopId===l,x=Lj(r),{onFocusableItemAdd:f,onFocusableItemRemove:p}=u;return d.useEffect(()=>{if(a)return f(),()=>p()},[a,f,p]),e.jsx(Ph.ItemSlot,{scope:r,id:l,focusable:a,active:n,children:e.jsx(Ae.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:ye(s.onMouseDown,v=>{a?u.onItemFocus(l):v.preventDefault()}),onFocus:ye(s.onFocus,()=>u.onItemFocus(l)),onKeyDown:ye(s.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=XA(v,u.orientation,u.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=x().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const y=w.indexOf(v.currentTarget);w=u.loop?YA(w,y+1):w.slice(y+1)}setTimeout(()=>zj(w))}})})})});Uj.displayName=Bj;var HA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GA(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function XA(s,t,r){const a=GA(s.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return HA[a]}function zj(s,t=!1){const r=document.activeElement;for(const a of s)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function YA(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var Pf=$j,Tf=Uj,If="Tabs",[ZA,B9]=ft(If,[no]),qj=no(),[KA,Af]=ZA(If),Vj=d.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,onValueChange:n,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:l="automatic",...u}=s,m=ao(c),[x,f]=hr({prop:a,onChange:n,defaultProp:i});return e.jsx(KA,{scope:r,baseId:Ut(),value:x,onValueChange:f,orientation:o,dir:m,activationMode:l,children:e.jsx(Ae.div,{dir:m,"data-orientation":o,...u,ref:t})})});Vj.displayName=If;var Jj="TabsList",Wj=d.forwardRef((s,t)=>{const{__scopeTabs:r,loop:a=!0,...n}=s,i=Af(Jj,r),o=qj(r);return e.jsx(Pf,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:a,children:e.jsx(Ae.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});Wj.displayName=Jj;var Hj="TabsTrigger",Gj=d.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,disabled:n=!1,...i}=s,o=Af(Hj,r),c=qj(r),l=Zj(o.baseId,a),u=Kj(o.baseId,a),m=a===o.value;return e.jsx(Tf,{asChild:!0,...c,focusable:!n,active:m,children:e.jsx(Ae.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:l,...i,ref:t,onMouseDown:ye(s.onMouseDown,x=>{!n&&x.button===0&&x.ctrlKey===!1?o.onValueChange(a):x.preventDefault()}),onKeyDown:ye(s.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&o.onValueChange(a)}),onFocus:ye(s.onFocus,()=>{const x=o.activationMode!=="manual";!m&&!n&&x&&o.onValueChange(a)})})})});Gj.displayName=Hj;var Xj="TabsContent",Yj=d.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,forceMount:n,children:i,...o}=s,c=Af(Xj,r),l=Zj(c.baseId,a),u=Kj(c.baseId,a),m=a===c.value,x=d.useRef(m);return d.useEffect(()=>{const f=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(xt,{present:n||m,children:({present:f})=>e.jsx(Ae.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:x.current?"0s":void 0},children:f&&i})})});Yj.displayName=Xj;function Zj(s,t){return`${s}-trigger-${t}`}function Kj(s,t){return`${s}-content-${t}`}var QA=Vj,Qj=Wj,ew=Gj,sw=Yj;const Pr=QA,fr=d.forwardRef(({className:s,...t},r)=>e.jsx(Qj,{ref:r,className:Oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));fr.displayName=Qj.displayName;const hs=d.forwardRef(({className:s,...t},r)=>e.jsx(ew,{ref:r,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));hs.displayName=ew.displayName;const ds=d.forwardRef(({className:s,...t},r)=>e.jsx(sw,{ref:r,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ds.displayName=sw.displayName;function Th(s,[t,r]){return Math.min(r,Math.max(t,s))}var e3="DismissableLayer",Ih="dismissableLayer.update",s3="dismissableLayer.pointerDownOutside",t3="dismissableLayer.focusOutside",db,tw=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rw=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(tw),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=n3(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=i3(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(db=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),ub(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=db)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),ub())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener(Ih,E),()=>document.removeEventListener(Ih,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});rw.displayName=e3;var r3="DismissableLayerBranch",a3=d.forwardRef((s,t)=>{const r=d.useContext(tw),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});a3.displayName=r3;function n3(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){aw(s3,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function i3(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&aw(t3,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function ub(){const s=new CustomEvent(Ih);document.dispatchEvent(s)}function aw(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var vm=0;function o3(){d.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??mb()),document.body.insertAdjacentElement("beforeend",s[1]??mb()),vm++,()=>{vm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),vm--}},[])}function mb(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",s}var bm="focusScope.autoFocusOnMount",ym="focusScope.autoFocusOnUnmount",hb={bubbles:!1,cancelable:!0},l3="FocusScope",io=d.forwardRef((s,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...o}=s,[c,l]=d.useState(null),u=Ns(n),m=Ns(i),x=d.useRef(null),f=qe(t,g=>l(g)),p=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(a){let g=function(_){if(p.paused||!c)return;const N=_.target;c.contains(N)?x.current=N:Da(x.current,{select:!0})},b=function(_){if(p.paused||!c)return;const N=_.relatedTarget;N!==null&&(c.contains(N)||Da(x.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&Da(c)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),y.disconnect()}}},[a,c,p.paused]),d.useEffect(()=>{if(c){xb.add(p);const g=document.activeElement;if(!c.contains(g)){const w=new CustomEvent(bm,hb);c.addEventListener(bm,u),c.dispatchEvent(w),w.defaultPrevented||(c3(f3(nw(c)),{select:!0}),document.activeElement===g&&Da(c))}return()=>{c.removeEventListener(bm,u),setTimeout(()=>{const w=new CustomEvent(ym,hb);c.addEventListener(ym,m),c.dispatchEvent(w),w.defaultPrevented||Da(g??document.body,{select:!0}),c.removeEventListener(ym,m),xb.remove(p)},0)}}},[c,u,m,p]);const v=d.useCallback(g=>{if(!r&&!a||p.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(b&&w){const y=g.currentTarget,[_,N]=d3(y);_&&N?!g.shiftKey&&w===N?(g.preventDefault(),r&&Da(_,{select:!0})):g.shiftKey&&w===_&&(g.preventDefault(),r&&Da(N,{select:!0})):w===y&&g.preventDefault()}},[r,a,p.paused]);return e.jsx(Ae.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});io.displayName=l3;function c3(s,{select:t=!1}={}){const r=document.activeElement;for(const a of s)if(Da(a,{select:t}),document.activeElement!==r)return}function d3(s){const t=nw(s),r=fb(t,s),a=fb(t.reverse(),s);return[r,a]}function nw(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fb(s,t){for(const r of s)if(!u3(r,{upTo:t}))return r}function u3(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function m3(s){return s instanceof HTMLInputElement&&"select"in s}function Da(s,{select:t=!1}={}){if(s&&s.focus){const r=document.activeElement;s.focus({preventScroll:!0}),s!==r&&m3(s)&&t&&s.select()}}var xb=h3();function h3(){let s=[];return{add(t){const r=s[0];t!==r&&(r==null||r.pause()),s=pb(s,t),s.unshift(t)},remove(t){var r;s=pb(s,t),(r=s[0])==null||r.resume()}}}function pb(s,t){const r=[...s],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function f3(s){return s.filter(t=>t.tagName!=="A")}var x3="Portal",iw=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});iw.displayName=x3;function Vd(s){const t=d.useRef({value:s,previous:s});return d.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var p3=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},ci=new WeakMap,Rc=new WeakMap,Oc={},jm=0,ow=function(s){return s&&(s.host||ow(s.parentNode))},g3=function(s,t){return t.map(function(r){if(s.contains(r))return r;var a=ow(r);return a&&s.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",s,". Doing nothing"),null)}).filter(function(r){return!!r})},v3=function(s,t,r,a){var n=g3(t,Array.isArray(s)?s:[s]);Oc[r]||(Oc[r]=new WeakMap);var i=Oc[r],o=[],c=new Set,l=new Set(n),u=function(x){!x||c.has(x)||(c.add(x),u(x.parentNode))};n.forEach(u);var m=function(x){!x||l.has(x)||Array.prototype.forEach.call(x.children,function(f){if(c.has(f))m(f);else try{var p=f.getAttribute(a),v=p!==null&&p!=="false",g=(ci.get(f)||0)+1,b=(i.get(f)||0)+1;ci.set(f,g),i.set(f,b),o.push(f),g===1&&v&&Rc.set(f,!0),b===1&&f.setAttribute(r,"true"),v||f.setAttribute(a,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return m(t),c.clear(),jm++,function(){o.forEach(function(x){var f=ci.get(x)-1,p=i.get(x)-1;ci.set(x,f),i.set(x,p),f||(Rc.has(x)||x.removeAttribute(a),Rc.delete(x)),p||x.removeAttribute(r)}),jm--,jm||(ci=new WeakMap,ci=new WeakMap,Rc=new WeakMap,Oc={})}},gl=function(s,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(s)?s:[s]),n=p3(s);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live]"))),v3(a,n,r,"aria-hidden")):function(){return null}},_s=function(){return _s=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_s.apply(this,arguments)};function oo(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r}function vl(s,t,r){if(r||arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return s.concat(i||Array.prototype.slice.call(t))}var Xa="right-scroll-bar-position",Ya="width-before-scroll-bar",b3="with-scroll-bars-hidden",y3="--removed-body-scroll-bar-size";function wm(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function j3(s,t){var r=d.useState(function(){return{value:s,callback:t,facade:{get current(){return r.value},set current(a){var n=r.value;n!==a&&(r.value=a,r.callback(a,n))}}}})[0];return r.callback=t,r.facade}var w3=typeof window<"u"?d.useLayoutEffect:d.useEffect,gb=new WeakMap;function bl(s,t){var r=j3(null,function(a){return s.forEach(function(n){return wm(n,a)})});return w3(function(){var a=gb.get(r);if(a){var n=new Set(a),i=new Set(s),o=r.current;n.forEach(function(c){i.has(c)||wm(c,null)}),i.forEach(function(c){n.has(c)||wm(c,o)})}gb.set(r,s)},[s]),r}function N3(s){return s}function _3(s,t){t===void 0&&(t=N3);var r=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:s},useMedium:function(i){var o=t(i,a);return r.push(o),function(){r=r.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(a=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(c){return i(c)},filter:function(){return r}}},assignMedium:function(i){a=!0;var o=[];if(r.length){var c=r;r=[],c.forEach(i),o=r}var l=function(){var m=o;o=[],m.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(m){o.push(m),u()},filter:function(m){return o=o.filter(m),r}}}};return n}function yl(s){s===void 0&&(s={});var t=_3(null);return t.options=_s({async:!0,ssr:!1},s),t}var lw=function(s){var t=s.sideCar,r=oo(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return d.createElement(a,_s({},r))};lw.isSideCarExport=!0;function jl(s,t){return s.useMedium(t),lw}var cw=yl(),Nm=function(){},Jd=d.forwardRef(function(s,t){var r=d.useRef(null),a=d.useState({onScrollCapture:Nm,onWheelCapture:Nm,onTouchMoveCapture:Nm}),n=a[0],i=a[1],o=s.forwardProps,c=s.children,l=s.className,u=s.removeScrollBar,m=s.enabled,x=s.shards,f=s.sideCar,p=s.noIsolation,v=s.inert,g=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,y=s.gapMode,_=oo(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,C=bl([r,t]),R=_s(_s({},_),n);return d.createElement(d.Fragment,null,m&&d.createElement(N,{sideCar:cw,removeScrollBar:u,shards:x,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?d.cloneElement(d.Children.only(c),_s(_s({},R),{ref:C})):d.createElement(w,_s({},R,{className:l,ref:C}),c))});Jd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jd.classNames={fullWidth:Ya,zeroRight:Xa};var S3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C3(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=S3();return t&&s.setAttribute("nonce",t),s}function k3(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function E3(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var P3=function(){var s=0,t=null;return{add:function(r){s==0&&(t=C3())&&(k3(t,r),E3(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},T3=function(){var s=P3();return function(t,r){d.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&r])}},lo=function(){var s=T3(),t=function(r){var a=r.styles,n=r.dynamic;return s(a,n),null};return t},I3={left:0,top:0,right:0,gap:0},_m=function(s){return parseInt(s||"",10)||0},A3=function(s){var t=window.getComputedStyle(document.body),r=t[s==="padding"?"paddingLeft":"marginLeft"],a=t[s==="padding"?"paddingTop":"marginTop"],n=t[s==="padding"?"paddingRight":"marginRight"];return[_m(r),_m(a),_m(n)]},M3=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return I3;var t=A3(s),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},R3=lo(),Pi="data-scroll-locked",O3=function(s,t,r,a){var n=s.left,i=s.top,o=s.right,c=s.gap;return r===void 0&&(r="margin"),`
  .`.concat(b3,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(c,"px ").concat(a,`;
  }
  body[`).concat(Pi,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xa,` {
    right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Ya,` {
    margin-right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Xa," .").concat(Xa,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Ya," .").concat(Ya,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Pi,`] {
    `).concat(y3,": ").concat(c,`px;
  }
`)},vb=function(){var s=parseInt(document.body.getAttribute(Pi)||"0",10);return isFinite(s)?s:0},D3=function(){d.useEffect(function(){return document.body.setAttribute(Pi,(vb()+1).toString()),function(){var s=vb()-1;s<=0?document.body.removeAttribute(Pi):document.body.setAttribute(Pi,s.toString())}},[])},wl=function(s){var t=s.noRelative,r=s.noImportant,a=s.gapMode,n=a===void 0?"margin":a;D3();var i=d.useMemo(function(){return M3(n)},[n]);return d.createElement(R3,{styles:O3(i,!t,n,r?"":"!important")})},Ah=!1;if(typeof window<"u")try{var Dc=Object.defineProperty({},"passive",{get:function(){return Ah=!0,!0}});window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{Ah=!1}var di=Ah?{passive:!1}:!1,F3=function(s){return s.tagName==="TEXTAREA"},dw=function(s,t){var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!F3(s)&&r[t]==="visible")},L3=function(s){return dw(s,"overflowY")},$3=function(s){return dw(s,"overflowX")},bb=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=uw(s,a);if(n){var i=mw(s,a),o=i[1],c=i[2];if(o>c)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},B3=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},U3=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},uw=function(s,t){return s==="v"?L3(t):$3(t)},mw=function(s,t){return s==="v"?B3(t):U3(t)},z3=function(s,t){return s==="h"&&t==="rtl"?-1:1},q3=function(s,t,r,a,n){var i=z3(s,window.getComputedStyle(t).direction),o=i*a,c=r.target,l=t.contains(c),u=!1,m=o>0,x=0,f=0;do{var p=mw(s,c),v=p[0],g=p[1],b=p[2],w=g-b-i*v;(v||w)&&uw(s,c)&&(x+=w,f+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(u=!0),u},Fc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},yb=function(s){return[s.deltaX,s.deltaY]},jb=function(s){return s&&"current"in s?s.current:s},V3=function(s,t){return s[0]===t[0]&&s[1]===t[1]},J3=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},W3=0,ui=[];function H3(s){var t=d.useRef([]),r=d.useRef([0,0]),a=d.useRef(),n=d.useState(W3++)[0],i=d.useState(lo)[0],o=d.useRef(s);d.useEffect(function(){o.current=s},[s]),d.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var g=vl([s.lockRef.current],(s.shards||[]).map(jb),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var c=d.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var w=Fc(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-w[0],N="deltaY"in g?g.deltaY:y[1]-w[1],C,R=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var I=bb(E,R);if(!I)return!0;if(I?C=E:(C=E==="v"?"h":"v",I=bb(E,R)),!I)return!1;if(!a.current&&"changedTouches"in g&&(_||N)&&(a.current=C),!C)return!0;var M=a.current||C;return q3(M,b,g,M==="h"?_:N)},[]),l=d.useCallback(function(g){var b=g;if(!(!ui.length||ui[ui.length-1]!==i)){var w="deltaY"in b?yb(b):Fc(b),y=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&V3(C.delta,w)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(jb).filter(Boolean).filter(function(C){return C.contains(b.target)}),N=_.length>0?c(b,_[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(g,b,w,y){var _={name:g,delta:b,target:w,should:y,shadowParent:G3(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=d.useCallback(function(g){r.current=Fc(g),a.current=void 0},[]),x=d.useCallback(function(g){u(g.type,yb(g),g.target,c(g,s.lockRef.current))},[]),f=d.useCallback(function(g){u(g.type,Fc(g),g.target,c(g,s.lockRef.current))},[]);d.useEffect(function(){return ui.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",l,di),document.addEventListener("touchmove",l,di),document.addEventListener("touchstart",m,di),function(){ui=ui.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,di),document.removeEventListener("touchmove",l,di),document.removeEventListener("touchstart",m,di)}},[]);var p=s.removeScrollBar,v=s.inert;return d.createElement(d.Fragment,null,v?d.createElement(i,{styles:J3(n)}):null,p?d.createElement(wl,{gapMode:s.gapMode}):null)}function G3(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const X3=jl(cw,H3);var hw=d.forwardRef(function(s,t){return d.createElement(Jd,_s({},s,{ref:t,sideCar:X3}))});hw.classNames=Jd.classNames;var Y3=[" ","Enter","ArrowUp","ArrowDown"],Z3=[" ","Enter"],Nl="Select",[Wd,Hd,K3]=kd(Nl),[co,U9]=ft(Nl,[K3,tn]),Gd=tn(),[Q3,nn]=co(Nl),[eM,sM]=co(Nl),fw=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:n,onOpenChange:i,value:o,defaultValue:c,onValueChange:l,dir:u,name:m,autoComplete:x,disabled:f,required:p}=s,v=Gd(t),[g,b]=d.useState(null),[w,y]=d.useState(null),[_,N]=d.useState(!1),C=ao(u),[R=!1,E]=hr({prop:a,defaultProp:n,onChange:i}),[I,M]=hr({prop:o,defaultProp:c,onChange:l}),U=d.useRef(null),D=g?!!g.closest("form"):!0,[z,X]=d.useState(new Set),T=Array.from(z).map(A=>A.props.value).join(";");return e.jsx(gf,{...v,children:e.jsxs(Q3,{required:p,scope:t,trigger:g,onTriggerChange:b,valueNode:w,onValueNodeChange:y,valueNodeHasChildren:_,onValueNodeHasChildrenChange:N,contentId:Ut(),value:I,onValueChange:M,open:R,onOpenChange:E,dir:C,triggerPointerDownPosRef:U,disabled:f,children:[e.jsx(Wd.Provider,{scope:t,children:e.jsx(eM,{scope:s.__scopeSelect,onNativeOptionAdd:d.useCallback(A=>{X(O=>new Set(O).add(A))},[]),onNativeOptionRemove:d.useCallback(A=>{X(O=>{const $=new Set(O);return $.delete(A),$})},[]),children:r})}),D?e.jsxs($w,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:x,value:I,onChange:A=>M(A.target.value),disabled:f,children:[I===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},T):null]})})};fw.displayName=Nl;var xw="SelectTrigger",pw=d.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:a=!1,...n}=s,i=Gd(r),o=nn(xw,r),c=o.disabled||a,l=qe(t,o.onTriggerChange),u=Hd(r),[m,x,f]=Bw(v=>{const g=u().filter(y=>!y.disabled),b=g.find(y=>y.value===o.value),w=Uw(g,v,b);w!==void 0&&o.onValueChange(w.value)}),p=()=>{c||(o.onOpenChange(!0),f())};return e.jsx(xl,{asChild:!0,...i,children:e.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Lw(o.value)?"":void 0,...n,ref:l,onClick:ye(n.onClick,v=>{v.currentTarget.focus()}),onPointerDown:ye(n.onPointerDown,v=>{const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:ye(n.onKeyDown,v=>{const g=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&x(v.key),!(g&&v.key===" ")&&Y3.includes(v.key)&&(p(),v.preventDefault())})})})});pw.displayName=xw;var gw="SelectValue",vw=d.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:n,children:i,placeholder:o="",...c}=s,l=nn(gw,r),{onValueNodeHasChildrenChange:u}=l,m=i!==void 0,x=qe(t,l.onValueNodeChange);return Fs(()=>{u(m)},[u,m]),e.jsx(Ae.span,{...c,ref:x,style:{pointerEvents:"none"},children:Lw(l.value)?e.jsx(e.Fragment,{children:o}):i})});vw.displayName=gw;var tM="SelectIcon",bw=d.forwardRef((s,t)=>{const{__scopeSelect:r,children:a,...n}=s;return e.jsx(Ae.span,{"aria-hidden":!0,...n,ref:t,children:a||"▼"})});bw.displayName=tM;var rM="SelectPortal",yw=s=>e.jsx(iw,{asChild:!0,...s});yw.displayName=rM;var In="SelectContent",jw=d.forwardRef((s,t)=>{const r=nn(In,s.__scopeSelect),[a,n]=d.useState();if(Fs(()=>{n(new DocumentFragment)},[]),!r.open){const i=a;return i?On.createPortal(e.jsx(ww,{scope:s.__scopeSelect,children:e.jsx(Wd.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),i):null}return e.jsx(Nw,{...s,ref:t})});jw.displayName=In;var ha=10,[ww,on]=co(In),aM="SelectContentImpl",Nw=d.forwardRef((s,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:x,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:b,...w}=s,y=nn(In,r),[_,N]=d.useState(null),[C,R]=d.useState(null),E=qe(t,Q=>N(Q)),[I,M]=d.useState(null),[U,D]=d.useState(null),z=Hd(r),[X,T]=d.useState(!1),A=d.useRef(!1);d.useEffect(()=>{if(_)return gl(_)},[_]),o3();const O=d.useCallback(Q=>{const[pe,...J]=z().map(de=>de.ref.current),[H]=J.slice(-1),oe=document.activeElement;for(const de of Q)if(de===oe||(de==null||de.scrollIntoView({block:"nearest"}),de===pe&&C&&(C.scrollTop=0),de===H&&C&&(C.scrollTop=C.scrollHeight),de==null||de.focus(),document.activeElement!==oe))return},[z,C]),$=d.useCallback(()=>O([I,_]),[O,I,_]);d.useEffect(()=>{X&&$()},[X,$]);const{onOpenChange:F,triggerPointerDownPosRef:q}=y;d.useEffect(()=>{if(_){let Q={x:0,y:0};const pe=H=>{var oe,de;Q={x:Math.abs(Math.round(H.pageX)-(((oe=q.current)==null?void 0:oe.x)??0)),y:Math.abs(Math.round(H.pageY)-(((de=q.current)==null?void 0:de.y)??0))}},J=H=>{Q.x<=10&&Q.y<=10?H.preventDefault():_.contains(H.target)||F(!1),document.removeEventListener("pointermove",pe),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",J,{capture:!0})}}},[_,F,q]),d.useEffect(()=>{const Q=()=>F(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[F]);const[te,re]=Bw(Q=>{const pe=z().filter(oe=>!oe.disabled),J=pe.find(oe=>oe.ref.current===document.activeElement),H=Uw(pe,Q,J);H&&setTimeout(()=>H.ref.current.focus())}),be=d.useCallback((Q,pe,J)=>{const H=!A.current&&!J;(y.value!==void 0&&y.value===pe||H)&&(M(Q),H&&(A.current=!0))},[y.value]),Me=d.useCallback(()=>_==null?void 0:_.focus(),[_]),je=d.useCallback((Q,pe,J)=>{const H=!A.current&&!J;(y.value!==void 0&&y.value===pe||H)&&D(Q)},[y.value]),Y=a==="popper"?Mh:_w,we=Y===Mh?{side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:x,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:b}:{};return e.jsx(ww,{scope:r,content:_,viewport:C,onViewportChange:R,itemRefCallback:be,selectedItem:I,onItemLeave:Me,itemTextRefCallback:je,focusSelectedItem:$,selectedItemText:U,position:a,isPositioned:X,searchRef:te,children:e.jsx(hw,{as:Yr,allowPinchZoom:!0,children:e.jsx(io,{asChild:!0,trapped:y.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:ye(n,Q=>{var pe;(pe=y.trigger)==null||pe.focus({preventScroll:!0}),Q.preventDefault()}),children:e.jsx(rw,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:e.jsx(Y,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Q=>Q.preventDefault(),...w,...we,onPlaced:()=>T(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ye(w.onKeyDown,Q=>{const pe=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!pe&&Q.key.length===1&&re(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let H=z().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const oe=Q.target,de=H.indexOf(oe);H=H.slice(de+1)}setTimeout(()=>O(H)),Q.preventDefault()}})})})})})})});Nw.displayName=aM;var nM="SelectItemAlignedPosition",_w=d.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:a,...n}=s,i=nn(In,r),o=on(In,r),[c,l]=d.useState(null),[u,m]=d.useState(null),x=qe(t,E=>m(E)),f=Hd(r),p=d.useRef(!1),v=d.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:w,focusSelectedItem:y}=o,_=d.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&g&&b&&w){const E=i.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),U=w.getBoundingClientRect();if(i.dir!=="rtl"){const oe=U.left-I.left,de=M.left-oe,Te=E.left-de,De=E.width+Te,Le=Math.max(De,I.width),$e=window.innerWidth-ha,Be=Th(de,[ha,$e-Le]);c.style.minWidth=De+"px",c.style.left=Be+"px"}else{const oe=I.right-U.right,de=window.innerWidth-M.right-oe,Te=window.innerWidth-E.right-de,De=E.width+Te,Le=Math.max(De,I.width),$e=window.innerWidth-ha,Be=Th(de,[ha,$e-Le]);c.style.minWidth=De+"px",c.style.right=Be+"px"}const D=f(),z=window.innerHeight-ha*2,X=g.scrollHeight,T=window.getComputedStyle(u),A=parseInt(T.borderTopWidth,10),O=parseInt(T.paddingTop,10),$=parseInt(T.borderBottomWidth,10),F=parseInt(T.paddingBottom,10),q=A+O+X+F+$,te=Math.min(b.offsetHeight*5,q),re=window.getComputedStyle(g),be=parseInt(re.paddingTop,10),Me=parseInt(re.paddingBottom,10),je=E.top+E.height/2-ha,Y=z-je,we=b.offsetHeight/2,Q=b.offsetTop+we,pe=A+O+Q,J=q-pe;if(pe<=je){const oe=b===D[D.length-1].ref.current;c.style.bottom="0px";const de=u.clientHeight-g.offsetTop-g.offsetHeight,Te=Math.max(Y,we+(oe?Me:0)+de+$),De=pe+Te;c.style.height=De+"px"}else{const oe=b===D[0].ref.current;c.style.top="0px";const Te=Math.max(je,A+g.offsetTop+(oe?be:0)+we)+J;c.style.height=Te+"px",g.scrollTop=pe-je+g.offsetTop}c.style.margin=`${ha}px 0`,c.style.minHeight=te+"px",c.style.maxHeight=z+"px",a==null||a(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,c,u,g,b,w,i.dir,a]);Fs(()=>_(),[_]);const[N,C]=d.useState();Fs(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const R=d.useCallback(E=>{E&&v.current===!0&&(_(),y==null||y(),v.current=!1)},[_,y]);return e.jsx(oM,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:R,children:e.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(Ae.div,{...n,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});_w.displayName=nM;var iM="SelectPopperPosition",Mh=d.forwardRef((s,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:n=ha,...i}=s,o=Gd(r);return e.jsx(Od,{...o,...i,ref:t,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mh.displayName=iM;var[oM,Mf]=co(In,{}),Rh="SelectViewport",Sw=d.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:a,...n}=s,i=on(Rh,r),o=Mf(Rh,r),c=qe(t,i.onViewportChange),l=d.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Wd.Slot,{scope:r,children:e.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:c,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:ye(n.onScroll,u=>{const m=u.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&x){const p=Math.abs(l.current-m.scrollTop);if(p>0){const v=window.innerHeight-ha*2,g=parseFloat(x.style.minHeight),b=parseFloat(x.style.height),w=Math.max(g,b);if(w<v){const y=w+p,_=Math.min(v,y),N=y-_;x.style.height=_+"px",x.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,x.style.justifyContent="flex-end")}}}l.current=m.scrollTop})})})]})});Sw.displayName=Rh;var Cw="SelectGroup",[lM,cM]=co(Cw),dM=d.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,n=Ut();return e.jsx(lM,{scope:r,id:n,children:e.jsx(Ae.div,{role:"group","aria-labelledby":n,...a,ref:t})})});dM.displayName=Cw;var kw="SelectLabel",Ew=d.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,n=cM(kw,r);return e.jsx(Ae.div,{id:n.id,...a,ref:t})});Ew.displayName=kw;var gd="SelectItem",[uM,Pw]=co(gd),Tw=d.forwardRef((s,t)=>{const{__scopeSelect:r,value:a,disabled:n=!1,textValue:i,...o}=s,c=nn(gd,r),l=on(gd,r),u=c.value===a,[m,x]=d.useState(i??""),[f,p]=d.useState(!1),v=qe(t,w=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,w,a,n)}),g=Ut(),b=()=>{n||(c.onValueChange(a),c.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(uM,{scope:r,value:a,disabled:n,textId:g,isSelected:u,onItemTextChange:d.useCallback(w=>{x(y=>y||((w==null?void 0:w.textContent)??"").trim())},[]),children:e.jsx(Wd.ItemSlot,{scope:r,value:a,disabled:n,textValue:m,children:e.jsx(Ae.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...o,ref:v,onFocus:ye(o.onFocus,()=>p(!0)),onBlur:ye(o.onBlur,()=>p(!1)),onPointerUp:ye(o.onPointerUp,b),onPointerMove:ye(o.onPointerMove,w=>{var y;n?(y=l.onItemLeave)==null||y.call(l):w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,w=>{var y;w.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:ye(o.onKeyDown,w=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(Z3.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});Tw.displayName=gd;var Lo="SelectItemText",Iw=d.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:n,...i}=s,o=nn(Lo,r),c=on(Lo,r),l=Pw(Lo,r),u=sM(Lo,r),[m,x]=d.useState(null),f=qe(t,w=>x(w),l.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,l.value,l.disabled)}),p=m==null?void 0:m.textContent,v=d.useMemo(()=>e.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return Fs(()=>(g(v),()=>b(v)),[g,b,v]),e.jsxs(e.Fragment,{children:[e.jsx(Ae.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?On.createPortal(i.children,o.valueNode):null]})});Iw.displayName=Lo;var Aw="SelectItemIndicator",Mw=d.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return Pw(Aw,r).isSelected?e.jsx(Ae.span,{"aria-hidden":!0,...a,ref:t}):null});Mw.displayName=Aw;var Oh="SelectScrollUpButton",Rw=d.forwardRef((s,t)=>{const r=on(Oh,s.__scopeSelect),a=Mf(Oh,s.__scopeSelect),[n,i]=d.useState(!1),o=qe(t,a.onScrollButtonChange);return Fs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollTop>0;i(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),n?e.jsx(Dw,{...s,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});Rw.displayName=Oh;var Dh="SelectScrollDownButton",Ow=d.forwardRef((s,t)=>{const r=on(Dh,s.__scopeSelect),a=Mf(Dh,s.__scopeSelect),[n,i]=d.useState(!1),o=qe(t,a.onScrollButtonChange);return Fs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,m=Math.ceil(l.scrollTop)<u;i(m)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),n?e.jsx(Dw,{...s,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});Ow.displayName=Dh;var Dw=d.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:a,...n}=s,i=on("SelectScrollButton",r),o=d.useRef(null),c=Hd(r),l=d.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return d.useEffect(()=>()=>l(),[l]),Fs(()=>{var m;const u=c().find(x=>x.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),e.jsx(Ae.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:ye(n.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:ye(n.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:ye(n.onPointerLeave,()=>{l()})})}),mM="SelectSeparator",Fw=d.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return e.jsx(Ae.div,{"aria-hidden":!0,...a,ref:t})});Fw.displayName=mM;var Fh="SelectArrow",hM=d.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,n=Gd(r),i=nn(Fh,r),o=on(Fh,r);return i.open&&o.position==="popper"?e.jsx(Dd,{...n,...a,ref:t}):null});hM.displayName=Fh;function Lw(s){return s===""||s===void 0}var $w=d.forwardRef((s,t)=>{const{value:r,...a}=s,n=d.useRef(null),i=qe(t,n),o=Vd(r);return d.useEffect(()=>{const c=n.current,l=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&m){const x=new Event("change",{bubbles:!0});m.call(c,r),c.dispatchEvent(x)}},[o,r]),e.jsx(ul,{asChild:!0,children:e.jsx("select",{...a,ref:i,defaultValue:r})})});$w.displayName="BubbleSelect";function Bw(s){const t=Ns(s),r=d.useRef(""),a=d.useRef(0),n=d.useCallback(o=>{const c=r.current+o;t(c),function l(u){r.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),i=d.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,n,i]}function Uw(s,t,r){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let o=fM(s,Math.max(i,0));n.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}function fM(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var xM=fw,zw=pw,pM=vw,gM=bw,vM=yw,qw=jw,bM=Sw,Vw=Ew,Jw=Tw,yM=Iw,jM=Mw,Ww=Rw,Hw=Ow,Gw=Fw;const as=xM,is=pM,ss=d.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(zw,{ref:a,className:Oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(gM,{asChild:!0,children:e.jsx(od,{className:"h-4 w-4 opacity-50"})})]}));ss.displayName=zw.displayName;const Xw=d.forwardRef(({className:s,...t},r)=>e.jsx(Ww,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Jk,{className:"h-4 w-4"})}));Xw.displayName=Ww.displayName;const Yw=d.forwardRef(({className:s,...t},r)=>e.jsx(Hw,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(od,{className:"h-4 w-4"})}));Yw.displayName=Hw.displayName;const ts=d.forwardRef(({className:s,children:t,position:r="popper",...a},n)=>e.jsx(vM,{children:e.jsxs(qw,{ref:n,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Xw,{}),e.jsx(bM,{className:Oe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Yw,{})]})}));ts.displayName=qw.displayName;const wM=d.forwardRef(({className:s,...t},r)=>e.jsx(Vw,{ref:r,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));wM.displayName=Vw.displayName;const ce=d.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Jw,{ref:a,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(jM,{children:e.jsx(hl,{className:"h-4 w-4"})})}),e.jsx(yM,{children:t})]}));ce.displayName=Jw.displayName;const NM=d.forwardRef(({className:s,...t},r)=>e.jsx(Gw,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",s),...t}));NM.displayName=Gw.displayName;function _M(){const[s,t]=d.useState("beauty"),r={beauty:{title:"Beauty",services:["Hair & Makeup","Injectables","Skin Care","Spray Tan","Nail Services","Eyebrow & Lash"]},fitness:{title:"Fitness",services:["Personal Training","Yoga Instruction","Nutrition Coaching","Pilates","Massage Therapy","Sports Training"]},wellness:{title:"Wellness",services:["Mental Health","Life Coaching","Meditation","Acupuncture","Chiropractic","Reiki & Energy"]},healthcare:{title:"Healthcare",services:["Physicians","Nurse Practitioners","Chiropractors","Physical Therapy","Mental Health","Medical Specialists"]}};return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(Pr,{value:s,onValueChange:t,className:"w-full",children:[e.jsx("div",{className:"md:hidden mb-8",children:e.jsxs(as,{value:s,onValueChange:t,children:[e.jsx(ss,{className:"w-full h-14 text-lg font-semibold",children:e.jsx(is,{placeholder:"Select a category"})}),e.jsx(ts,{children:Object.entries(r).map(([a,n])=>e.jsx(ce,{value:a,className:"text-lg font-semibold",children:n.title},a))})]})}),e.jsx(fr,{className:"hidden md:grid w-full grid-cols-4 mb-8 h-14",children:Object.entries(r).map(([a,n])=>e.jsx(hs,{value:a,className:"text-lg font-semibold data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:n.title},a))}),Object.entries(r).map(([a,n])=>e.jsx(ds,{value:a,className:"mt-0",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(V,{className:"h-full bg-gradient-to-br from-roam-light-blue/10 to-roam-blue/5 border-roam-blue/20",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-roam-blue mb-6",children:[n.title," Services"]}),e.jsx("div",{className:"space-y-3",children:n.services.map((i,o)=>e.jsxs("div",{className:"flex items-center gap-3 group cursor-pointer",children:[e.jsx("div",{className:"w-2 h-2 bg-roam-blue rounded-full"}),e.jsx("span",{className:"text-foreground group-hover:text-roam-blue transition-colors font-medium",children:i})]},o))})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ee,{to:"/blog",className:"block h-full",children:e.jsxs(V,{className:"h-full overflow-hidden group cursor-pointer hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fc812f66efc8641e5a5e8b82ad8a50e3e?format=webp&width=800",alt:"Blog post featured image",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{className:"bg-roam-yellow text-gray-900 font-semibold",children:"ROAM BLOG"})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-roam-blue mb-2 uppercase tracking-wide",children:[n.title," News"]}),e.jsxs("h3",{className:"text-xl font-bold text-foreground mb-3 group-hover:text-roam-blue transition-colors",children:[a==="beauty"&&"Glow Goals: How a Spray Tan Lifts Your Look & Your Spirits",a==="fitness"&&"5 Benefits of Personal Training That Will Transform Your Fitness Journey",a==="wellness"&&"The Science Behind Mindfulness: Why Meditation Matters More Than Ever",a==="healthcare"&&"Preventive Care: How Regular Check-ups Can Transform Your Health"]}),e.jsxs("div",{className:"flex items-center gap-2 text-roam-blue font-medium group-hover:gap-3 transition-all",children:[e.jsx(nd,{className:"w-4 h-4"}),e.jsx("span",{children:"Read More"}),e.jsx(Wa,{className:"w-4 h-4"})]})]})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(V,{className:"h-full overflow-hidden group cursor-pointer hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fc812f66efc8641e5a5e8b82ad8a50e3e?format=webp&width=800",alt:"Provider spotlight video",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-white/90 rounded-full flex items-center justify-center group-hover:bg-white transition-colors",children:e.jsx(eE,{className:"w-8 h-8 text-roam-blue ml-1"})})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{className:"bg-red-600 text-white font-semibold",children:"LIVE INTERVIEW"})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-roam-blue mb-2 uppercase tracking-wide",children:[n.title," Provider Spotlight"]}),e.jsxs("h3",{className:"text-xl font-bold text-foreground mb-3 group-hover:text-roam-blue transition-colors",children:[a==="beauty"&&"Maureen: Hair Designer & Makeup Artist",a==="fitness"&&"Jake: Certified Personal Trainer & Nutrition Expert",a==="wellness"&&"Sarah: Licensed Therapist & Mindfulness Coach",a==="healthcare"&&"Dr. Smith: Family Physician & Preventive Care Specialist"]}),e.jsxs("div",{className:"flex items-center gap-2 text-roam-blue font-medium group-hover:gap-3 transition-all",children:[e.jsx(pa,{className:"w-4 h-4"}),e.jsx("span",{children:"Watch Interview"}),e.jsx(Wa,{className:"w-4 h-4"})]})]})]})})]})},a))]})})}function SM(){const{customer:s,isCustomer:t}=Ss(),r=[{name:"Sarah Johnson",role:"Busy Professional",content:"ROAM made it so easy to find a mobile massage therapist. The service was incredible and I didn't have to leave my home!",rating:5},{name:"Michael Chen",role:"Fitness Enthusiast",content:"I found the perfect personal trainer through ROAM. The booking process was seamless and the trainer was exactly what I needed.",rating:5},{name:"Emma Davis",role:"New Mom",content:"As a new mom, I couldn't easily get to a salon. ROAM's mobile beauty services were a lifesaver - professional and convenient.",rating:5}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-roam-light-blue/5 to-roam-yellow/10",children:[!t&&"332905057054-k2ft4b7nadjgm62qoiseg7r6n8rt18co.apps.googleusercontent.com"&&e.jsx(Fj,{clientId:"332905057054-k2ft4b7nadjgm62qoiseg7r6n8rt18co.apps.googleusercontent.com",onSuccess:()=>{console.log("Google One Tap sign-in successful")},onError:a=>{console.error("Google One Tap error:",a)}}),e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-border/50 sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-10 w-auto"}),e.jsx("span",{className:"text-2xl font-semibold text-roam-blue",children:"Services"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#features",className:"text-foreground/80 hover:text-roam-blue transition-colors",children:"Features"}),e.jsx("a",{href:"#services",className:"text-foreground/80 hover:text-roam-blue transition-colors",children:"Services"}),e.jsx("a",{href:"#testimonials",className:"text-foreground/80 hover:text-roam-blue transition-colors",children:"Reviews"}),e.jsx(Ee,{to:"/home",className:"text-roam-blue hover:text-roam-blue/80 transition-colors font-medium",children:"Browse Services"})]})]})})}),e.jsxs("section",{className:"relative py-20 lg:py-32 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",children:[e.jsx("iframe",{src:"https://www.youtube.com/embed/-g5P96JAif0?autoplay=1&mute=1&loop=1&playlist=-g5P96JAif0&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&vq=hd1080",className:"absolute inset-0 w-full h-full",style:{filter:"brightness(0.7)",pointerEvents:"none",width:"100vw",height:"100vh",objectFit:"cover",objectPosition:"center",transform:"scale(1.1)"},frameBorder:"0",allow:"autoplay; encrypted-media",title:"Background Video"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-roam-blue/10 via-black/5 to-roam-yellow/10 pointer-events-none"})]}),e.jsx("div",{className:"container mx-auto px-6 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F7cfc25ed4dd34d6c99c1cfed81ba3f06?format=webp&width=800",alt:"ROAM Logo",className:"h-24 lg:h-32 w-auto mx-auto mb-6 drop-shadow-lg"}),e.jsx("p",{className:"text-xl lg:text-2xl text-white/90 mb-10 max-w-3xl mx-auto leading-relaxed drop-shadow-md",children:"From mobile beauty treatments to in-home fitness training, discover verified professionals who bring premium services directly to your location."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:e.jsx(P,{asChild:!0,size:"lg",className:"bg-roam-blue hover:bg-roam-blue/90 text-white px-8 py-4 text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:e.jsxs(Ee,{to:"/home",className:"flex items-center gap-2",children:["Book Today",e.jsx(kn,{className:"w-5 h-5"})]})})})]})}),e.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-roam-yellow/20 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-32 h-32 bg-roam-light-blue/20 rounded-full blur-xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-roam-blue/10 rounded-full blur-lg animate-pulse delay-500"})]}),e.jsx("section",{className:"py-10 lg:py-16 bg-white",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-6",children:"Explore Our Services"}),e.jsx("p",{className:"text-xl text-foreground/70 max-w-2xl mx-auto",children:"Discover detailed service categories, read our latest insights, and meet our featured providers."})]}),e.jsx(_M,{})]})}),e.jsx("section",{className:"py-20 lg:py-32",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-6",children:"How ROAM Works"}),e.jsx("p",{className:"text-xl text-foreground/70 max-w-2xl mx-auto",children:"Getting the services you need has never been easier. Follow these simple steps."})]}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-12",children:[{step:"1",title:"Browse & Choose",description:"Explore verified service providers in your area and read reviews from other customers",icon:Ds},{step:"2",title:"Book & Schedule",description:"Select your preferred time slot and location preference - mobile, in-business, or virtual",icon:Qe},{step:"3",title:"Enjoy & Review",description:"Receive your service from a professional provider and share your experience",icon:us}].map((a,n)=>e.jsxs("div",{className:"text-center relative",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(a.icon,{className:"w-10 h-10 text-white"})}),e.jsx(ge,{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-roam-yellow text-roam-blue border-none px-3 py-1 text-sm font-bold",children:a.step}),e.jsx("h3",{className:"text-2xl font-semibold text-foreground mb-4",children:a.title}),e.jsx("p",{className:"text-foreground/70 leading-relaxed max-w-sm mx-auto",children:a.description}),n<2&&e.jsx("div",{className:"hidden lg:block absolute top-10 left-full w-12 transform -translate-x-6",children:e.jsx(kn,{className:"w-6 h-6 text-roam-light-blue"})})]},n))})]})}),e.jsx("section",{className:"py-20 lg:py-32 bg-gradient-to-br from-roam-light-blue/10 to-roam-yellow/10",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx($A,{})})}),e.jsx("section",{id:"testimonials",className:"py-20 lg:py-32 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/5",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-6",children:"What Our Customers Say"}),e.jsx("p",{className:"text-xl text-foreground/70 max-w-2xl mx-auto",children:"Don't just take our word for it. Here's what real customers have to say about ROAM."})]}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:r.map((a,n)=>e.jsx(V,{className:"border-border/50 hover:border-roam-light-blue/50 transition-all duration-300 hover:shadow-xl",children:e.jsxs(K,{className:"p-8",children:[e.jsx("div",{className:"flex items-center mb-4",children:[...Array(a.rating)].map((i,o)=>e.jsx(us,{className:"w-5 h-5 text-roam-yellow fill-current"},o))}),e.jsx(tE,{className:"w-8 h-8 text-roam-light-blue mb-4"}),e.jsxs("p",{className:"text-foreground/80 mb-6 leading-relaxed italic",children:['"',a.content,'"']}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:a.name}),e.jsx("div",{className:"text-foreground/60 text-sm",children:a.role})]})]})},n))})]})}),e.jsx("section",{className:"py-20 lg:py-32 bg-gradient-to-r from-roam-blue to-roam-light-blue",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white mb-6",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-white/90 mb-10 max-w-2xl mx-auto",children:"Join thousands of satisfied customers who have discovered the convenience of professional services delivered directly to them."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(P,{asChild:!0,size:"lg",variant:"secondary",className:"bg-white text-roam-blue hover:bg-white/90 px-8 py-4 text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:e.jsxs(Ee,{to:"/home",className:"flex items-center gap-2",children:["Book Your First Service",e.jsx(Qe,{className:"w-5 h-5"})]})}),e.jsx(P,{asChild:!0,size:"lg",variant:"outline",className:"border-orange-500 text-orange-600 hover:bg-orange-500 hover:text-white px-8 py-4 text-lg font-semibold transition-all duration-300",children:e.jsxs(Ee,{to:"/providers",className:"flex items-center gap-2",children:["Become a Provider",e.jsx(Pn,{className:"w-5 h-5"})]})})]})]})}),e.jsx("footer",{className:"bg-foreground/5 border-t border-border/50 py-12",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto mb-4"}),e.jsx("p",{className:"text-foreground/70 leading-relaxed",children:"Connecting you with verified professionals for all your service needs."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Services"}),e.jsxs("ul",{className:"space-y-2 text-foreground/70",children:[e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-roam-blue transition-colors",children:"Beauty"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-roam-blue transition-colors",children:"Fitness"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-roam-blue transition-colors",children:"Therapy"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-roam-blue transition-colors",children:"Healthcare"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-foreground/70",children:[e.jsx("li",{children:e.jsx(Ee,{to:"/about",className:"hover:text-roam-blue transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/contact",className:"hover:text-roam-blue transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/support",className:"hover:text-roam-blue transition-colors",children:"Support"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/providers",className:"hover:text-roam-blue transition-colors",children:"Become a Provider"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Connect"}),e.jsx("p",{className:"text-foreground/70 mb-4",children:"Follow us for updates and tips from our community of professionals."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-roam-light-blue/20 rounded-lg flex items-center justify-center hover:bg-roam-light-blue/30 transition-colors",children:e.jsx(zo,{className:"w-5 h-5 text-roam-blue"})}),e.jsx("a",{href:"https://www.facebook.com/roamtheapp",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-roam-light-blue/20 rounded-lg flex items-center justify-center hover:bg-roam-light-blue/30 transition-colors",children:e.jsx(tf,{className:"w-5 h-5 text-roam-blue"})})]})]})]}),e.jsx("div",{className:"border-t border-border/50 mt-8 pt-8 text-center text-foreground/60",children:e.jsx("p",{children:"© 2024 ROAM. All rights reserved. Connecting you with professional services."})})]})})]})}const ae=d.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:Oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));ae.displayName="Input";var CM="Label",Zw=d.forwardRef((s,t)=>e.jsx(Ae.label,{...s,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=s.onMouseDown)==null||n.call(s,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zw.displayName=CM;var Kw=Zw;const kM=ml("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=d.forwardRef(({className:s,...t},r)=>e.jsx(Kw,{ref:r,className:Oe(kM(),s),...t}));B.displayName=Kw.displayName;function EM(s,t){const r=d.createContext(t),a=i=>{const{children:o,...c}=i,l=d.useMemo(()=>c,Object.values(c));return e.jsx(r.Provider,{value:l,children:o})};a.displayName=s+"Provider";function n(i){const o=d.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${s}\``)}return[a,n]}function PM(s,t=[]){let r=[];function a(i,o){const c=d.createContext(o),l=r.length;r=[...r,o];const u=x=>{var w;const{scope:f,children:p,...v}=x,g=((w=f==null?void 0:f[s])==null?void 0:w[l])||c,b=d.useMemo(()=>v,Object.values(v));return e.jsx(g.Provider,{value:b,children:p})};u.displayName=i+"Provider";function m(x,f){var g;const p=((g=f==null?void 0:f[s])==null?void 0:g[l])||c,v=d.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[u,m]}const n=()=>{const i=r.map(o=>d.createContext(o));return function(c){const l=(c==null?void 0:c[s])||i;return d.useMemo(()=>({[`__scope${s}`]:{...c,[s]:l}}),[c,l])}};return n.scopeName=s,[a,TM(n,...t)]}function TM(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const a=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const o=a.reduce((c,{useScope:l,scopeName:u})=>{const x=l(i)[`__scope${u}`];return{...c,...x}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function IM(s,t){return d.useReducer((r,a)=>t[r][a]??r,s)}var Xd=s=>{const{present:t,children:r}=s,a=AM(t),n=typeof r=="function"?r({present:a.isPresent}):d.Children.only(r),i=qe(a.ref,MM(n));return typeof r=="function"||a.isPresent?d.cloneElement(n,{ref:i}):null};Xd.displayName="Presence";function AM(s){const[t,r]=d.useState(),a=d.useRef({}),n=d.useRef(s),i=d.useRef("none"),o=s?"mounted":"unmounted",[c,l]=IM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Lc(a.current);i.current=c==="mounted"?u:"none"},[c]),Fs(()=>{const u=a.current,m=n.current;if(m!==s){const f=i.current,p=Lc(u);s?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,l]),Fs(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,x=p=>{const g=Lc(a.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!n.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=p=>{p.target===t&&(i.current=Lc(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:d.useCallback(u=>{u&&(a.current=getComputedStyle(u)),r(u)},[])}}function Lc(s){return(s==null?void 0:s.animationName)||"none"}function MM(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var Sm=0;function RM(){d.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??wb()),document.body.insertAdjacentElement("beforeend",s[1]??wb()),Sm++,()=>{Sm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Sm--}},[])}function wb(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Qw=yl(),Cm=function(){},Yd=d.forwardRef(function(s,t){var r=d.useRef(null),a=d.useState({onScrollCapture:Cm,onWheelCapture:Cm,onTouchMoveCapture:Cm}),n=a[0],i=a[1],o=s.forwardProps,c=s.children,l=s.className,u=s.removeScrollBar,m=s.enabled,x=s.shards,f=s.sideCar,p=s.noIsolation,v=s.inert,g=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,y=s.gapMode,_=oo(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,C=bl([r,t]),R=_s(_s({},_),n);return d.createElement(d.Fragment,null,m&&d.createElement(N,{sideCar:Qw,removeScrollBar:u,shards:x,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?d.cloneElement(d.Children.only(c),_s(_s({},R),{ref:C})):d.createElement(w,_s({},R,{className:l,ref:C}),c))});Yd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yd.classNames={fullWidth:Ya,zeroRight:Xa};var Lh=!1;if(typeof window<"u")try{var $c=Object.defineProperty({},"passive",{get:function(){return Lh=!0,!0}});window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{Lh=!1}var mi=Lh?{passive:!1}:!1,OM=function(s){return s.tagName==="TEXTAREA"},eN=function(s,t){if(!(s instanceof Element))return!1;var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!OM(s)&&r[t]==="visible")},DM=function(s){return eN(s,"overflowY")},FM=function(s){return eN(s,"overflowX")},Nb=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=sN(s,a);if(n){var i=tN(s,a),o=i[1],c=i[2];if(o>c)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},LM=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},$M=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},sN=function(s,t){return s==="v"?DM(t):FM(t)},tN=function(s,t){return s==="v"?LM(t):$M(t)},BM=function(s,t){return s==="h"&&t==="rtl"?-1:1},UM=function(s,t,r,a,n){var i=BM(s,window.getComputedStyle(t).direction),o=i*a,c=r.target,l=t.contains(c),u=!1,m=o>0,x=0,f=0;do{var p=tN(s,c),v=p[0],g=p[1],b=p[2],w=g-b-i*v;(v||w)&&sN(s,c)&&(x+=w,f+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(u=!0),u},Bc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},_b=function(s){return[s.deltaX,s.deltaY]},Sb=function(s){return s&&"current"in s?s.current:s},zM=function(s,t){return s[0]===t[0]&&s[1]===t[1]},qM=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},VM=0,hi=[];function JM(s){var t=d.useRef([]),r=d.useRef([0,0]),a=d.useRef(),n=d.useState(VM++)[0],i=d.useState(lo)[0],o=d.useRef(s);d.useEffect(function(){o.current=s},[s]),d.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var g=vl([s.lockRef.current],(s.shards||[]).map(Sb),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var c=d.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=Bc(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-w[0],N="deltaY"in g?g.deltaY:y[1]-w[1],C,R=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var I=Nb(E,R);if(!I)return!0;if(I?C=E:(C=E==="v"?"h":"v",I=Nb(E,R)),!I)return!1;if(!a.current&&"changedTouches"in g&&(_||N)&&(a.current=C),!C)return!0;var M=a.current||C;return UM(M,b,g,M==="h"?_:N)},[]),l=d.useCallback(function(g){var b=g;if(!(!hi.length||hi[hi.length-1]!==i)){var w="deltaY"in b?_b(b):Bc(b),y=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&zM(C.delta,w)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(Sb).filter(Boolean).filter(function(C){return C.contains(b.target)}),N=_.length>0?c(b,_[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(g,b,w,y){var _={name:g,delta:b,target:w,should:y,shadowParent:WM(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=d.useCallback(function(g){r.current=Bc(g),a.current=void 0},[]),x=d.useCallback(function(g){u(g.type,_b(g),g.target,c(g,s.lockRef.current))},[]),f=d.useCallback(function(g){u(g.type,Bc(g),g.target,c(g,s.lockRef.current))},[]);d.useEffect(function(){return hi.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",l,mi),document.addEventListener("touchmove",l,mi),document.addEventListener("touchstart",m,mi),function(){hi=hi.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,mi),document.removeEventListener("touchmove",l,mi),document.removeEventListener("touchstart",m,mi)}},[]);var p=s.removeScrollBar,v=s.inert;return d.createElement(d.Fragment,null,v?d.createElement(i,{styles:qM(n)}):null,p?d.createElement(wl,{gapMode:s.gapMode}):null)}function WM(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const HM=jl(Qw,JM);var rN=d.forwardRef(function(s,t){return d.createElement(Yd,_s({},s,{ref:t,sideCar:HM}))});rN.classNames=Yd.classNames;var Rf="Dialog",[aN,z9]=PM(Rf),[GM,Ar]=aN(Rf),nN=s=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:n,onOpenChange:i,modal:o=!0}=s,c=d.useRef(null),l=d.useRef(null),[u=!1,m]=hr({prop:a,defaultProp:n,onChange:i});return e.jsx(GM,{scope:t,triggerRef:c,contentRef:l,contentId:Ut(),titleId:Ut(),descriptionId:Ut(),open:u,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(x=>!x),[m]),modal:o,children:r})};nN.displayName=Rf;var iN="DialogTrigger",oN=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Ar(iN,r),i=qe(t,n.triggerRef);return e.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ff(n.open),...a,ref:i,onClick:ye(s.onClick,n.onOpenToggle)})});oN.displayName=iN;var Of="DialogPortal",[XM,lN]=aN(Of,{forceMount:void 0}),cN=s=>{const{__scopeDialog:t,forceMount:r,children:a,container:n}=s,i=Ar(Of,t);return e.jsx(XM,{scope:t,forceMount:r,children:d.Children.map(a,o=>e.jsx(Xd,{present:r||i.open,children:e.jsx(z0,{asChild:!0,container:n,children:o})}))})};cN.displayName=Of;var vd="DialogOverlay",dN=d.forwardRef((s,t)=>{const r=lN(vd,s.__scopeDialog),{forceMount:a=r.forceMount,...n}=s,i=Ar(vd,s.__scopeDialog);return i.modal?e.jsx(Xd,{present:a||i.open,children:e.jsx(YM,{...n,ref:t})}):null});dN.displayName=vd;var YM=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Ar(vd,r);return e.jsx(rN,{as:Yr,allowPinchZoom:!0,shards:[n.contentRef],children:e.jsx(Ae.div,{"data-state":Ff(n.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),An="DialogContent",uN=d.forwardRef((s,t)=>{const r=lN(An,s.__scopeDialog),{forceMount:a=r.forceMount,...n}=s,i=Ar(An,s.__scopeDialog);return e.jsx(Xd,{present:a||i.open,children:i.modal?e.jsx(ZM,{...n,ref:t}):e.jsx(KM,{...n,ref:t})})});uN.displayName=An;var ZM=d.forwardRef((s,t)=>{const r=Ar(An,s.__scopeDialog),a=d.useRef(null),n=qe(t,r.contentRef,a);return d.useEffect(()=>{const i=a.current;if(i)return gl(i)},[]),e.jsx(mN,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(s.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ye(s.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:ye(s.onFocusOutside,i=>i.preventDefault())})}),KM=d.forwardRef((s,t)=>{const r=Ar(An,s.__scopeDialog),a=d.useRef(!1),n=d.useRef(!1);return e.jsx(mN,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(a.current||(c=r.triggerRef.current)==null||c.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var l,u;(l=s.onInteractOutside)==null||l.call(s,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),mN=d.forwardRef((s,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,...o}=s,c=Ar(An,r),l=d.useRef(null),u=qe(t,l);return RM(),e.jsxs(e.Fragment,{children:[e.jsx(io,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(lf,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Ff(c.open),...o,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(QM,{titleId:c.titleId}),e.jsx(sR,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Df="DialogTitle",hN=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Ar(Df,r);return e.jsx(Ae.h2,{id:n.titleId,...a,ref:t})});hN.displayName=Df;var fN="DialogDescription",xN=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Ar(fN,r);return e.jsx(Ae.p,{id:n.descriptionId,...a,ref:t})});xN.displayName=fN;var pN="DialogClose",gN=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Ar(pN,r);return e.jsx(Ae.button,{type:"button",...a,ref:t,onClick:ye(s.onClick,()=>n.onOpenChange(!1))})});gN.displayName=pN;function Ff(s){return s?"open":"closed"}var vN="DialogTitleWarning",[q9,bN]=EM(vN,{contentName:An,titleName:Df,docsSlug:"dialog"}),QM=({titleId:s})=>{const t=bN(vN),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{s&&(document.getElementById(s)||console.error(r))},[r,s]),null},eR="DialogDescriptionWarning",sR=({contentRef:s,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bN(eR).contentName}}.`;return d.useEffect(()=>{var i;const n=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(a))},[a,s,t]),null},tR=nN,rR=oN,aR=cN,yN=dN,jN=uN,wN=hN,NN=xN,nR=gN;const Xs=tR,iR=rR,oR=aR,_N=d.forwardRef(({className:s,...t},r)=>e.jsx(yN,{ref:r,className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));_N.displayName=yN.displayName;const Vs=d.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(oR,{children:[e.jsx(_N,{}),e.jsxs(jN,{ref:a,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(nR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vs.displayName=jN.displayName;const Js=({className:s,...t})=>e.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Js.displayName="DialogHeader";const SN=({className:s,...t})=>e.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});SN.displayName="DialogFooter";const Ws=d.forwardRef(({className:s,...t},r)=>e.jsx(wN,{ref:r,className:Oe("text-lg font-semibold leading-none tracking-tight",s),...t}));Ws.displayName=wN.displayName;const Lf=d.forwardRef(({className:s,...t},r)=>e.jsx(NN,{ref:r,className:Oe("text-sm text-muted-foreground",s),...t}));Lf.displayName=NN.displayName;var fi={},km,Cb;function CN(){return Cb||(Cb=1,km={L:1,M:0,Q:3,H:2}),km}var Em,kb;function kN(){return kb||(kb=1,Em={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Em}var Pm,Eb;function lR(){if(Eb)return Pm;Eb=1;var s=kN();function t(r){this.mode=s.MODE_8BIT_BYTE,this.data=r}return t.prototype={getLength:function(r){return this.data.length},write:function(r){for(var a=0;a<this.data.length;a++)r.put(this.data.charCodeAt(a),8)}},Pm=t,Pm}var Tm,Pb;function cR(){if(Pb)return Tm;Pb=1;var s=CN();function t(r,a){this.totalCount=r,this.dataCount=a}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(r,a){var n=t.getRsBlockTable(r,a);if(n==null)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+a);for(var i=n.length/3,o=new Array,c=0;c<i;c++)for(var l=n[c*3+0],u=n[c*3+1],m=n[c*3+2],x=0;x<l;x++)o.push(new t(u,m));return o},t.getRsBlockTable=function(r,a){switch(a){case s.L:return t.RS_BLOCK_TABLE[(r-1)*4+0];case s.M:return t.RS_BLOCK_TABLE[(r-1)*4+1];case s.Q:return t.RS_BLOCK_TABLE[(r-1)*4+2];case s.H:return t.RS_BLOCK_TABLE[(r-1)*4+3];default:return}},Tm=t,Tm}var Im,Tb;function dR(){if(Tb)return Im;Tb=1;function s(){this.buffer=new Array,this.length=0}return s.prototype={get:function(t){var r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)==1},put:function(t,r){for(var a=0;a<r;a++)this.putBit((t>>>r-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Im=s,Im}var Am,Ib;function EN(){if(Ib)return Am;Ib=1;for(var s={glog:function(r){if(r<1)throw new Error("glog("+r+")");return s.LOG_TABLE[r]},gexp:function(r){for(;r<0;)r+=255;for(;r>=256;)r-=255;return s.EXP_TABLE[r]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)s.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)s.EXP_TABLE[t]=s.EXP_TABLE[t-4]^s.EXP_TABLE[t-5]^s.EXP_TABLE[t-6]^s.EXP_TABLE[t-8];for(var t=0;t<255;t++)s.LOG_TABLE[s.EXP_TABLE[t]]=t;return Am=s,Am}var Mm,Ab;function PN(){if(Ab)return Mm;Ab=1;var s=EN();function t(r,a){if(r.length==null)throw new Error(r.length+"/"+a);for(var n=0;n<r.length&&r[n]==0;)n++;this.num=new Array(r.length-n+a);for(var i=0;i<r.length-n;i++)this.num[i]=r[i+n]}return t.prototype={get:function(r){return this.num[r]},getLength:function(){return this.num.length},multiply:function(r){for(var a=new Array(this.getLength()+r.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<r.getLength();i++)a[n+i]^=s.gexp(s.glog(this.get(n))+s.glog(r.get(i)));return new t(a,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var a=s.glog(this.get(0))-s.glog(r.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var i=0;i<r.getLength();i++)n[i]^=s.gexp(s.glog(r.get(i))+a);return new t(n,0).mod(r)}},Mm=t,Mm}var Rm,Mb;function uR(){if(Mb)return Rm;Mb=1;var s=kN(),t=PN(),r=EN(),a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},n={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var o=i<<10;n.getBCHDigit(o)-n.getBCHDigit(n.G15)>=0;)o^=n.G15<<n.getBCHDigit(o)-n.getBCHDigit(n.G15);return(i<<10|o)^n.G15_MASK},getBCHTypeNumber:function(i){for(var o=i<<12;n.getBCHDigit(o)-n.getBCHDigit(n.G18)>=0;)o^=n.G18<<n.getBCHDigit(o)-n.getBCHDigit(n.G18);return i<<12|o},getBCHDigit:function(i){for(var o=0;i!=0;)o++,i>>>=1;return o},getPatternPosition:function(i){return n.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,o,c){switch(i){case a.PATTERN000:return(o+c)%2==0;case a.PATTERN001:return o%2==0;case a.PATTERN010:return c%3==0;case a.PATTERN011:return(o+c)%3==0;case a.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2==0;case a.PATTERN101:return o*c%2+o*c%3==0;case a.PATTERN110:return(o*c%2+o*c%3)%2==0;case a.PATTERN111:return(o*c%3+(o+c)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var o=new t([1],0),c=0;c<i;c++)o=o.multiply(new t([1,r.gexp(c)],0));return o},getLengthInBits:function(i,o){if(1<=o&&o<10)switch(i){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(o<27)switch(i){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(o<41)switch(i){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+o)},getLostPoint:function(i){for(var o=i.getModuleCount(),c=0,l=0;l<o;l++)for(var u=0;u<o;u++){for(var m=0,x=i.isDark(l,u),f=-1;f<=1;f++)if(!(l+f<0||o<=l+f))for(var p=-1;p<=1;p++)u+p<0||o<=u+p||f==0&&p==0||x==i.isDark(l+f,u+p)&&m++;m>5&&(c+=3+m-5)}for(var l=0;l<o-1;l++)for(var u=0;u<o-1;u++){var v=0;i.isDark(l,u)&&v++,i.isDark(l+1,u)&&v++,i.isDark(l,u+1)&&v++,i.isDark(l+1,u+1)&&v++,(v==0||v==4)&&(c+=3)}for(var l=0;l<o;l++)for(var u=0;u<o-6;u++)i.isDark(l,u)&&!i.isDark(l,u+1)&&i.isDark(l,u+2)&&i.isDark(l,u+3)&&i.isDark(l,u+4)&&!i.isDark(l,u+5)&&i.isDark(l,u+6)&&(c+=40);for(var u=0;u<o;u++)for(var l=0;l<o-6;l++)i.isDark(l,u)&&!i.isDark(l+1,u)&&i.isDark(l+2,u)&&i.isDark(l+3,u)&&i.isDark(l+4,u)&&!i.isDark(l+5,u)&&i.isDark(l+6,u)&&(c+=40);for(var g=0,u=0;u<o;u++)for(var l=0;l<o;l++)i.isDark(l,u)&&g++;var b=Math.abs(100*g/o/o-50)/5;return c+=b*10,c}};return Rm=n,Rm}var Om,Rb;function mR(){if(Rb)return Om;Rb=1;var s=lR(),t=cR(),r=dR(),a=uR(),n=PN();function i(c,l){this.typeNumber=c,this.errorCorrectLevel=l,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=i.prototype;return o.addData=function(c){var l=new s(c);this.dataList.push(l),this.dataCache=null},o.isDark=function(c,l){if(c<0||this.moduleCount<=c||l<0||this.moduleCount<=l)throw new Error(c+","+l);return this.modules[c][l]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var c=1;for(c=1;c<40;c++){for(var l=t.getRSBlocks(c,this.errorCorrectLevel),u=new r,m=0,x=0;x<l.length;x++)m+=l[x].dataCount;for(var x=0;x<this.dataList.length;x++){var f=this.dataList[x];u.put(f.mode,4),u.put(f.getLength(),a.getLengthInBits(f.mode,c)),f.write(u)}if(u.getLengthInBits()<=m*8)break}this.typeNumber=c}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(c,l){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var u=0;u<this.moduleCount;u++){this.modules[u]=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++)this.modules[u][m]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(c,l),this.typeNumber>=7&&this.setupTypeNumber(c),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,l)},o.setupPositionProbePattern=function(c,l){for(var u=-1;u<=7;u++)if(!(c+u<=-1||this.moduleCount<=c+u))for(var m=-1;m<=7;m++)l+m<=-1||this.moduleCount<=l+m||(0<=u&&u<=6&&(m==0||m==6)||0<=m&&m<=6&&(u==0||u==6)||2<=u&&u<=4&&2<=m&&m<=4?this.modules[c+u][l+m]=!0:this.modules[c+u][l+m]=!1)},o.getBestMaskPattern=function(){for(var c=0,l=0,u=0;u<8;u++){this.makeImpl(!0,u);var m=a.getLostPoint(this);(u==0||c>m)&&(c=m,l=u)}return l},o.createMovieClip=function(c,l,u){var m=c.createEmptyMovieClip(l,u),x=1;this.make();for(var f=0;f<this.modules.length;f++)for(var p=f*x,v=0;v<this.modules[f].length;v++){var g=v*x,b=this.modules[f][v];b&&(m.beginFill(0,100),m.moveTo(g,p),m.lineTo(g+x,p),m.lineTo(g+x,p+x),m.lineTo(g,p+x),m.endFill())}return m},o.setupTimingPattern=function(){for(var c=8;c<this.moduleCount-8;c++)this.modules[c][6]==null&&(this.modules[c][6]=c%2==0);for(var l=8;l<this.moduleCount-8;l++)this.modules[6][l]==null&&(this.modules[6][l]=l%2==0)},o.setupPositionAdjustPattern=function(){for(var c=a.getPatternPosition(this.typeNumber),l=0;l<c.length;l++)for(var u=0;u<c.length;u++){var m=c[l],x=c[u];if(this.modules[m][x]==null)for(var f=-2;f<=2;f++)for(var p=-2;p<=2;p++)f==-2||f==2||p==-2||p==2||f==0&&p==0?this.modules[m+f][x+p]=!0:this.modules[m+f][x+p]=!1}},o.setupTypeNumber=function(c){for(var l=a.getBCHTypeNumber(this.typeNumber),u=0;u<18;u++){var m=!c&&(l>>u&1)==1;this.modules[Math.floor(u/3)][u%3+this.moduleCount-8-3]=m}for(var u=0;u<18;u++){var m=!c&&(l>>u&1)==1;this.modules[u%3+this.moduleCount-8-3][Math.floor(u/3)]=m}},o.setupTypeInfo=function(c,l){for(var u=this.errorCorrectLevel<<3|l,m=a.getBCHTypeInfo(u),x=0;x<15;x++){var f=!c&&(m>>x&1)==1;x<6?this.modules[x][8]=f:x<8?this.modules[x+1][8]=f:this.modules[this.moduleCount-15+x][8]=f}for(var x=0;x<15;x++){var f=!c&&(m>>x&1)==1;x<8?this.modules[8][this.moduleCount-x-1]=f:x<9?this.modules[8][15-x-1+1]=f:this.modules[8][15-x-1]=f}this.modules[this.moduleCount-8][8]=!c},o.mapData=function(c,l){for(var u=-1,m=this.moduleCount-1,x=7,f=0,p=this.moduleCount-1;p>0;p-=2)for(p==6&&p--;;){for(var v=0;v<2;v++)if(this.modules[m][p-v]==null){var g=!1;f<c.length&&(g=(c[f]>>>x&1)==1);var b=a.getMask(l,m,p-v);b&&(g=!g),this.modules[m][p-v]=g,x--,x==-1&&(f++,x=7)}if(m+=u,m<0||this.moduleCount<=m){m-=u,u=-u;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(c,l,u){for(var m=t.getRSBlocks(c,l),x=new r,f=0;f<u.length;f++){var p=u[f];x.put(p.mode,4),x.put(p.getLength(),a.getLengthInBits(p.mode,c)),p.write(x)}for(var v=0,f=0;f<m.length;f++)v+=m[f].dataCount;if(x.getLengthInBits()>v*8)throw new Error("code length overflow. ("+x.getLengthInBits()+">"+v*8+")");for(x.getLengthInBits()+4<=v*8&&x.put(0,4);x.getLengthInBits()%8!=0;)x.putBit(!1);for(;!(x.getLengthInBits()>=v*8||(x.put(i.PAD0,8),x.getLengthInBits()>=v*8));)x.put(i.PAD1,8);return i.createBytes(x,m)},i.createBytes=function(c,l){for(var u=0,m=0,x=0,f=new Array(l.length),p=new Array(l.length),v=0;v<l.length;v++){var g=l[v].dataCount,b=l[v].totalCount-g;m=Math.max(m,g),x=Math.max(x,b),f[v]=new Array(g);for(var w=0;w<f[v].length;w++)f[v][w]=255&c.buffer[w+u];u+=g;var y=a.getErrorCorrectPolynomial(b),_=new n(f[v],y.getLength()-1),N=_.mod(y);p[v]=new Array(y.getLength()-1);for(var w=0;w<p[v].length;w++){var C=w+N.getLength()-p[v].length;p[v][w]=C>=0?N.get(C):0}}for(var R=0,w=0;w<l.length;w++)R+=l[w].totalCount;for(var E=new Array(R),I=0,w=0;w<m;w++)for(var v=0;v<l.length;v++)w<f[v].length&&(E[I++]=f[v][w]);for(var w=0;w<x;w++)for(var v=0;v<l.length;v++)w<p[v].length&&(E[I++]=p[v][w]);return E},Om=i,Om}var Uc={},Ob;function hR(){if(Ob)return Uc;Ob=1,Object.defineProperty(Uc,"__esModule",{value:!0});var s=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var x=arguments[m];for(var f in x)Object.prototype.hasOwnProperty.call(x,f)&&(u[f]=x[f])}return u},t=Ay(),r=i(t),a=Yh(),n=i(a);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,m){var x={};for(var f in u)m.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(u,f)&&(x[f]=u[f]);return x}var c={bgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,bgD:r.default.string.isRequired,fgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,fgD:r.default.string.isRequired,size:r.default.number.isRequired,title:r.default.string,viewBoxSize:r.default.number.isRequired,xmlns:r.default.string},l=(0,a.forwardRef)(function(u,m){var x=u.bgColor,f=u.bgD,p=u.fgD,v=u.fgColor,g=u.size,b=u.title,w=u.viewBoxSize,y=u.xmlns,_=y===void 0?"http://www.w3.org/2000/svg":y,N=o(u,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return n.default.createElement("svg",s({},N,{height:g,ref:m,viewBox:"0 0 "+w+" "+w,width:g,xmlns:_}),b?n.default.createElement("title",null,b):null,n.default.createElement("path",{d:f,fill:x}),n.default.createElement("path",{d:p,fill:v}))});return l.displayName="QRCodeSvg",l.propTypes=c,Uc.default=l,Uc}var Db;function fR(){if(Db)return fi;Db=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.QRCode=void 0;var s=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var w=arguments[b];for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(g[y]=w[y])}return g},t=Ay(),r=x(t),a=CN(),n=x(a),i=mR(),o=x(i),c=Yh(),l=x(c),u=hR(),m=x(u);function x(g){return g&&g.__esModule?g:{default:g}}function f(g,b){var w={};for(var y in g)b.indexOf(y)>=0||Object.prototype.hasOwnProperty.call(g,y)&&(w[y]=g[y]);return w}var p={bgColor:r.default.oneOfType([r.default.object,r.default.string]),fgColor:r.default.oneOfType([r.default.object,r.default.string]),level:r.default.string,size:r.default.number,value:r.default.string.isRequired},v=(0,c.forwardRef)(function(g,b){var w=g.bgColor,y=w===void 0?"#FFFFFF":w,_=g.fgColor,N=_===void 0?"#000000":_,C=g.level,R=C===void 0?"L":C,E=g.size,I=E===void 0?256:E,M=g.value,U=f(g,["bgColor","fgColor","level","size","value"]),D=new o.default(-1,n.default[R]);D.addData(M),D.make();var z=D.modules;return l.default.createElement(m.default,s({},U,{bgColor:y,bgD:z.map(function(X,T){return X.map(function(A,O){return A?"":"M "+O+" "+T+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:N,fgD:z.map(function(X,T){return X.map(function(A,O){return A?"M "+O+" "+T+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:b,size:I,viewBoxSize:z.length}))});return fi.QRCode=v,v.displayName="QRCode",v.propTypes=p,fi.default=v,fi}var xR=fR();const pR=Zh(xR);function TN({isOpen:s,onClose:t,providerName:r,providerTitle:a,pageUrl:n}){const[i,o]=d.useState(!1),[c,l]=d.useState(""),u=`Check out ${r} - ${a} on ROAM. Book professional services directly!`,m=`${r} - ${a}`,x=async()=>{try{await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(_){console.error("Failed to copy: ",_)}},f=()=>{const _=document.getElementById("qr-code-canvas");if(_){const N=document.createElement("a");N.download=`${r.replace(/\s+/g,"-")}-qr-code.png`,N.href=_.toDataURL(),N.click()}else{const N=document.querySelector("#qr-code svg");if(N){const C=N.outerHTML,R=new Blob([C],{type:"image/svg+xml"}),E=URL.createObjectURL(R),I=document.createElement("a");I.download=`${r.replace(/\s+/g,"-")}-qr-code.svg`,I.href=E,I.click(),URL.revokeObjectURL(E)}}},p=()=>{const _=encodeURIComponent(m),N=encodeURIComponent(`${u}

${n}`),C=c?`&to=${encodeURIComponent(c)}`:"";window.open(`mailto:?subject=${_}&body=${N}${C}`)},v=()=>{const _=encodeURIComponent(`${u} ${n}`);window.open(`sms:?body=${_}`)},g=()=>{const _=encodeURIComponent(n);window.open(`https://www.facebook.com/sharer/sharer.php?u=${_}`,"_blank")},b=()=>{const _=encodeURIComponent(u),N=encodeURIComponent(n);window.open(`https://twitter.com/intent/tweet?text=${_}&url=${N}`,"_blank")},w=()=>{const _=encodeURIComponent(n),N=encodeURIComponent(m),C=encodeURIComponent(u);window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${_}&title=${N}&summary=${C}`,"_blank")},y=async()=>{if(navigator.share)try{await navigator.share({title:m,text:u,url:n})}catch(_){console.log("Error sharing:",_)}};return e.jsx(Xs,{open:s,onOpenChange:t,children:e.jsxs(Vs,{className:"max-w-lg",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(Ci,{className:"w-5 h-5"}),"Share ",r,"'s Profile"]})}),e.jsxs(Pr,{defaultValue:"link",className:"w-full",children:[e.jsxs(fr,{className:"grid w-full grid-cols-3",children:[e.jsx(hs,{value:"link",children:"Link"}),e.jsx(hs,{value:"qr",children:"QR Code"}),e.jsx(hs,{value:"social",children:"Social"})]}),e.jsxs(ds,{value:"link",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{htmlFor:"share-url",children:"Share Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{id:"share-url",value:n,readOnly:!0,className:"flex-1"}),e.jsx(P,{size:"sm",onClick:x,className:`min-w-[80px] ${i?"bg-green-600 hover:bg-green-700":"bg-roam-blue hover:bg-roam-blue/90"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(th,{className:"w-4 h-4 mr-1"}),"Copy"]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{htmlFor:"email-recipient",children:"Send via Email (Optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{id:"email-recipient",type:"email",placeholder:"recipient@example.com",value:c,onChange:_=>l(_.target.value),className:"flex-1"}),e.jsxs(P,{size:"sm",onClick:p,variant:"outline",children:[e.jsx(sr,{className:"w-4 h-4 mr-1"}),"Send"]})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:v,variant:"outline",className:"flex-1",children:[e.jsx(c0,{className:"w-4 h-4 mr-2"}),"Send SMS"]}),navigator.share&&e.jsxs(P,{onClick:y,variant:"outline",className:"flex-1",children:[e.jsx(Ci,{className:"w-4 h-4 mr-2"}),"More Options"]})]})})]}),e.jsx(ds,{value:"qr",className:"space-y-4",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(V,{className:"p-4",children:e.jsx("div",{id:"qr-code",children:e.jsx(pR,{size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},value:n,viewBox:"0 0 256 256"})})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Scan to Book"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Customers can scan this QR code with their phone camera to instantly access ",r,"'s booking page."]})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(P,{onClick:f,variant:"outline",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"Download QR Code"]}),e.jsxs(P,{onClick:x,variant:"outline",children:[e.jsx(th,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})}),e.jsxs(ds,{value:"social",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Share ",r,"'s profile on social media"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(P,{onClick:g,variant:"outline",className:"justify-start bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[e.jsx(tf,{className:"w-4 h-4 mr-3"}),"Share on Facebook"]}),e.jsxs(P,{onClick:b,variant:"outline",className:"justify-start bg-sky-50 border-sky-200 text-sky-700 hover:bg-sky-100",children:[e.jsx(aE,{className:"w-4 h-4 mr-3"}),"Share on Twitter"]}),e.jsxs(P,{onClick:w,variant:"outline",className:"justify-start bg-blue-50 border-blue-200 text-blue-800 hover:bg-blue-100",children:[e.jsx(Yk,{className:"w-4 h-4 mr-3"}),"Share on LinkedIn"]})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Preview message:"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm text-left",children:['"',u,'"',e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:n})]})]})})]})]})]})})}function IN(){const{customer:s,isCustomer:t}=Ss(),{toast:r}=et(),[a,n]=d.useState(!1),i=d.useCallback(async w=>{if(!t||!(s!=null&&s.id))return r({title:"Sign in required",description:"Please sign in to add favorites",variant:"destructive"}),!1;if(!w||w==="undefined")return console.warn("Invalid service ID provided"),!1;const y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!y.test(s.id)||!y.test(w))return console.warn("Invalid UUID format for customer ID or service ID"),r({title:"Error",description:"Invalid service or customer information",variant:"destructive"}),!1;try{n(!0);const{error:_}=await W.from("customer_favorite_services").insert({customer_id:s.id,service_id:w});return _?(console.error("Error adding service to favorites:",(_==null?void 0:_.message)||_),r({title:"Error",description:"Failed to add service to favorites",variant:"destructive"}),!1):(r({title:"Added to favorites",description:"Service has been added to your favorites"}),!0)}catch(_){return console.error("Error adding service to favorites:",(_==null?void 0:_.message)||_),r({title:"Error",description:"Failed to add service to favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),o=d.useCallback(async w=>{if(!t||!(s!=null&&s.id))return!1;if(!w||w==="undefined")return console.warn("Invalid service ID provided"),!1;const y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!y.test(s.id)||!y.test(w))return console.warn("Invalid UUID format for customer ID or service ID"),!1;try{n(!0);const{error:_}=await W.from("customer_favorite_services").delete().eq("customer_id",s.id).eq("service_id",w);return _?(console.error("Error removing service from favorites:",(_==null?void 0:_.message)||_),r({title:"Error",description:"Failed to remove service from favorites",variant:"destructive"}),!1):(r({title:"Removed from favorites",description:"Service has been removed from your favorites"}),!0)}catch(_){return console.error("Error removing service from favorites:",(_==null?void 0:_.message)||_),r({title:"Error",description:"Failed to remove service from favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),c=d.useCallback(async w=>{var C,R,E;if(!t||!(s!=null&&s.id)||!w||w==="undefined")return!1;const y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!y.test(s.id)||!y.test(w))return console.warn("Invalid UUID format for customer ID or service ID"),!1;const _=3;let N=0;for(;N<_;)try{const{data:I,error:M}=await W.from("customer_favorite_services").select("id").eq("customer_id",s.id).eq("service_id",w).maybeSingle();return M?(console.error("Error checking if service is favorited:",(M==null?void 0:M.message)||M),!1):!!I}catch(I){if(N++,(((C=I==null?void 0:I.message)==null?void 0:C.includes("Failed to fetch"))||((R=I==null?void 0:I.message)==null?void 0:R.includes("ERR_NETWORK"))||((E=I==null?void 0:I.message)==null?void 0:E.includes("ERR_CONNECTION_CLOSED"))||(I==null?void 0:I.name)==="TypeError")&&N<_){console.warn(`Retrying favorite check (${N}/${_})...`),await new Promise(U=>setTimeout(U,Math.pow(2,N)*1e3));continue}return console.error("Error checking if service is favorited:",(I==null?void 0:I.message)||I),!1}return!1},[t,s==null?void 0:s.id]),l=d.useCallback(async w=>{if(!t)return r({title:"Sign in required",description:"Please sign in to add favorites",variant:"destructive"}),!1;try{n(!0);const{error:y}=await W.from("customer_favorite_businesses").insert({customer_id:s.id,business_id:w});return y?(console.error("Error adding business to favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to add business to favorites",variant:"destructive"}),!1):(r({title:"Added to favorites",description:"Business has been added to your favorites"}),!0)}catch(y){return console.error("Error adding business to favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to add business to favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),u=d.useCallback(async w=>{if(!t)return!1;try{n(!0);const{error:y}=await W.from("customer_favorite_businesses").delete().eq("customer_id",s.id).eq("business_id",w);return y?(console.error("Error removing business from favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to remove business from favorites",variant:"destructive"}),!1):(r({title:"Removed from favorites",description:"Business has been removed from your favorites"}),!0)}catch(y){return console.error("Error removing business from favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to remove business from favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),m=d.useCallback(async w=>{var C,R,E;if(!t||!(s!=null&&s.id)||!w||w==="undefined")return!1;const y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!y.test(s.id)||!y.test(w))return console.warn("Invalid UUID format for customer ID or business ID"),!1;const _=3;let N=0;for(;N<_;)try{const{data:I,error:M}=await W.from("customer_favorite_businesses").select("id").eq("customer_id",s.id).eq("business_id",w).maybeSingle();return M?(console.error("Error checking if business is favorited:",(M==null?void 0:M.message)||M),!1):!!I}catch(I){if(N++,(((C=I==null?void 0:I.message)==null?void 0:C.includes("Failed to fetch"))||((R=I==null?void 0:I.message)==null?void 0:R.includes("ERR_NETWORK"))||((E=I==null?void 0:I.message)==null?void 0:E.includes("ERR_CONNECTION_CLOSED"))||(I==null?void 0:I.name)==="TypeError")&&N<_){console.warn(`Retrying business favorite check (${N}/${_})...`),await new Promise(U=>setTimeout(U,Math.pow(2,N)*1e3));continue}return console.error("Error checking if business is favorited:",(I==null?void 0:I.message)||I),!1}return!1},[t,s==null?void 0:s.id]),x=d.useCallback(async w=>{if(!t)return r({title:"Sign in required",description:"Please sign in to add favorites",variant:"destructive"}),!1;try{n(!0);const{error:y}=await W.from("customer_favorite_providers").insert({customer_id:s.id,provider_id:w});return y?(console.error("Error adding provider to favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to add provider to favorites",variant:"destructive"}),!1):(r({title:"Added to favorites",description:"Provider has been added to your favorites"}),!0)}catch(y){return console.error("Error adding provider to favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to add provider to favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),f=d.useCallback(async w=>{if(!t)return!1;try{n(!0);const{error:y}=await W.from("customer_favorite_providers").delete().eq("customer_id",s.id).eq("provider_id",w);return y?(console.error("Error removing provider from favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to remove provider from favorites",variant:"destructive"}),!1):(r({title:"Removed from favorites",description:"Provider has been removed from your favorites"}),!0)}catch(y){return console.error("Error removing provider from favorites:",(y==null?void 0:y.message)||y),r({title:"Error",description:"Failed to remove provider from favorites",variant:"destructive"}),!1}finally{n(!1)}},[t,r]),p=d.useCallback(async w=>{var C,R,E;if(!t||!(s!=null&&s.id)||!w||w==="undefined")return!1;const y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!y.test(s.id)||!y.test(w))return console.warn("Invalid UUID format for customer ID or provider ID"),!1;const _=3;let N=0;for(;N<_;)try{const{data:I,error:M}=await W.from("customer_favorite_providers").select("id").eq("customer_id",s.id).eq("provider_id",w).maybeSingle();return M?(console.error("Error checking if provider is favorited:",(M==null?void 0:M.message)||M),!1):!!I}catch(I){if(N++,(((C=I==null?void 0:I.message)==null?void 0:C.includes("Failed to fetch"))||((R=I==null?void 0:I.message)==null?void 0:R.includes("ERR_NETWORK"))||((E=I==null?void 0:I.message)==null?void 0:E.includes("ERR_CONNECTION_CLOSED"))||(I==null?void 0:I.name)==="TypeError")&&N<_){console.warn(`Retrying provider favorite check (${N}/${_})...`),await new Promise(U=>setTimeout(U,Math.pow(2,N)*1e3));continue}return console.error("Error checking if provider is favorited:",(I==null?void 0:I.message)||I),!1}return!1},[t,s==null?void 0:s.id]),v=d.useCallback(async()=>{if(!t)return[];try{const{data:w,error:y}=await W.from("customer_favorite_services_view").select("*").order("created_at",{ascending:!1});return y?(console.error("Error fetching favorite services:",(y==null?void 0:y.message)||y),[]):w||[]}catch(w){return console.error("Error fetching favorite services:",(w==null?void 0:w.message)||w),[]}},[t]),g=d.useCallback(async()=>{if(!t)return[];try{const{data:w,error:y}=await W.from("customer_favorite_businesses_view").select("*").order("created_at",{ascending:!1});return y?(console.error("Error fetching favorite businesses:",(y==null?void 0:y.message)||y),[]):w||[]}catch(w){return console.error("Error fetching favorite businesses:",(w==null?void 0:w.message)||w),[]}},[t]),b=d.useCallback(async()=>{if(!t)return[];try{const{data:w,error:y}=await W.from("customer_favorite_providers_view").select("*").order("created_at",{ascending:!1});return y?(console.error("Error fetching favorite providers:",(y==null?void 0:y.message)||y),[]):w||[]}catch(w){return console.error("Error fetching favorite providers:",(w==null?void 0:w.message)||w),[]}},[t]);return{isLoading:a,addServiceToFavorites:i,removeServiceFromFavorites:o,isServiceFavorited:c,addBusinessToFavorites:l,removeBusinessFromFavorites:u,isBusinessFavorited:m,addProviderToFavorites:x,removeProviderFromFavorites:f,isProviderFavorited:p,getFavoriteServices:v,getFavoriteBusinesses:g,getFavoriteProviders:b}}function Gr({type:s,itemId:t,className:r,size:a="md",variant:n="ghost",showText:i=!1}){const[o,c]=d.useState(!1),[l,u]=d.useState(!0),{isLoading:m,addServiceToFavorites:x,removeServiceFromFavorites:f,isServiceFavorited:p,addBusinessToFavorites:v,removeBusinessFromFavorites:g,isBusinessFavorited:b,addProviderToFavorites:w,removeProviderFromFavorites:y,isProviderFavorited:_}=IN();d.useEffect(()=>{(async()=>{u(!0);try{let M=!1;switch(s){case"service":M=await p(t);break;case"business":M=await b(t);break;case"provider":M=await _(t);break}c(M)}catch(M){console.error("Error checking favorite status:",M)}finally{u(!1)}})()},[s,t,p,b,_]);const N=async I=>{I.preventDefault(),I.stopPropagation();try{let M=!1;if(o)switch(s){case"service":M=await f(t);break;case"business":M=await g(t);break;case"provider":M=await y(t);break}else switch(s){case"service":M=await x(t);break;case"business":M=await v(t);break;case"provider":M=await w(t);break}M&&c(!o)}catch(M){console.error("Error toggling favorite:",M)}},C=()=>{switch(a){case"sm":return i?"h-8 px-2 text-sm":"h-8 w-8";case"lg":return i?"h-12 px-4 text-lg":"h-12 w-12";default:return i?"h-10 px-3":"h-10 w-10"}},R=()=>{switch(a){case"sm":return"w-3 h-3";case"lg":return"w-6 h-6";default:return"w-4 h-4"}},E=m||l;return e.jsxs(P,{variant:n,size:"sm",onClick:N,disabled:E,className:Oe(C(),"transition-all duration-200",o?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500",r),title:o?"Remove from favorites":"Add to favorites",children:[e.jsx(Cr,{className:Oe(R(),o?"fill-current":"",i?"mr-2":"")}),i&&e.jsx("span",{children:o?"Favorited":"Add to Favorites"})]})}function gR({isCustomer:s=!1}){const[t,r]=d.useState([]),[a,n]=d.useState(!1),[i,o]=d.useState(0),[c,l]=d.useState(!0);d.useEffect(()=>{u()},[s]);const u=async()=>{try{l(!0);const v=new Date().toISOString().split("T")[0],{data:g,error:b}=await W.from("announcements").select("*").eq("is_active",!0).eq("announcement_audience","customer").or(`start_date.is.null,start_date.lte.${v}`).or(`end_date.is.null,end_date.gte.${v}`).order("created_at",{ascending:!1});if(b){console.error("Error fetching announcements:",b);return}const w=(g||[]).filter(y=>{const _=new Date;if(_.setHours(0,0,0,0),y.start_date){const N=new Date(y.start_date);if(N.setHours(0,0,0,0),N>_)return!1}if(y.end_date){const N=new Date(y.end_date);if(N.setHours(23,59,59,999),N<_)return!1}return!0});r(w),w.length>0&&s&&n(!0)}catch(v){console.error("Error fetching announcements:",v)}finally{l(!1)}},m=()=>{n(!1),o(0)},x=()=>{i<t.length-1?o(i+1):m()},f=()=>{i>0&&o(i-1)};if(c||t.length===0)return null;const p=t[i];return e.jsx(Xs,{open:a,onOpenChange:n,children:e.jsxs(Vs,{className:"max-w-md mx-auto",children:[e.jsxs(Js,{className:"relative",children:[e.jsx(P,{variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-6 w-6 p-0",onClick:m,children:e.jsx(wt,{className:"h-4 w-4"})}),e.jsx(Ws,{className:"text-lg font-semibold pr-8",children:p.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-foreground/80 whitespace-pre-wrap",children:p.content}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-xs text-foreground/60",children:t.length>1&&e.jsxs("span",{children:[i+1," of ",t.length]})}),e.jsxs("div",{className:"flex gap-2",children:[t.length>1&&i>0&&e.jsx(P,{variant:"outline",size:"sm",onClick:f,children:"Previous"}),e.jsx(P,{size:"sm",onClick:x,className:"bg-roam-blue hover:bg-roam-blue/90",children:i<t.length-1?"Next":"Close"})]})]})]})]})})}const vR=({isOpen:s,onClose:t,defaultTab:r="signin"})=>{const{signInCustomer:a,signUpCustomer:n,signInWithGoogle:i,signInWithApple:o,resendVerificationEmail:c,loading:l}=Ss(),[u,m]=d.useState(r),[x,f]=d.useState(!1),[p,v]=d.useState(null),[g,b]=d.useState(null),[w,y]=d.useState(!1),[_,N]=d.useState(null);d.useEffect(()=>{m(r)},[r]);const[C,R]=d.useState({email:"",password:""}),[E,I]=d.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:""}),M=()=>{R({email:"",password:""}),I({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:""}),v(null),b(null),f(!1)},U=()=>{M(),t()},D=()=>E.firstName.trim()?E.lastName.trim()?E.email.trim()?/\S+@\S+\.\S+/.test(E.email)?E.password.length<8?(v("Password must be at least 8 characters long"),!1):E.password!==E.confirmPassword?(v("Passwords do not match"),!1):!0:(v("Please enter a valid email address"),!1):(v("Email is required"),!1):(v("Last name is required"),!1):(v("First name is required"),!1),z=async F=>{var q,te,re;if(F.preventDefault(),v(null),!C.email||!C.password){v("Please fill in all fields");return}try{await a(C.email,C.password),b("Successfully signed in!"),setTimeout(()=>{U()},1500)}catch(be){console.error("Sign in error:",be);let Me="Sign in failed. Please try again.";(q=be.message)!=null&&q.includes("Invalid login credentials")?Me="Invalid email or password. Please check your credentials.":(te=be.message)!=null&&te.includes("Email not confirmed")?Me="Please check your email and confirm your account before signing in.":(re=be.message)!=null&&re.includes("Customer account not found")&&(Me="Account not found. Please sign up first."),v(Me)}},X=async F=>{var q,te,re,be,Me;if(F.preventDefault(),v(null),!!D())try{await n({email:E.email,password:E.password,firstName:E.firstName,lastName:E.lastName,phone:E.phone}),b("Account created successfully! Please check your email to confirm your account, then sign in."),y(!0),N(E.email),m("signin"),R({email:E.email,password:""})}catch(je){console.error("Sign up error:",je);let Y="Sign up failed. Please try again.";(q=je.message)!=null&&q.includes("already registered")||(te=je.message)!=null&&te.includes("already been registered")?Y="An account with this email already exists. Please sign in instead.":(re=je.message)!=null&&re.includes("password")?Y="Password must be at least 8 characters long.":(be=je.message)!=null&&be.includes("email")?Y="Please enter a valid email address.":(Me=je.message)!=null&&Me.includes("Registration failed")&&(Y="Please check your email to confirm your account, then try signing in."),v(Y)}},T=async()=>{var F,q;v(null);try{await i()}catch(te){console.error("Google sign-in error:",te);let re="Failed to sign in with Google. Please try again.";(F=te.message)!=null&&F.includes("provider is not enabled")||te.error_code==="validation_failed"?re="Google sign-in is currently unavailable. Please use email/password to sign in.":(q=te.message)!=null&&q.includes("popup_closed")&&(re="Sign-in was cancelled. Please try again."),v(re)}},A=async()=>{var F,q;v(null);try{await o()}catch(te){console.error("Apple sign-in error:",te);let re="Failed to sign in with Apple. Please try again.";(F=te.message)!=null&&F.includes("provider is not enabled")||te.error_code==="validation_failed"?re="Apple sign-in is currently unavailable. Please use email/password to sign in.":(q=te.message)!=null&&q.includes("popup_closed")&&(re="Sign-in was cancelled. Please try again."),v(re)}},O=()=>{const F=navigator.userAgent;return/iPad|iPhone|iPod|Macintosh/.test(F)},$=async F=>{var q,te,re;v(null);try{await c(F),b(`Verification email resent to ${F}. Please check your inbox and spam folder.`),y(!0),N(F)}catch(be){console.error("Resend verification email error:",be);let Me="Failed to resend verification email. Please try again.";(q=be.message)!=null&&q.includes("rate limit")||(te=be.message)!=null&&te.includes("too many")?Me="Too many requests. Please wait a few minutes before requesting another email.":(re=be.message)!=null&&re.includes("not found")&&(Me="Email address not found. Please check the email and try again."),v(Me)}};return e.jsx(Xs,{open:s,onOpenChange:U,children:e.jsxs(Vs,{className:"sm:max-w-md",children:[e.jsxs(Js,{children:[e.jsxs(Ws,{className:"text-center text-2xl font-bold",children:["Welcome to"," ",e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fdcd8f042c3944c5c8b0e2484134236c2?format=webp&width=800",alt:"ROAM",className:"inline h-4 ml-2"})]}),e.jsx(Lf,{className:"text-center",children:"Access your bookings and discover amazing local services"})]}),e.jsxs(Pr,{value:u,onValueChange:m,className:"w-full",children:[e.jsxs(fr,{className:"grid w-full grid-cols-2",children:[e.jsx(hs,{value:"signin",children:"Sign In"}),e.jsx(hs,{value:"signup",children:"Sign Up"})]}),e.jsx(ds,{value:"signin",className:"space-y-4",children:e.jsx(V,{children:e.jsxs(K,{className:"pt-6",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs(P,{type:"button",variant:"outline",className:"w-full",onClick:T,disabled:l,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),O()&&e.jsxs(P,{type:"button",variant:"outline",className:"w-full",onClick:A,disabled:l,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Continue with Apple"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signin-email",children:"Email"}),e.jsx(ae,{id:"signin-email",type:"email",placeholder:"Enter your email",value:C.email,onChange:F=>R({...C,email:F.target.value}),disabled:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signin-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"signin-password",type:x?"text":"password",placeholder:"Enter your password",value:C.password,onChange:F=>R({...C,password:F.target.value}),disabled:l}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>f(!x),disabled:l,children:x?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),p&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(ht,{className:"h-4 w-4"}),p]}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[e.jsx(Xe,{className:"h-4 w-4"}),g]}),(w||(p==null?void 0:p.includes("Email not confirmed"))||(p==null?void 0:p.includes("confirm your account")))&&(_||C.email)&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Didn't receive the verification email?"}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>$(_||C.email),disabled:l,className:"w-full border-blue-300 text-blue-700 hover:bg-blue-100",children:"Resend Verification Email"})]}),e.jsx(P,{type:"submit",className:"w-full bg-roam-blue hover:bg-roam-blue/90",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"})]})]})})}),e.jsx(ds,{value:"signup",className:"space-y-4",children:e.jsx(V,{children:e.jsxs(K,{className:"pt-6",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs(P,{type:"button",variant:"outline",className:"w-full",onClick:T,disabled:l,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),O()&&e.jsxs(P,{type:"button",variant:"outline",className:"w-full",onClick:A,disabled:l,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Continue with Apple"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]})]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-firstname",children:"First Name"}),e.jsx(ae,{id:"signup-firstname",placeholder:"First name",value:E.firstName,onChange:F=>I({...E,firstName:F.target.value}),disabled:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-lastname",children:"Last Name"}),e.jsx(ae,{id:"signup-lastname",placeholder:"Last name",value:E.lastName,onChange:F=>I({...E,lastName:F.target.value}),disabled:l})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-email",children:"Email"}),e.jsx(ae,{id:"signup-email",type:"email",placeholder:"Enter your email",value:E.email,onChange:F=>I({...E,email:F.target.value}),disabled:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-phone",children:"Phone (Optional)"}),e.jsx(ae,{id:"signup-phone",type:"tel",placeholder:"(555) 123-4567",value:E.phone,onChange:F=>I({...E,phone:F.target.value}),disabled:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"signup-password",type:x?"text":"password",placeholder:"Create a password (min 8 characters)",value:E.password,onChange:F=>I({...E,password:F.target.value}),disabled:l}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>f(!x),disabled:l,children:x?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"signup-confirm-password",children:"Confirm Password"}),e.jsx(ae,{id:"signup-confirm-password",type:x?"text":"password",placeholder:"Confirm your password",value:E.confirmPassword,onChange:F=>I({...E,confirmPassword:F.target.value}),disabled:l})]}),p&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(ht,{className:"h-4 w-4"}),p]}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[e.jsx(Xe,{className:"h-4 w-4"}),g]}),(w||(p==null?void 0:p.includes("Email not confirmed"))||(p==null?void 0:p.includes("confirm your account")))&&(_||E.email)&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Didn't receive the verification email?"}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>$(_||E.email),disabled:l,className:"w-full border-blue-300 text-blue-700 hover:bg-blue-100",children:"Resend Verification Email"})]}),e.jsx(P,{type:"submit",className:"w-full bg-roam-blue hover:bg-roam-blue/90",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})]})})})]}),e.jsx("div",{className:"text-center text-sm text-foreground/60",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})]})})};var bR="DismissableLayer",$h="dismissableLayer.update",yR="dismissableLayer.pointerDownOutside",jR="dismissableLayer.focusOutside",Fb,AN=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),MN=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(AN),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=_R(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=SR(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Fb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),Lb(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Fb)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),Lb())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener($h,E),()=>document.removeEventListener($h,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});MN.displayName=bR;var wR="DismissableLayerBranch",NR=d.forwardRef((s,t)=>{const r=d.useContext(AN),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});NR.displayName=wR;function _R(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){RN(yR,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function SR(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&RN(jR,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Lb(){const s=new CustomEvent($h);document.dispatchEvent(s)}function RN(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var Dm=0;function CR(){d.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??$b()),document.body.insertAdjacentElement("beforeend",s[1]??$b()),Dm++,()=>{Dm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Dm--}},[])}function $b(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",s}var kR="Portal",ON=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});ON.displayName=kR;var DN=yl(),Fm=function(){},Zd=d.forwardRef(function(s,t){var r=d.useRef(null),a=d.useState({onScrollCapture:Fm,onWheelCapture:Fm,onTouchMoveCapture:Fm}),n=a[0],i=a[1],o=s.forwardProps,c=s.children,l=s.className,u=s.removeScrollBar,m=s.enabled,x=s.shards,f=s.sideCar,p=s.noIsolation,v=s.inert,g=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,y=s.gapMode,_=oo(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,C=bl([r,t]),R=_s(_s({},_),n);return d.createElement(d.Fragment,null,m&&d.createElement(N,{sideCar:DN,removeScrollBar:u,shards:x,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?d.cloneElement(d.Children.only(c),_s(_s({},R),{ref:C})):d.createElement(w,_s({},R,{className:l,ref:C}),c))});Zd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zd.classNames={fullWidth:Ya,zeroRight:Xa};var Bh=!1;if(typeof window<"u")try{var zc=Object.defineProperty({},"passive",{get:function(){return Bh=!0,!0}});window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{Bh=!1}var xi=Bh?{passive:!1}:!1,ER=function(s){return s.tagName==="TEXTAREA"},FN=function(s,t){var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ER(s)&&r[t]==="visible")},PR=function(s){return FN(s,"overflowY")},TR=function(s){return FN(s,"overflowX")},Bb=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=LN(s,a);if(n){var i=$N(s,a),o=i[1],c=i[2];if(o>c)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},IR=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},AR=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},LN=function(s,t){return s==="v"?PR(t):TR(t)},$N=function(s,t){return s==="v"?IR(t):AR(t)},MR=function(s,t){return s==="h"&&t==="rtl"?-1:1},RR=function(s,t,r,a,n){var i=MR(s,window.getComputedStyle(t).direction),o=i*a,c=r.target,l=t.contains(c),u=!1,m=o>0,x=0,f=0;do{var p=$N(s,c),v=p[0],g=p[1],b=p[2],w=g-b-i*v;(v||w)&&LN(s,c)&&(x+=w,f+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(u=!0),u},qc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Ub=function(s){return[s.deltaX,s.deltaY]},zb=function(s){return s&&"current"in s?s.current:s},OR=function(s,t){return s[0]===t[0]&&s[1]===t[1]},DR=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},FR=0,pi=[];function LR(s){var t=d.useRef([]),r=d.useRef([0,0]),a=d.useRef(),n=d.useState(FR++)[0],i=d.useState(lo)[0],o=d.useRef(s);d.useEffect(function(){o.current=s},[s]),d.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var g=vl([s.lockRef.current],(s.shards||[]).map(zb),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var c=d.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var w=qc(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-w[0],N="deltaY"in g?g.deltaY:y[1]-w[1],C,R=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var I=Bb(E,R);if(!I)return!0;if(I?C=E:(C=E==="v"?"h":"v",I=Bb(E,R)),!I)return!1;if(!a.current&&"changedTouches"in g&&(_||N)&&(a.current=C),!C)return!0;var M=a.current||C;return RR(M,b,g,M==="h"?_:N)},[]),l=d.useCallback(function(g){var b=g;if(!(!pi.length||pi[pi.length-1]!==i)){var w="deltaY"in b?Ub(b):qc(b),y=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&OR(C.delta,w)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(zb).filter(Boolean).filter(function(C){return C.contains(b.target)}),N=_.length>0?c(b,_[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(g,b,w,y){var _={name:g,delta:b,target:w,should:y,shadowParent:$R(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=d.useCallback(function(g){r.current=qc(g),a.current=void 0},[]),x=d.useCallback(function(g){u(g.type,Ub(g),g.target,c(g,s.lockRef.current))},[]),f=d.useCallback(function(g){u(g.type,qc(g),g.target,c(g,s.lockRef.current))},[]);d.useEffect(function(){return pi.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",l,xi),document.addEventListener("touchmove",l,xi),document.addEventListener("touchstart",m,xi),function(){pi=pi.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,xi),document.removeEventListener("touchmove",l,xi),document.removeEventListener("touchstart",m,xi)}},[]);var p=s.removeScrollBar,v=s.inert;return d.createElement(d.Fragment,null,v?d.createElement(i,{styles:DR(n)}):null,p?d.createElement(wl,{gapMode:s.gapMode}):null)}function $R(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const BR=jl(DN,LR);var BN=d.forwardRef(function(s,t){return d.createElement(Zd,_s({},s,{ref:t,sideCar:BR}))});BN.classNames=Zd.classNames;var $f="Popover",[UN,V9]=ft($f,[tn]),_l=tn(),[UR,ln]=UN($f),zN=s=>{const{__scopePopover:t,children:r,open:a,defaultOpen:n,onOpenChange:i,modal:o=!1}=s,c=_l(t),l=d.useRef(null),[u,m]=d.useState(!1),[x=!1,f]=hr({prop:a,defaultProp:n,onChange:i});return e.jsx(gf,{...c,children:e.jsx(UR,{scope:t,contentId:Ut(),triggerRef:l,open:x,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>m(!0),[]),onCustomAnchorRemove:d.useCallback(()=>m(!1),[]),modal:o,children:r})})};zN.displayName=$f;var qN="PopoverAnchor",zR=d.forwardRef((s,t)=>{const{__scopePopover:r,...a}=s,n=ln(qN,r),i=_l(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=n;return d.useEffect(()=>(o(),()=>c()),[o,c]),e.jsx(xl,{...i,...a,ref:t})});zR.displayName=qN;var VN="PopoverTrigger",JN=d.forwardRef((s,t)=>{const{__scopePopover:r,...a}=s,n=ln(VN,r),i=_l(r),o=qe(t,n.triggerRef),c=e.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":YN(n.open),...a,ref:o,onClick:ye(s.onClick,n.onOpenToggle)});return n.hasCustomAnchor?c:e.jsx(xl,{asChild:!0,...i,children:c})});JN.displayName=VN;var Bf="PopoverPortal",[qR,VR]=UN(Bf,{forceMount:void 0}),WN=s=>{const{__scopePopover:t,forceMount:r,children:a,container:n}=s,i=ln(Bf,t);return e.jsx(qR,{scope:t,forceMount:r,children:e.jsx(xt,{present:r||i.open,children:e.jsx(ON,{asChild:!0,container:n,children:a})})})};WN.displayName=Bf;var Vi="PopoverContent",HN=d.forwardRef((s,t)=>{const r=VR(Vi,s.__scopePopover),{forceMount:a=r.forceMount,...n}=s,i=ln(Vi,s.__scopePopover);return e.jsx(xt,{present:a||i.open,children:i.modal?e.jsx(JR,{...n,ref:t}):e.jsx(WR,{...n,ref:t})})});HN.displayName=Vi;var JR=d.forwardRef((s,t)=>{const r=ln(Vi,s.__scopePopover),a=d.useRef(null),n=qe(t,a),i=d.useRef(!1);return d.useEffect(()=>{const o=a.current;if(o)return gl(o)},[]),e.jsx(BN,{as:Yr,allowPinchZoom:!0,children:e.jsx(GN,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(s.onCloseAutoFocus,o=>{var c;o.preventDefault(),i.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ye(s.onPointerDownOutside,o=>{const c=o.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ye(s.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),WR=d.forwardRef((s,t)=>{const r=ln(Vi,s.__scopePopover),a=d.useRef(!1),n=d.useRef(!1);return e.jsx(GN,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(a.current||(c=r.triggerRef.current)==null||c.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var l,u;(l=s.onInteractOutside)==null||l.call(s,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),GN=d.forwardRef((s,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:m,...x}=s,f=ln(Vi,r),p=_l(r);return CR(),e.jsx(io,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(MN,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:e.jsx(Od,{"data-state":YN(f.open),role:"dialog",id:f.contentId,...p,...x,ref:t,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),XN="PopoverClose",HR=d.forwardRef((s,t)=>{const{__scopePopover:r,...a}=s,n=ln(XN,r);return e.jsx(Ae.button,{type:"button",...a,ref:t,onClick:ye(s.onClick,()=>n.onOpenChange(!1))})});HR.displayName=XN;var GR="PopoverArrow",XR=d.forwardRef((s,t)=>{const{__scopePopover:r,...a}=s,n=_l(r);return e.jsx(Dd,{...n,...a,ref:t})});XR.displayName=GR;function YN(s){return s?"open":"closed"}var YR=zN,ZR=JN,KR=WN,ZN=HN;const QR=YR,eO=ZR,KN=d.forwardRef(({className:s,align:t="center",sideOffset:r=4,...a},n)=>e.jsx(KR,{children:e.jsx(ZN,{ref:n,align:t,sideOffset:r,className:Oe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));KN.displayName=ZN.displayName;var Uf="Switch",[sO,J9]=ft(Uf),[tO,rO]=sO(Uf),QN=d.forwardRef((s,t)=>{const{__scopeSwitch:r,name:a,checked:n,defaultChecked:i,required:o,disabled:c,value:l="on",onCheckedChange:u,...m}=s,[x,f]=d.useState(null),p=qe(t,y=>f(y)),v=d.useRef(!1),g=x?!!x.closest("form"):!0,[b=!1,w]=hr({prop:n,defaultProp:i,onChange:u});return e.jsxs(tO,{scope:r,checked:b,disabled:c,children:[e.jsx(Ae.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":t_(b),"data-disabled":c?"":void 0,disabled:c,value:l,...m,ref:p,onClick:ye(s.onClick,y=>{w(_=>!_),g&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})}),g&&e.jsx(aO,{control:x,bubbles:!v.current,name:a,value:l,checked:b,required:o,disabled:c,style:{transform:"translateX(-100%)"}})]})});QN.displayName=Uf;var e_="SwitchThumb",s_=d.forwardRef((s,t)=>{const{__scopeSwitch:r,...a}=s,n=rO(e_,r);return e.jsx(Ae.span,{"data-state":t_(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})});s_.displayName=e_;var aO=s=>{const{control:t,checked:r,bubbles:a=!0,...n}=s,i=d.useRef(null),o=Vd(r),c=Rd(t);return d.useEffect(()=>{const l=i.current,u=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&x){const f=new Event("click",{bubbles:a});x.call(l,r),l.dispatchEvent(f)}},[o,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function t_(s){return s?"checked":"unchecked"}var r_=QN,nO=s_;const Ms=d.forwardRef(({className:s,...t},r)=>e.jsx(r_,{className:Oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:e.jsx(nO,{className:Oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ms.displayName=r_.displayName;function iO(s,t){return d.useReducer((r,a)=>t[r][a]??r,s)}var zf="ScrollArea",[a_,W9]=ft(zf),[oO,xr]=a_(zf),n_=d.forwardRef((s,t)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:i=600,...o}=s,[c,l]=d.useState(null),[u,m]=d.useState(null),[x,f]=d.useState(null),[p,v]=d.useState(null),[g,b]=d.useState(null),[w,y]=d.useState(0),[_,N]=d.useState(0),[C,R]=d.useState(!1),[E,I]=d.useState(!1),M=qe(t,D=>l(D)),U=ao(n);return e.jsx(oO,{scope:r,type:a,dir:U,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:m,content:x,onContentChange:f,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:R,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:I,onCornerWidthChange:y,onCornerHeightChange:N,children:e.jsx(Ae.div,{dir:U,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":_+"px",...s.style}})})});n_.displayName=zf;var i_="ScrollAreaViewport",o_=d.forwardRef((s,t)=>{const{__scopeScrollArea:r,children:a,nonce:n,...i}=s,o=xr(i_,r),c=d.useRef(null),l=qe(t,c,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...s.style},children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});o_.displayName=i_;var sa="ScrollAreaScrollbar",qf=d.forwardRef((s,t)=>{const{forceMount:r,...a}=s,n=xr(sa,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c=s.orientation==="horizontal";return d.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),n.type==="hover"?e.jsx(lO,{...a,ref:t,forceMount:r}):n.type==="scroll"?e.jsx(cO,{...a,ref:t,forceMount:r}):n.type==="auto"?e.jsx(l_,{...a,ref:t,forceMount:r}):n.type==="always"?e.jsx(Vf,{...a,ref:t}):null});qf.displayName=sa;var lO=d.forwardRef((s,t)=>{const{forceMount:r,...a}=s,n=xr(sa,s.__scopeScrollArea),[i,o]=d.useState(!1);return d.useEffect(()=>{const c=n.scrollArea;let l=0;if(c){const u=()=>{window.clearTimeout(l),o(!0)},m=()=>{l=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(xt,{present:r||i,children:e.jsx(l_,{"data-state":i?"visible":"hidden",...a,ref:t})})}),cO=d.forwardRef((s,t)=>{const{forceMount:r,...a}=s,n=xr(sa,s.__scopeScrollArea),i=s.orientation==="horizontal",o=Qd(()=>l("SCROLL_END"),100),[c,l]=iO("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>l("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,n.scrollHideDelay,l]),d.useEffect(()=>{const u=n.viewport,m=i?"scrollLeft":"scrollTop";if(u){let x=u[m];const f=()=>{const p=u[m];x!==p&&(l("SCROLL"),o()),x=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[n.viewport,i,l,o]),e.jsx(xt,{present:r||c!=="hidden",children:e.jsx(Vf,{"data-state":c==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:ye(s.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ye(s.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),l_=d.forwardRef((s,t)=>{const r=xr(sa,s.__scopeScrollArea),{forceMount:a,...n}=s,[i,o]=d.useState(!1),c=s.orientation==="horizontal",l=Qd(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;o(c?u:m)}},10);return Ji(r.viewport,l),Ji(r.content,l),e.jsx(xt,{present:a||i,children:e.jsx(Vf,{"data-state":i?"visible":"hidden",...n,ref:t})})}),Vf=d.forwardRef((s,t)=>{const{orientation:r="vertical",...a}=s,n=xr(sa,s.__scopeScrollArea),i=d.useRef(null),o=d.useRef(0),[c,l]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=h_(c.viewport,c.content),m={...a,sizes:c,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function x(f,p){return xO(f,o.current,c,p)}return r==="horizontal"?e.jsx(dO,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const f=n.viewport.scrollLeft,p=qb(f,c,n.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollLeft=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollLeft=x(f,n.dir))}}):r==="vertical"?e.jsx(uO,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const f=n.viewport.scrollTop,p=qb(f,c);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollTop=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollTop=x(f))}}):null}),dO=d.forwardRef((s,t)=>{const{sizes:r,onSizesChange:a,...n}=s,i=xr(sa,s.__scopeScrollArea),[o,c]=d.useState(),l=d.useRef(null),u=qe(t,l,i.onScrollbarXChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),e.jsx(d_,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Kd(r)+"px",...s.style},onThumbPointerDown:m=>s.onThumbPointerDown(m.x),onDragScroll:m=>s.onDragScroll(m.x),onWheelScroll:(m,x)=>{if(i.viewport){const f=i.viewport.scrollLeft+m.deltaX;s.onWheelScroll(f),x_(f,x)&&m.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:yd(o.paddingLeft),paddingEnd:yd(o.paddingRight)}})}})}),uO=d.forwardRef((s,t)=>{const{sizes:r,onSizesChange:a,...n}=s,i=xr(sa,s.__scopeScrollArea),[o,c]=d.useState(),l=d.useRef(null),u=qe(t,l,i.onScrollbarYChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),e.jsx(d_,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Kd(r)+"px",...s.style},onThumbPointerDown:m=>s.onThumbPointerDown(m.y),onDragScroll:m=>s.onDragScroll(m.y),onWheelScroll:(m,x)=>{if(i.viewport){const f=i.viewport.scrollTop+m.deltaY;s.onWheelScroll(f),x_(f,x)&&m.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:yd(o.paddingTop),paddingEnd:yd(o.paddingBottom)}})}})}),[mO,c_]=a_(sa),d_=d.forwardRef((s,t)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:m,onResize:x,...f}=s,p=xr(sa,r),[v,g]=d.useState(null),b=qe(t,M=>g(M)),w=d.useRef(null),y=d.useRef(""),_=p.viewport,N=a.content-a.viewport,C=Ns(m),R=Ns(l),E=Qd(x,10);function I(M){if(w.current){const U=M.clientX-w.current.left,D=M.clientY-w.current.top;u({x:U,y:D})}}return d.useEffect(()=>{const M=U=>{const D=U.target;(v==null?void 0:v.contains(D))&&C(U,N)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[_,v,N,C]),d.useEffect(R,[a,R]),Ji(v,E),Ji(p.content,E),e.jsx(mO,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:Ns(i),onThumbPointerUp:Ns(o),onThumbPositionChange:R,onThumbPointerDown:Ns(c),children:e.jsx(Ae.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:ye(s.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),w.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),I(M))}),onPointerMove:ye(s.onPointerMove,I),onPointerUp:ye(s.onPointerUp,M=>{const U=M.target;U.hasPointerCapture(M.pointerId)&&U.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),bd="ScrollAreaThumb",u_=d.forwardRef((s,t)=>{const{forceMount:r,...a}=s,n=c_(bd,s.__scopeScrollArea);return e.jsx(xt,{present:r||n.hasThumb,children:e.jsx(hO,{ref:t,...a})})}),hO=d.forwardRef((s,t)=>{const{__scopeScrollArea:r,style:a,...n}=s,i=xr(bd,r),o=c_(bd,r),{onThumbPositionChange:c}=o,l=qe(t,x=>o.onThumbChange(x)),u=d.useRef(),m=Qd(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const x=i.viewport;if(x){const f=()=>{if(m(),!u.current){const p=pO(x,c);u.current=p,c()}};return c(),x.addEventListener("scroll",f),()=>x.removeEventListener("scroll",f)}},[i.viewport,m,c]),e.jsx(Ae.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:ye(s.onPointerDownCapture,x=>{const p=x.target.getBoundingClientRect(),v=x.clientX-p.left,g=x.clientY-p.top;o.onThumbPointerDown({x:v,y:g})}),onPointerUp:ye(s.onPointerUp,o.onThumbPointerUp)})});u_.displayName=bd;var Jf="ScrollAreaCorner",m_=d.forwardRef((s,t)=>{const r=xr(Jf,s.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(fO,{...s,ref:t}):null});m_.displayName=Jf;var fO=d.forwardRef((s,t)=>{const{__scopeScrollArea:r,...a}=s,n=xr(Jf,r),[i,o]=d.useState(0),[c,l]=d.useState(0),u=!!(i&&c);return Ji(n.scrollbarX,()=>{var x;const m=((x=n.scrollbarX)==null?void 0:x.offsetHeight)||0;n.onCornerHeightChange(m),l(m)}),Ji(n.scrollbarY,()=>{var x;const m=((x=n.scrollbarY)==null?void 0:x.offsetWidth)||0;n.onCornerWidthChange(m),o(m)}),u?e.jsx(Ae.div,{...a,ref:t,style:{width:i,height:c,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function yd(s){return s?parseInt(s,10):0}function h_(s,t){const r=s/t;return isNaN(r)?0:r}function Kd(s){const t=h_(s.viewport,s.content),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=(s.scrollbar.size-r)*t;return Math.max(a,18)}function xO(s,t,r,a="ltr"){const n=Kd(r),i=n/2,o=t||i,c=n-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-c,m=r.content-r.viewport,x=a==="ltr"?[0,m]:[m*-1,0];return f_([l,u],x)(s)}function qb(s,t,r="ltr"){const a=Kd(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,o=t.content-t.viewport,c=i-a,l=r==="ltr"?[0,o]:[o*-1,0],u=Th(s,l);return f_([0,o],[0,c])(u)}function f_(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(s[1]-s[0]);return t[0]+a*(r-s[0])}}function x_(s,t){return s>0&&s<t}var pO=(s,t=()=>{})=>{let r={left:s.scrollLeft,top:s.scrollTop},a=0;return function n(){const i={left:s.scrollLeft,top:s.scrollTop},o=r.left!==i.left,c=r.top!==i.top;(o||c)&&t(),r=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function Qd(s,t){const r=Ns(s),a=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(a.current),[]),d.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function Ji(s,t){const r=Ns(t);Fs(()=>{let a=0;if(s){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(s),()=>{window.cancelAnimationFrame(a),n.unobserve(s)}}},[s,r])}var p_=n_,gO=o_,vO=m_;const uo=d.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(p_,{ref:a,className:Oe("relative overflow-hidden",s),...r,children:[e.jsx(gO,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(g_,{}),e.jsx(vO,{})]}));uo.displayName=p_.displayName;const g_=d.forwardRef(({className:s,orientation:t="vertical",...r},a)=>e.jsx(qf,{ref:a,orientation:t,className:Oe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(u_,{className:"relative flex-1 rounded-full bg-border"})}));g_.displayName=qf.displayName;var bO="Separator",Vb="horizontal",yO=["horizontal","vertical"],v_=d.forwardRef((s,t)=>{const{decorative:r,orientation:a=Vb,...n}=s,i=jO(a)?a:Vb,c=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Ae.div,{"data-orientation":i,...c,...n,ref:t})});v_.displayName=bO;function jO(s){return yO.includes(s)}var b_=v_;const er=d.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},n)=>e.jsx(b_,{ref:n,decorative:r,orientation:t,className:Oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));er.displayName=b_.displayName;function wO(){const{user:s,customer:t,userType:r}=Ss(),{toast:a}=et(),[n,i]=d.useState([]),[o,c]=d.useState(!1),[l,u]=d.useState({email:!0,push:!0,sms:!0,inApp:!0}),m=d.useRef(null),x=d.useRef(null),f=s||t,p=d.useCallback(()=>{if(f!=null&&f.id)try{m.current&&m.current.close();const E=new EventSource(`/api/notifications/edge?userId=${f.id}&userType=${r||"customer"}`);E.onopen=()=>{c(!0),console.log("Connected to notification stream")},E.onmessage=I=>{try{const M=JSON.parse(I.data);switch(M.type){case"connected":console.log("SSE connection established");break;case"booking_status_update":g(M);break;case"new_message":b(M);break;case"booking_reminder":w(M);break;default:y(M)}i(U=>[M,...U.slice(0,49)])}catch(M){console.error("Error parsing notification:",M)}},E.onerror=I=>{console.error("SSE connection error:",I),c(!1),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{p()},5e3)},m.current=E}catch(E){console.error("Error connecting to notification stream:",E),c(!1)}},[f==null?void 0:f.id,r]),v=d.useCallback(()=>{m.current&&(m.current.close(),m.current=null),x.current&&(clearTimeout(x.current),x.current=null),c(!1)},[]),g=E=>{const{data:I}=E;a({title:"Booking Status Updated",description:`${I.serviceName} - ${I.newStatus}`,action:I.bookingId?{label:"View Booking",onClick:()=>{window.location.href=`/my-bookings?booking=${I.bookingId}`}}:void 0})},b=E=>{a({title:"New Message",description:E.message,action:E.bookingId?{label:"Open Chat",onClick:()=>{window.location.href=`/my-bookings?chat=${E.bookingId}`}}:void 0})},w=E=>{a({title:"Booking Reminder",description:E.message,action:E.bookingId?{label:"View Details",onClick:()=>{window.location.href=`/my-bookings?booking=${E.bookingId}`}}:void 0})},y=E=>{a({title:"Notification",description:E.message})},_=d.useCallback(async E=>{try{(await fetch("/api/notifications/edge",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:E,read:!0})})).ok&&i(M=>M.map(U=>U.id===E?{...U,read:!0}:U))}catch(I){console.error("Error marking notification as read:",I)}},[]),N=d.useCallback(async()=>{try{(await fetch("/api/notifications/edge",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:f==null?void 0:f.id,markAllRead:!0})})).ok&&i(I=>I.map(M=>({...M,read:!0})))}catch(E){console.error("Error marking all notifications as read:",E)}},[f==null?void 0:f.id]),C=d.useCallback(async E=>{try{(await fetch("/api/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:f==null?void 0:f.id,preferences:{...l,...E}})})).ok&&u(M=>({...M,...E}))}catch(I){console.error("Error updating notification preferences:",I)}},[f==null?void 0:f.id,l]),R=n.filter(E=>!E.read).length;return d.useEffect(()=>(f!=null&&f.id&&p(),()=>{v()}),[f==null?void 0:f.id,p,v]),d.useEffect(()=>()=>{v()},[v]),{notifications:n,isConnected:o,preferences:l,unreadCount:R,markAsRead:_,markAllAsRead:N,updatePreferences:C,connect:p,disconnect:v}}function Ze(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function qt(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}function Pt(s,t){const r=Ze(s);return isNaN(t)?qt(s,NaN):(t&&r.setDate(r.getDate()+t),r)}function Tr(s,t){const r=Ze(s);if(isNaN(t))return qt(s,NaN);if(!t)return r;const a=r.getDate(),n=qt(s,r.getTime());n.setMonth(r.getMonth()+t+1,0);const i=n.getDate();return a>=i?n:(r.setFullYear(n.getFullYear(),n.getMonth(),a),r)}const Wf=6048e5,NO=864e5,Vc=43200,Jb=1440;let _O={};function mo(){return _O}function Qr(s,t){var c,l,u,m;const r=mo(),a=(t==null?void 0:t.weekStartsOn)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,n=Ze(s),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Mn(s){return Qr(s,{weekStartsOn:1})}function y_(s){const t=Ze(s),r=t.getFullYear(),a=qt(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Mn(a),i=qt(s,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Mn(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Wi(s){const t=Ze(s);return t.setHours(0,0,0,0),t}function Hi(s){const t=Ze(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function Xr(s,t){const r=Wi(s),a=Wi(t),n=+r-Hi(r),i=+a-Hi(a);return Math.round((n-i)/NO)}function SO(s){const t=y_(s),r=qt(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Mn(r)}function Uh(s,t){const r=t*7;return Pt(s,r)}function CO(s,t){return Tr(s,t*12)}function kO(s){let t;return s.forEach(function(r){const a=Ze(r);(t===void 0||t<a||isNaN(Number(a)))&&(t=a)}),t||new Date(NaN)}function EO(s){let t;return s.forEach(r=>{const a=Ze(r);(!t||t>a||isNaN(+a))&&(t=a)}),t||new Date(NaN)}function td(s,t){const r=Ze(s),a=Ze(t),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function PO(s){return qt(s,Date.now())}function Bt(s,t){const r=Wi(s),a=Wi(t);return+r==+a}function Hf(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function TO(s){if(!Hf(s)&&typeof s!="number")return!1;const t=Ze(s);return!isNaN(Number(t))}function Gi(s,t){const r=Ze(s),a=Ze(t),n=r.getFullYear()-a.getFullYear(),i=r.getMonth()-a.getMonth();return n*12+i}function IO(s,t,r){const a=Qr(s,r),n=Qr(t,r),i=+a-Hi(a),o=+n-Hi(n);return Math.round((i-o)/Wf)}function AO(s){return t=>{const a=(s?Math[s]:Math.trunc)(t);return a===0?0:a}}function MO(s,t){return+Ze(s)-+Ze(t)}function RO(s){const t=Ze(s);return t.setHours(23,59,59,999),t}function eu(s){const t=Ze(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function OO(s){const t=Ze(s);return+RO(t)==+eu(t)}function DO(s,t){const r=Ze(s),a=Ze(t),n=td(r,a),i=Math.abs(Gi(r,a));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let c=td(r,a)===-n;OO(Ze(s))&&i===1&&td(s,a)===1&&(c=!1),o=n*(i-Number(c))}return o===0?0:o}function FO(s,t,r){const a=MO(s,t)/1e3;return AO(r==null?void 0:r.roundingMethod)(a)}function zt(s){const t=Ze(s);return t.setDate(1),t.setHours(0,0,0,0),t}function j_(s){const t=Ze(s),r=qt(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Gf(s,t){var c,l,u,m;const r=mo(),a=(t==null?void 0:t.weekStartsOn)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,n=Ze(s),i=n.getDay(),o=(i<a?-7:0)+6-(i-a);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function w_(s){return Gf(s,{weekStartsOn:1})}const LO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$O=(s,t,r)=>{let a;const n=LO[s];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Lm(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const BO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},UO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qO={date:Lm({formats:BO,defaultWidth:"full"}),time:Lm({formats:UO,defaultWidth:"full"}),dateTime:Lm({formats:zO,defaultWidth:"full"})},VO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JO=(s,t,r,a)=>VO[s];function Oo(s){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,c=r!=null&&r.width?String(r.width):o;n=s.formattingValues[c]||s.formattingValues[o]}else{const o=s.defaultWidth,c=r!=null&&r.width?String(r.width):s.defaultWidth;n=s.values[c]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const WO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},KO=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},QO={ordinalNumber:KO,era:Oo({values:WO,defaultWidth:"wide"}),quarter:Oo({values:HO,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Oo({values:GO,defaultWidth:"wide"}),day:Oo({values:XO,defaultWidth:"wide"}),dayPeriod:Oo({values:YO,defaultWidth:"wide",formattingValues:ZO,defaultFormattingWidth:"wide"})};function Do(s){return(t,r={})=>{const a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],c=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(c)?sD(c,x=>x.test(o)):eD(c,x=>x.test(o));let u;u=s.valueCallback?s.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const m=t.slice(o.length);return{value:u,rest:m}}}function eD(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function sD(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function tD(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const n=a[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const c=t.slice(n.length);return{value:o,rest:c}}}const rD=/^(\d+)(th|st|nd|rd)?/i,aD=/\d+/i,nD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iD={any:[/^b/i,/^(a|c)/i]},oD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lD={any:[/1/i,/2/i,/3/i,/4/i]},cD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xD={ordinalNumber:tD({matchPattern:rD,parsePattern:aD,valueCallback:s=>parseInt(s,10)}),era:Do({matchPatterns:nD,defaultMatchWidth:"wide",parsePatterns:iD,defaultParseWidth:"any"}),quarter:Do({matchPatterns:oD,defaultMatchWidth:"wide",parsePatterns:lD,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Do({matchPatterns:cD,defaultMatchWidth:"wide",parsePatterns:dD,defaultParseWidth:"any"}),day:Do({matchPatterns:uD,defaultMatchWidth:"wide",parsePatterns:mD,defaultParseWidth:"any"}),dayPeriod:Do({matchPatterns:hD,defaultMatchWidth:"any",parsePatterns:fD,defaultParseWidth:"any"})},Xf={code:"en-US",formatDistance:$O,formatLong:qO,formatRelative:JO,localize:QO,match:xD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pD(s){const t=Ze(s);return Xr(t,j_(t))+1}function N_(s){const t=Ze(s),r=+Mn(t)-+SO(t);return Math.round(r/Wf)+1}function __(s,t){var m,x,f,p;const r=Ze(s),a=r.getFullYear(),n=mo(),i=(t==null?void 0:t.firstWeekContainsDate)??((x=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=qt(s,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const c=Qr(o,t),l=qt(s,0);l.setFullYear(a,0,i),l.setHours(0,0,0,0);const u=Qr(l,t);return r.getTime()>=c.getTime()?a+1:r.getTime()>=u.getTime()?a:a-1}function gD(s,t){var c,l,u,m;const r=mo(),a=(t==null?void 0:t.firstWeekContainsDate)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,n=__(s,t),i=qt(s,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Qr(i,t)}function S_(s,t){const r=Ze(s),a=+Qr(r,t)-+gD(r,t);return Math.round(a/Wf)+1}function Rs(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const Ma={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return Rs(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):Rs(r+1,2)},d(s,t){return Rs(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return Rs(s.getHours()%12||12,t.length)},H(s,t){return Rs(s.getHours(),t.length)},m(s,t){return Rs(s.getMinutes(),t.length)},s(s,t){return Rs(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return Rs(n,t.length)}},gi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Wb={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return Ma.y(s,t)},Y:function(s,t,r,a){const n=__(s,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return Rs(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Rs(i,t.length)},R:function(s,t){const r=y_(s);return Rs(r,t.length)},u:function(s,t){const r=s.getFullYear();return Rs(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Rs(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Rs(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return Ma.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return Rs(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const n=S_(s,a);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):Rs(n,t.length)},I:function(s,t,r){const a=N_(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):Rs(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):Ma.d(s,t)},D:function(s,t,r){const a=pD(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Rs(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Rs(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Rs(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return Rs(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let n;switch(a===12?n=gi.noon:a===0?n=gi.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let n;switch(a>=17?n=gi.evening:a>=12?n=gi.afternoon:a>=4?n=gi.morning:n=gi.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Ma.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):Ma.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Rs(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):Rs(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ma.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):Ma.s(s,t)},S:function(s,t){return Ma.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Gb(a);case"XXXX":case"XX":return gn(a);case"XXXXX":case"XXX":default:return gn(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return Gb(a);case"xxxx":case"xx":return gn(a);case"xxxxx":case"xxx":default:return gn(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Hb(a,":");case"OOOO":default:return"GMT"+gn(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Hb(a,":");case"zzzz":default:return"GMT"+gn(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return Rs(a,t.length)},T:function(s,t,r){const a=s.getTime();return Rs(a,t.length)}};function Hb(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+t+Rs(i,2)}function Gb(s,t){return s%60===0?(s>0?"-":"+")+Rs(Math.abs(s)/60,2):gn(s,t)}function gn(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Rs(Math.trunc(a/60),2),i=Rs(a%60,2);return r+n+t+i}const Xb=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},C_=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vD=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return Xb(s,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Xb(a,t)).replace("{{time}}",C_(n,t))},bD={p:C_,P:vD},yD=/^D+$/,jD=/^Y+$/,wD=["D","DD","YY","YYYY"];function ND(s){return yD.test(s)}function _D(s){return jD.test(s)}function SD(s,t,r){const a=CD(s,t,r);if(console.warn(a),wD.includes(s))throw new RangeError(a)}function CD(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ED=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PD=/^'([^]*?)'?$/,TD=/''/g,ID=/[a-zA-Z]/;function Ln(s,t,r){var m,x,f,p,v,g,b,w;const a=mo(),n=(r==null?void 0:r.locale)??a.locale??Xf,i=(r==null?void 0:r.firstWeekContainsDate)??((x=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??a.weekStartsOn??((w=(b=a.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,c=Ze(s);if(!TO(c))throw new RangeError("Invalid time value");let l=t.match(ED).map(y=>{const _=y[0];if(_==="p"||_==="P"){const N=bD[_];return N(y,n.formatLong)}return y}).join("").match(kD).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:AD(y)};if(Wb[_])return{isToken:!0,value:y};if(_.match(ID))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});n.localize.preprocessor&&(l=n.localize.preprocessor(c,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return l.map(y=>{if(!y.isToken)return y.value;const _=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&_D(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&ND(_))&&SD(_,t,String(s));const N=Wb[_[0]];return N(c,_,n.localize,u)}).join("")}function AD(s){const t=s.match(PD);return t?t[1].replace(TD,"'"):s}function MD(s,t,r){const a=mo(),n=(r==null?void 0:r.locale)??a.locale??Xf,i=2520,o=td(s,t);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=Ze(t),u=Ze(s)):(l=Ze(s),u=Ze(t));const m=FO(u,l),x=(Hi(u)-Hi(l))/1e3,f=Math.round((m-x)/60);let p;if(f<2)return r!=null&&r.includeSeconds?m<5?n.formatDistance("lessThanXSeconds",5,c):m<10?n.formatDistance("lessThanXSeconds",10,c):m<20?n.formatDistance("lessThanXSeconds",20,c):m<40?n.formatDistance("halfAMinute",0,c):m<60?n.formatDistance("lessThanXMinutes",1,c):n.formatDistance("xMinutes",1,c):f===0?n.formatDistance("lessThanXMinutes",1,c):n.formatDistance("xMinutes",f,c);if(f<45)return n.formatDistance("xMinutes",f,c);if(f<90)return n.formatDistance("aboutXHours",1,c);if(f<Jb){const v=Math.round(f/60);return n.formatDistance("aboutXHours",v,c)}else{if(f<i)return n.formatDistance("xDays",1,c);if(f<Vc){const v=Math.round(f/Jb);return n.formatDistance("xDays",v,c)}else if(f<Vc*2)return p=Math.round(f/Vc),n.formatDistance("aboutXMonths",p,c)}if(p=DO(u,l),p<12){const v=Math.round(f/Vc);return n.formatDistance("xMonths",v,c)}else{const v=p%12,g=Math.trunc(p/12);return v<3?n.formatDistance("aboutXYears",g,c):v<9?n.formatDistance("overXYears",g,c):n.formatDistance("almostXYears",g+1,c)}}function Yf(s,t){return MD(s,PO(s),t)}function RD(s){const t=Ze(s),r=t.getFullYear(),a=t.getMonth(),n=qt(s,0);return n.setFullYear(r,a+1,0),n.setHours(0,0,0,0),n.getDate()}function OD(s){return Math.trunc(+Ze(s)/1e3)}function DD(s){const t=Ze(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function FD(s,t){return IO(DD(s),zt(s),t)+1}function zh(s,t){const r=Ze(s),a=Ze(t);return r.getTime()>a.getTime()}function k_(s,t){const r=Ze(s),a=Ze(t);return+r<+a}function Zf(s,t){const r=Ze(s),a=Ze(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function LD(s,t){const r=Ze(s),a=Ze(t);return r.getFullYear()===a.getFullYear()}function $m(s,t){return Pt(s,-t)}function Bm(s,t){const r=Ze(s),a=r.getFullYear(),n=r.getDate(),i=qt(s,0);i.setFullYear(a,t,15),i.setHours(0,0,0,0);const o=RD(i);return r.setMonth(t,Math.min(n,o)),r}function Yb(s,t){const r=Ze(s);return isNaN(+r)?qt(s,NaN):(r.setFullYear(t),r)}function $D(){const{notifications:s,isConnected:t,preferences:r,unreadCount:a,markAsRead:n,markAllAsRead:i,updatePreferences:o}=wO(),[c,l]=d.useState(!1),u=p=>{n(p)},m=()=>{i()},x=(p,v)=>{o({[p]:v})},f=p=>{switch(p){case"booking_status_update":return"📅";case"new_message":return"💬";case"booking_reminder":return"⏰";default:return"🔔"}};return e.jsxs(e.Fragment,{children:[e.jsxs(QR,{children:[e.jsx(eO,{asChild:!0,children:e.jsxs(P,{variant:"ghost",size:"sm",className:"relative p-2 hover:bg-accent",children:[e.jsx(Nn,{className:"h-5 w-5"}),a>0&&e.jsx(ge,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:a>99?"99+":a}),!t&&e.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),e.jsxs(KN,{className:"w-80 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>l(!0),children:e.jsx(wi,{className:"h-4 w-4"})}),a>0&&e.jsx(P,{variant:"ghost",size:"sm",onClick:m,children:"Mark all read"})]})]}),e.jsx(uo,{className:"h-80",children:s.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Nn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications yet"})]}):e.jsx("div",{className:"p-2",children:s.map(p=>e.jsx("div",{className:`p-3 rounded-lg mb-2 transition-colors ${p.read?"bg-muted/50":"bg-blue-50 border border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-lg",children:f(p.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:`text-sm font-medium ${p.read?"text-muted-foreground":"text-foreground"}`,children:p.message}),!p.read&&e.jsx(P,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>u(p.id),children:e.jsx(hl,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Yf(new Date(p.timestamp),{addSuffix:!0})})]})]})},p.id))})}),!t&&e.jsx("div",{className:"p-3 bg-yellow-50 border-t border-yellow-200",children:e.jsx("p",{className:"text-xs text-yellow-800",children:"Connection lost. Reconnecting..."})})]})]}),e.jsx(Xs,{open:c,onOpenChange:l,children:e.jsxs(Vs,{children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Notification Preferences"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-4 w-4"}),e.jsx(B,{htmlFor:"email-notifications",children:"Email Notifications"})]}),e.jsx(Ms,{id:"email-notifications",checked:r.email,onCheckedChange:p=>x("email",p)})]}),e.jsx(er,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx(B,{htmlFor:"sms-notifications",children:"SMS Notifications"})]}),e.jsx(Ms,{id:"sms-notifications",checked:r.sms,onCheckedChange:p=>x("sms",p)})]}),e.jsx(er,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kk,{className:"h-4 w-4"}),e.jsx(B,{htmlFor:"push-notifications",children:"Push Notifications"})]}),e.jsx(Ms,{id:"push-notifications",checked:r.push,onCheckedChange:p=>x("push",p)})]}),e.jsx(er,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4"}),e.jsx(B,{htmlFor:"in-app-notifications",children:"In-App Notifications"})]}),e.jsx(Ms,{id:"in-app-notifications",checked:r.inApp,onCheckedChange:p=>x("inApp",p)})]})]})]})})]})}function su(){const[s,t]=d.useState(!1),{user:r,customer:a}=Ss(),{siteLogo:n}=Dj(),i=r||a;return e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ee,{to:"/",className:"flex items-center",children:e.jsx("img",{src:n||"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-10 w-auto hover:opacity-80 transition-opacity",onError:o=>{const c=o.target;c.src="https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800"}})}),e.jsx("span",{className:"text-2xl font-semibold text-roam-blue",children:"Services"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#services",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"Services"}),e.jsx("a",{href:"#how-it-works",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"How it Works"}),e.jsx(Ee,{to:"/providers",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"Become a Provider"}),i&&e.jsx($D,{}),e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsx(Ee,{to:"/provider-portal",children:"Sign In"})}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/provider-portal",children:"Get Started"})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>t(!s),children:s?e.jsx(wt,{className:"w-5 h-5"}):e.jsx(l0,{className:"w-5 h-5"})})})]}),s&&e.jsx("div",{className:"md:hidden py-4 border-t",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("a",{href:"#services",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"Services"}),e.jsx("a",{href:"#how-it-works",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"How it Works"}),e.jsx(Ee,{to:"/providers",className:"text-foreground/70 hover:text-roam-blue transition-colors",children:"Become a Provider"}),e.jsxs("div",{className:"flex flex-col space-y-2 pt-4",children:[e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsx(Ee,{to:"/provider-portal",children:"Sign In"})}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/provider-portal",children:"Get Started"})})]})]})})]})})}function BD(){var ys,Hs,Gs;const{customer:s,isCustomer:t,signOut:r}=Ss(),[a,n]=d.useState(""),[i,o]=d.useState("all"),[c,l]=d.useState("all"),[u,m]=d.useState(0),[x,f]=d.useState(0),[p,v]=d.useState(0),[g,b]=d.useState(0),[w,y]=d.useState(!1),[_,N]=d.useState(null),[C,R]=d.useState(!1),[E,I]=d.useState("signin"),[M,U]=d.useState(!1),[D,z]=d.useState(new Set),[X,T]=d.useState([]),[A,O]=d.useState([]),[$,F]=d.useState([]),[q,te]=d.useState([]),re=ne=>{const le=ne.toLowerCase();return le.includes("healthcare")||le.includes("medical")||le.includes("health")?Zo:le.includes("beauty")||le.includes("wellness")||le.includes("spa")?Bi:le.includes("fitness")||le.includes("gym")||le.includes("workout")?Yo:le.includes("home")||le.includes("cleaning")||le.includes("repair")?Zr:le.includes("business")||le.includes("professional")?id:le.includes("automotive")||le.includes("car")?_n:le.includes("technology")||le.includes("tech")?Kt:fs},be=ne=>{const le=ne.toLowerCase();return le.includes("beauty")||le.includes("wellness")||le.includes("spa")?"bg-gradient-to-r from-pink-500 to-rose-500":le.includes("fitness")||le.includes("gym")||le.includes("workout")?"bg-gradient-to-r from-orange-500 to-red-500":le.includes("therapy")||le.includes("therapeutic")||le.includes("massage")?"bg-gradient-to-r from-green-500 to-emerald-500":le.includes("healthcare")||le.includes("medical")||le.includes("health")?"bg-gradient-to-r from-blue-500 to-cyan-500":"bg-gradient-to-r from-gray-500 to-gray-600"},[Me,je]=d.useState(!0),Y=ne=>{N(ne),y(!0)},we=()=>{I("signin"),R(!0)},Q=()=>{t?window.location.href="/my-bookings":we()},pe=ne=>{z(le=>{const fe=new Set(le);return fe.has(ne)?fe.delete(ne):fe.add(ne),fe})},J=(ne,le)=>{const fe=D.has(le);return ne.length<=200||fe?ne:ne.substring(0,200)+"..."},H=ne=>{if(!ne.savingsType||!ne.savingsAmount)return null;if(ne.savingsType==="percentage"){const le=ne.savingsMaxAmount?` (max $${ne.savingsMaxAmount})`:"";return`${ne.savingsAmount}% OFF${le}`}else if(ne.savingsType==="fixed_amount")return`$${ne.savingsAmount} OFF`;return null};d.useEffect(()=>{const ne=async(le=0)=>{var fe,Cs;try{je(!0);const ke=await W.from("services").select(`
            id,
            name,
            description,
            min_price,
            duration_minutes,
            image_url,
            is_active,
            is_featured,
            service_subcategories!inner (
              id,
              service_subcategory_type,
              description,
              service_categories!inner (
                id,
                service_category_type
              )
            )
          `).eq("is_active",!0).eq("is_featured",!0),{data:Je,error:He}=ke;if(console.log("Featured services query result:",{featuredServicesData:Je,featuredError:He}),!He&&Je){const at=Je.map(ls=>{var gs,vt;return{id:ls.id,title:ls.name,category:((vt=(gs=ls.service_subcategories)==null?void 0:gs.service_categories)==null?void 0:vt.service_category_type)||"General",image:ls.image_url||"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=500&h=300&fit=crop",description:ls.description||"Professional featured service",price:`$${ls.min_price||50}`,rating:4.8,duration:`${ls.duration_minutes||60} min`}});console.log("Transformed featured services:",at),T(at)}const rs=await W.from("services").select(`
            id,
            name,
            description,
            min_price,
            duration_minutes,
            image_url,
            is_active,
            is_popular,
            service_subcategories!inner (
              id,
              service_subcategory_type,
              description,
              service_categories!inner (
                id,
                service_category_type
              )
            )
          `).eq("is_active",!0).eq("is_popular",!0).limit(6),{data:Is,error:gt}=rs;if(console.log("Popular services query result:",{popularServicesData:Is,popularError:gt}),!gt&&Is){const at=Is.map(ls=>{var gs,vt;return{id:ls.id,title:ls.name,category:((vt=(gs=ls.service_subcategories)==null?void 0:gs.service_categories)==null?void 0:vt.service_category_type)||"General",image:ls.image_url||"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=300&fit=crop",description:ls.description||"Popular professional service",price:`$${ls.min_price||50}`,rating:4.9,duration:`${ls.duration_minutes||60} min`,bookings:`${Math.floor(Math.random()*50)+10} bookings this month`,availability:`${Math.floor(Math.random()*8)+1} slots available`}});console.log("Transformed popular services:",at),O(at)}const Rt=await W.from("business_profiles").select(`
            id,
            business_name,
            business_type,
            logo_url,
            image_url,
            cover_image_url,
            verification_status,
            service_categories,
            is_active,
            is_featured,
            business_locations (
              location_name,
              city,
              state
            )
          `).eq("is_featured",!0).limit(12),{data:pr,error:Rr}=Rt;if([ke,rs,Rt].filter(at=>at.status===401).length>0&&le===0){console.log("JWT token expired, refreshing session...");const{data:at,error:ls}=await W.auth.refreshSession();if(ls)console.error("Token refresh failed:",ls),console.log("Continuing without authentication for public content");else if(at!=null&&at.session)return console.log("Session refreshed successfully, retrying..."),await ne(1)}if(console.log("Featured businesses query result:",{businessesData:pr,businessesError:Rr}),!Rr&&pr){const at=pr.map(ls=>{var gs;return{id:ls.id,name:ls.business_name,description:`Professional ${ls.business_type.replace("_"," ")} services`,type:ls.business_type,rating:4.8,reviews:Math.floor(Math.random()*200)+50,deliveryTypes:["mobile","business_location","virtual"],price:"Starting at $100",image:ls.logo_url||ls.image_url||"/api/placeholder/80/80",cover_image_url:ls.cover_image_url,specialties:ls.service_categories||["Professional Service","Quality Care","Experienced"],location:(gs=ls.business_locations)!=null&&gs.city?`${ls.business_locations.city}, ${ls.business_locations.state}`:"Florida",verification_status:ls.verification_status,is_featured:ls.is_featured,years_in_business:5}});console.log("Transformed featured businesses:",at),F(at)}const gr=await W.from("promotions").select(`
            id,
            title,
            description,
            start_date,
            end_date,
            is_active,
            created_at,
            business_id,
            image_url,
            promo_code,
            savings_type,
            savings_amount,
            savings_max_amount,
            service_id,
            business_profiles (
              id,
              business_name,
              logo_url,
              business_type
            ),
            services (
              id,
              name,
              min_price
            )
          `).eq("is_active",!0).order("created_at",{ascending:!1}).limit(6),{data:Un,error:wa}=gr;if(!wa&&Un){const at=new Date;at.setHours(0,0,0,0);const ls=Un.filter(gs=>{if(gs.end_date){const vt=new Date(gs.end_date);return vt.setHours(23,59,59,999),vt>=at}return!0}).map(gs=>({id:gs.id,title:gs.title,description:gs.description||"Limited time offer",startDate:gs.start_date,endDate:gs.end_date,isActive:gs.is_active,createdAt:gs.created_at,businessId:gs.business_id,imageUrl:gs.image_url,promoCode:gs.promo_code,savingsType:gs.savings_type,savingsAmount:gs.savings_amount,savingsMaxAmount:gs.savings_max_amount,serviceId:gs.service_id,business:gs.business_profiles?{id:gs.business_profiles.id,name:gs.business_profiles.business_name,logo:gs.business_profiles.logo_url,type:gs.business_profiles.business_type}:null,service:gs.services?{id:gs.services.id,name:gs.services.name,minPrice:gs.services.min_price}:null}));console.log("Transformed promotions (expired filtered):",ls),te(ls)}}catch(ke){if(console.error("Error fetching data:",ke),((fe=ke.message)!=null&&fe.includes("JWT")||(Cs=ke.message)!=null&&Cs.includes("401")||ke.status===401)&&le===0){console.log("JWT error detected, attempting token refresh...");try{const{data:Je,error:He}=await W.auth.refreshSession();if(!He&&(Je!=null&&Je.session))return console.log("Session refreshed, retrying data fetch..."),await ne(1)}catch(Je){console.error("Token refresh failed:",Je)}console.log("Continuing with public content after auth error")}}finally{je(!1)}};ne()},[]);const oe=[{id:"beauty",icon:Bi,name:"Beauty & Wellness",count:"150+ providers",color:"from-pink-500 to-rose-500",description:"Hair, nails, skincare, and beauty treatments"},{id:"fitness",icon:Yo,name:"Fitness",count:"80+ trainers",color:"from-orange-500 to-red-500",description:"Personal trainers, yoga, and fitness coaching"},{id:"therapy",icon:Gk,name:"Therapy",count:"120+ therapists",color:"from-green-500 to-emerald-500",description:"Therapeutic massage and bodywork"},{id:"healthcare",icon:Zo,name:"Healthcare",count:"90+ specialists",color:"from-blue-500 to-cyan-500",description:"Medical services and health consultations"}],de=q,Te={beauty:["beauty"],fitness:["fitness"],therapy:["therapy"],healthcare:["healthcare"]},De=ne=>ne.filter(le=>{var Je,He,rs,Is,gt;let fe=!0;if(i!=="all"){const Rt=Te[i]||[],pr=((Je=le.category)==null?void 0:Je.toLowerCase())||"",Rr=((He=le.title)==null?void 0:He.toLowerCase())||"";fe=Rt.some(Or=>pr.includes(Or.toLowerCase())||Rr.includes(Or.toLowerCase()))}let Cs=!0;if(a.trim()){const Rt=a.toLowerCase(),pr=((rs=le.title)==null?void 0:rs.toLowerCase())||"",Rr=((Is=le.category)==null?void 0:Is.toLowerCase())||"",Or=((gt=le.description)==null?void 0:gt.toLowerCase())||"";Cs=pr.includes(Rt)||Rr.includes(Rt)||Or.includes(Rt)}let ke=!0;return c!=="all"&&(ke=!0),fe&&Cs&&ke}),Le=De(X),$e=De(A),Be=ne=>{o(ne),m(0)};d.useEffect(()=>{m(0)},[i,a,c]);const es=d.useMemo(()=>{const ne=[];for(let le=0;le<Le.length;le+=2)ne.push(Le.slice(le,le+2));return ne},[Le]),ee=()=>{const ne=Math.max(0,es.length-1);m(le=>Math.min(le+1,ne))},Fe=()=>{m(ne=>Math.max(ne-1,0))},Ke=d.useMemo(()=>{const ne=[];for(let le=0;le<$e.length;le+=2)ne.push($e.slice(le,le+2));return ne},[$e]),Ue=()=>{const ne=Math.max(0,Ke.length-1);f(le=>Math.min(le+1,ne))},ze=()=>{f(ne=>Math.max(ne-1,0))},G=d.useMemo(()=>{const ne=[];for(let le=0;le<de.length;le+=3)ne.push(de.slice(le,le+3));return ne},[de]),ue=()=>{const ne=Math.max(0,de.length-1);v(le=>Math.min(le+1,ne))},xe=()=>{v(ne=>Math.max(ne-1,0))},Ie=()=>{const ne=Math.max(0,Ls.length-1);b(le=>Math.min(le+1,ne))},Ye=()=>{b(ne=>Math.max(ne-1,0))},We=$.filter(ne=>{const le=a===""||ne.name.toLowerCase().includes(a.toLowerCase())||ne.type.toLowerCase().includes(a.toLowerCase())||ne.description.toLowerCase().includes(a.toLowerCase())||ne.specialties.some(ke=>ke.toLowerCase().includes(a.toLowerCase())),fe=i==="all"||ne.type.toLowerCase().includes(i)||ne.specialties.some(ke=>ke.toLowerCase().includes(i)),Cs=c==="all"||ne.deliveryTypes.includes(c);return le&&fe&&Cs}),Ls=d.useMemo(()=>{const ne=[];for(let le=0;le<We.length;le+=3)ne.push(We.slice(le,le+3));return ne},[We]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx(gR,{isCustomer:t}),!t&&"332905057054-k2ft4b7nadjgm62qoiseg7r6n8rt18co.apps.googleusercontent.com"&&e.jsx(Fj,{clientId:"332905057054-k2ft4b7nadjgm62qoiseg7r6n8rt18co.apps.googleusercontent.com",onSuccess:()=>{console.log("Google One Tap sign-in successful")},onError:ne=>{console.error("Google One Tap error:",ne)}}),e.jsx(su,{}),e.jsxs("section",{className:"py-20 lg:py-32 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",children:[e.jsx("iframe",{src:"https://www.youtube.com/embed/Z0A84Ev5Waw?autoplay=1&mute=1&loop=1&playlist=Z0A84Ev5Waw&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1&vq=hd1080",className:"absolute inset-0 w-full h-full",style:{filter:"brightness(0.7)",pointerEvents:"none",width:"100vw",height:"100vh",objectFit:"cover",objectPosition:"center",transform:"scale(1.1)"},frameBorder:"0",allow:"autoplay; encrypted-media",title:"Background Video"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-roam-blue/10 via-black/5 to-roam-yellow/10 pointer-events-none"})]}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-12",children:[e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F98c77fcac42745ca81f9db3fb7f4e366?format=webp&width=800",alt:"ROAM Logo",className:"mx-auto h-24 sm:h-32 lg:h-40 w-auto drop-shadow-lg"})}),e.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto leading-relaxed drop-shadow-md",children:"Florida's premier on-demand services marketplace. Connecting customers with verified professionals for premium services delivered anywhere."}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-roam-blue/20 via-roam-light-blue/20 to-roam-yellow/20 px-6 py-2 rounded-full backdrop-blur-sm border border-white/20",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-white uppercase tracking-wider",children:"Discover Services"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-roam-yellow animate-pulse"})]})})]})})]}),e.jsx("section",{className:"py-12 bg-background/50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:["Browse by"," ",e.jsx("span",{className:"bg-gradient-to-r from-roam-blue to-roam-light-blue bg-clip-text text-transparent",children:"Category"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Find the perfect service for your needs from our curated selection of professional providers"})]}),e.jsx("div",{className:"md:hidden mb-12",children:e.jsx("div",{className:"relative",children:e.jsxs(as,{value:i,onValueChange:Be,children:[e.jsx(ss,{className:"w-full h-16 bg-white border-0 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 ring-1 ring-gray-100 focus:ring-2 focus:ring-roam-blue/50",children:e.jsxs("div",{className:"flex items-center gap-4 px-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-2xl flex items-center justify-center flex-shrink-0",children:i==="all"?e.jsx(To,{className:"w-6 h-6 text-white"}):((ys=oe.find(ne=>ne.id===i))==null?void 0:ys.icon)&&e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:Re.createElement(oe.find(ne=>ne.id===i).icon,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:i==="all"?"All Categories":((Hs=oe.find(ne=>ne.id===i))==null?void 0:Hs.name)||(i==="therapy"?"Therapy":i==="fitness"?"Fitness":i==="beauty"?"Beauty":i)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Tap to change category"})]})]})}),e.jsxs(ts,{className:"rounded-2xl border-0 shadow-2xl",children:[e.jsx(ce,{value:"all",className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center",children:e.jsx(To,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"All Categories"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Browse everything"})]})]})}),oe.map(ne=>e.jsx(ce,{value:ne.id,className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${ne.color} rounded-xl flex items-center justify-center`,children:e.jsx(ne.icon,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ne.id==="therapy"?"Therapy":ne.id==="fitness"?"Fitness":ne.id==="beauty"?"Beauty":ne.name}),e.jsx("div",{className:"text-xs text-gray-500",children:ne.description})]})]})},ne.id))]})]})})}),e.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-5 gap-8 mb-16",children:[e.jsx("div",{className:`group cursor-pointer transition-all duration-500 hover:-translate-y-4 ${i==="all"?"scale-105":""}`,onClick:()=>Be("all"),children:e.jsxs("div",{className:`relative overflow-hidden rounded-3xl bg-white shadow-xl hover:shadow-2xl transition-all duration-500 ${i==="all"?"ring-4 ring-roam-blue/30 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/5":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-500/10 via-transparent to-gray-600/5"}),e.jsxs("div",{className:"relative p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-500 to-gray-600 rounded-3xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-lg",children:e.jsx(To,{className:"w-10 h-10 text-white"})}),e.jsx("h3",{className:"text-lg font-bold mb-3 text-gray-900 group-hover:text-roam-blue transition-colors",children:"All Categories"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Browse all available services"}),i==="all"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-3 h-3 bg-roam-blue rounded-full"})})]})]})}),oe.map(ne=>e.jsx("div",{className:`group cursor-pointer transition-all duration-500 hover:-translate-y-4 ${i===ne.id?"scale-105":""}`,onClick:()=>Be(ne.id),children:e.jsxs("div",{className:`relative overflow-hidden rounded-3xl bg-white shadow-xl hover:shadow-2xl transition-all duration-500 ${i===ne.id?"ring-4 ring-roam-blue/30 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/5":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-transparent opacity-50"}),e.jsxs("div",{className:"relative p-8 text-center",children:[e.jsx("div",{className:`w-20 h-20 bg-gradient-to-br ${ne.color} rounded-3xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-lg`,children:e.jsx(ne.icon,{className:"w-10 h-10 text-white"})}),e.jsx("h3",{className:"text-lg font-bold mb-3 text-gray-900 group-hover:text-roam-blue transition-colors",children:ne.id==="therapy"?"Therapy":ne.id==="fitness"?"Fitness":ne.id==="beauty"?"Beauty":ne.name}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:ne.description}),i===ne.id&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-3 h-3 bg-roam-blue rounded-full"})})]})]})},ne.id))]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Find Your Perfect Service"}),e.jsx("p",{className:"text-gray-600",children:"Search and filter to discover exactly what you need"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-roam-blue/20 to-roam-light-blue/20 rounded-2xl blur-sm group-focus-within:blur-0 transition-all duration-300"}),e.jsxs("div",{className:"relative bg-white rounded-2xl border border-gray-200 group-focus-within:border-roam-blue/50 transition-all duration-300",children:[e.jsx(xa,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400 group-focus-within:text-roam-blue transition-colors"}),e.jsx(ae,{type:"search",placeholder:"Search for services, treatments, or providers...",className:"pl-12 pr-4 h-14 border-0 rounded-2xl text-lg placeholder:text-gray-400 focus:ring-0 focus:border-0 bg-transparent",value:a,onChange:ne=>n(ne.target.value)})]})]})}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-roam-yellow/20 to-roam-light-blue/20 rounded-2xl blur-sm group-focus-within:blur-0 transition-all duration-300"}),e.jsx("div",{className:"relative",children:e.jsxs(as,{value:c,onValueChange:l,children:[e.jsx(ss,{className:"h-14 border-0 rounded-2xl bg-white border border-gray-200 group-focus-within:border-roam-blue/50 transition-all text-lg",children:e.jsx(is,{placeholder:"Delivery Type"})}),e.jsxs(ts,{className:"rounded-2xl border-0 shadow-2xl",children:[e.jsx(ce,{value:"all",className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center",children:e.jsx(To,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"All Types"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Any delivery method"})]})]})}),e.jsx(ce,{value:"mobile",className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:e.jsx(_n,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Mobile"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Provider comes to you"})]})]})}),e.jsx(ce,{value:"business",className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(fs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Business"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Visit business location"})]})]})}),e.jsx(ce,{value:"virtual",className:"rounded-xl m-1",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(pa,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Virtual"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Online consultation"})]})]})})]})]})})]})]}),(i!=="all"||c!=="all"||a)&&e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-roam-blue/5 to-roam-light-blue/5 rounded-2xl border border-roam-blue/10",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(To,{className:"w-4 h-4 text-roam-blue"}),"Active filters:"]}),i!=="all"&&e.jsxs(ge,{variant:"secondary",className:"bg-roam-blue text-white cursor-pointer hover:bg-roam-blue/90 px-4 py-2 rounded-full font-medium transition-all hover:scale-105",onClick:()=>Be("all"),children:[((Gs=oe.find(ne=>ne.id===i))==null?void 0:Gs.name)||i,e.jsx(wt,{className:"w-4 h-4 ml-2"})]}),c!=="all"&&e.jsxs(ge,{variant:"secondary",className:"bg-roam-light-blue text-white cursor-pointer hover:bg-roam-light-blue/90 px-4 py-2 rounded-full font-medium transition-all hover:scale-105",onClick:()=>l("all"),children:[c==="mobile"?"Mobile":c==="business"?"Business":c==="virtual"?"Virtual":c,e.jsx(wt,{className:"w-4 h-4 ml-2"})]}),a&&e.jsxs(ge,{variant:"secondary",className:"bg-roam-yellow text-gray-900 cursor-pointer hover:bg-roam-yellow/90 px-4 py-2 rounded-full font-medium transition-all hover:scale-105",onClick:()=>n(""),children:['"',a,'"',e.jsx(wt,{className:"w-4 h-4 ml-2"})]}),e.jsx(P,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-roam-blue hover:bg-white/50 px-4 py-2 rounded-full font-medium transition-all",onClick:()=>{o("all"),l("all"),n("")},children:"Clear all filters"})]})})]})})]})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:["Featured ",e.jsx("span",{className:"text-roam-blue",children:"Services"})]}),e.jsx("p",{className:"text-lg text-foreground/70 mt-4",children:"Discover our most popular and highly-rated services"})]}),Le.length>0?e.jsxs("div",{className:"relative overflow-hidden",children:[Le.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Fe,disabled:u===0,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(qa,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:ee,disabled:u>=Le.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${u*100}%)`},children:Le.map((ne,le)=>e.jsx("div",{className:"w-full flex-none px-4",children:e.jsxs(V,{className:"hover:shadow-xl transition-all duration-300 cursor-pointer border-border/50 hover:border-roam-light-blue/50 overflow-hidden w-full",children:[e.jsxs("div",{className:"relative h-64",children:[e.jsx("img",{src:ne.image,alt:ne.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{className:`${be(ne.category)} text-white border-0`,icon:re(ne.category),children:ne.category})}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx(Gr,{type:"service",itemId:ne.id,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"}),e.jsxs(ge,{variant:"secondary",className:"bg-white/90 text-gray-800",children:[e.jsx(us,{className:"w-3 h-3 mr-1 text-roam-warning fill-current"}),ne.rating]})]})]}),e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:ne.title}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-foreground/70",children:J(ne.description,ne.id)}),ne.description.length>200&&e.jsx("button",{onClick:()=>pe(ne.id),className:"md:hidden text-roam-blue text-sm font-medium hover:underline mt-1",children:D.has(ne.id)?"Show less":"Read more"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold text-roam-blue",children:["Starting at ",ne.price]})}),e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:ne.duration})]}),e.jsx(P,{asChild:!0,className:"w-full bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:`/book-service/${ne.id}`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book This Service"]})})]})]},ne.id)},`service-${ne.id}`))})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xa,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Featured Services Found"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"No featured services match the selected category. Try selecting a different category."}),e.jsx(P,{onClick:()=>Be("all"),variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:"View All Services"})]}),es.length>1&&e.jsx("div",{className:"flex justify-center mt-6 gap-2",children:es.map((ne,le)=>e.jsx("button",{onClick:()=>m(le),className:`w-3 h-3 rounded-full transition-colors ${le===u?"bg-roam-blue":"bg-gray-300"}`},le))})]})}),e.jsx("section",{className:"py-12 bg-background/50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-4",children:[e.jsx("span",{className:"text-roam-blue",children:"Special"})," Promotions"]}),e.jsx("p",{className:"text-lg text-foreground/70",children:"Limited-time offers on your favorite services"})]}),de.length>0?e.jsxs("div",{className:"relative",children:[G.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outline",size:"sm",onClick:xe,disabled:p===0,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(qa,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:ue,disabled:p>=G.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${p*100}%)`},children:G.map((ne,le)=>e.jsx("div",{className:"flex gap-6 w-full flex-none px-4",children:ne.map(fe=>e.jsxs(V,{className:"group hover:shadow-2xl transition-all duration-500 hover:-translate-y-3 border-0 shadow-xl bg-white overflow-hidden rounded-3xl flex-shrink-0 w-full md:w-[calc(50%-12px)]",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-roam-yellow/20 via-roam-light-blue/10 to-roam-blue/5 overflow-hidden",children:[fe.imageUrl?e.jsx("img",{src:fe.imageUrl,alt:fe.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:fe.business&&fe.business.logo?e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden bg-white shadow-xl border-4 border-white",children:e.jsx("img",{src:fe.business.logo,alt:fe.business.name,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"text-lg font-bold text-roam-blue",children:fe.business.name})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-roam-yellow/20 flex items-center justify-center",children:e.jsx(am,{className:"w-10 h-10 text-roam-blue"})}),e.jsx("h3",{className:"text-xl font-bold text-roam-blue",children:"SPECIAL OFFER"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(Gr,{type:"promotion",itemId:fe.id,size:"sm",variant:"ghost",className:"w-10 h-10 rounded-full bg-white/95 hover:bg-white shadow-lg border-0 text-gray-600 hover:text-red-500 hover:scale-110 transition-all backdrop-blur-sm"})}),H(fe)&&e.jsx("div",{className:"absolute bottom-4 right-4",children:e.jsx("div",{className:"bg-red-500 text-white px-4 py-2 rounded-2xl shadow-lg font-bold text-lg",children:H(fe)})}),fe.endDate&&e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:"bg-white/95 text-roam-blue px-3 py-1.5 rounded-full shadow-lg font-medium text-sm backdrop-blur-sm",children:[e.jsx(bs,{className:"w-4 h-4 mr-1 inline"}),"Ends ",new Date(fe.endDate).toLocaleDateString()]})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-roam-blue transition-colors",children:fe.title}),fe.service&&e.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:fe.service.name})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-4",children:fe.description}),fe.business&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(fs,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{children:fe.business.name})]}),e.jsx(P,{asChild:!0,className:"w-full bg-gradient-to-r from-roam-blue to-roam-light-blue hover:from-roam-blue/90 hover:to-roam-light-blue/90 text-white font-semibold py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:e.jsxs(Ee,{to:(()=>{const Cs=`promotion=${fe.id}&promo_code=${fe.promoCode}`;return fe.business&&fe.service?`/book-service/${fe.service.id}?${Cs}&business_id=${fe.business.id}`:fe.business?`/business/${fe.business.id}?${Cs}`:fe.service?`/book-service/${fe.service.id}?${Cs}`:`/services?${Cs}`})(),children:[e.jsx(am,{className:"w-4 h-4 mr-2"}),fe.business&&fe.service?"Claim Offer":fe.business?"Book with Business":fe.service?"Book This Service":"Claim Offer"]})})]})]},fe.id))},`promotion-page-${le}`))})}),G.length>1&&e.jsx("div",{className:"flex justify-center mt-6 gap-2",children:G.map((ne,le)=>e.jsx("button",{onClick:()=>v(le),className:`w-3 h-3 rounded-full transition-colors ${le===p?"bg-roam-blue":"bg-gray-300 hover:bg-gray-400"}`},le))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(am,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground/60 mb-2",children:"No Active Promotions"}),e.jsx("p",{className:"text-foreground/50",children:"Check back soon for exciting deals and offers!"})]})]})}),e.jsx("section",{className:"py-12 bg-background/50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-4",children:["Most ",e.jsx("span",{className:"text-roam-blue",children:"Popular Services"})]}),e.jsx("p",{className:"text-lg text-foreground/70",children:"Trending services in your area this month"})]}),$e.length>0?e.jsxs("div",{className:"relative",children:[Ke.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outline",size:"sm",onClick:ze,disabled:x===0,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(qa,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:Ue,disabled:x>=Ke.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${x*100}%)`},children:Ke.map((ne,le)=>e.jsx("div",{className:"flex gap-6 w-full flex-none px-4",children:ne.map(fe=>e.jsxs(V,{className:"group hover:shadow-2xl transition-all duration-500 hover:-translate-y-3 border-0 shadow-xl bg-white overflow-hidden rounded-3xl flex-shrink-0 w-full md:w-[calc(50%-12px)]",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-roam-blue/20 via-roam-light-blue/10 to-roam-yellow/5 overflow-hidden",children:[e.jsx("img",{src:fe.image,alt:fe.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(Gr,{type:"service",itemId:fe.id,size:"sm",variant:"ghost",className:"w-10 h-10 rounded-full bg-white/95 hover:bg-white shadow-lg border-0 text-gray-600 hover:text-red-500 hover:scale-110 transition-all backdrop-blur-sm"})}),e.jsx("div",{className:"absolute bottom-4 right-4 bg-white/95 backdrop-blur-sm rounded-full px-3 py-1 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:fe.rating})]})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:"bg-roam-blue text-white px-4 py-2 rounded-2xl shadow-lg font-bold text-lg",children:["Starting at ",fe.price]})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-roam-blue transition-colors",children:fe.title}),e.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-roam-blue/10 text-roam-blue rounded-full",children:fe.category})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-4",children:fe.description}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-4",children:[e.jsx(bs,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{children:fe.duration})]}),e.jsx(P,{asChild:!0,className:"w-full bg-gradient-to-r from-roam-blue to-roam-light-blue hover:from-roam-blue/90 hover:to-roam-light-blue/90 text-white font-semibold py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:e.jsxs(Ee,{to:`/book-service/${fe.id}`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book Now"]})})]})]},fe.id))},`popular-page-${le}`))})}),Ke.length>1&&e.jsx("div",{className:"flex justify-center mt-6 gap-2",children:Ke.map((ne,le)=>e.jsx("button",{onClick:()=>f(le),className:`w-3 h-3 rounded-full transition-colors ${le===x?"bg-roam-blue":"bg-gray-300 hover:bg-gray-400"}`},le))})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No popular services available at the moment."})})]})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:["Featured ",e.jsx("span",{className:"text-roam-blue",children:"Businesses"})]}),e.jsx("p",{className:"text-lg text-foreground/70 mt-4",children:"Trusted and verified businesses providing exceptional services"})]}),We.length>0?e.jsxs("div",{className:"relative overflow-hidden",children:[Ls.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Ye,disabled:g===0,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(qa,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:Ie,disabled:g>=Ls.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white shadow-lg disabled:opacity-50",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${g*100}%)`},children:Ls.map((ne,le)=>e.jsx("div",{className:"flex gap-6 w-full flex-none px-4",children:ne.map(fe=>e.jsx(V,{className:"group hover:shadow-2xl transition-all duration-500 hover:-translate-y-3 border-0 shadow-xl bg-white overflow-hidden rounded-3xl flex-shrink-0 w-full sm:w-[calc(50%-12px)] lg:w-[calc(33.333%-16px)]",children:e.jsxs(K,{className:"p-0",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-roam-blue/20 via-roam-light-blue/10 to-roam-yellow/5",style:{backgroundImage:fe.cover_image_url?`url(${fe.cover_image_url})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[fe.cover_image_url&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 z-20",children:[e.jsx(Gr,{type:"business",itemId:fe.id,size:"sm",variant:"ghost",className:"w-10 h-10 rounded-full bg-white/95 hover:bg-white shadow-lg border-0 text-gray-600 hover:text-red-500 hover:scale-110 transition-all backdrop-blur-sm"}),e.jsx(P,{size:"sm",variant:"ghost",className:"w-10 h-10 rounded-full bg-white/95 hover:bg-white shadow-lg border-0 text-gray-600 hover:text-roam-blue hover:scale-110 transition-all backdrop-blur-sm",onClick:()=>Y(fe),children:e.jsx(Ci,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute -bottom-8 left-6 z-20",children:e.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-xl flex items-center justify-center overflow-hidden border-4 border-white group-hover:scale-110 transition-transform duration-300",children:fe.image&&fe.image!=="/api/placeholder/80/80"?e.jsx("img",{src:fe.image,alt:fe.name,className:"w-full h-full object-cover rounded-xl"}):e.jsx(fs,{className:"w-8 h-8 text-roam-blue"})})}),e.jsx("div",{className:"absolute -bottom-4 right-6 z-20",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white px-3 py-2 rounded-full shadow-xl border border-gray-100",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:fe.rating}),e.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:["(",fe.reviews,")"]})]})})]}),e.jsxs("div",{className:"px-6 pt-12 pb-6 space-y-6",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-xl text-gray-900 group-hover:text-roam-blue transition-colors leading-tight mb-1",children:fe.name})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Specialties"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[fe.specialties.slice(0,4).map((Cs,ke)=>{const Je=Cs.split(" ").map(He=>He.charAt(0).toUpperCase()+He.slice(1).toLowerCase()).join(" ");return e.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-gradient-to-r from-roam-blue/8 to-roam-light-blue/8 text-roam-blue rounded-lg border border-roam-blue/15 hover:border-roam-blue/25 transition-colors",children:Je},Cs)}),fe.specialties.length>4&&e.jsxs("span",{className:"px-3 py-1.5 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg border border-gray-200",children:["+",fe.specialties.length-4]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(P,{asChild:!0,className:"flex-1 bg-gradient-to-r from-roam-blue to-roam-light-blue hover:from-roam-blue/90 hover:to-roam-light-blue/90 text-white font-semibold py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:e.jsxs(Ee,{to:`/business/${fe.id}?tab=services`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book"]})}),e.jsx(P,{asChild:!0,variant:"outline",className:"flex-1 border-2 border-roam-blue/20 text-roam-blue hover:bg-roam-blue hover:text-white font-semibold py-3 rounded-2xl transition-all duration-300",children:e.jsxs(Ee,{to:`/business/${fe.id}`,children:[e.jsx(nd,{className:"w-4 h-4 mr-2"}),"View"]})})]})]})]})},fe.id))},`businesses-page-${le}`))})}),Ls.length>1&&e.jsx("div",{className:"flex justify-center mt-6 gap-2",children:Ls.map((ne,le)=>e.jsx("button",{onClick:()=>b(le),className:`w-3 h-3 rounded-full transition-colors ${le===g?"bg-roam-blue":"bg-gray-300 hover:bg-gray-400"}`},le))})]}):e.jsxs(V,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xa,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No featured businesses found"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"No featured businesses match your search criteria. Try adjusting your search or browse all businesses."}),e.jsx(P,{variant:"outline",onClick:()=>{n(""),o("all"),l("all")},className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:"Clear Filters"})]}),!1]})}),e.jsx("section",{className:"py-12 bg-gradient-to-r from-roam-blue to-roam-light-blue",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Book Your Service?"}),e.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Discover verified businesses and book premium services with trusted professionals across Florida."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(P,{size:"lg",variant:"secondary",className:"bg-white text-roam-blue hover:bg-white/90 text-lg px-8 py-6",onClick:Q,children:[e.jsx(Qe,{className:"w-5 h-5 mr-2"}),t?"View My Bookings":"Sign In to Book"]}),e.jsx(P,{asChild:!0,size:"lg",variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-500 hover:text-white text-lg px-8 py-6",children:e.jsxs(Ee,{to:"/provider-portal",children:[e.jsx(fs,{className:"w-5 h-5 mr-2"}),"List Your Business"]})})]})]})}),e.jsx("section",{className:"py-12 bg-background/50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-3xl font-bold text-center mb-12",children:["Your Safety is Our"," ",e.jsx("span",{className:"text-roam-blue",children:"Priority"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(It,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Background Verified"}),e.jsx("p",{className:"text-foreground/70",children:"All providers undergo comprehensive background checks and identity verification."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(us,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"5-Star Quality"}),e.jsx("p",{className:"text-foreground/70",children:"Only the highest-rated professionals with proven track records join our platform."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Cr,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Satisfaction Guaranteed"}),e.jsx("p",{className:"text-foreground/70",children:"Your satisfaction is guaranteed or we'll make it right, every time."})]})]})]})})}),_&&e.jsx(TN,{isOpen:w,onClose:()=>y(!1),providerName:_.name,providerTitle:_.type||_.description,pageUrl:`${window.location.origin}/business/${_.id}`}),e.jsx(vR,{isOpen:C,onClose:()=>R(!1),defaultTab:E})]})}function Kf(){return e.jsx("footer",{className:"border-t bg-background/80",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(Ee,{to:"/",className:"flex items-center mb-4",children:e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-24 h-24 object-contain"})})}),e.jsx("p",{className:"text-foreground/70 mb-4 max-w-md",children:"Florida's premier on-demand services marketplace. Connecting customers with verified professionals for premium services delivered anywhere."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:"🛡️ Verified Providers"}),e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:"⭐ 5-Star Quality"}),e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:"📍 Florida-Wide"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4 text-roam-blue",children:"Services"}),e.jsxs("ul",{className:"space-y-2 text-sm text-foreground/70",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Beauty & Wellness"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Personal Training"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Massage Therapy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Home Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Healthcare"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Wellness Coaching"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4 text-roam-blue",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm text-foreground/70",children:[e.jsx("li",{children:e.jsx(Ee,{to:"/about",className:"hover:text-roam-blue transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/providers",className:"hover:text-roam-blue transition-colors",children:"Become a Provider"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/support",className:"hover:text-roam-blue transition-colors",children:"Support"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/contact",className:"hover:text-roam-blue transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-roam-blue transition-colors",children:"Terms of Service"})})]})]})]}),e.jsxs("div",{className:"border-t pt-8 mt-8 flex flex-col md:flex-row justify-between items-center text-sm text-foreground/60",children:[e.jsx("p",{children:"© 2024 ROAM. All rights reserved. Proudly serving Florida with premium on-demand services."}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 md:mt-0",children:[e.jsx("span",{className:"text-roam-blue font-medium",children:"�� Made in Florida"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Available statewide"})]})]})]})})}function UD(){const s=[{icon:Zt,title:"Competitive Earnings",description:"Keep everything you charge customers. Only payout transaction fees apply.",highlight:"$50-200/hour average"},{icon:Qe,title:"Flexible Schedule",description:"Work when you want, where you want. Set your own availability and rates.",highlight:"100% control"},{icon:Ds,title:"Quality Clients",description:"Connect with verified customers who value premium services.",highlight:"Pre-screened customers"},{icon:It,title:"Full Support",description:"Comprehensive insurance coverage, background verification, and 24/7 support.",highlight:"Protected & supported"}],t=["Professional certification or 2+ years experience","Pass background check and verification process","Maintain 4.5+ star rating","Provide your own equipment and transportation","Available in Florida service areas","Professional liability insurance (we can help)"],r=[{service:"Personal Training",range:"$60-120/hour",demand:"High"},{service:"Massage Therapy",range:"$80-150/hour",demand:"Very High"},{service:"Beauty Services",range:"$40-100/hour",demand:"High"},{service:"Home Cleaning",range:"$25-50/hour",demand:"Very High"},{service:"Wellness Coaching",range:"$75-125/hour",demand:"Growing"},{service:"Healthcare Services",range:"$100-200/hour",demand:"High"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx(su,{}),e.jsxs("section",{className:"relative py-20 lg:py-32 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://images.unsplash.com/photo-1556740758-90de374c12ad?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(ge,{className:"mb-6 bg-roam-light-blue/20 text-roam-blue border-roam-light-blue/30",children:"💼 Now accepting provider applications"}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 bg-gradient-to-r from-roam-blue via-foreground to-roam-blue bg-clip-text text-transparent leading-tight",children:["Grow Your Business",e.jsx("br",{}),e.jsx("span",{className:"text-roam-blue",children:"On Your Terms"})]}),e.jsx("p",{className:"text-xl text-foreground/70 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Join Florida's premier network of service professionals. Connect with quality clients, set your own rates, and build your business with the support you deserve."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx(P,{asChild:!0,size:"lg",className:"bg-roam-blue hover:bg-roam-blue/90 text-lg px-8 py-6",children:e.jsxs(Ee,{to:"/provider-portal",children:[e.jsx(Ds,{className:"w-5 h-5 mr-2"}),"Apply Now",e.jsx(kn,{className:"w-5 h-5 ml-2"})]})}),e.jsx(P,{asChild:!0,size:"lg",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white text-lg px-8 py-6",children:e.jsxs(Ee,{to:"/provider-portal",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2"}),"Learn More"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:"$85k"}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Average annual earnings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:"4.9/5"}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Provider satisfaction"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:"24/7"}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Support available"})]})]})]})})})]}),e.jsx("section",{className:"py-20 bg-background/50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["Why Choose ",e.jsx("span",{className:"text-roam-blue",children:"ROAM"}),"?"]}),e.jsx("p",{className:"text-lg text-foreground/70 max-w-2xl mx-auto",children:"We're more than a platform – we're your business partner, dedicated to your success and growth."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.map((a,n)=>e.jsx(V,{className:"border-border/50 hover:shadow-lg transition-shadow",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(a.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.title}),e.jsx("p",{className:"text-foreground/70 mb-3",children:a.description}),e.jsx(ge,{variant:"secondary",className:"bg-roam-light-blue/20 text-roam-blue",children:a.highlight})]})]})})},n))})]})}),e.jsx("section",{className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-4",children:[e.jsx("span",{className:"text-roam-blue",children:"Earning Potential"})," by Service"]}),e.jsx("p",{className:"text-lg text-foreground/70 max-w-2xl mx-auto",children:"See what providers in your field are earning on the ROAM platform."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"w-5 h-5 text-roam-blue"}),"Florida Provider Earnings (2024)"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:r.map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-accent/20 hover:bg-accent/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:a.service}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Per hour, before taxes"})]}),e.jsx("div",{className:"text-center mx-4",children:e.jsx("div",{className:"text-lg font-bold text-roam-blue",children:a.range})}),e.jsx("div",{className:"text-right",children:e.jsxs(ge,{variant:a.demand==="Very High"?"default":"secondary",className:a.demand==="Very High"?"bg-roam-success text-white":"",children:[a.demand," Demand"]})})]},n))})})]})})]})}),e.jsx("section",{className:"py-20 bg-background/50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["Application ",e.jsx("span",{className:"text-roam-blue",children:"Requirements"})]}),e.jsx("p",{className:"text-lg text-foreground/70",children:"We maintain high standards to ensure the best experience for both providers and customers."})]}),e.jsx(V,{children:e.jsxs(K,{className:"p-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((a,n)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-roam-success flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-foreground/80",children:a})]},n))}),e.jsx("div",{className:"mt-8 p-6 bg-roam-light-blue/10 rounded-lg border border-roam-light-blue/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(It,{className:"w-6 h-6 text-roam-blue flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-roam-blue mb-2",children:"Verification Process"}),e.jsx("p",{className:"text-sm text-foreground/70",children:"All providers undergo comprehensive background checks, identity verification, and skill assessment. We also provide ongoing training and certification opportunities to help you grow."})]})]})})]})})]})})}),e.jsx("section",{className:"py-20 bg-gradient-to-r from-roam-blue to-roam-light-blue",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Ready to Start Earning More?"}),e.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Join hundreds of successful providers who've grown their business with ROAM. Application takes less than 10 minutes."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(P,{size:"lg",variant:"secondary",className:"bg-white text-roam-blue hover:bg-white/90 text-lg px-8 py-6",children:[e.jsx(Ds,{className:"w-5 h-5 mr-2"}),"Start Application"]})}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center items-center gap-6 text-sm text-white/80",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Quick 10-min application"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Secure verification process"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Florida-wide opportunities"]})]})]})}),e.jsx(Kf,{})]})}function zD(){const s=[{name:"30A",description:"Scenic Highway 30A corridor"},{name:"Destin",description:"Premier beach destination"},{name:"Panama City",description:"Gulf Coast hub"}],t=[{icon:us,title:"Premium Quality",description:"We partner only with verified, high-quality professionals to ensure exceptional experiences."},{icon:Cr,title:"Community Focused",description:"Supporting local businesses and fostering economic development in our communities."},{icon:Xe,title:"Trusted & Verified",description:"All providers undergo thorough verification processes for your safety and peace of mind."},{icon:av,title:"Luxury Convenience",description:"Bringing premium beauty, fitness, and wellness services directly to your door."}],r=[{number:"500+",label:"Verified Professionals"},{number:"3",label:"Florida Communities"},{number:"50+",label:"Service Categories"},{number:"98%",label:"Customer Satisfaction"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-roam-blue to-roam-light-blue text-white py-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"relative max-w-6xl mx-auto px-4 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(ge,{className:"bg-white/20 text-white border-white/30 mb-4",children:"Florida's Premier On-Demand Services Platform"})}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:["Your Best Life. ",e.jsx("span",{className:"text-yellow-300",children:"Everywhere."})]}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 max-w-3xl mx-auto leading-relaxed",children:"ROAM is a premium booking app connecting residents and visitors to luxury beauty, fitness, and wellness experiences along Florida's Emerald Coast."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(P,{size:"lg",className:"bg-white text-roam-blue hover:bg-gray-100",children:[e.jsx(Si,{className:"w-5 h-5 mr-2"}),"Download the App"]}),e.jsxs(P,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[e.jsx(Ds,{className:"w-5 h-5 mr-2"}),"Become a Provider"]})]})]})]}),e.jsxs("section",{className:"py-16 max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Mission & Vision"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Redefining what it means to prioritize personal well-being and enjoyment"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(V,{className:"border-l-4 border-l-roam-blue",children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rE,{className:"w-8 h-8 text-roam-blue"}),e.jsx(Ce,{className:"text-2xl",children:"Our Mission"})]})}),e.jsx(K,{children:e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"To create and foster premium connections that enrich experiences in the communities around us. We empower local businesses while providing residents and visitors with convenient access to luxury wellness services."})})]}),e.jsxs(V,{className:"border-l-4 border-l-yellow-500",children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Td,{className:"w-8 h-8 text-yellow-500"}),e.jsx(Ce,{className:"text-2xl",children:"Our Vision"})]})}),e.jsx(K,{children:e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"To be the leading platform that transforms how people access premium wellness services, creating thriving communities where luxury, convenience, and local business success intersect."})})]})]})]}),e.jsx("section",{className:"py-16 bg-gradient-to-r from-roam-blue to-roam-light-blue text-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Growing the Community"}),e.jsx("p",{className:"text-xl opacity-90",children:"Building trust and connections across Florida's Emerald Coast"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:r.map((a,n)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 text-yellow-300",children:a.number}),e.jsx("div",{className:"text-lg opacity-90",children:a.label})]},n))})]})}),e.jsxs("section",{className:"py-16 max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Where We Serve"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Currently available across three premier Florida communities"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((a,n)=>e.jsx(V,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(K,{className:"p-6 text-center",children:[e.jsx(ws,{className:"w-12 h-12 text-roam-blue mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),e.jsx("p",{className:"text-gray-600",children:a.description})]})},n))}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs(ge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[e.jsx(Pn,{className:"w-4 h-4 mr-1"}),"Expanding to new communities soon"]})})]}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"What Drives Us"}),e.jsx("p",{className:"text-lg text-gray-600",children:"The values that shape every interaction and experience"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t.map((a,n)=>e.jsx(V,{className:"hover:shadow-lg transition-shadow",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-roam-blue/10 p-3 rounded-lg",children:e.jsx(a.icon,{className:"w-6 h-6 text-roam-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]})]})})},n))})]})}),e.jsxs("section",{className:"py-16 max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Premium Services at Your Door"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"From indulgent home med-spa treatments to invigorating fitness sessions, we bring luxury wellness experiences directly to you."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsx(V,{className:"text-center hover:shadow-lg transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"bg-pink-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(av,{className:"w-8 h-8 text-pink-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Beauty & Spa"}),e.jsx("p",{className:"text-gray-600",children:"Professional beauty treatments and spa services in the comfort of your home"})]})}),e.jsx(V,{className:"text-center hover:shadow-lg transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Pn,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Fitness & Wellness"}),e.jsx("p",{className:"text-gray-600",children:"Personal training and wellness services tailored to your lifestyle"})]})}),e.jsx(V,{className:"text-center hover:shadow-lg transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(i0,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Premium Experiences"}),e.jsx("p",{className:"text-gray-600",children:"Curated luxury experiences that elevate your well-being"})]})})]})]}),e.jsx("section",{className:"py-16 bg-gradient-to-r from-roam-blue to-roam-light-blue text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Experience Your Best Life?"}),e.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of satisfied customers and experience the convenience of premium on-demand services."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ee,{to:"/browse",children:e.jsxs(P,{size:"lg",className:"bg-white text-roam-blue hover:bg-gray-100",children:["Browse Services",e.jsx(kn,{className:"w-5 h-5 ml-2"})]})}),e.jsx(Ee,{to:"/business-registration",children:e.jsxs(P,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[e.jsx(Ds,{className:"w-5 h-5 mr-2"}),"Join as a Provider"]})})]})]})})]})}function qD({title:s,description:t,icon:r=Wk}){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx(su,{}),e.jsx("section",{className:"py-20 lg:py-32",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsx(V,{className:"border-dashed border-2 border-roam-light-blue/30",children:e.jsxs(K,{className:"p-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(r,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-roam-blue",children:s}),e.jsx("p",{className:"text-lg text-foreground/70 mb-8",children:t}),e.jsx("div",{className:"bg-roam-light-blue/10 rounded-lg p-6 mb-8 border border-roam-light-blue/20",children:e.jsx("p",{className:"text-sm text-foreground/80",children:"🚧 This page is currently under construction. We're working hard to bring you amazing new features! In the meantime, feel free to explore our other services or contact us with any questions."})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs(Ee,{to:"/",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Contact Support"]})]}),e.jsx("div",{className:"mt-8 text-sm text-foreground/60",children:e.jsx("p",{children:"Have suggestions for this page? We'd love to hear from you!"})})]})})})})}),e.jsx(Kf,{})]})}function VD(){return e.jsx(qD,{title:"Customer Support",description:"Get help with your ROAM account, bookings, or any questions about our premium service platform.",icon:Xk})}const jt=d.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:Oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));jt.displayName="Textarea";function JD({isOpen:s,onClose:t}){const[r,a]=d.useState([{id:"welcome",role:"assistant",content:"Hi! I'm here to help answer questions about ROAM. What would you like to know?",timestamp:new Date}]),[n,i]=d.useState(""),[o,c]=d.useState(!1),l=async()=>{if(!n.trim())return;const m={id:Date.now().toString(),role:"user",content:n,timestamp:new Date};a(x=>[...x,m]),i(""),c(!0);try{setTimeout(()=>{const x={id:(Date.now()+1).toString(),role:"assistant",content:u(n),timestamp:new Date};a(f=>[...f,x]),c(!1)},1e3)}catch(x){console.error("Error sending message:",x),c(!1)}},u=m=>{const x=m.toLowerCase();return x.includes("booking")||x.includes("appointment")?"To make a booking, you can browse our services and select a provider that fits your needs. Each provider's profile shows their availability and pricing. Would you like help finding a specific type of service?":x.includes("provider")||x.includes("join")?"Interested in becoming a provider? Great! You can apply through our 'Become a Provider' page. We welcome verified professionals in beauty, fitness, wellness, and healthcare. The application process includes verification steps to ensure quality service.":x.includes("payment")||x.includes("cost")?"ROAM offers secure payment processing. You can see exact pricing on each provider's profile before booking. We accept major credit cards and digital payments. There are no hidden fees - what you see is what you pay.":x.includes("cancel")||x.includes("refund")?"Cancellation policies vary by provider, but most allow cancellations up to 24 hours before your appointment. You can manage your bookings in the 'My Bookings' section. For specific refund questions, please contact the provider directly or reach out to our support team.":x.includes("location")||x.includes("area")?"ROAM connects you with local service providers in your area. Our providers offer both in-home services and studio appointments. You can filter by location and see each provider's service radius on their profile.":"I'm here to help with questions about ROAM's services, booking process, becoming a provider, payments, and more. Could you please be more specific about what you'd like to know?"};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end justify-end p-4 z-50",children:e.jsxs(V,{className:"w-full max-w-md h-[500px] flex flex-col",children:[e.jsxs(Se,{className:"flex flex-row items-center justify-between space-y-0 pb-2 bg-roam-blue text-white rounded-t-lg",children:[e.jsxs(Ce,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Uo,{className:"w-5 h-5"}),"ROAM Assistant"]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:t,className:"text-white hover:bg-white/20",children:e.jsx(wt,{className:"w-4 h-4"})})]}),e.jsxs(K,{className:"flex-1 flex flex-col p-0",children:[e.jsx(uo,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[r.map(m=>e.jsxs("div",{className:`flex gap-3 ${m.role==="user"?"justify-end":"justify-start"}`,children:[m.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-roam-blue/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Uo,{className:"w-4 h-4 text-roam-blue"})}),e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${m.role==="user"?"bg-roam-blue text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:m.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),m.role==="user"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:e.jsx(At,{className:"w-4 h-4 text-gray-600"})})]},m.id)),o&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-roam-blue/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Uo,{className:"w-4 h-4 text-roam-blue"})}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:e.jsx(rt,{className:"w-4 h-4 animate-spin text-gray-600"})})]})]})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{value:n,onChange:m=>i(m.target.value),placeholder:"Ask me anything about ROAM...",onKeyPress:m=>m.key==="Enter"&&l(),disabled:o}),e.jsx(P,{onClick:l,disabled:!n.trim()||o,size:"sm",children:e.jsx(nf,{className:"w-4 h-4"})})]})})]})]})}):null}function WD(){const{toast:s}=et(),[t,r]=d.useState({name:"",email:"",subject:"",message:""}),[a,n]=d.useState(!1),[i,o]=d.useState(!1),[c,l]=d.useState(!1),u=f=>{const{name:p,value:v}=f.target;r(g=>({...g,[p]:v}))},m=async f=>{f.preventDefault(),n(!0);try{const p=await fetch("/api/send-contact-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:"contactus@roamyourbestlife.com",from:t.email,subject:`Contact Form: ${t.subject}`,html:`
            <h2>New Contact Form Submission</h2>
            <p><strong>Name:</strong> ${t.name}</p>
            <p><strong>Email:</strong> ${t.email}</p>
            <p><strong>Subject:</strong> ${t.subject}</p>
            <p><strong>Message:</strong></p>
            <p>${t.message.replace(/\n/g,"<br>")}</p>
          `})}),v=await p.json().catch(()=>({}));if(!p.ok)throw console.error("Email send failed:",{status:p.status,statusText:p.statusText,data:v}),new Error(v.error||`Server error: ${p.status}`);o(!0),s({title:"Message sent successfully!",description:"We'll get back to you within 24 hours."}),r({name:"",email:"",subject:"",message:""})}catch(p){console.error("Error sending email:",p),s({title:"Error sending message",description:"Please try again or contact us directly at contactus@roamyourbestlife.com",variant:"destructive"})}finally{n(!1)}},x=()=>t.name.trim()&&t.email.trim()&&t.subject.trim()&&t.message.trim();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-br from-roam-blue via-roam-light-blue to-roam-yellow py-16",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Contact Us"}),e.jsx("p",{className:"text-xl text-white/90 max-w-2xl mx-auto",children:"We're here to help! Reach out to us through any of the channels below and our team will get back to you as soon as possible."})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-12",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-5 h-5 text-roam-blue"}),"Send us a Message"]}),e.jsx("p",{className:"text-foreground/70",children:"Fill out the form below and we'll respond within 24 hours"})]}),e.jsx(K,{children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-semibold text-green-700 mb-2",children:"Message Sent Successfully!"}),e.jsx("p",{className:"text-foreground/70 mb-6",children:"Thank you for contacting us. We'll get back to you within 24 hours."}),e.jsx(P,{onClick:()=>o(!1),variant:"outline",children:"Send Another Message"})]}):e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"name",children:"Full Name *"}),e.jsx(ae,{id:"name",name:"name",value:t.name,onChange:u,placeholder:"Your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email Address *"}),e.jsx(ae,{id:"email",name:"email",type:"email",value:t.email,onChange:u,placeholder:"your.email@example.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"subject",children:"Subject *"}),e.jsx(ae,{id:"subject",name:"subject",value:t.subject,onChange:u,placeholder:"What can we help you with?",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"message",children:"Message *"}),e.jsx(jt,{id:"message",name:"message",value:t.message,onChange:u,placeholder:"Please provide details about your inquiry...",className:"min-h-[120px]",required:!0})]}),e.jsx(P,{type:"submit",disabled:!x()||a,className:"w-full",children:a?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(nf,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(En,{className:"w-5 h-5 text-roam-blue"}),"Direct Contact"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-foreground/70",children:"contactus@roamyourbestlife.com"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bs,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Response Time"}),e.jsx("p",{className:"text-sm text-foreground/70",children:"Within 24 hours"})]})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5 text-roam-blue"}),"Follow Us"]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-foreground/70 mb-4",children:"Connect with us on social media for updates, tips, and community discussions."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:e.jsxs(P,{variant:"outline",className:"w-full",children:[e.jsx(zo,{className:"w-4 h-4 mr-2"}),"Instagram"]})}),e.jsx("a",{href:"https://www.facebook.com/roamtheapp",target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:e.jsxs(P,{variant:"outline",className:"w-full",children:[e.jsx(tf,{className:"w-4 h-4 mr-2"}),"Facebook"]})})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Uo,{className:"w-5 h-5 text-roam-blue"}),"AI Assistant"]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-foreground/70 mb-4",children:"Get instant answers to common questions with our AI-powered chat assistant."}),e.jsx(ge,{variant:"default",className:"mb-4 bg-green-100 text-green-700",children:"Available Now"}),e.jsxs(P,{variant:"outline",className:"w-full",onClick:()=>l(!0),children:[e.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Chat with AI Assistant"]}),e.jsx("p",{className:"text-xs text-foreground/60 mt-2",children:"Powered by Vercel AI SDK"})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Quick Help"})}),e.jsx(K,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Common Topics:"}),e.jsxs("ul",{className:"text-sm text-foreground/70 space-y-1",children:[e.jsx("li",{children:"• Booking and scheduling"}),e.jsx("li",{children:"• Account and profile issues"}),e.jsx("li",{children:"• Payment and billing"}),e.jsx("li",{children:"• Provider applications"}),e.jsx("li",{children:"• Technical support"})]})]})})]})]})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx(V,{children:e.jsxs(K,{className:"py-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"We're Here to Help"}),e.jsx("p",{className:"text-foreground/70 max-w-2xl mx-auto",children:"Whether you're a customer looking for services or a provider wanting to join our platform, our team is dedicated to providing you with the best possible experience. Don't hesitate to reach out with any questions, feedback, or suggestions."})]})})})]}),e.jsx(JD,{isOpen:c,onClose:()=>l(!1)})]})}var Qf="Avatar",[HD,H9]=ft(Qf),[GD,E_]=HD(Qf),P_=d.forwardRef((s,t)=>{const{__scopeAvatar:r,...a}=s,[n,i]=d.useState("idle");return e.jsx(GD,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(Ae.span,{...a,ref:t})})});P_.displayName=Qf;var T_="AvatarImage",I_=d.forwardRef((s,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...i}=s,o=E_(T_,r),c=XD(a),l=Ns(u=>{n(u),o.onImageLoadingStatusChange(u)});return Fs(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?e.jsx(Ae.img,{...i,ref:t,src:a}):null});I_.displayName=T_;var A_="AvatarFallback",M_=d.forwardRef((s,t)=>{const{__scopeAvatar:r,delayMs:a,...n}=s,i=E_(A_,r),[o,c]=d.useState(a===void 0);return d.useEffect(()=>{if(a!==void 0){const l=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(l)}},[a]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(Ae.span,{...n,ref:t}):null});M_.displayName=A_;function XD(s){const[t,r]=d.useState("idle");return Fs(()=>{if(!s){r("error");return}let a=!0;const n=new window.Image,i=o=>()=>{a&&r(o)};return r("loading"),n.onload=i("loaded"),n.onerror=i("error"),n.src=s,()=>{a=!1}},[s]),t}var R_=P_,O_=I_,D_=M_;const st=d.forwardRef(({className:s,...t},r)=>e.jsx(R_,{ref:r,className:Oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-lg",s),...t}));st.displayName=R_.displayName;const it=d.forwardRef(({className:s,...t},r)=>e.jsx(O_,{ref:r,className:Oe("aspect-square h-full w-full",s),...t}));it.displayName=O_.displayName;const tt=d.forwardRef(({className:s,...t},r)=>e.jsx(D_,{ref:r,className:Oe("flex h-full w-full items-center justify-center rounded-lg bg-muted",s),...t}));tt.displayName=D_.displayName;function tu(s={}){const{user:t}=Ss(),{toast:r}=et(),[a,n]=d.useState(!1),[i,o]=d.useState([]),[c,l]=d.useState(null),{userId:u=t==null?void 0:t.id,userType:m,onStatusChange:x,enableNotifications:f=!0}=s,p=d.useCallback(w=>{if(!f)return;const _={confirmed:"Your booking has been confirmed!",in_progress:"Your service is now in progress",completed:"Your booking has been completed",cancelled:"Your booking has been cancelled",rescheduled:"Your booking has been rescheduled",pending_payment:"Payment is required for your booking",paid:"Payment confirmed for your booking"}[w.status]||`Booking status updated to ${w.status}`,N=w.status==="cancelled"?"destructive":"default";r({title:"Booking Update",description:`${_} - ${w.service_name||"Service"}`,variant:N})},[f,r]);d.useEffect(()=>{if(!u)return;const w=W.channel("booking_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"bookings",filter:m==="customer"?`customer_id=eq.${u}`:m==="provider"?`provider_id=eq.${u}`:m==="business"?`business_id=eq.${u}`:`or(customer_id.eq.${u},provider_id.eq.${u},business_id.eq.${u})`},y=>{const _=y.new,N=y.old,C={id:_.id,status:_.status,previous_status:N==null?void 0:N.status,updated_at:_.updated_at,customer_id:_.customer_id,provider_id:_.provider_id,business_id:_.business_id,service_name:_.service_name,business_name:_.business_name,scheduled_date:_.scheduled_date,scheduled_time:_.scheduled_time};o(R=>[C,...R.slice(0,49)]),l(new Date),(N==null?void 0:N.status)!==_.status&&p(C),x&&x(C)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"bookings",filter:m==="customer"?`customer_id=eq.${u}`:m==="provider"?`provider_id=eq.${u}`:m==="business"?`business_id=eq.${u}`:`or(customer_id.eq.${u},provider_id.eq.${u},business_id.eq.${u})`},y=>{console.log("New booking received:",y);const _=y.new,N={id:_.id,status:_.status,updated_at:_.created_at,customer_id:_.customer_id,provider_id:_.provider_id,business_id:_.business_id,service_name:_.service_name,business_name:_.business_name,scheduled_date:_.scheduled_date,scheduled_time:_.scheduled_time};o(C=>[N,...C.slice(0,49)]),l(new Date),(m==="provider"||m==="business")&&r({title:"New Booking",description:`New booking received for ${N.service_name||"service"}`}),x&&x(N)}).subscribe(y=>{n(y==="SUBSCRIBED")});return()=>{w.unsubscribe(),n(!1)}},[u,m]);const v=d.useCallback(async()=>{if(u)try{const{data:w,error:y}=await W.from("bookings").select(`
          id,
          status,
          updated_at,
          customer_id,
          provider_id,
          business_id,
          service_name,
          business_name,
          scheduled_date,
          scheduled_time
        `).or(m==="customer"?`customer_id.eq.${u}`:m==="provider"?`provider_id.eq.${u}`:m==="business"?`business_id.eq.${u}`:`customer_id.eq.${u},provider_id.eq.${u},business_id.eq.${u}`).order("updated_at",{ascending:!1}).limit(10);if(y){console.error("Error refreshing bookings - Full error object:",y),console.error("Error type:",typeof y),console.error("Error keys:",Object.keys(y||{}));let N="Unknown error occurred";if(y)if(typeof y=="string")N=y;else if(y.message)N=y.message;else if("error_description"in y)N=y.error_description;else if(y.details)N=y.details;else if(y.hint)N=y.hint;else if(y.code)N=`Database error (${y.code})`;else try{N=JSON.stringify(y)}catch{N="Unable to parse error details"}console.error("Parsed error message:",N),r({title:"Error Refreshing Bookings",description:`Failed to refresh bookings: ${N}`,variant:"destructive"});return}const _=w.map(N=>({id:N.id,status:N.status,updated_at:N.updated_at,customer_id:N.customer_id,provider_id:N.provider_id,business_id:N.business_id,service_name:N.service_name,business_name:N.business_name,scheduled_date:N.scheduled_date,scheduled_time:N.scheduled_time}));o(_),l(new Date)}catch(w){console.error("Error in refreshBookings - Full error object:",w),console.error("Error type:",typeof w),console.error("Error keys:",Object.keys(w||{}));let y="Unknown error occurred";if(w)if(typeof w=="string")y=w;else if(w.message)y=w.message;else if(w.error_description)y=w.error_description;else if(w.details)y=w.details;else if(w.hint)y=w.hint;else if(w.code)y=`Database error (${w.code})`;else try{y=JSON.stringify(w)}catch{y="Unable to parse error details"}console.error("Parsed error message:",y),r({title:"Error Refreshing Bookings",description:`Failed to refresh bookings: ${y}`,variant:"destructive"})}},[u,m]),g=d.useCallback(w=>i.filter(y=>y.id===w),[i]),b=d.useCallback(w=>{const y=g(w);return y.length>0?y[0].status:null},[g]);return{isConnected:a,bookingUpdates:i,lastUpdate:c,refreshBookings:v,getBookingUpdates:g,getLatestBookingStatus:b}}var ex="Progress",sx=100,[YD,G9]=ft(ex),[ZD,KD]=YD(ex),F_=d.forwardRef((s,t)=>{const{__scopeProgress:r,value:a=null,max:n,getValueLabel:i=QD,...o}=s;(n||n===0)&&!Zb(n)&&console.error(eF(`${n}`,"Progress"));const c=Zb(n)?n:sx;a!==null&&!Kb(a,c)&&console.error(sF(`${a}`,"Progress"));const l=Kb(a,c)?a:null,u=jd(l)?i(l,c):void 0;return e.jsx(ZD,{scope:r,value:l,max:c,children:e.jsx(Ae.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":jd(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":B_(l,c),"data-value":l??void 0,"data-max":c,...o,ref:t})})});F_.displayName=ex;var L_="ProgressIndicator",$_=d.forwardRef((s,t)=>{const{__scopeProgress:r,...a}=s,n=KD(L_,r);return e.jsx(Ae.div,{"data-state":B_(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:t})});$_.displayName=L_;function QD(s,t){return`${Math.round(s/t*100)}%`}function B_(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function jd(s){return typeof s=="number"}function Zb(s){return jd(s)&&!isNaN(s)&&s>0}function Kb(s,t){return jd(s)&&!isNaN(s)&&s<=t&&s>=0}function eF(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${sx}\`.`}function sF(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${sx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var U_=F_,tF=$_;const z_=d.forwardRef(({className:s,value:t,...r},a)=>e.jsx(U_,{ref:a,className:Oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:e.jsx(tF,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));z_.displayName=U_.displayName;const rF=["pending","confirmed","in_progress","completed"],aF=["pending_payment","paid","completed"];function nF({status:s,previousStatus:t,showProgress:r=!1,size:a="md",animated:n=!0,showIcon:i=!0,showText:o=!0,className:c}){const u=(g=>({pending:{label:"Pending",icon:bs,color:"bg-yellow-100 text-yellow-700 border-yellow-200",progressColor:"bg-yellow-500",description:"Awaiting confirmation"},confirmed:{label:"Confirmed",icon:Xe,color:"bg-green-100 text-green-700 border-green-200",progressColor:"bg-green-500",description:"Booking confirmed"},in_progress:{label:"In Progress",icon:rt,color:"bg-blue-100 text-blue-700 border-blue-200",progressColor:"bg-blue-500",description:"Service in progress",spin:!0},completed:{label:"Completed",icon:Xe,color:"bg-emerald-100 text-emerald-700 border-emerald-200",progressColor:"bg-emerald-500",description:"Service completed"},cancelled:{label:"Cancelled",icon:Sr,color:"bg-red-100 text-red-700 border-red-200",progressColor:"bg-red-500",description:"Booking cancelled"},rescheduled:{label:"Rescheduled",icon:Qe,color:"bg-orange-100 text-orange-700 border-orange-200",progressColor:"bg-orange-500",description:"Date/time changed"},pending_payment:{label:"Payment Due",icon:Zt,color:"bg-amber-100 text-amber-700 border-amber-200",progressColor:"bg-amber-500",description:"Payment required"},paid:{label:"Paid",icon:Xe,color:"bg-green-100 text-green-700 border-green-200",progressColor:"bg-green-500",description:"Payment confirmed"},no_show:{label:"No Show",icon:ht,color:"bg-gray-100 text-gray-700 border-gray-200",progressColor:"bg-gray-500",description:"Customer did not show"}})[g]||{label:g.replace("_"," "),icon:ht,color:"bg-gray-100 text-gray-700 border-gray-200",progressColor:"bg-gray-500",description:"Unknown status"})(s),m=u.icon,x=()=>{const b=s.includes("payment")||s==="paid"?aF:rF,w=b.indexOf(s);return w===-1?s==="cancelled"||s==="no_show"?0:s==="rescheduled"?50:25:(w+1)/b.length*100},p=(()=>{switch(a){case"sm":return{badge:"text-xs px-2 py-1",icon:"w-3 h-3",progress:"h-1"};case"lg":return{badge:"text-sm px-3 py-2",icon:"w-5 h-5",progress:"h-3"};default:return{badge:"text-sm px-2.5 py-1.5",icon:"w-4 h-4",progress:"h-2"}}})(),v=x();return e.jsxs("div",{className:Oe("space-y-2",c),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ge,{variant:"outline",className:Oe("flex items-center gap-1.5 transition-all duration-300",u.color,p.badge,n&&t&&"animate-pulse"),children:[i&&e.jsx(m,{className:Oe(p.icon,u.spin&&n&&"animate-spin")}),o&&e.jsx("span",{className:"capitalize font-medium",children:u.label})]}),n&&t&&t!==s&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 animate-fade-in",children:[e.jsx(kn,{className:"w-3 h-3"}),e.jsx("span",{children:"Updated"})]})]}),r&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(z_,{value:v,className:Oe("transition-all duration-500",p.progress)}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:u.description}),e.jsxs("span",{children:[Math.round(v),"%"]})]})]})]})}function rd({bookingId:s,currentStatus:t,onStatusChange:r,className:a}){const{getLatestBookingStatus:n}=tu({onStatusChange:c=>{c.id===s&&r&&r(c.status)}}),i=n(s)||t,o=i!==t;return e.jsxs("div",{className:Oe("relative",a),children:[e.jsx(nF,{status:i,previousStatus:o?t:void 0,animated:!0,showProgress:!0}),o&&e.jsxs("div",{className:"absolute -top-1 -right-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-ping"}),e.jsx("div",{className:"absolute top-0 w-2 h-2 bg-blue-500 rounded-full"})]})]})}const q_=()=>{const{user:s,customer:t,userType:r}=Ss(),{toast:a}=et(),n=s||t,[i,o]=d.useState([]),[c,l]=d.useState(null),[u,m]=d.useState([]),[x,f]=d.useState([]),[p,v]=d.useState(!1),[g,b]=d.useState(!1),[w,y]=d.useState(null),_=d.useCallback(()=>n?`${r||(n.provider_role?"provider":"customer")}-${n.id}`:null,[n,r]),N=d.useCallback(()=>n?r||(n.provider_role?"provider":"customer"):null,[n,r]),C=d.useCallback(async(X,T)=>{console.log("🚀 createConversation called with:",{bookingId:X,participants:T});try{v(!0),y(null);const A={action:"create-conversation",bookingId:X,participants:T};console.log("📤 Sending request to /api/twilio-conversations:",A);const O=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});console.log("📥 Response status:",O.status);const $=await O.json();if(console.log("📥 Response result:",$),!$.success)throw new Error($.error||"Failed to create conversation");return console.log("✅ Conversation created successfully, refreshing conversations list..."),$.conversationSid}catch(A){throw console.error("Error creating conversation:",A),y(A.message||"Failed to create conversation"),a({title:"Error",description:A.message||"Failed to create conversation",variant:"destructive"}),A}finally{v(!1)}},[a]),R=d.useCallback(async()=>{if(n){console.log("loadConversations called for user:",n.id);try{v(!0),y(null);const X={action:"get-conversations",userId:n.id};console.log("Sending request to /api/twilio-conversations:",X);const T=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});console.log("Response status:",T.status);const A=await T.json();if(console.log("Response result:",A),!A.success)throw new Error(A.error||"Failed to load conversations");o(A.conversations||[])}catch(X){console.error("Error loading conversations:",X),y(X.message||"Failed to load conversations"),a({title:"Error",description:X.message||"Failed to load conversations",variant:"destructive"})}finally{v(!1)}}},[n,a]),E=d.useCallback(async X=>{console.log("loadMessages called for conversation:",X);try{v(!0),y(null);const T={action:"get-messages",conversationSid:X};console.log("Sending request to /api/twilio-conversations:",T);const A=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});console.log("Response status:",A.status);const O=await A.json();if(console.log("Response result:",O),!O.success)throw new Error(O.error||"Failed to load messages");m(O.messages||[])}catch(T){console.error("Error loading messages:",T),y(T.message||"Failed to load messages"),a({title:"Error",description:T.message||"Failed to load messages",variant:"destructive"})}finally{v(!1)}},[a]),I=d.useCallback(async(X,T)=>{if(s){console.log("sendMessage called:",{conversationSid:X,message:T});try{b(!0),y(null);const A=N(),O=_();if(!A||!O)throw new Error("User not properly authenticated");const $={action:"send-message",conversationSid:X,message:T,participantIdentity:O,userRole:A,userName:`${n.first_name||""} ${n.last_name||""}`.trim(),userId:n.id};console.log("Sending request to /api/twilio-conversations:",$);const F=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});console.log("Response status:",F.status);const q=await F.json();if(console.log("Response result:",q),!q.success)throw new Error(q.error||"Failed to send message");const te={sid:q.messageSid,author:q.author,body:q.body,dateCreated:q.dateCreated,attributes:{userRole:A,userName:`${n.first_name||""} ${n.last_name||""}`.trim(),userId:n.id,timestamp:new Date().toISOString()}};return m(re=>[...re,te]),q.messageSid}catch(A){throw console.error("Error sending message:",A),y(A.message||"Failed to send message"),a({title:"Error",description:A.message||"Failed to send message",variant:"destructive"}),A}finally{b(!1)}}},[n,N,_,a]),M=d.useCallback(async X=>{console.log("loadParticipants called for conversation:",X);try{v(!0),y(null);const T={action:"get-conversation-participants",conversationSid:X};console.log("Sending request to /api/twilio-conversations:",T);const A=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});console.log("Response status:",A.status);const O=await A.json();if(console.log("Response result:",O),!O.success)throw new Error(O.error||"Failed to load participants");f(O.participants||[])}catch(T){console.error("Error loading participants:",T),y(T.message||"Failed to load participants"),a({title:"Error",description:T.message||"Failed to load participants",variant:"destructive"})}finally{v(!1)}},[a]),U=d.useCallback(async(X,T,A)=>{console.log("addParticipant called:",{conversationSid:X,participantUserId:T,participantUserType:A});try{v(!0),y(null);const O={action:"add-participant",conversationSid:X,userId:T,userType:A};console.log("Sending request to /api/twilio-conversations:",O);const $=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});console.log("Response status:",$.status);const F=await $.json();if(console.log("Response result:",F),!F.success)throw new Error(F.error||"Failed to add participant");return F.participantSid}catch(O){throw console.error("Error adding participant:",O),y(O.message||"Failed to add participant"),a({title:"Error",description:O.message||"Failed to add participant",variant:"destructive"}),O}finally{v(!1)}},[a]),D=d.useCallback(async X=>{if(n){console.log("markAsRead called for conversation:",X);try{v(!0),y(null);const T={action:"mark-as-read",conversationSid:X,userId:n.id};console.log("Sending request to /api/twilio-conversations:",T);const A=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});console.log("Response status:",A.status);const O=await A.json();if(console.log("Response result:",O),!O.success)throw new Error(O.error||"Failed to mark messages as read")}catch(T){console.error("Error marking messages as read:",T),y(T.message||"Failed to mark messages as read"),a({title:"Error",description:T.message||"Failed to mark messages as read",variant:"destructive"})}finally{v(!1)}}},[n,a]),z=d.useCallback(X=>{if(console.log("🎯 setActiveConversation called with:",X),l(X),X){const T=async()=>{console.log("📨 Loading messages for conversation:",X);try{v(!0),y(null);const O={action:"get-messages",conversationSid:X};console.log("📤 Sending request to /api/twilio-conversations:",O);const $=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});console.log("📥 Response status:",$.status);const F=await $.json();if(console.log("📥 Response result:",F),!F.success)throw new Error(F.error||"Failed to load messages");m(F.messages||[])}catch(O){console.error("Error loading messages:",O),y(O.message||"Failed to load messages"),a({title:"Error",description:O.message||"Failed to load messages",variant:"destructive"})}finally{v(!1)}},A=async()=>{console.log("👥 Loading participants for conversation:",X);try{v(!0),y(null);const O={action:"get-conversation-participants",conversationSid:X};console.log("📤 Sending request to /api/twilio-conversations:",O);const $=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});console.log("📥 Response status:",$.status);const F=await $.json();if(console.log("📥 Response result:",F),!F.success)throw new Error(F.error||"Failed to load participants");f(F.participants||[])}catch(O){console.error("Error loading participants:",O),y(O.message||"Failed to load participants"),a({title:"Error",description:O.message||"Failed to load participants",variant:"destructive"})}finally{v(!1)}};T(),A()}else m([]),f([])},[a]);return d.useEffect(()=>{n&&(console.log("🔄 Loading conversations for user:",n.id),(async()=>{if(n)try{v(!0),y(null);const T={action:"get-conversations",userId:n.id};console.log("📤 Sending request to /api/twilio-conversations:",T);const A=await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});console.log("📥 Response status:",A.status);const O=await A.json();if(console.log("📥 Response result:",O),!O.success)throw new Error(O.error||"Failed to load conversations");o(O.conversations||[])}catch(T){console.error("Error loading conversations:",T),y(T.message||"Failed to load conversations"),a({title:"Error",description:T.message||"Failed to load conversations",variant:"destructive"})}finally{v(!1)}})())},[n,a]),{conversations:i,currentConversation:c,messages:u,participants:x,loading:p,sending:g,error:w,createConversation:C,loadConversations:R,loadMessages:E,sendMessage:I,loadParticipants:M,addParticipant:U,markAsRead:D,setActiveConversation:z,getUserIdentity:_,getUserType:N}},V_=({isOpen:s,onClose:t,booking:r,conversationSid:a})=>{const{user:n,customer:i,userType:o}=Ss(),c=o||(n?"provider":"customer"),l=n||i,{messages:u,participants:m,loading:x,sending:f,sendMessage:p,loadMessages:v,createConversation:g,getUserIdentity:b,getUserType:w,setActiveConversation:y}=q_(),[_,N]=d.useState(""),[C,R]=d.useState(a||null),E=d.useRef(null);d.useEffect(()=>{var T;(T=E.current)==null||T.scrollIntoView({behavior:"smooth"})},[u]),d.useEffect(()=>{console.log("ConversationChat useEffect triggered:",{isOpen:s,booking:r==null?void 0:r.id,conversationSid:a,activeConversationSid:C,user:l==null?void 0:l.id,userType:c}),s&&r&&!C?(console.log("🎯 Triggering initializeBookingConversation..."),I()):s&&a&&(console.log("Setting conversation SID from prop:",a),R(a),y(a))},[s,r,a]),d.useEffect(()=>{C&&v(C)},[C,v]),d.useEffect(()=>{if(!s||!C)return;console.log("🔄 Starting optimized message polling for conversation:",C);const T=setInterval(async()=>{console.log("🔄 Checking for new messages...");const A=u.length;try{const $=await(await fetch("/api/twilio-conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get-messages",conversationSid:C})})).json();$.success&&$.messages&&$.messages.length>A&&(console.log("🔄 New messages found, updating chat"),await v(C))}catch(O){console.error("Message polling error:",O)}},8e3);return()=>{console.log("🔄 Stopping message polling"),clearInterval(T)}},[s,C,u.length]);const I=async()=>{var q,te;if(console.log("🚀 initializeBookingConversation called with:",{booking:r==null?void 0:r.id,user:l==null?void 0:l.id,userType:c,bookingData:r,currentUserData:l}),!r||!l){console.log("❌ Missing required data:",{booking:!!r,user:!!l,bookingId:r==null?void 0:r.id,userId:l==null?void 0:l.id});return}console.log("📋 Initializing booking conversation for:",r.id);const T=b(),A=w();if(console.log("👤 User identity:",T,"User type:",A),!T||!A){console.error("❌ Failed to get user identity or type"),console.log("🔍 Debug info:",{currentUser:l,userIdentity:T,userType:A,getUserIdentity:b,getUserType:w});return}const O=[];let $=`${l.first_name||""} ${l.last_name||""}`.trim(),F=l.id;if(A==="provider"&&n&&($=`${n.first_name||""} ${n.last_name||""}`.trim(),F=n.id),O.push({identity:T,role:A,name:$,userId:F,userType:A}),A==="provider"&&r.customer_profiles){const re=`${r.customer_profiles.first_name} ${r.customer_profiles.last_name}`.trim();O.push({identity:`customer-${r.customer_profiles.id}`,role:"customer",name:re,userId:r.customer_profiles.id,userType:"customer"})}else if(A==="customer"&&r.providers){const re=`${r.providers.first_name} ${r.providers.last_name}`.trim();O.push({identity:`provider-${r.providers.id}`,role:"provider",name:re,userId:r.providers.id,userType:"provider"})}console.log("👥 Enhanced participants logic:"),console.log("  - Current user type:",A),console.log("  - Current user ID:",l==null?void 0:l.id),console.log("  - Booking assigned provider ID:",(q=r.providers)==null?void 0:q.user_id),console.log("  - Current user is assigned provider:",(l==null?void 0:l.id)===((te=r.providers)==null?void 0:te.user_id)),console.log("  - Booking object:",r),console.log("  - booking.customer_profiles:",r.customer_profiles),console.log("  - booking.providers:",r.providers),console.log("👥 Booking participants:",O);try{console.log("📞 Calling createConversation...");const re=await g(r.id,O);console.log("✅ Conversation SID returned:",re),re?(console.log("🎯 Setting active conversation SID:",re),R(re),y(re)):console.error("❌ Failed to get conversation SID - returned null/undefined")}catch(re){console.error("💥 Error initializing conversation:",re)}},M=async()=>{if(!(!_.trim()||!C||f))try{await p(C,_.trim()),N(""),await v(C),setTimeout(()=>{v(C)},1e3)}catch(T){console.error("Error sending message:",T)}},U=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),M())},D=T=>{try{return Yf(new Date(T),{addSuffix:!0})}catch{return"Just now"}},z=T=>{b();const A=T.attributes||{},$=o==="customer"&&T.author.startsWith("customer-")||o==="provider"&&T.author.startsWith("provider-"),F=m.find(te=>te.identity===T.author);let q;if(F)q=X(F);else{const te={identity:T.author,attributes:A};q=X(te)}return{isCurrentUser:$,name:q.name,role:A.userRole||"participant",initials:q.initials}},X=T=>{var F,q,te;b();const O=o==="customer"&&T.identity.startsWith("customer-")||o==="provider"&&T.identity.startsWith("provider-");let $=((F=T.attributes)==null?void 0:F.name)||T.identity;return T.identity.startsWith("customer-")?o==="customer"&&l?$=`${l.first_name||""} ${l.last_name||""}`.trim():o==="provider"&&(r!=null&&r.customer_profiles)&&($=`${r.customer_profiles.first_name} ${r.customer_profiles.last_name}`.trim()):T.identity.startsWith("provider-")&&(o==="provider"&&n?$=`${n.first_name||""} ${n.last_name||""}`.trim():o==="customer"&&(r!=null&&r.providers)&&($=`${r.providers.first_name} ${r.providers.last_name}`.trim())),(!$||$===T.identity)&&($=T.identity.replace(/^(customer-|provider-)/,"").replace(/[_-]/g," ")||"User"),{isCurrentUser:O,name:$,role:((q=T.attributes)==null?void 0:q.role)||T.userType||"participant",imageUrl:(te=T.attributes)==null?void 0:te.imageUrl,initials:$.split(" ").map(re=>re[0]).join("").toUpperCase().substring(0,2)}};return e.jsx(Xs,{open:s,onOpenChange:t,children:e.jsxs(Vs,{className:"max-w-4xl h-[80vh] flex flex-col",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"h-5 w-5"}),r?`Chat - ${r.service_name||"Booking"}`:"Conversation"]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs(V,{className:"mb-4",children:[e.jsx(Se,{className:"pb-2",children:e.jsxs(Ce,{className:"text-sm flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Participants (",m.length,")"]})}),e.jsx(K,{className:"pt-0",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(T=>{const A=X(T);return e.jsxs(ge,{variant:A.isCurrentUser?"default":"secondary",className:"flex items-center gap-1",children:[e.jsxs(st,{className:"h-4 w-4",children:[e.jsx(it,{src:A.imageUrl}),e.jsx(tt,{className:"text-xs",children:A.initials})]}),A.name,A.isCurrentUser&&" (You)"]},T.sid)})})})]}),e.jsxs(V,{className:"flex-1 flex flex-col min-h-0",children:[e.jsx(Se,{className:"pb-2",children:e.jsx(Ce,{className:"text-sm",children:"Messages"})}),e.jsx(K,{className:"flex-1 flex flex-col min-h-0 pt-0",children:e.jsx(uo,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 p-4",children:[x?e.jsx("div",{className:"text-center text-gray-500",children:"Loading messages..."}):u.length===0?e.jsx("div",{className:"text-center text-gray-500",children:"No messages yet. Start the conversation!"}):u.map(T=>{const A=z(T);return console.log("🔍 Message debug:",{messageSid:T.sid,author:T.author,body:T.body,authorInfo:A,currentUserIdentity:b(),userType:o,currentUser:l,booking:r}),e.jsxs("div",{className:`flex gap-3 ${A.isCurrentUser?"flex-row-reverse":"flex-row"}`,children:[e.jsxs(st,{className:"h-8 w-8",children:[e.jsx(it,{src:""}),e.jsx(tt,{className:"text-xs",children:A.initials})]}),e.jsxs("div",{className:`flex flex-col max-w-[70%] ${A.isCurrentUser?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:A.name}),e.jsx(ge,{variant:"outline",className:"text-xs",children:A.role}),e.jsx("span",{className:"text-xs text-gray-500",children:D(T.dateCreated)})]}),e.jsx("div",{className:`rounded-lg px-3 py-2 text-sm ${A.isCurrentUser?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:T.body})]})]},T.sid)}),e.jsx("div",{ref:E})]})})})]}),e.jsx(V,{className:"mt-4",children:e.jsx(K,{className:"pt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{value:_,onChange:T=>N(T.target.value),onKeyPress:U,placeholder:"Type your message...",disabled:f||!C,className:"flex-1"}),e.jsx(P,{onClick:M,disabled:!_.trim()||f||!C,size:"icon",children:e.jsx(nf,{className:"h-4 w-4"})})]})})})]})]})})},iF=s=>({mobile:Kt,business_location:fs,virtual:pa})[s]||Kt,oF=s=>({mobile:"Mobile Service",business_location:"Business",virtual:"Virtual"})[s]||s;function Qb(){var $e,Be,es;const{user:s,customer:t,userType:r,loading:a}=Ss(),{toast:n}=et(),[i,o]=d.useState([]),[c,l]=d.useState(!0),[u,m]=d.useState(null),[x,f]=d.useState(!1),[p,v]=d.useState(null),[g,b]=d.useState(""),[w,y]=d.useState(!1),[_,N]=d.useState(null),[C,R]=d.useState(""),[E,I]=d.useState(""),[M,U]=d.useState(""),[D,z]=d.useState(!1),[X,T]=d.useState(null),A=s||t;console.log("MyBookings - currentUser:",A),console.log("MyBookings - user:",s),console.log("MyBookings - customer:",t);const{refreshBookings:O}=tu({userId:A==null?void 0:A.id,userType:"customer",onStatusChange:ee=>{o(Fe=>Fe.map(Ke=>Ke.id===ee.id?{...Ke,status:ee.status,updated_at:ee.updated_at}:Ke))}}),[$,F]=d.useState({upcoming:1,active:1,past:1}),q=10;d.useEffect(()=>{const ee=async(Fe=0)=>{var Ke,Ue;if(A)try{l(!0),m(null),console.log("Fetching bookings for user:",A.email),console.log("Current user object:",A),console.log("Customer object:",t);let ze;if(t&&t.id?(console.log("Authenticated user - querying by customer_id:",t.id),ze=await W.from("bookings").select(`
              id,
              customer_id,
              provider_id,
              service_id,
              booking_date,
              start_time,
              total_amount,
              created_at,
              service_fee,
              service_fee_charged,
              service_fee_charged_at,
              remaining_balance,
              remaining_balance_charged,
              remaining_balance_charged_at,
              cancellation_fee,
              refund_amount,
              cancelled_at,
              cancelled_by,
              cancellation_reason,
              guest_name,
              guest_email,
              guest_phone,
              customer_location_id,
              business_location_id,
              delivery_type,
              payment_status,
              booking_status,
              admin_notes,
              tip_eligible,
              tip_amount,
              tip_status,
              tip_requested_at,
              tip_deadline,
              booking_reference,
              business_id,
              decline_reason,
              services (
                id,
                name,
                min_price
              ),
              customer_profiles (
                id,
                first_name,
                last_name,
                email,
                image_url
              ),
              providers!provider_id (
                id,
                user_id,
                first_name,
                last_name,
                location_id,
                image_url
              ),
              business_profiles (
                id,
                business_name
              ),
              business_locations (
                id,
                location_name,
                address_line1,
                address_line2,
                city,
                state,
                postal_code,
                country,
                latitude,
                longitude
              )
            `).eq("customer_id",t.id).order("booking_date",{ascending:!0}).limit(50)):(console.log("No customer profile found - querying by guest_email:",A.email),ze=await W.from("bookings").select(`
              id,
              customer_id,
              provider_id,
              service_id,
              booking_date,
              start_time,
              total_amount,
              created_at,
              service_fee,
              service_fee_charged,
              service_fee_charged_at,
              remaining_balance,
              remaining_balance_charged,
              remaining_balance_charged_at,
              cancellation_fee,
              refund_amount,
              cancelled_at,
              cancelled_by,
              cancellation_reason,
              guest_name,
              guest_email,
              guest_phone,
              customer_location_id,
              business_location_id,
              delivery_type,
              payment_status,
              booking_status,
              admin_notes,
              tip_eligible,
              tip_amount,
              tip_status,
              tip_requested_at,
              tip_deadline,
              booking_reference,
              business_id,
              decline_reason,
              services (
                id,
                name,
                min_price
              ),
              customer_profiles (
                id,
                first_name,
                last_name,
                email,
                image_url
              ),
              providers!provider_id (
                id,
                first_name,
                last_name,
                location_id,
                image_url
              ),
              business_profiles (
                id,
                business_name
              ),
              business_locations (
                id,
                location_name,
                address_line1,
                address_line2,
                city,
                state,
                postal_code,
                country,
                latitude,
                longitude
              )
            `).eq("guest_email",A.email).order("booking_date",{ascending:!0}).limit(50)),console.log("Bookings query response:",ze),ze.data&&ze.data.length>0){console.log("First booking fields:",Object.keys(ze.data[0])),console.log("First booking provider_id:",ze.data[0].provider_id),console.log("First booking provider object:",ze.data[0].providers),console.log("First booking full data:",ze.data[0]);const Ie=Object.keys(ze.data[0]).filter(Ye=>Ye.toLowerCase().includes("provider")||Ye.toLowerCase().includes("user")||Ye==="assigned_provider_id"||Ye==="provider_user_id");if(console.log("Potential provider-related fields:",Ie),console.log("First booking provider_id value:",ze.data[0].provider_id),console.log("Provider_id type:",typeof ze.data[0].provider_id),ze.data[0].provider_id){const{data:Ye,error:We}=await W.from("providers").select("*").eq("id",ze.data[0].provider_id);console.log("Direct provider query result:",{providerData:Ye,providerError:We});const{data:Ls,error:ys}=await W.from("providers").select("id, first_name, last_name").limit(5);console.log("All providers sample:",{allProviders:Ls,allProvidersError:ys})}}if(ze.status===401&&Fe===0){console.log("JWT token expired, refreshing session...");const{data:Ie,error:Ye}=await W.auth.refreshSession();if(Ye){console.error("Token refresh failed:",Ye),m("Your session has expired. Please refresh the page and sign in again.");return}if(Ie!=null&&Ie.session)return console.log("Session refreshed successfully, retrying..."),await ee(1)}const{data:G,error:ue}=ze;if(ue)throw console.error("Bookings query error:",ue),new Error("Failed to fetch bookings from database");console.log("Found bookings:",(G==null?void 0:G.length)||0),console.log("Bookings data detail:",G);const xe=(G||[]).map(Ie=>{const Ye=Ie.providers,We=Ie.services,Ls=Ie.customer_profiles,ys=Ie.business_locations;let Hs="Location TBD",Gs=null;if(Ie.delivery_type==="business_location"&&ys){const ne=[ys.address_line1,ys.city,ys.state,ys.postal_code].filter(Boolean);Hs=ne.length>0?ne.join(", "):"Business Location",Gs={name:ys.location_name||"Business Location",address:{line1:ys.address_line1,line2:ys.address_line2,city:ys.city,state:ys.state,postalCode:ys.postal_code,country:ys.country},coordinates:{latitude:ys.latitude,longitude:ys.longitude}}}else Ie.delivery_type==="customer_location"||Ie.delivery_type==="mobile"?Hs="Your Location":Ie.delivery_type==="virtual"&&(Hs="Video Call");return{id:Ie.id,status:Ie.booking_status||"pending",service:(We==null?void 0:We.name)||"Unknown Service",provider_id:Ie.provider_id,provider:{name:Ye?`${Ye.first_name} ${Ye.last_name}`:"Unknown Provider",rating:4.9,phone:null,image:(Ye==null?void 0:Ye.image_url)||null,firstName:(Ye==null?void 0:Ye.first_name)||"",lastName:(Ye==null?void 0:Ye.last_name)||""},date:Ie.booking_date,time:Ie.start_time?new Date(`1970-01-01T${Ie.start_time}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"Time TBD",duration:"60 minutes",deliveryType:Ie.delivery_type||"business_location",location:Hs,locationDetails:Gs,price:`$${Ie.total_amount||0}`,notes:Ie.admin_notes||"",bookingDate:Ie.created_at,guestName:Ie.guest_name,guestEmail:Ie.guest_email,paymentStatus:Ie.payment_status,bookingReference:Ie.booking_reference||""}});o(xe),xe.length===0&&console.log("No bookings found for email:",A.email)}catch(ze){if(console.error("Error fetching bookings:",ze),((Ke=ze.message)!=null&&Ke.includes("JWT")||(Ue=ze.message)!=null&&Ue.includes("401")||ze.status===401)&&Fe===0){console.log("JWT error detected, attempting token refresh...");try{const{data:ue,error:xe}=await W.auth.refreshSession();if(!xe&&(ue!=null&&ue.session))return console.log("Session refreshed, retrying bookings fetch..."),await ee(1)}catch(ue){console.error("Token refresh failed:",ue)}m("Your session has expired. Please refresh the page and sign in again.");return}let G="Failed to load bookings. Please try again.";typeof ze=="string"?G=ze:ze!=null&&ze.message?G=ze.message:ze!=null&&ze.details?G=ze.details:ze!=null&&ze.hint&&(G=ze.hint),m(G)}finally{l(!1)}};ee()},[A]);const te=i.filter(ee=>ee.status==="confirmed"||ee.status==="pending"),re=i.filter(ee=>ee.status==="completed"||ee.status==="cancelled"||ee.status==="declined"||ee.status==="no_show").sort((ee,Fe)=>new Date(Fe.date).getTime()-new Date(ee.date).getTime()),be=i.filter(ee=>ee.status==="in_progress"),Me=(ee,Fe)=>{const Ke=(Fe-1)*q,Ue=Ke+q;return ee.slice(Ke,Ue)},je=ee=>Math.ceil(ee/q),Y=Me(te,$.upcoming),we=Me(re,$.past),Q=Me(be,$.active),pe=(ee,Fe)=>{F(Ke=>{const Ue=re.length,ze=je(Ue),G=Ke[ee];let ue=G;return Fe==="next"&&G<ze?ue=G+1:Fe==="prev"&&G>1&&(ue=G-1),{...Ke,[ee]:ue}})},J=ee=>{v(ee),b(""),f(!0)},H=ee=>{N(ee),y(!0)},oe=ee=>{T(ee),z(!0)},de=ee=>{var Ye;const Fe=new Date(`${ee.date} ${ee.time}`),Ke=new Date,Ue=(Fe.getTime()-Ke.getTime())/(1e3*60*60),ze=parseFloat(((Ye=ee.price)==null?void 0:Ye.replace("$",""))||"0");let G=0,ue=ze,xe=!1,Ie=!1;return Ue<=0?(Ie=!0,G=ze,ue=0):Ue<=24&&(xe=!0,G=ze,ue=0),{totalAmount:ze,cancellationFee:G,refundAmount:ue,isWithin24Hours:xe,isPastBooking:Ie,hoursUntilBooking:Ue}},Te=async()=>{if(!p||!A){n({title:"Error",description:"Unable to cancel booking. Please try again.",variant:"destructive"});return}try{const ee=de(p),{totalAmount:Fe,cancellationFee:Ke,refundAmount:Ue}=ee,{error:ze}=await W.from("bookings").update({booking_status:"cancelled",cancelled_at:new Date().toISOString(),cancelled_by:A.id,cancellation_reason:g.trim()||"Cancelled by customer",cancellation_fee:Ke,refund_amount:Ue}).eq("id",p.id);if(ze)throw ze;o(ue=>ue.map(xe=>xe.id===p.id?{...xe,status:"cancelled",booking_status:"cancelled",cancelled_at:new Date().toISOString(),cancelled_by:A.id,cancellation_reason:g.trim()||"Cancelled by customer",cancellation_fee:Ke,refund_amount:Ue}:xe)),f(!1),v(null),b(""),O&&setTimeout(()=>O(),100);const G=Ue===0?"Your booking has been cancelled successfully. No refund will be processed as per our cancellation policy.":Ue===Fe?"Your booking has been cancelled successfully. Full refund will be processed.":`Your booking has been cancelled. Refund amount: $${Ue.toFixed(2)} (Cancellation fee: $${Ke.toFixed(2)})`;n({title:"Booking Cancelled",description:G})}catch(ee){console.error("Error cancelling booking:",ee);let Fe="Unknown error occurred";ee&&(typeof ee=="string"?Fe=ee:ee.message?Fe=ee.message:ee.details?Fe=ee.details:ee.hint&&(Fe=ee.hint)),n({title:"Error Cancelling Booking",description:`Failed to cancel booking: ${Fe}`,variant:"destructive"})}},De=async()=>{if(!_||!A||!C||!E){n({title:"Error",description:"Please select both a new date and time.",variant:"destructive"});return}try{const ee={booking_date:C,start_time:E,booking_status:"pending",rescheduled_at:new Date().toISOString(),rescheduled_by:A.id,reschedule_reason:M||null,original_booking_date:_.original_booking_date||_.booking_date,original_start_time:_.original_start_time||_.start_time,reschedule_count:(_.reschedule_count||0)+1},{error:Fe}=await W.from("bookings").update(ee).eq("id",_.id);if(Fe)throw Fe;o(Ke=>Ke.map(Ue=>Ue.id===_.id?{...Ue,date:C,booking_date:C,time:new Date(`1970-01-01T${E}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),start_time:E,status:"pending",booking_status:"pending",rescheduled_at:new Date().toISOString(),rescheduled_by:A.id,reschedule_reason:M||null,original_booking_date:Ue.original_booking_date||Ue.booking_date,original_start_time:Ue.original_start_time||Ue.start_time,reschedule_count:(Ue.reschedule_count||0)+1}:Ue)),y(!1),N(null),R(""),I(""),U(""),O&&O(),n({title:"Reschedule Request Sent",description:"Your reschedule request has been sent to the provider for approval."})}catch(ee){console.error("Error rescheduling booking - Full error object:",ee),console.error("Error type:",typeof ee),console.error("Error keys:",Object.keys(ee||{}));let Fe="Unknown error occurred";if(ee)if(typeof ee=="string")Fe=ee;else if(ee.message)Fe=ee.message;else if(ee.error_description)Fe=ee.error_description;else if(ee.details)Fe=ee.details;else if(ee.hint)Fe=ee.hint;else if(ee.code)Fe=`Database error (${ee.code})`;else try{Fe=JSON.stringify(ee)}catch{Fe="Unable to parse error details"}console.error("Parsed error message:",Fe),n({title:"Error Rescheduling Booking",description:`Failed to reschedule booking: ${Fe}`,variant:"destructive"})}},Le=ee=>new Date(ee).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a||c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(rt,{className:"w-8 h-8 animate-spin text-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Loading your bookings..."})]})}):u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ht,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Bookings"}),e.jsx("p",{className:"text-foreground/70 mb-6",children:u}),e.jsxs(P,{onClick:()=>window.location.reload(),className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md"}),e.jsx("section",{className:"py-8 lg:py-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ee,{to:"/home",children:e.jsxs(P,{variant:"ghost",className:"flex items-center gap-2 text-foreground/70 hover:text-foreground hover:bg-accent/50 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Back to Home"]})})}),e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["My ",e.jsx("span",{className:"text-roam-blue",children:"Bookings"})]}),e.jsx("p",{className:"text-lg text-foreground/70 mb-8",children:r==="customer"?"Manage your service appointments and view your booking history.":"Manage your appointments and view your booking history."}),Q.length>0&&e.jsx(V,{className:"mb-8 border-blue-200 bg-blue-50"}),e.jsxs(Pr,{defaultValue:"upcoming",className:"space-y-6",children:[e.jsx(fr,{className:"grid w-full grid-cols-3"}),e.jsx(ds,{value:"upcoming",className:"space-y-4",children:te.length===0?e.jsx(V,{className:"p-12 text-center"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:Y.map(ee=>e.jsx(Um,{booking:ee,onCancel:J,onReschedule:H,onMessage:oe},ee.id))}),je(te.length)>1&&e.jsx("div",{className:"flex items-center justify-between pt-4"})]})}),e.jsx(ds,{value:"active",className:"space-y-4",children:be.length===0?e.jsx(V,{className:"p-12 text-center"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:Q.map(ee=>e.jsx(Um,{booking:ee,onCancel:J,onReschedule:H,onMessage:oe},ee.id))}),je(be.length)>1&&e.jsx("div",{className:"flex items-center justify-between pt-4"})]})}),e.jsx(ds,{value:"past",className:"space-y-4",children:re.length===0?e.jsx(V,{className:"p-12 text-center"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:we.map(ee=>e.jsx(Um,{booking:ee,onCancel:J,onReschedule:H,onMessage:oe},ee.id))}),je(re.length)>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-foreground/60",children:["Showing ",($.past-1)*q+1," ","to"," ",Math.min($.past*q,re.length)," ","of ",re.length," bookings"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>pe("past","prev"),disabled:$.past===1,children:[e.jsx(qa,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("span",{className:"text-sm font-medium",children:["Page ",$.past," of"," ",je(re.length)]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>pe("past","next"),disabled:$.past===je(re.length),children:["Next",e.jsx(pt,{className:"w-4 h-4"})]})]})]})]})})]})]})})}),e.jsx(Xs,{open:x,onOpenChange:f,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Cancel Booking"]})}),e.jsxs("div",{className:"space-y-4",children:[p&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm",children:p.serviceName||p.service||"Service"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",Le(p.date)," at"," ",p.time]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Provider:"," ",(($e=p.provider)==null?void 0:$e.name)||"Provider"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"cancellation-reason",className:"text-sm font-medium",children:["Reason for Cancellation"," ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx(jt,{id:"cancellation-reason",placeholder:"Please let us know why you're cancelling this booking...",value:g,onChange:ee=>b(ee.target.value),rows:3,className:"resize-none"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This information helps us improve our service."})]}),p&&(()=>{const ee=de(p);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Cancellation Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Booking Total:"}),e.jsxs("span",{className:"font-medium",children:["$",ee.totalAmount.toFixed(2)]})]}),(ee.isWithin24Hours||ee.isPastBooking)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Cancellation Fee:"}),e.jsxs("span",{className:"font-medium",children:["$",ee.cancellationFee.toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-1 mt-1",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Refund Amount:"}),e.jsxs("span",{className:"text-red-600",children:["$",ee.refundAmount.toFixed(2)]})]})})]}),!ee.isWithin24Hours&&!ee.isPastBooking&&e.jsxs("div",{className:"flex justify-between font-medium text-green-600",children:[e.jsx("span",{children:"Refund Amount:"}),e.jsxs("span",{children:["$",ee.refundAmount.toFixed(2)]})]})]})]}),e.jsx("div",{className:`border rounded-lg p-3 ${ee.isPastBooking||ee.isWithin24Hours?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ht,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${ee.isPastBooking||ee.isWithin24Hours?"text-red-600":"text-yellow-600"}`}),e.jsxs("div",{className:`text-sm ${ee.isPastBooking||ee.isWithin24Hours?"text-red-800":"text-yellow-800"}`,children:[e.jsx("p",{className:"font-medium",children:"Cancellation Policy"}),ee.isPastBooking?e.jsx("p",{children:"This booking is in the past. You may cancel it but no refund will be provided as per our policy."}):ee.isWithin24Hours?e.jsx("p",{children:"This booking is within 24 hours of the appointment time. You may cancel it but no refund will be provided as per our policy."}):e.jsx("p",{children:"This booking can be cancelled with a full refund as it's more than 24 hours away from the appointment time."})]})]})})]})})(),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{f(!1),v(null),b("")},className:"flex-1",children:"Keep Booking"}),e.jsx(P,{onClick:Te,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:"Cancel Booking"})]})]})]})}),e.jsx(Xs,{open:w,onOpenChange:y,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2 text-roam-blue",children:[e.jsx($t,{className:"w-5 h-5"}),"Reschedule Booking"]})}),e.jsxs("div",{className:"space-y-4",children:[_&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm",children:_.service||"Service"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current Date: ",Le(_.date)," ","at ",_.time]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Provider:"," ",((Be=_.provider)==null?void 0:Be.name)||"Provider"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"new-booking-date",className:"text-sm font-medium",children:["New Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ae,{id:"new-booking-date",type:"date",value:C,onChange:ee=>R(ee.target.value),min:new Date().toISOString().split("T")[0],className:"w-full",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"new-booking-time",className:"text-sm font-medium",children:["New Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ae,{id:"new-booking-time",type:"time",value:E,onChange:ee=>I(ee.target.value),className:"w-full",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"reschedule-reason",className:"text-sm font-medium",children:["Reason for Rescheduling"," ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx(jt,{id:"reschedule-reason",placeholder:"Please let us know why you need to reschedule...",value:M,onChange:ee=>U(ee.target.value),rows:3,className:"resize-none"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Reschedule Policy"}),e.jsx("p",{children:"Your booking will be set to pending status and the provider will need to confirm the new date and time."})]})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{y(!1),N(null),R(""),I(""),U("")},className:"flex-1",children:"Cancel"}),e.jsx(P,{onClick:De,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90 text-white",disabled:!C||!E,children:"Request Reschedule"})]})]})]})}),e.jsx(V_,{isOpen:D,onClose:()=>z(!1),booking:X?{id:X.id,customer_name:`${(A==null?void 0:A.first_name)||""} ${(A==null?void 0:A.last_name)||""}`.trim()||"Customer",customer_email:(A==null?void 0:A.email)||"",customer_phone:(A==null?void 0:A.phone)||"",service_name:X.service||"Service",provider_name:((es=X.provider)==null?void 0:es.name)||"Provider",business_id:X.business_id||"",customer_id:X.customer_id,customer_profiles:X.customer_profiles,providers:X.providers}:void 0})]})}function Um({booking:s,onCancel:t,onReschedule:r,onMessage:a}){var l,u,m,x;({confirmed:{label:"Confirmed",color:"bg-green-100 text-green-800",icon:Xe,description:"Your booking is confirmed"},pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800",icon:bs,description:"Waiting for provider confirmation"},in_progress:{label:"In Progress",color:"bg-blue-100 text-blue-800",icon:ur,description:"Service is currently active"},completed:{label:"Completed",color:"bg-gray-100 text-gray-800",icon:Xe,description:"Service completed successfully"},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-800",icon:Sr,description:"Booking was cancelled"},declined:{label:"Declined",color:"bg-red-100 text-red-800",icon:Sr,description:"Booking was declined by provider"},no_show:{label:"No Show",color:"bg-gray-100 text-gray-800",icon:Sr,description:"Customer did not show up"}})[s.status];const n=iF(s.deliveryType),i=oF(s.deliveryType),o=()=>{const f=new Date,g=(new Date(`${s.date} ${s.time}`).getTime()-f.getTime())/(1e3*60*60);return g<=24&&g>0},c=(s.status==="pending"||s.status==="confirmed")&&!o();return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[e.jsxs(st,{className:"w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0",children:[e.jsx(it,{src:s.provider.image,alt:s.provider.name,className:"object-cover"}),e.jsxs(tt,{className:"bg-gradient-to-br from-roam-blue to-roam-light-blue text-white text-sm sm:text-lg font-semibold",children:[((u=(l=s.provider.firstName)==null?void 0:l[0])==null?void 0:u.toUpperCase())||"",((x=(m=s.provider.lastName)==null?void 0:m[0])==null?void 0:x.toUpperCase())||""]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.service}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:"text-foreground/60",children:["with ",s.provider.name]}),s.status==="confirmed"&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-roam-blue bg-roam-blue/10 px-2 py-1 rounded-full",children:[e.jsx(mt,{className:"w-3 h-3"}),e.jsx("span",{children:"Messaging Available"})]})]}),s.bookingReference&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded-lg border-l-4 border-roam-blue",children:[e.jsx(Qc,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Booking Reference"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:s.bookingReference})]})]}),s.reschedule_count>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-amber-50 rounded-lg border-l-4 border-amber-400",children:[e.jsx(ur,{className:"w-4 h-4 text-amber-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-xs font-medium text-amber-700 uppercase tracking-wide",children:["Rescheduled ",s.reschedule_count," time",s.reschedule_count>1?"s":""]}),s.original_booking_date&&s.original_start_time&&e.jsxs("p",{className:"text-xs text-amber-600",children:["Originally: ",new Date(s.original_booking_date).toLocaleDateString()," at"," ",new Date(`1970-01-01T${s.original_start_time}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}),s.reschedule_reason&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Reason: ",s.reschedule_reason]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),new Date(s.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),s.time," (",s.duration,")"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 self-start sm:self-center",children:[e.jsx(rd,{bookingId:s.id,currentStatus:s.status,onStatusChange:f=>{console.log(`Booking ${s.id} status changed to ${f}`)}}),s.status==="completed"&&new Date(s.date)<new Date?e.jsxs(P,{size:"sm",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>{window.location.href=`/book-service/${s.serviceId}`},children:[e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Book Again"]}):null]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(n,{className:"w-4 h-4 text-roam-blue mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:i}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("p",{className:"text-sm text-foreground/60 flex-1",children:s.location}),s.deliveryType==="business_location"&&s.location!=="Location TBD"&&e.jsx("button",{onClick:()=>{const f=s.location,p=/iPad|iPhone|iPod/.test(navigator.userAgent),v=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let g;if(s.locationDetails&&s.locationDetails.coordinates.latitude){const{latitude:b,longitude:w}=s.locationDetails.coordinates;p?g=`maps://maps.google.com/maps?daddr=${b},${w}&amp;ll=`:v?g=`geo:${b},${w}?q=${encodeURIComponent(f)}`:g=`https://www.google.com/maps/dir/?api=1&destination=${b},${w}`}else{const b=encodeURIComponent(f);p?g=`maps://maps.google.com/maps?daddr=${b}`:v?g=`geo:0,0?q=${b}`:g=`https://www.google.com/maps/dir/?api=1&destination=${b}`}window.open(g,"_blank")},className:"text-roam-blue hover:text-roam-blue/80 transition-colors",title:"Get directions",children:e.jsx(rf,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:s.provider.rating}),e.jsx("span",{className:"text-sm text-foreground/60",children:"•"}),e.jsx("span",{className:"text-sm font-semibold text-roam-blue",children:s.price})]})]}),s.notes&&e.jsx("div",{className:"bg-accent/20 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-foreground/80",children:[e.jsx("strong",{children:"Notes:"})," ",s.notes]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"flex gap-2",children:s.status==="confirmed"&&s.provider&&e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90 text-white font-medium",onClick:()=>a(s),title:`Message ${s.provider.name} about this booking`,children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Message Provider"]})}),e.jsx("div",{className:"flex gap-2",children:(s.status==="pending"||s.status==="confirmed")&&s.status!=="cancelled"&&s.status!=="declined"&&s.status!=="completed"&&s.status!=="no_show"&&e.jsxs(e.Fragment,{children:[e.jsxs(P,{size:"sm",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>r(s),children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Reschedule"]}),c?e.jsxs(P,{size:"sm",variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-500 hover:text-white",onClick:()=>t(s),children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Cancel"]}):o()?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs(P,{size:"sm",variant:"outline",className:"border-gray-300 text-gray-400 cursor-not-allowed",disabled:!0,children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx("p",{className:"text-xs text-red-600 mt-1 max-w-[120px] text-right",children:"Cannot cancel within 24 hours"})]}):null]})}),s.status==="completed"&&new Date(s.date)>=new Date&&e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Leave Review"]}),s.status==="cancelled"&&e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Book Again"]})]})]})})}var tx="Checkbox",[lF,X9]=ft(tx),[cF,dF]=lF(tx),J_=d.forwardRef((s,t)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:o,disabled:c,value:l="on",onCheckedChange:u,...m}=s,[x,f]=d.useState(null),p=qe(t,_=>f(_)),v=d.useRef(!1),g=x?!!x.closest("form"):!0,[b=!1,w]=hr({prop:n,defaultProp:i,onChange:u}),y=d.useRef(b);return d.useEffect(()=>{const _=x==null?void 0:x.form;if(_){const N=()=>w(y.current);return _.addEventListener("reset",N),()=>_.removeEventListener("reset",N)}},[x,w]),e.jsxs(cF,{scope:r,state:b,disabled:c,children:[e.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":Cn(b)?"mixed":b,"aria-required":o,"data-state":G_(b),"data-disabled":c?"":void 0,disabled:c,value:l,...m,ref:p,onKeyDown:ye(s.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:ye(s.onClick,_=>{w(N=>Cn(N)?!0:!N),g&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),g&&e.jsx(uF,{control:x,bubbles:!v.current,name:a,value:l,checked:b,required:o,disabled:c,style:{transform:"translateX(-100%)"}})]})});J_.displayName=tx;var W_="CheckboxIndicator",H_=d.forwardRef((s,t)=>{const{__scopeCheckbox:r,forceMount:a,...n}=s,i=dF(W_,r);return e.jsx(xt,{present:a||Cn(i.state)||i.state===!0,children:e.jsx(Ae.span,{"data-state":G_(i.state),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...s.style}})})});H_.displayName=W_;var uF=s=>{const{control:t,checked:r,bubbles:a=!0,...n}=s,i=d.useRef(null),o=Vd(r),c=Rd(t);return d.useEffect(()=>{const l=i.current,u=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&x){const f=new Event("click",{bubbles:a});l.indeterminate=Cn(r),x.call(l,Cn(r)?!1:r),l.dispatchEvent(f)}},[o,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:Cn(r)?!1:r,...n,tabIndex:-1,ref:i,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Cn(s){return s==="indeterminate"}function G_(s){return Cn(s)?"indeterminate":s?"checked":"unchecked"}var X_=J_,mF=H_;const Hr=d.forwardRef(({className:s,...t},r)=>e.jsx(X_,{ref:r,className:Oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(mF,{className:Oe("flex items-center justify-center text-current"),children:e.jsx(hl,{className:"h-4 w-4"})})}));Hr.displayName=X_.displayName;const hF=({onSubmit:s,loading:t,error:r})=>{const[a,n]=d.useState(!1),[i,o]=d.useState(1),[c,l]=d.useState({business_name:"",business_type:"independent",contact_email:"",phone:"",website_url:"",owner_first_name:"",owner_last_name:"",owner_email:"",owner_phone:"",owner_date_of_birth:new Date,business_address:{address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"United States"},password:"",confirmPassword:"",agreedToTerms:!1,agreedToBackground:!1}),u=(b,w)=>{if(b.includes(".")){const[y,_]=b.split(".");l(N=>({...N,[y]:{...N[y],[_]:w}}))}else l(y=>({...y,[b]:w}))},m=async b=>{b.preventDefault(),await s(c)},x=b=>{switch(b){case 1:return!!(c.business_name&&c.business_type);case 2:return!!(c.owner_first_name&&c.owner_last_name&&c.owner_email&&c.owner_phone);case 3:return!!(c.business_address.address_line1&&c.business_address.city&&c.business_address.state&&c.business_address.postal_code);case 4:return!!(c.password&&c.confirmPassword&&c.password===c.confirmPassword&&c.agreedToTerms&&c.agreedToBackground);default:return!1}},f=()=>{x(i)&&i<4&&o(i+1)},p=()=>{i>1&&o(i-1)},v=[{value:"independent",label:"Independent Provider",description:"Solo practitioner offering services directly to customers"},{value:"small_business",label:"Small Business",description:"Business with 2-25 providers across multiple locations"},{value:"franchise",label:"Franchise",description:"Part of a larger franchise network with standardized operations"},{value:"enterprise",label:"Enterprise",description:"Large organization with 100+ providers and multiple locations"},{value:"other",label:"Other",description:"Other business structure not listed above"}],g=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];return e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[1,2,3,4].map(b=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${b<=i?"bg-roam-blue text-white":"bg-gray-200 text-gray-500"}`,children:b}),b<4&&e.jsx("div",{className:`w-16 h-0.5 ${b<i?"bg-roam-blue":"bg-gray-200"}`})]},b))}),i===1&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),"Business Information"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_name",children:"Business Name *"}),e.jsx(ae,{id:"business_name",value:c.business_name,onChange:b=>u("business_name",b.target.value),placeholder:"Enter your business name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_type",children:"Business Type *"}),e.jsxs(as,{value:c.business_type,onValueChange:b=>u("business_type",b),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select business type"})}),e.jsx(ts,{children:v.map(b=>e.jsx(ce,{value:b.value,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.label}),e.jsx("div",{className:"text-sm text-gray-500",children:b.description})]})},b.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"website_url",children:"Website (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Td,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"website_url",type:"url",value:c.website_url,onChange:b=>u("website_url",b.target.value),placeholder:"https://yourwebsite.com",className:"pl-10"})]})]})]})]}),i===2&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5 text-roam-blue"}),"Owner/Primary Contact Information"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"owner_first_name",children:"First Name *"}),e.jsx(ae,{id:"owner_first_name",value:c.owner_first_name,onChange:b=>u("owner_first_name",b.target.value),placeholder:"John",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"owner_last_name",children:"Last Name *"}),e.jsx(ae,{id:"owner_last_name",value:c.owner_last_name,onChange:b=>u("owner_last_name",b.target.value),placeholder:"Doe",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"owner_email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"owner_email",type:"email",value:c.owner_email,onChange:b=>u("owner_email",b.target.value),placeholder:"john@example.com",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"owner_phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(En,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"owner_phone",type:"tel",value:c.owner_phone,onChange:b=>u("owner_phone",b.target.value),placeholder:"(555) 123-4567",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"owner_date_of_birth",children:"Date of Birth *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"owner_date_of_birth",type:"date",value:c.owner_date_of_birth.toISOString().split("T")[0],onChange:b=>u("owner_date_of_birth",new Date(b.target.value)),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"contact_email",children:"Business Contact Email"}),e.jsx(ae,{id:"contact_email",type:"email",value:c.contact_email,onChange:b=>u("contact_email",b.target.value),placeholder:"Same as owner email if empty"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Business Phone"}),e.jsx(ae,{id:"phone",type:"tel",value:c.phone,onChange:b=>u("phone",b.target.value),placeholder:"Same as owner phone if empty"})]})]})]})]}),i===3&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-roam-blue"}),"Business Address"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"address_line1",children:"Street Address *"}),e.jsx(ae,{id:"address_line1",value:c.business_address.address_line1,onChange:b=>u("business_address.address_line1",b.target.value),placeholder:"123 Main Street",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"address_line2",children:"Address Line 2 (Optional)"}),e.jsx(ae,{id:"address_line2",value:c.business_address.address_line2,onChange:b=>u("business_address.address_line2",b.target.value),placeholder:"Suite, Unit, etc."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"city",children:"City *"}),e.jsx(ae,{id:"city",value:c.business_address.city,onChange:b=>u("business_address.city",b.target.value),placeholder:"Miami",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"state",children:"State *"}),e.jsxs(as,{value:c.business_address.state,onValueChange:b=>u("business_address.state",b),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select state"})}),e.jsx(ts,{children:g.map(b=>e.jsx(ce,{value:b,children:b},b))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"postal_code",children:"ZIP Code *"}),e.jsx(ae,{id:"postal_code",value:c.business_address.postal_code,onChange:b=>u("business_address.postal_code",b.target.value),placeholder:"33101",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"country",children:"Country"}),e.jsxs(as,{value:c.business_address.country,onValueChange:b=>u("business_address.country",b),children:[e.jsx(ss,{children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"United States",children:"United States"}),e.jsx(ce,{value:"Canada",children:"Canada"})]})]})]})]})]})]}),i===4&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(qo,{className:"w-5 h-5 text-roam-blue"}),"Account Security & Agreements"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(qo,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"password",type:a?"text":"password",value:c.password,onChange:b=>u("password",b.target.value),placeholder:"Create a strong password",className:"pl-10 pr-10",required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0",onClick:()=>n(!a),children:a?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(qo,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"confirmPassword",type:a?"text":"password",value:c.confirmPassword,onChange:b=>u("confirmPassword",b.target.value),placeholder:"Confirm your password",className:"pl-10",required:!0})]}),c.password!==c.confirmPassword&&c.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600",children:"Passwords do not match"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Hr,{id:"agreedToTerms",checked:c.agreedToTerms,onCheckedChange:b=>u("agreedToTerms",b)}),e.jsxs(B,{htmlFor:"agreedToTerms",className:"text-sm leading-5",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-roam-blue hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-roam-blue hover:underline",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Hr,{id:"agreedToBackground",checked:c.agreedToBackground,onCheckedChange:b=>u("agreedToBackground",b)}),e.jsx(B,{htmlFor:"agreedToBackground",className:"text-sm leading-5",children:"I consent to background verification checks and document verification as required for platform approval"})]})]})]})]}),r&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:r})}),e.jsxs("div",{className:"flex justify-between",children:[i>1?e.jsx(P,{type:"button",variant:"outline",onClick:p,children:"Previous"}):e.jsx("div",{}),i<4?e.jsx(P,{type:"button",className:"bg-roam-blue hover:bg-roam-blue/90",onClick:f,disabled:!x(i),children:"Next"}):e.jsx(P,{type:"submit",className:"bg-roam-blue hover:bg-roam-blue/90",disabled:t||!x(i),children:t?"Creating Account...":"Create Account"})]})]})};function fF(){const[s,t]=d.useState(!1),[r,a]=d.useState(!1),[n,i]=d.useState("login"),[o,c]=d.useState(""),l=Nt(),{signIn:u}=Ss();d.useEffect(()=>{m()},[]);const m=async()=>{console.log("Skipping auth check - using AuthContext for auth state")},[x,f]=d.useState({email:"",password:""}),[p,v]=d.useState({business_name:"",business_type:"",contact_email:"",phone:"",website_url:"",owner_first_name:"",owner_last_name:"",owner_email:"",owner_phone:"",owner_date_of_birth:new Date,business_address:{address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"United States"},password:"",confirmPassword:"",agreedToTerms:!1,agreedToBackground:!1}),g=async y=>{y.preventDefault(),a(!0),c("");try{await u(x.email,x.password),l("/provider-dashboard")}catch(_){c(_ instanceof Error?_.message:"An error occurred during login")}finally{a(!1)}},b=async y=>{var _,N,C,R,E,I,M;a(!0),c("");try{if(y.password!==y.confirmPassword)throw new Error("Passwords do not match");if(!y.business_type)throw new Error("Please select a business type");if(!y.business_name)throw new Error("Please enter a business name");if(!y.owner_first_name||!y.owner_last_name)throw new Error("Please enter owner name");if(!y.agreedToTerms||!y.agreedToBackground)throw new Error("Please agree to terms and background check");const{data:U,error:D}=await W.auth.signUp({email:y.owner_email,password:y.password});if(D)throw new Error(D.message);if(!U.user)throw new Error("Failed to create user account");const{data:z,error:X}=await W.from("business_profiles").insert({business_name:y.business_name,business_type:y.business_type,contact_email:y.contact_email||y.owner_email,phone:y.phone||y.owner_phone,website_url:y.website_url,verification_status:"pending",is_active:!1,setup_step:1,setup_completed:!1}).select().single();if(X||!z)throw await W.auth.signOut(),new Error("Failed to create business profile: "+((X==null?void 0:X.message)||"Unknown error"));const{data:T,error:A}=await W.from("business_locations").insert({business_id:z.id,location_name:"Main Location",address_line1:(_=y.business_address)==null?void 0:_.address_line1,address_line2:(N=y.business_address)==null?void 0:N.address_line2,city:(C=y.business_address)==null?void 0:C.city,state:(R=y.business_address)==null?void 0:R.state,postal_code:(E=y.business_address)==null?void 0:E.postal_code,country:(I=y.business_address)==null?void 0:I.country,is_primary:!0,is_active:!0}).select().single();if(A||!T)throw await W.auth.signOut(),new Error("Failed to create business location: "+((A==null?void 0:A.message)||"Unknown error"));const{error:O}=await W.from("providers").insert({user_id:U.user.id,business_id:z.id,location_id:T.id,first_name:y.owner_first_name,last_name:y.owner_last_name,email:y.owner_email,phone:y.owner_phone,date_of_birth:(M=y.owner_date_of_birth)==null?void 0:M.toISOString().split("T")[0],provider_role:"owner",verification_status:"pending",background_check_status:"under_review",is_active:!1,business_managed:!0});if(await W.from("business_setup_progress").insert({business_id:z.id,current_step:1,total_steps:8,business_profile_completed:!1,locations_completed:!1,services_pricing_completed:!1,staff_setup_completed:!1,integrations_completed:!1,stripe_connect_completed:!1,subscription_completed:!1,go_live_completed:!1}),O)throw await W.auth.signOut(),new Error("Failed to create provider profile: "+O.message);l("/provider-document-verification",{state:{message:"Account created successfully! Please upload your documents for verification.",businessType:y.business_type,businessId:z.id,businessName:y.business_name}})}catch(U){c(U instanceof Error?U.message:"An error occurred during signup")}finally{a(!1)}},w=[{icon:Zt,title:"You Control Your Earnings",description:"Keep everything you charge (minus payout transaction fee only)"},{icon:Qe,title:"Flexible Schedule",description:"Control when and where you work"},{icon:Ds,title:"Quality Clients",description:"Connect with verified customers"},{icon:It,title:"Full Support",description:"Rescheduling and Cancellation 24/7 support"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home",e.jsx("br",{})]})}),e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})})]}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Provider Portal"})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["Welcome to the"," ",e.jsx("span",{className:"text-roam-blue",children:"Provider Portal"})]}),e.jsx("p",{className:"text-lg text-foreground/70 mb-8",children:"Join Florida's premier network of service professionals and start growing your business today."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:w.map((y,_)=>e.jsx(V,{className:"border-border/50",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-lg flex items-center justify-center mb-4",children:e.jsx(y.icon,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:y.title}),e.jsx("p",{className:"text-sm text-foreground/70",children:y.description})]})},_))}),e.jsxs(V,{className:"bg-gradient-to-r from-roam-light-blue/10 to-roam-blue/10 border-roam-light-blue/30",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2 text-roam-blue",children:[e.jsx(us,{className:"w-5 h-5"}),"Provider Success Stories"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/80 italic mb-2",children:`"ROAM has transformed my massage therapy business. I've tripled my income and love the flexibility!"`}),e.jsx("p",{className:"text-xs text-foreground/60",children:"- Sarah J., Licensed Massage Therapist"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/80 italic mb-2",children:'"The platform is easy to use and the customers are always respectful and verified."'}),e.jsx("p",{className:"text-xs text-foreground/60",children:"- Michael C., Personal Trainer"})]})]})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto lg:mx-0",children:[e.jsxs(V,{className:"border-border/50 shadow-lg",children:[e.jsxs(Se,{className:"text-center pb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ds,{className:"w-8 h-8 text-white"})}),e.jsx(Ce,{className:"text-2xl",children:"Provider Access"})]}),e.jsxs(K,{children:[e.jsxs(Pr,{value:n,onValueChange:i,className:"w-full",children:[e.jsxs(fr,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(hs,{value:"login",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Sign In"}),e.jsx(hs,{value:"signup",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Get Started"})]}),e.jsx(ds,{value:"login",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-4 h-4 text-red-600 mt-0.5",children:"⚠️"}),e.jsx("p",{className:"text-sm text-red-800",children:o})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"login-email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"login-email",type:"email",placeholder:"provider@example.com",className:"pl-10",value:x.email,onChange:y=>f({...x,email:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"login-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(qo,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(ae,{id:"login-password",type:s?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10",value:x.password,onChange:y=>f({...x,password:y.target.value}),required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0",onClick:()=>t(!s),children:s?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hr,{id:"remember"}),e.jsx(B,{htmlFor:"remember",className:"text-sm font-normal",children:"Remember me"})]}),e.jsx(P,{variant:"link",className:"p-0 h-auto text-roam-blue",children:"Forgot password?"})]}),e.jsx(P,{type:"submit",className:"w-full bg-roam-blue hover:bg-roam-blue/90",disabled:r,children:r?"Signing in...":"Sign In"})]})}),e.jsx(ds,{value:"signup",children:e.jsx(hF,{onSubmit:b,loading:r,error:o})})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-foreground/60",children:e.jsxs("p",{children:["Need help?"," ",e.jsx(P,{variant:"link",className:"p-0 h-auto text-roam-blue",children:"Contact Support"})]})})]})]}),e.jsx(V,{className:"mt-6 bg-green-50 border-green-200",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(It,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"Secure & Verified"}),e.jsx("p",{className:"text-sm text-green-800",children:"All provider applications undergo comprehensive background checks and identity verification for the safety of our customers and platform integrity."})]})]})})})]})]})})})]})}var xF="DismissableLayer",qh="dismissableLayer.update",pF="dismissableLayer.pointerDownOutside",gF="dismissableLayer.focusOutside",ey,Y_=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Z_=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(Y_),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=yF(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=jF(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ey=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),sy(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ey)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),sy())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener(qh,E),()=>document.removeEventListener(qh,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});Z_.displayName=xF;var vF="DismissableLayerBranch",bF=d.forwardRef((s,t)=>{const r=d.useContext(Y_),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});bF.displayName=vF;function yF(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){K_(pF,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function jF(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&K_(gF,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function sy(){const s=new CustomEvent(qh);document.dispatchEvent(s)}function K_(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var wF="Portal",Q_=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});Q_.displayName=wF;var zm=0;function NF(){d.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??ty()),document.body.insertAdjacentElement("beforeend",s[1]??ty()),zm++,()=>{zm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),zm--}},[])}function ty(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",s}var e1=yl(),qm=function(){},ru=d.forwardRef(function(s,t){var r=d.useRef(null),a=d.useState({onScrollCapture:qm,onWheelCapture:qm,onTouchMoveCapture:qm}),n=a[0],i=a[1],o=s.forwardProps,c=s.children,l=s.className,u=s.removeScrollBar,m=s.enabled,x=s.shards,f=s.sideCar,p=s.noIsolation,v=s.inert,g=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,y=s.gapMode,_=oo(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,C=bl([r,t]),R=_s(_s({},_),n);return d.createElement(d.Fragment,null,m&&d.createElement(N,{sideCar:e1,removeScrollBar:u,shards:x,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?d.cloneElement(d.Children.only(c),_s(_s({},R),{ref:C})):d.createElement(w,_s({},R,{className:l,ref:C}),c))});ru.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ru.classNames={fullWidth:Ya,zeroRight:Xa};var Vh=!1;if(typeof window<"u")try{var Jc=Object.defineProperty({},"passive",{get:function(){return Vh=!0,!0}});window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{Vh=!1}var vi=Vh?{passive:!1}:!1,_F=function(s){return s.tagName==="TEXTAREA"},s1=function(s,t){var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!_F(s)&&r[t]==="visible")},SF=function(s){return s1(s,"overflowY")},CF=function(s){return s1(s,"overflowX")},ry=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=t1(s,a);if(n){var i=r1(s,a),o=i[1],c=i[2];if(o>c)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},kF=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},EF=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},t1=function(s,t){return s==="v"?SF(t):CF(t)},r1=function(s,t){return s==="v"?kF(t):EF(t)},PF=function(s,t){return s==="h"&&t==="rtl"?-1:1},TF=function(s,t,r,a,n){var i=PF(s,window.getComputedStyle(t).direction),o=i*a,c=r.target,l=t.contains(c),u=!1,m=o>0,x=0,f=0;do{var p=r1(s,c),v=p[0],g=p[1],b=p[2],w=g-b-i*v;(v||w)&&t1(s,c)&&(x+=w,f+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(u=!0),u},Wc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},ay=function(s){return[s.deltaX,s.deltaY]},ny=function(s){return s&&"current"in s?s.current:s},IF=function(s,t){return s[0]===t[0]&&s[1]===t[1]},AF=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},MF=0,bi=[];function RF(s){var t=d.useRef([]),r=d.useRef([0,0]),a=d.useRef(),n=d.useState(MF++)[0],i=d.useState(lo)[0],o=d.useRef(s);d.useEffect(function(){o.current=s},[s]),d.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var g=vl([s.lockRef.current],(s.shards||[]).map(ny),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var c=d.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var w=Wc(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-w[0],N="deltaY"in g?g.deltaY:y[1]-w[1],C,R=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var I=ry(E,R);if(!I)return!0;if(I?C=E:(C=E==="v"?"h":"v",I=ry(E,R)),!I)return!1;if(!a.current&&"changedTouches"in g&&(_||N)&&(a.current=C),!C)return!0;var M=a.current||C;return TF(M,b,g,M==="h"?_:N)},[]),l=d.useCallback(function(g){var b=g;if(!(!bi.length||bi[bi.length-1]!==i)){var w="deltaY"in b?ay(b):Wc(b),y=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&IF(C.delta,w)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(ny).filter(Boolean).filter(function(C){return C.contains(b.target)}),N=_.length>0?c(b,_[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(g,b,w,y){var _={name:g,delta:b,target:w,should:y,shadowParent:OF(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=d.useCallback(function(g){r.current=Wc(g),a.current=void 0},[]),x=d.useCallback(function(g){u(g.type,ay(g),g.target,c(g,s.lockRef.current))},[]),f=d.useCallback(function(g){u(g.type,Wc(g),g.target,c(g,s.lockRef.current))},[]);d.useEffect(function(){return bi.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",l,vi),document.addEventListener("touchmove",l,vi),document.addEventListener("touchstart",m,vi),function(){bi=bi.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,vi),document.removeEventListener("touchmove",l,vi),document.removeEventListener("touchstart",m,vi)}},[]);var p=s.removeScrollBar,v=s.inert;return d.createElement(d.Fragment,null,v?d.createElement(i,{styles:AF(n)}):null,p?d.createElement(wl,{gapMode:s.gapMode}):null)}function OF(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const DF=jl(e1,RF);var a1=d.forwardRef(function(s,t){return d.createElement(ru,_s({},s,{ref:t,sideCar:DF}))});a1.classNames=ru.classNames;var rx="Dialog",[n1,i1]=ft(rx),[FF,Mr]=n1(rx),o1=s=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:n,onOpenChange:i,modal:o=!0}=s,c=d.useRef(null),l=d.useRef(null),[u=!1,m]=hr({prop:a,defaultProp:n,onChange:i});return e.jsx(FF,{scope:t,triggerRef:c,contentRef:l,contentId:Ut(),titleId:Ut(),descriptionId:Ut(),open:u,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(x=>!x),[m]),modal:o,children:r})};o1.displayName=rx;var l1="DialogTrigger",c1=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Mr(l1,r),i=qe(t,n.triggerRef);return e.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":ix(n.open),...a,ref:i,onClick:ye(s.onClick,n.onOpenToggle)})});c1.displayName=l1;var ax="DialogPortal",[LF,d1]=n1(ax,{forceMount:void 0}),u1=s=>{const{__scopeDialog:t,forceMount:r,children:a,container:n}=s,i=Mr(ax,t);return e.jsx(LF,{scope:t,forceMount:r,children:d.Children.map(a,o=>e.jsx(xt,{present:r||i.open,children:e.jsx(Q_,{asChild:!0,container:n,children:o})}))})};u1.displayName=ax;var wd="DialogOverlay",m1=d.forwardRef((s,t)=>{const r=d1(wd,s.__scopeDialog),{forceMount:a=r.forceMount,...n}=s,i=Mr(wd,s.__scopeDialog);return i.modal?e.jsx(xt,{present:a||i.open,children:e.jsx($F,{...n,ref:t})}):null});m1.displayName=wd;var $F=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Mr(wd,r);return e.jsx(a1,{as:Yr,allowPinchZoom:!0,shards:[n.contentRef],children:e.jsx(Ae.div,{"data-state":ix(n.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Rn="DialogContent",h1=d.forwardRef((s,t)=>{const r=d1(Rn,s.__scopeDialog),{forceMount:a=r.forceMount,...n}=s,i=Mr(Rn,s.__scopeDialog);return e.jsx(xt,{present:a||i.open,children:i.modal?e.jsx(BF,{...n,ref:t}):e.jsx(UF,{...n,ref:t})})});h1.displayName=Rn;var BF=d.forwardRef((s,t)=>{const r=Mr(Rn,s.__scopeDialog),a=d.useRef(null),n=qe(t,r.contentRef,a);return d.useEffect(()=>{const i=a.current;if(i)return gl(i)},[]),e.jsx(f1,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(s.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ye(s.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:ye(s.onFocusOutside,i=>i.preventDefault())})}),UF=d.forwardRef((s,t)=>{const r=Mr(Rn,s.__scopeDialog),a=d.useRef(!1),n=d.useRef(!1);return e.jsx(f1,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(a.current||(c=r.triggerRef.current)==null||c.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var l,u;(l=s.onInteractOutside)==null||l.call(s,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),f1=d.forwardRef((s,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,...o}=s,c=Mr(Rn,r),l=d.useRef(null),u=qe(t,l);return NF(),e.jsxs(e.Fragment,{children:[e.jsx(io,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(Z_,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":ix(c.open),...o,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(qF,{titleId:c.titleId}),e.jsx(JF,{contentRef:l,descriptionId:c.descriptionId})]})]})}),nx="DialogTitle",x1=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Mr(nx,r);return e.jsx(Ae.h2,{id:n.titleId,...a,ref:t})});x1.displayName=nx;var p1="DialogDescription",g1=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Mr(p1,r);return e.jsx(Ae.p,{id:n.descriptionId,...a,ref:t})});g1.displayName=p1;var v1="DialogClose",b1=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,n=Mr(v1,r);return e.jsx(Ae.button,{type:"button",...a,ref:t,onClick:ye(s.onClick,()=>n.onOpenChange(!1))})});b1.displayName=v1;function ix(s){return s?"open":"closed"}var y1="DialogTitleWarning",[zF,j1]=sk(y1,{contentName:Rn,titleName:nx,docsSlug:"dialog"}),qF=({titleId:s})=>{const t=j1(y1),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{s&&(document.getElementById(s)||console.error(r))},[r,s]),null},VF="DialogDescriptionWarning",JF=({contentRef:s,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${j1(VF).contentName}}.`;return d.useEffect(()=>{var i;const n=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(a))},[a,s,t]),null},WF=o1,HF=c1,GF=u1,XF=m1,YF=h1,ZF=x1,KF=g1,w1=b1,N1="AlertDialog",[QF,Y9]=ft(N1,[i1]),ja=i1(),_1=s=>{const{__scopeAlertDialog:t,...r}=s,a=ja(t);return e.jsx(WF,{...a,...r,modal:!0})};_1.displayName=N1;var eL="AlertDialogTrigger",S1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,n=ja(r);return e.jsx(HF,{...n,...a,ref:t})});S1.displayName=eL;var sL="AlertDialogPortal",C1=s=>{const{__scopeAlertDialog:t,...r}=s,a=ja(t);return e.jsx(GF,{...a,...r})};C1.displayName=sL;var tL="AlertDialogOverlay",k1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,n=ja(r);return e.jsx(XF,{...n,...a,ref:t})});k1.displayName=tL;var Ti="AlertDialogContent",[rL,aL]=QF(Ti),E1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:a,...n}=s,i=ja(r),o=d.useRef(null),c=qe(t,o),l=d.useRef(null);return e.jsx(zF,{contentName:Ti,titleName:P1,docsSlug:"alert-dialog",children:e.jsx(rL,{scope:r,cancelRef:l,children:e.jsxs(YF,{role:"alertdialog",...i,...n,ref:c,onOpenAutoFocus:ye(n.onOpenAutoFocus,u=>{var m;u.preventDefault(),(m=l.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(Kh,{children:a}),e.jsx(iL,{contentRef:o})]})})})});E1.displayName=Ti;var P1="AlertDialogTitle",T1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,n=ja(r);return e.jsx(ZF,{...n,...a,ref:t})});T1.displayName=P1;var I1="AlertDialogDescription",A1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,n=ja(r);return e.jsx(KF,{...n,...a,ref:t})});A1.displayName=I1;var nL="AlertDialogAction",M1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,n=ja(r);return e.jsx(w1,{...n,...a,ref:t})});M1.displayName=nL;var R1="AlertDialogCancel",O1=d.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,{cancelRef:n}=aL(R1,r),i=ja(r),o=qe(t,n);return e.jsx(w1,{...i,...a,ref:o})});O1.displayName=R1;var iL=({contentRef:s})=>{const t=`\`${Ti}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ti}\` by passing a \`${I1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ti}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var a;document.getElementById((a=s.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},oL=_1,lL=S1,cL=C1,D1=k1,F1=E1,L1=M1,$1=O1,B1=T1,U1=A1;const z1=oL,q1=lL,dL=cL,V1=d.forwardRef(({className:s,...t},r)=>e.jsx(D1,{className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));V1.displayName=D1.displayName;const ox=d.forwardRef(({className:s,...t},r)=>e.jsxs(dL,{children:[e.jsx(V1,{}),e.jsx(F1,{ref:r,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));ox.displayName=F1.displayName;const lx=({className:s,...t})=>e.jsx("div",{className:Oe("flex flex-col space-y-2 text-center sm:text-left",s),...t});lx.displayName="AlertDialogHeader";const cx=({className:s,...t})=>e.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});cx.displayName="AlertDialogFooter";const dx=d.forwardRef(({className:s,...t},r)=>e.jsx(B1,{ref:r,className:Oe("text-lg font-semibold",s),...t}));dx.displayName=B1.displayName;const ux=d.forwardRef(({className:s,...t},r)=>e.jsx(U1,{ref:r,className:Oe("text-sm text-muted-foreground",s),...t}));ux.displayName=U1.displayName;const mx=d.forwardRef(({className:s,...t},r)=>e.jsx(L1,{ref:r,className:Oe(nl(),s),...t}));mx.displayName=L1.displayName;const hx=d.forwardRef(({className:s,...t},r)=>e.jsx($1,{ref:r,className:Oe(nl({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));hx.displayName=$1.displayName;var uL="DismissableLayer",Jh="dismissableLayer.update",mL="dismissableLayer.pointerDownOutside",hL="dismissableLayer.focusOutside",iy,J1=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),W1=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,u=d.useContext(J1),[m,x]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),v=qe(t,E=>x(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),y=m?g.indexOf(m):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=pL(E=>{const I=E.target,M=[...u.branches].some(U=>U.contains(I));!N||M||(n==null||n(E),o==null||o(E),E.defaultPrevented||c==null||c())},f),R=gL(E=>{const I=E.target;[...u.branches].some(U=>U.contains(I))||(i==null||i(E),o==null||o(E),E.defaultPrevented||c==null||c())},f);return Xi(E=>{y===u.layers.size-1&&(a==null||a(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(iy=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),oy(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=iy)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),oy())},[m,u]),d.useEffect(()=>{const E=()=>p({});return document.addEventListener(Jh,E),()=>document.removeEventListener(Jh,E)},[]),e.jsx(Ae.div,{...l,ref:v,style:{pointerEvents:_?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,C.onPointerDownCapture)})});W1.displayName=uL;var fL="DismissableLayerBranch",xL=d.forwardRef((s,t)=>{const r=d.useContext(J1),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ae.div,{...s,ref:n})});xL.displayName=fL;function pL(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let l=function(){H1(mL,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function gL(s,t=globalThis==null?void 0:globalThis.document){const r=Ns(s),a=d.useRef(!1);return d.useEffect(()=>{const n=i=>{i.target&&!a.current&&H1(hL,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function oy(){const s=new CustomEvent(Jh);document.dispatchEvent(s)}function H1(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?sn(n,i):n.dispatchEvent(i)}var Vm=0;function vL(){d.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??ly()),document.body.insertAdjacentElement("beforeend",s[1]??ly()),Vm++,()=>{Vm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vm--}},[])}function ly(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",s}var bL="Portal",G1=d.forwardRef((s,t)=>{var c;const{container:r,...a}=s,[n,i]=d.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Dn.createPortal(e.jsx(Ae.div,{...a,ref:t}),o):null});G1.displayName=bL;var X1=yl(),Jm=function(){},au=d.forwardRef(function(s,t){var r=d.useRef(null),a=d.useState({onScrollCapture:Jm,onWheelCapture:Jm,onTouchMoveCapture:Jm}),n=a[0],i=a[1],o=s.forwardProps,c=s.children,l=s.className,u=s.removeScrollBar,m=s.enabled,x=s.shards,f=s.sideCar,p=s.noIsolation,v=s.inert,g=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,y=s.gapMode,_=oo(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,C=bl([r,t]),R=_s(_s({},_),n);return d.createElement(d.Fragment,null,m&&d.createElement(N,{sideCar:X1,removeScrollBar:u,shards:x,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?d.cloneElement(d.Children.only(c),_s(_s({},R),{ref:C})):d.createElement(w,_s({},R,{className:l,ref:C}),c))});au.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};au.classNames={fullWidth:Ya,zeroRight:Xa};var Wh=!1;if(typeof window<"u")try{var Hc=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{Wh=!1}var yi=Wh?{passive:!1}:!1,yL=function(s){return s.tagName==="TEXTAREA"},Y1=function(s,t){var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!yL(s)&&r[t]==="visible")},jL=function(s){return Y1(s,"overflowY")},wL=function(s){return Y1(s,"overflowX")},cy=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=Z1(s,a);if(n){var i=K1(s,a),o=i[1],c=i[2];if(o>c)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},NL=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},_L=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},Z1=function(s,t){return s==="v"?jL(t):wL(t)},K1=function(s,t){return s==="v"?NL(t):_L(t)},SL=function(s,t){return s==="h"&&t==="rtl"?-1:1},CL=function(s,t,r,a,n){var i=SL(s,window.getComputedStyle(t).direction),o=i*a,c=r.target,l=t.contains(c),u=!1,m=o>0,x=0,f=0;do{var p=K1(s,c),v=p[0],g=p[1],b=p[2],w=g-b-i*v;(v||w)&&Z1(s,c)&&(x+=w,f+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(u=!0),u},Gc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},dy=function(s){return[s.deltaX,s.deltaY]},uy=function(s){return s&&"current"in s?s.current:s},kL=function(s,t){return s[0]===t[0]&&s[1]===t[1]},EL=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},PL=0,ji=[];function TL(s){var t=d.useRef([]),r=d.useRef([0,0]),a=d.useRef(),n=d.useState(PL++)[0],i=d.useState(lo)[0],o=d.useRef(s);d.useEffect(function(){o.current=s},[s]),d.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var g=vl([s.lockRef.current],(s.shards||[]).map(uy),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var c=d.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var w=Gc(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-w[0],N="deltaY"in g?g.deltaY:y[1]-w[1],C,R=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var I=cy(E,R);if(!I)return!0;if(I?C=E:(C=E==="v"?"h":"v",I=cy(E,R)),!I)return!1;if(!a.current&&"changedTouches"in g&&(_||N)&&(a.current=C),!C)return!0;var M=a.current||C;return CL(M,b,g,M==="h"?_:N)},[]),l=d.useCallback(function(g){var b=g;if(!(!ji.length||ji[ji.length-1]!==i)){var w="deltaY"in b?dy(b):Gc(b),y=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&kL(C.delta,w)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(uy).filter(Boolean).filter(function(C){return C.contains(b.target)}),N=_.length>0?c(b,_[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(g,b,w,y){var _={name:g,delta:b,target:w,should:y,shadowParent:IL(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=d.useCallback(function(g){r.current=Gc(g),a.current=void 0},[]),x=d.useCallback(function(g){u(g.type,dy(g),g.target,c(g,s.lockRef.current))},[]),f=d.useCallback(function(g){u(g.type,Gc(g),g.target,c(g,s.lockRef.current))},[]);d.useEffect(function(){return ji.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",l,yi),document.addEventListener("touchmove",l,yi),document.addEventListener("touchstart",m,yi),function(){ji=ji.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,yi),document.removeEventListener("touchmove",l,yi),document.removeEventListener("touchstart",m,yi)}},[]);var p=s.removeScrollBar,v=s.inert;return d.createElement(d.Fragment,null,v?d.createElement(i,{styles:EL(n)}):null,p?d.createElement(wl,{gapMode:s.gapMode}):null)}function IL(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const AL=jl(X1,TL);var Q1=d.forwardRef(function(s,t){return d.createElement(au,_s({},s,{ref:t,sideCar:AL}))});Q1.classNames=au.classNames;var Hh=["Enter"," "],ML=["ArrowDown","PageUp","Home"],e2=["ArrowUp","PageDown","End"],RL=[...ML,...e2],OL={ltr:[...Hh,"ArrowRight"],rtl:[...Hh,"ArrowLeft"]},DL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sl="Menu",[il,FL,LL]=kd(Sl),[$n,s2]=ft(Sl,[LL,tn,no]),nu=tn(),t2=no(),[$L,Bn]=$n(Sl),[BL,Cl]=$n(Sl),r2=s=>{const{__scopeMenu:t,open:r=!1,children:a,dir:n,onOpenChange:i,modal:o=!0}=s,c=nu(t),[l,u]=d.useState(null),m=d.useRef(!1),x=Ns(i),f=ao(n);return d.useEffect(()=>{const p=()=>{m.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>m.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(gf,{...c,children:e.jsx($L,{scope:t,open:r,onOpenChange:x,content:l,onContentChange:u,children:e.jsx(BL,{scope:t,onClose:d.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:m,dir:f,modal:o,children:a})})})};r2.displayName=Sl;var UL="MenuAnchor",fx=d.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s,n=nu(r);return e.jsx(xl,{...n,...a,ref:t})});fx.displayName=UL;var xx="MenuPortal",[zL,a2]=$n(xx,{forceMount:void 0}),n2=s=>{const{__scopeMenu:t,forceMount:r,children:a,container:n}=s,i=Bn(xx,t);return e.jsx(zL,{scope:t,forceMount:r,children:e.jsx(xt,{present:r||i.open,children:e.jsx(G1,{asChild:!0,container:n,children:a})})})};n2.displayName=xx;var mr="MenuContent",[qL,px]=$n(mr),i2=d.forwardRef((s,t)=>{const r=a2(mr,s.__scopeMenu),{forceMount:a=r.forceMount,...n}=s,i=Bn(mr,s.__scopeMenu),o=Cl(mr,s.__scopeMenu);return e.jsx(il.Provider,{scope:s.__scopeMenu,children:e.jsx(xt,{present:a||i.open,children:e.jsx(il.Slot,{scope:s.__scopeMenu,children:o.modal?e.jsx(VL,{...n,ref:t}):e.jsx(JL,{...n,ref:t})})})})}),VL=d.forwardRef((s,t)=>{const r=Bn(mr,s.__scopeMenu),a=d.useRef(null),n=qe(t,a);return d.useEffect(()=>{const i=a.current;if(i)return gl(i)},[]),e.jsx(gx,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ye(s.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),JL=d.forwardRef((s,t)=>{const r=Bn(mr,s.__scopeMenu);return e.jsx(gx,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),gx=d.forwardRef((s,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:f,onDismiss:p,disableOutsideScroll:v,...g}=s,b=Bn(mr,r),w=Cl(mr,r),y=nu(r),_=t2(r),N=FL(r),[C,R]=d.useState(null),E=d.useRef(null),I=qe(t,E,b.onContentChange),M=d.useRef(0),U=d.useRef(""),D=d.useRef(0),z=d.useRef(null),X=d.useRef("right"),T=d.useRef(0),A=v?Q1:d.Fragment,O=v?{as:Yr,allowPinchZoom:!0}:void 0,$=q=>{var Q,pe;const te=U.current+q,re=N().filter(J=>!J.disabled),be=document.activeElement,Me=(Q=re.find(J=>J.ref.current===be))==null?void 0:Q.textValue,je=re.map(J=>J.textValue),Y=r$(je,te,Me),we=(pe=re.find(J=>J.textValue===Y))==null?void 0:pe.ref.current;(function J(H){U.current=H,window.clearTimeout(M.current),H!==""&&(M.current=window.setTimeout(()=>J(""),1e3))})(te),we&&setTimeout(()=>we.focus())};d.useEffect(()=>()=>window.clearTimeout(M.current),[]),vL();const F=d.useCallback(q=>{var re,be;return X.current===((re=z.current)==null?void 0:re.side)&&n$(q,(be=z.current)==null?void 0:be.area)},[]);return e.jsx(qL,{scope:r,searchRef:U,onItemEnter:d.useCallback(q=>{F(q)&&q.preventDefault()},[F]),onItemLeave:d.useCallback(q=>{var te;F(q)||((te=E.current)==null||te.focus(),R(null))},[F]),onTriggerLeave:d.useCallback(q=>{F(q)&&q.preventDefault()},[F]),pointerGraceTimerRef:D,onPointerGraceIntentChange:d.useCallback(q=>{z.current=q},[]),children:e.jsx(A,{...O,children:e.jsx(io,{asChild:!0,trapped:n,onMountAutoFocus:ye(i,q=>{var te;q.preventDefault(),(te=E.current)==null||te.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:e.jsx(W1,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:f,onDismiss:p,children:e.jsx(Pf,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:a,currentTabStopId:C,onCurrentTabStopIdChange:R,onEntryFocus:ye(l,q=>{w.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Od,{role:"menu","aria-orientation":"vertical","data-state":w2(b.open),"data-radix-menu-content":"",dir:w.dir,...y,...g,ref:I,style:{outline:"none",...g.style},onKeyDown:ye(g.onKeyDown,q=>{const re=q.target.closest("[data-radix-menu-content]")===q.currentTarget,be=q.ctrlKey||q.altKey||q.metaKey,Me=q.key.length===1;re&&(q.key==="Tab"&&q.preventDefault(),!be&&Me&&$(q.key));const je=E.current;if(q.target!==je||!RL.includes(q.key))return;q.preventDefault();const we=N().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);e2.includes(q.key)&&we.reverse(),s$(we)}),onBlur:ye(s.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(M.current),U.current="")}),onPointerMove:ye(s.onPointerMove,ol(q=>{const te=q.target,re=T.current!==q.clientX;if(q.currentTarget.contains(te)&&re){const be=q.clientX>T.current?"right":"left";X.current=be,T.current=q.clientX}}))})})})})})})});i2.displayName=mr;var WL="MenuGroup",vx=d.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Ae.div,{role:"group",...a,ref:t})});vx.displayName=WL;var HL="MenuLabel",o2=d.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Ae.div,{...a,ref:t})});o2.displayName=HL;var Nd="MenuItem",my="menu.itemSelect",iu=d.forwardRef((s,t)=>{const{disabled:r=!1,onSelect:a,...n}=s,i=d.useRef(null),o=Cl(Nd,s.__scopeMenu),c=px(Nd,s.__scopeMenu),l=qe(t,i),u=d.useRef(!1),m=()=>{const x=i.current;if(!r&&x){const f=new CustomEvent(my,{bubbles:!0,cancelable:!0});x.addEventListener(my,p=>a==null?void 0:a(p),{once:!0}),sn(x,f),f.defaultPrevented?u.current=!1:o.onClose()}};return e.jsx(l2,{...n,ref:l,disabled:r,onClick:ye(s.onClick,m),onPointerDown:x=>{var f;(f=s.onPointerDown)==null||f.call(s,x),u.current=!0},onPointerUp:ye(s.onPointerUp,x=>{var f;u.current||(f=x.currentTarget)==null||f.click()}),onKeyDown:ye(s.onKeyDown,x=>{const f=c.searchRef.current!=="";r||f&&x.key===" "||Hh.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});iu.displayName=Nd;var l2=d.forwardRef((s,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:n,...i}=s,o=px(Nd,r),c=t2(r),l=d.useRef(null),u=qe(t,l),[m,x]=d.useState(!1),[f,p]=d.useState("");return d.useEffect(()=>{const v=l.current;v&&p((v.textContent??"").trim())},[i.children]),e.jsx(il.ItemSlot,{scope:r,disabled:a,textValue:n??f,children:e.jsx(Tf,{asChild:!0,...c,focusable:!a,children:e.jsx(Ae.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:u,onPointerMove:ye(s.onPointerMove,ol(v=>{a?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(s.onPointerLeave,ol(v=>o.onItemLeave(v))),onFocus:ye(s.onFocus,()=>x(!0)),onBlur:ye(s.onBlur,()=>x(!1))})})})}),GL="MenuCheckboxItem",c2=d.forwardRef((s,t)=>{const{checked:r=!1,onCheckedChange:a,...n}=s;return e.jsx(f2,{scope:s.__scopeMenu,checked:r,children:e.jsx(iu,{role:"menuitemcheckbox","aria-checked":_d(r)?"mixed":r,...n,ref:t,"data-state":yx(r),onSelect:ye(n.onSelect,()=>a==null?void 0:a(_d(r)?!0:!r),{checkForDefaultPrevented:!1})})})});c2.displayName=GL;var d2="MenuRadioGroup",[XL,YL]=$n(d2,{value:void 0,onValueChange:()=>{}}),u2=d.forwardRef((s,t)=>{const{value:r,onValueChange:a,...n}=s,i=Ns(a);return e.jsx(XL,{scope:s.__scopeMenu,value:r,onValueChange:i,children:e.jsx(vx,{...n,ref:t})})});u2.displayName=d2;var m2="MenuRadioItem",h2=d.forwardRef((s,t)=>{const{value:r,...a}=s,n=YL(m2,s.__scopeMenu),i=r===n.value;return e.jsx(f2,{scope:s.__scopeMenu,checked:i,children:e.jsx(iu,{role:"menuitemradio","aria-checked":i,...a,ref:t,"data-state":yx(i),onSelect:ye(a.onSelect,()=>{var o;return(o=n.onValueChange)==null?void 0:o.call(n,r)},{checkForDefaultPrevented:!1})})})});h2.displayName=m2;var bx="MenuItemIndicator",[f2,ZL]=$n(bx,{checked:!1}),x2=d.forwardRef((s,t)=>{const{__scopeMenu:r,forceMount:a,...n}=s,i=ZL(bx,r);return e.jsx(xt,{present:a||_d(i.checked)||i.checked===!0,children:e.jsx(Ae.span,{...n,ref:t,"data-state":yx(i.checked)})})});x2.displayName=bx;var KL="MenuSeparator",p2=d.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});p2.displayName=KL;var QL="MenuArrow",g2=d.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s,n=nu(r);return e.jsx(Dd,{...n,...a,ref:t})});g2.displayName=QL;var e$="MenuSub",[Z9,v2]=$n(e$),$o="MenuSubTrigger",b2=d.forwardRef((s,t)=>{const r=Bn($o,s.__scopeMenu),a=Cl($o,s.__scopeMenu),n=v2($o,s.__scopeMenu),i=px($o,s.__scopeMenu),o=d.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=i,u={__scopeMenu:s.__scopeMenu},m=d.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return d.useEffect(()=>m,[m]),d.useEffect(()=>{const x=c.current;return()=>{window.clearTimeout(x),l(null)}},[c,l]),e.jsx(fx,{asChild:!0,...u,children:e.jsx(l2,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":n.contentId,"data-state":w2(r.open),...s,ref:Cd(t,n.onTriggerChange),onClick:x=>{var f;(f=s.onClick)==null||f.call(s,x),!(s.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ye(s.onPointerMove,ol(x=>{i.onItemEnter(x),!x.defaultPrevented&&!s.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:ye(s.onPointerLeave,ol(x=>{var p,v;m();const f=(p=r.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(v=r.content)==null?void 0:v.dataset.side,b=g==="right",w=b?-5:5,y=f[b?"left":"right"],_=f[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:x.clientX+w,y:x.clientY},{x:y,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(x),x.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ye(s.onKeyDown,x=>{var p;const f=i.searchRef.current!=="";s.disabled||f&&x.key===" "||OL[a.dir].includes(x.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),x.preventDefault())})})})});b2.displayName=$o;var y2="MenuSubContent",j2=d.forwardRef((s,t)=>{const r=a2(mr,s.__scopeMenu),{forceMount:a=r.forceMount,...n}=s,i=Bn(mr,s.__scopeMenu),o=Cl(mr,s.__scopeMenu),c=v2(y2,s.__scopeMenu),l=d.useRef(null),u=qe(t,l);return e.jsx(il.Provider,{scope:s.__scopeMenu,children:e.jsx(xt,{present:a||i.open,children:e.jsx(il.Slot,{scope:s.__scopeMenu,children:e.jsx(gx,{id:c.contentId,"aria-labelledby":c.triggerId,...n,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var x;o.isUsingKeyboardRef.current&&((x=l.current)==null||x.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:ye(s.onFocusOutside,m=>{m.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ye(s.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:ye(s.onKeyDown,m=>{var p;const x=m.currentTarget.contains(m.target),f=DL[o.dir].includes(m.key);x&&f&&(i.onOpenChange(!1),(p=c.trigger)==null||p.focus(),m.preventDefault())})})})})})});j2.displayName=y2;function w2(s){return s?"open":"closed"}function _d(s){return s==="indeterminate"}function yx(s){return _d(s)?"indeterminate":s?"checked":"unchecked"}function s$(s){const t=document.activeElement;for(const r of s)if(r===t||(r.focus(),document.activeElement!==t))return}function t$(s,t){return s.map((r,a)=>s[(t+a)%s.length])}function r$(s,t,r){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let o=t$(s,Math.max(i,0));n.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}function a$(s,t){const{x:r,y:a}=s;let n=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i].x,l=t[i].y,u=t[o].x,m=t[o].y;l>a!=m>a&&r<(u-c)*(a-l)/(m-l)+c&&(n=!n)}return n}function n$(s,t){if(!t)return!1;const r={x:s.clientX,y:s.clientY};return a$(r,t)}function ol(s){return t=>t.pointerType==="mouse"?s(t):void 0}var i$=r2,o$=fx,l$=n2,c$=i2,d$=vx,u$=o2,m$=iu,h$=c2,f$=u2,x$=h2,p$=x2,g$=p2,v$=g2,b$=b2,y$=j2,jx="DropdownMenu",[j$,K9]=ft(jx,[s2]),Mt=s2(),[w$,N2]=j$(jx),_2=s=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:n,defaultOpen:i,onOpenChange:o,modal:c=!0}=s,l=Mt(t),u=d.useRef(null),[m=!1,x]=hr({prop:n,defaultProp:i,onChange:o});return e.jsx(w$,{scope:t,triggerId:Ut(),triggerRef:u,contentId:Ut(),open:m,onOpenChange:x,onOpenToggle:d.useCallback(()=>x(f=>!f),[x]),modal:c,children:e.jsx(i$,{...l,open:m,onOpenChange:x,dir:a,modal:c,children:r})})};_2.displayName=jx;var S2="DropdownMenuTrigger",C2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...n}=s,i=N2(S2,r),o=Mt(r);return e.jsx(o$,{asChild:!0,...o,children:e.jsx(Ae.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...n,ref:Cd(t,i.triggerRef),onPointerDown:ye(s.onPointerDown,c=>{!a&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:ye(s.onKeyDown,c=>{a||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});C2.displayName=S2;var N$="DropdownMenuPortal",k2=s=>{const{__scopeDropdownMenu:t,...r}=s,a=Mt(t);return e.jsx(l$,{...a,...r})};k2.displayName=N$;var E2="DropdownMenuContent",P2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=N2(E2,r),i=Mt(r),o=d.useRef(!1);return e.jsx(c$,{id:n.contentId,"aria-labelledby":n.triggerId,...i,...a,ref:t,onCloseAutoFocus:ye(s.onCloseAutoFocus,c=>{var l;o.current||(l=n.triggerRef.current)==null||l.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:ye(s.onInteractOutside,c=>{const l=c.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,m=l.button===2||u;(!n.modal||m)&&(o.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});P2.displayName=E2;var _$="DropdownMenuGroup",S$=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(d$,{...n,...a,ref:t})});S$.displayName=_$;var C$="DropdownMenuLabel",T2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(u$,{...n,...a,ref:t})});T2.displayName=C$;var k$="DropdownMenuItem",I2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(m$,{...n,...a,ref:t})});I2.displayName=k$;var E$="DropdownMenuCheckboxItem",A2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(h$,{...n,...a,ref:t})});A2.displayName=E$;var P$="DropdownMenuRadioGroup",T$=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(f$,{...n,...a,ref:t})});T$.displayName=P$;var I$="DropdownMenuRadioItem",M2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(x$,{...n,...a,ref:t})});M2.displayName=I$;var A$="DropdownMenuItemIndicator",R2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(p$,{...n,...a,ref:t})});R2.displayName=A$;var M$="DropdownMenuSeparator",O2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(g$,{...n,...a,ref:t})});O2.displayName=M$;var R$="DropdownMenuArrow",O$=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(v$,{...n,...a,ref:t})});O$.displayName=R$;var D$="DropdownMenuSubTrigger",D2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(b$,{...n,...a,ref:t})});D2.displayName=D$;var F$="DropdownMenuSubContent",F2=d.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Mt(r);return e.jsx(y$,{...n,...a,ref:t,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F2.displayName=F$;var L$=_2,$$=C2,B$=k2,L2=P2,$2=T2,B2=I2,U2=A2,z2=M2,q2=R2,V2=O2,J2=D2,W2=F2;const hy=L$,fy=$$,U$=d.forwardRef(({className:s,inset:t,children:r,...a},n)=>e.jsxs(J2,{ref:n,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...a,children:[r,e.jsx(pt,{className:"ml-auto h-4 w-4"})]}));U$.displayName=J2.displayName;const z$=d.forwardRef(({className:s,...t},r)=>e.jsx(W2,{ref:r,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));z$.displayName=W2.displayName;const Gh=d.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(B$,{children:e.jsx(L2,{ref:a,sideOffset:t,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));Gh.displayName=L2.displayName;const kt=d.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(B2,{ref:a,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...r}));kt.displayName=B2.displayName;const q$=d.forwardRef(({className:s,children:t,checked:r,...a},n)=>e.jsxs(U2,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(q2,{children:e.jsx(hl,{className:"h-4 w-4"})})}),t]}));q$.displayName=U2.displayName;const V$=d.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(z2,{ref:a,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(q2,{children:e.jsx(o0,{className:"h-2 w-2 fill-current"})})}),t]}));V$.displayName=z2.displayName;const J$=d.forwardRef(({className:s,inset:t,...r},a)=>e.jsx($2,{ref:a,className:Oe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));J$.displayName=$2.displayName;const Xh=d.forwardRef(({className:s,...t},r)=>e.jsx(V2,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",s),...t}));Xh.displayName=V2.displayName;const W$=({isOpen:s,onClose:t})=>{const{conversations:r,loading:a,loadConversations:n}=q_(),[i,o]=d.useState(""),c=r.filter(p=>{var g,b;const v=i.toLowerCase();return p.friendlyName.toLowerCase().includes(v)||((g=p.lastMessage)==null?void 0:g.body.toLowerCase().includes(v))||((b=p.attributes.bookingId)==null?void 0:b.toLowerCase().includes(v))}),l=p=>{console.log("Conversation clicked:",p)},u=()=>{n()},m=p=>{try{return Yf(new Date(p),{addSuffix:!0})}catch{return""}},x=p=>{const v=p.attributes||{};return v.bookingId?`Booking ${v.bookingId}`:p.friendlyName||"Conversation"},f=p=>(p.attributes||{}).type||"chat";return s?e.jsx(e.Fragment,{children:e.jsx(Xs,{open:s,onOpenChange:t,children:e.jsxs(Vs,{className:"max-w-2xl h-[80vh] flex flex-col p-0",children:[e.jsx(Js,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5 text-blue-600"}),"Conversations"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:u,disabled:a,children:e.jsx(ur,{className:`w-4 h-4 ${a?"animate-spin":""}`})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(wt,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ae,{value:i,onChange:p=>o(p.target.value),placeholder:"Search conversations...",className:"pl-10"})]})}),e.jsx(uo,{className:"flex-1",children:a&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-2"}),"Loading conversations..."]})}):c.length===0?e.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(mt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:i?"No conversations found":"No conversations yet"}),e.jsx("p",{className:"text-xs",children:i?"Try a different search term":"Conversations will appear here when you start chatting"})]})}):e.jsx("div",{className:"p-4 space-y-2",children:c.map(p=>e.jsx(V,{className:"cursor-pointer hover:shadow-md transition-shadow border",onClick:()=>l(p.sid),children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"w-10 h-10 mt-1",children:e.jsx(tt,{children:f(p)==="booking-chat"?e.jsx(mt,{className:"w-5 h-5"}):e.jsx(At,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:x(p)}),e.jsxs("div",{className:"flex items-center gap-2",children:[p.unreadMessagesCount>0&&e.jsx(ge,{variant:"destructive",className:"text-xs px-2",children:p.unreadMessagesCount}),p.lastMessage&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"}),m(p.lastMessage.dateCreated)]})]})]}),p.lastMessage?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium text-xs text-gray-500",children:[p.lastMessage.author,":"]}),e.jsx("span",{className:"ml-1 truncate block",children:p.lastMessage.body.length>60?`${p.lastMessage.body.substring(0,60)}...`:p.lastMessage.body})]}):e.jsx("div",{className:"text-sm text-gray-400 italic",children:"No messages yet"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(ge,{variant:"outline",className:"text-xs",children:f(p).replace("-"," ")}),p.attributes.bookingId&&e.jsxs(ge,{variant:"secondary",className:"text-xs",children:["ID: ",p.attributes.bookingId]})]})]})]})})},p.sid))})})]})]})})}):null};function H$({userType:s,className:t,showConnectionStatus:r=!0,maxNotifications:a=10,autoHide:n=!1,autoHideDelay:i=5e3}){const{user:o}=Ss(),[c,l]=d.useState(!1),[u,m]=d.useState([]),[x,f]=d.useState(new Set),{isConnected:p,lastUpdate:v,refreshBookings:g}=tu({userId:o==null?void 0:o.id,userType:s,enableNotifications:!1,onStatusChange:R=>{x.has(R.id)||(m(E=>[R,...E.slice(0,a-1)]),n&&setTimeout(()=>{b(R.id)},i))}}),b=R=>{f(E=>new Set([...E,R])),m(E=>E.filter(I=>I.id!==R))},w=()=>{m([]),f(new Set)},y=R=>{switch(R){case"confirmed":return e.jsx(Xe,{className:"w-4 h-4 text-green-500"});case"completed":return e.jsx(Xe,{className:"w-4 h-4 text-blue-500"});case"cancelled":return e.jsx(Sr,{className:"w-4 h-4 text-red-500"});case"in_progress":return e.jsx(rt,{className:"w-4 h-4 text-orange-500 animate-spin"});case"rescheduled":return e.jsx(bs,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(ht,{className:"w-4 h-4 text-gray-500"})}},_=R=>{switch(R){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"completed":return"bg-blue-100 text-blue-700 border-blue-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";case"in_progress":return"bg-orange-100 text-orange-700 border-orange-200";case"rescheduled":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"pending":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},N=R=>{const E=new Date,I=new Date(R),M=Math.floor((E.getTime()-I.getTime())/(1e3*60));return M<1?"Just now":M<60?`${M}m ago`:M<1440?`${Math.floor(M/60)}h ago`:`${Math.floor(M/1440)}d ago`},C=u.length;return o?e.jsxs("div",{className:Oe("relative",t),children:[e.jsxs("div",{className:"relative",children:[e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>l(!c),className:"relative",children:[e.jsx(Nn,{className:"w-4 h-4"}),C>0&&e.jsx(ge,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:C>99?"99+":C})]}),r&&e.jsx("div",{className:"absolute -bottom-1 -right-1",children:p?e.jsx(iE,{className:"w-3 h-3 text-green-500",title:"Connected to real-time updates"}):e.jsx(nE,{className:"w-3 h-3 text-red-500",title:"Disconnected from real-time updates"})})]}),c&&e.jsxs(V,{className:"absolute top-12 right-0 w-96 max-h-96 shadow-lg border z-50",children:[e.jsxs(Se,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ce,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Nn,{className:"w-4 h-4"}),"Booking Updates",C>0&&e.jsx(ge,{variant:"secondary",className:"text-xs",children:C})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r&&e.jsx("div",{className:"flex items-center gap-1 mr-2",children:p?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]}):e.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Offline"]})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:g,className:"h-6 w-6 p-0",children:e.jsx(rt,{className:"w-3 h-3"})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-6 w-6 p-0",children:e.jsx(wt,{className:"w-3 h-3"})})]})]}),v&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",N(v.toISOString())]})]}),e.jsxs(K,{className:"p-0",children:[u.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(Nn,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No recent notifications"}),e.jsx("p",{className:"text-xs",children:"You'll see booking updates here in real-time"})]}):e.jsx(uo,{className:"h-64",children:e.jsx("div",{className:"p-2 space-y-2",children:u.map((R,E)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:y(R.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ge,{variant:"outline",className:Oe("text-xs capitalize",_(R.status)),children:R.status.replace("_"," ")}),e.jsx("span",{className:"text-xs text-gray-500",children:N(R.updated_at)})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.service_name||"Service"}),R.business_name&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(fs,{className:"w-3 h-3"}),R.business_name]}),R.scheduled_date&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),new Date(R.scheduled_date).toLocaleDateString(),R.scheduled_time&&` at ${R.scheduled_time}`]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>b(R.id),className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",children:e.jsx(wt,{className:"w-3 h-3"})})]}),E<u.length-1&&e.jsx(er,{className:"my-1"})]},`${R.id}-${R.updated_at}`))})}),u.length>0&&e.jsx("div",{className:"p-2 border-t",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:w,className:"w-full text-xs",children:"Clear All"})})]})]})]}):null}const G$="670d967ef5ca2b001925eee0",X$=(s,t)=>{const r=s.toLowerCase(),a=(t==null?void 0:t.toLowerCase())||"";return a.includes("healthcare")||r.includes("medical")||r.includes("health")?r.includes("consultation")||r.includes("visit")?Zo:r.includes("therapy")||r.includes("rehabilitation")?qk:r.includes("mental")||r.includes("counseling")?Vk:r.includes("cardiac")||r.includes("heart")?Cr:r.includes("eye")||r.includes("vision")?Ha:Zo:a.includes("beauty")||a.includes("wellness")?r.includes("haircut")||r.includes("hair")||r.includes("barber")?Bi:r.includes("massage")||r.includes("spa")?Cr:r.includes("makeup")||r.includes("beauty")?Qk:Bi:a.includes("fitness")||r.includes("workout")||r.includes("training")?Yo:a.includes("home")||r.includes("cleaning")||r.includes("repair")?r.includes("repair")||r.includes("maintenance")?rh:Zr:a.includes("business")||a.includes("professional")?id:a.includes("technology")||r.includes("tech")||r.includes("digital")?Kt:r.includes("virtual")||r.includes("online")?pa:us},Y$=({bookings:s,viewType:t,currentDate:r,onDateChange:a,selectedDate:n,onDateSelect:i})=>{const o=new Date,l=(()=>{if(t==="week"){const y=new Date(r);return y.setDate(r.getDate()-r.getDay()),Array.from({length:7},(_,N)=>{const C=new Date(y);return C.setDate(y.getDate()+N),C})}else{const y=new Date(r.getFullYear(),r.getMonth(),1),_=new Date(r.getFullYear(),r.getMonth()+1,0),N=new Date(y);N.setDate(y.getDate()-y.getDay());const C=[],R=new Date(N);for(let E=0;E<42&&(C.push(new Date(R)),R.setDate(R.getDate()+1),!(R>_&&R.getDay()===0));E++);return C}})(),u=y=>{const _=y.toISOString().split("T")[0];return s.filter(N=>new Date(N.booking_date).toISOString().split("T")[0]===_)},m=y=>y.toDateString()===o.toDateString(),x=y=>y.getMonth()===r.getMonth(),f=y=>n&&y.toDateString()===n.toDateString(),p=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"confirmed":return"bg-green-100 text-green-800 border-green-300";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-300";case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-300";case"cancelled":return"bg-red-100 text-red-800 border-red-300";case"declined":return"bg-orange-100 text-orange-800 border-orange-300";case"no_show":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-slate-100 text-slate-800 border-slate-300"}},v=y=>{if(y.length===0)return"";const _=["pending","in_progress","confirmed","declined","cancelled","completed","no_show"];for(const N of _)if(y.some(C=>C.booking_status===N))switch(N){case"pending":return"bg-yellow-50 border-yellow-200";case"in_progress":return"bg-blue-50 border-blue-200";case"confirmed":return"bg-green-50 border-green-200";case"declined":return"bg-orange-50 border-orange-200";case"cancelled":return"bg-red-50 border-red-200";case"completed":return"bg-emerald-50 border-emerald-200";default:return"bg-gray-50 border-gray-200"}return"bg-slate-50 border-slate-200"},g=()=>{const y=new Date(r);t==="week"?y.setDate(r.getDate()-7):y.setMonth(r.getMonth()-1),a(y)},b=()=>{const y=new Date(r);t==="week"?y.setDate(r.getDate()+7):y.setMonth(r.getMonth()+1),a(y)},w=()=>{a(new Date)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:g,className:"px-4 py-2 min-w-[100px]",children:"← Previous"}),e.jsxs("div",{className:"text-center flex-1 mx-6",children:[e.jsx("h4",{className:"text-xl font-semibold mb-2",children:t==="week"?`Week of ${l[0].toLocaleDateString()} - ${l[6].toLocaleDateString()}`:`${r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}`}),e.jsx(P,{variant:"ghost",size:"sm",onClick:w,className:"px-4 py-1 text-roam-blue hover:bg-roam-blue/10",children:"Today"})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:b,className:"px-4 py-2 min-w-[100px]",children:"Next →"})]}),e.jsxs("div",{className:"grid gap-2 grid-cols-7",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(y=>e.jsx("div",{className:"text-center font-semibold p-2 bg-muted rounded text-sm",children:y},y)),l.map((y,_)=>{const N=u(y),C=m(y),R=x(y),E=f(y),I=v(N);return e.jsxs("div",{onClick:()=>i(y),className:`
                min-h-24 p-2 border rounded-lg relative cursor-pointer transition-all hover:shadow-md
                ${C?"ring-2 ring-roam-blue ring-offset-1":""}
                ${E?"bg-roam-blue/20 border-roam-blue shadow-md":"bg-background"}
                ${!R&&t==="month"?"opacity-30":""}
                ${N.length>0&&!E?I:""}
              `,children:[e.jsxs("div",{className:"font-medium text-sm mb-1 flex items-center justify-between",children:[e.jsx("span",{children:y.getDate()}),N.length>0&&e.jsx("span",{className:"text-xs bg-roam-blue text-white rounded-full w-5 h-5 flex items-center justify-center",children:N.length})]}),e.jsxs("div",{className:"space-y-1",children:[N.slice(0,2).map((M,U)=>{var D;return e.jsx("div",{className:`text-xs p-1 rounded truncate ${p(M.booking_status)}`,title:`${((D=M.services)==null?void 0:D.name)||"Service"} - ${M.start_time} (${M.booking_status})`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-current opacity-60"}),e.jsx("span",{children:M.start_time})]})},U)}),N.length>2&&e.jsxs("div",{className:"text-xs text-foreground/60 font-medium",children:["+",N.length-2," more"]})]})]},_)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-300 rounded"}),e.jsx("span",{children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-100 border border-emerald-300 rounded"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-100 border border-orange-300 rounded"}),e.jsx("span",{children:"Declined"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-100 border border-red-300 rounded"}),e.jsx("span",{children:"Cancelled"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-100 border border-gray-300 rounded"}),e.jsx("span",{children:"No Show"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 ring-2 ring-roam-blue ring-offset-1 bg-white rounded"}),e.jsx("span",{children:"Today"})]})]})]})};function Wm(){var ig,og,lg,cg,dg,ug,mg,hg,fg,xg,pg,gg,vg,bg,yg,jg,wg,Ng,_g,Sg,Cg,kg,Eg,Pg,Tg,Ig,Ag,Mg,Rg,Og,Dg,Fg,Lg,$g,Bg,Ug;const{user:s,signOut:t,isOwner:r,isDispatcher:a,isProvider:n}=Ss(),{toast:i}=et(),[o,c]=d.useState(!0),[l,u]=d.useState(null),[m,x]=d.useState(null),[f,p]=d.useState([]),[v,g]=d.useState({activeLocations:0,teamMembers:0,servicesOffered:0}),{isConnected:b}=tu({userId:s==null?void 0:s.id,userType:"provider",onStatusChange:h=>{p(j=>j.map(S=>S.id===h.id?{...S,status:h.status,updated_at:h.updated_at}:S))}}),[w,y]=d.useState(null),[_,N]=d.useState([]),[C,R]=d.useState(!0),[E,I]=d.useState(""),[M,U]=d.useState(!1),[D,z]=d.useState(""),[X,T]=d.useState(!1),[A,O]=d.useState(""),[$,F]=d.useState(!1),[q,te]=d.useState(""),[re,be]=d.useState("50% 50%"),[Me,je]=d.useState(!1),[Y,we]=d.useState("50% 50%"),[Q,pe]=d.useState(!1),[J,H]=d.useState(!1),[oe,de]=d.useState(""),[Te,De]=d.useState(""),[Le,$e]=d.useState(!1),[Be,es]=d.useState(""),[ee,Fe]=d.useState(""),[Ke,Ue]=d.useState(!1),[ze,G]=d.useState(!1),[ue,xe]=d.useState([]),[Ie,Ye]=d.useState(!1),[We,Ls]=d.useState(!1),[ys,Hs]=d.useState(""),[Gs,ne]=d.useState(""),[le,fe]=d.useState(null),[Cs,ke]=d.useState(!1),[Je,He]=d.useState(!1),[rs,Is]=d.useState(!1),[gt,Rt]=d.useState(""),[pr,Rr]=d.useState(""),[Or,gr]=d.useState([]),[Un,wa]=d.useState([]),[at,ls]=d.useState(!1),[gs,vt]=d.useState(""),[Ax,vS]=d.useState([]),[bS,yS]=d.useState([]),[g9,Mx]=d.useState(!1),[ot,tr]=d.useState("bookings"),[Rx,jS]=d.useState("all"),[lu,wS]=d.useState("month"),[NS,_S]=d.useState(new Date),[cn,Ox]=d.useState(null),[Tl,SS]=d.useState("all"),[ho,Dx]=d.useState("all"),[cu,CS]=d.useState("all"),[zn,Fx]=d.useState(""),[kS,du]=d.useState(!1),[ES,uu]=d.useState(!1),[v9,b9]=d.useState(!1),PS=()=>{switch(ot){case"bookings":return"Bookings";case"conversations":return"Messages";case"services-addons":return"Services";case"business":return"Business";case"providers":return"Staff";case"locations":return"Locations";case"provider-services":return"Services";case"profile":return"Profile";case"analytics":return"Analytics";case"financial":return"Financial";case"subscription":return"Subscription";default:return"Menu"}},[qn,TS]=d.useState("all"),[Vn,IS]=d.useState("all"),[Jn,AS]=d.useState("all"),[MS,mu]=d.useState(!1),[ta,hu]=d.useState(null),[RS,Il]=d.useState(!1),[Ot,Lx]=d.useState(null),[fo,Al]=d.useState(!1),[Os,rr]=d.useState({first_name:"",last_name:"",email:"",phone:"",provider_role:"",business_managed:!1,is_active:!0,verification_status:"",background_check_status:"",location_id:"",experience_years:""}),[dn,OS]=d.useState([]),[DS,FS]=d.useState([]),[fu,LS]=d.useState([]),[xu,$S]=d.useState([]),[$x,Bx]=d.useState(!1),[BS,Ux]=d.useState(!1),[US,zx]=d.useState(!1),[ar,qx]=d.useState(null),[zS,Ml]=d.useState(!1),[Dr,pu]=d.useState(null),[xo,Rl]=d.useState(""),[po,gu]=d.useState(null),[Vx,Jx]=d.useState(!1),[Wx,Hx]=d.useState(null),[Ks,vu]=d.useState(null),[Vt,Gx]=d.useState({delivery_type:"business_location",custom_price:"",is_active:!0}),[Jt,go]=d.useState(!1),[un,Na]=d.useState(""),[mn,_a]=d.useState(""),[qS,Xx]=d.useState(!1),[vo,y9]=d.useState([]),[VS,j9]=d.useState(!1),[Sa,Yx]=d.useState(""),[Fr,Zx]=d.useState({delivery_type:"business_location",custom_price:"",is_active:!0}),[Kx,bu]=d.useState([]),[Ol,JS]=d.useState([]),[Dl,Qx]=d.useState(!1),[yu,bo]=d.useState(""),[ep,sp]=d.useState(""),[WS,tp]=d.useState(!1),[yo,HS]=d.useState([]),[ju,GS]=d.useState([]),[Fl,Ll]=d.useState([]),[$l,Bl]=d.useState([]),[rp,XS]=d.useState([]),[wu,ap]=d.useState(!1),[jo,nr]=d.useState(""),[np,ra]=d.useState(""),[Wn,Ca]=d.useState(!1),[YS,Ul]=d.useState(!1),[ZS,zl]=d.useState(!1),[lt,KS]=d.useState(null),[ir,QS]=d.useState(null),[ql,Nu]=d.useState({business_price:"",delivery_type:"business_location"}),[Vl,ip]=d.useState({custom_price:""}),[js,op]=d.useState({legal_business_name:"",tax_id:"",tax_id_type:"",tax_address_line1:"",tax_address_line2:"",tax_city:"",tax_state:"",tax_postal_code:"",tax_country:"US",business_entity_type:"",tax_contact_name:"",tax_contact_email:"",tax_contact_phone:""}),[eC,lp]=d.useState(!1),[cp,Dt]=d.useState(""),[dp,up]=d.useState(""),[or,mp]=d.useState(!1),[_t,Jl]=d.useState(null),[sC,hp]=d.useState(!1),[w9,fp]=d.useState(""),[N9,_9]=d.useState(""),[_u,tC]=d.useState(null),[Wl,ka]=d.useState(!1),[xp,St]=d.useState(""),[pp,Hl]=d.useState(""),[gp,vp]=d.useState(!1),[rC,Gl]=d.useState(!1),[bp,aC]=d.useState([]),[yp,jp]=d.useState(!1),[wp,Np]=d.useState(""),[wo,Su]=d.useState(!1),[Xl,Lr]=d.useState(""),[nC,Yl]=d.useState(!1),[Zl,Cu]=d.useState(""),[Hn,Kl]=d.useState(null),[Ql,ec]=d.useState(""),[ku,iC]=d.useState([]),[Eu,oC]=d.useState([]),[Pu,lC]=d.useState([]),[S9,cC]=d.useState([]),[_p,Sp]=d.useState(!1),[Cp,kp]=d.useState(""),[aa,dC]=d.useState([]),[Tu,Ep]=d.useState(!1),[Pp,Tp]=d.useState(""),[uC,Ip]=d.useState(!1),[Gn,C9]=d.useState([]),[mC,k9]=d.useState(!1),[hC,Iu]=d.useState(!1),[sc,No]=d.useState(1),[Ys,Xn]=d.useState(!1),[Ap,vr]=d.useState(""),[Mp,tc]=d.useState(""),[Wt,Au]=d.useState({email:"",confirmEmail:""}),[fC,Mu]=d.useState(!1),[rc,Rp]=d.useState(""),[Op,Dp]=d.useState(""),[Ps,na]=d.useState({first_name:"",last_name:"",phone:"",bio:"",date_of_birth:"",experience_years:"",location_id:"",provider_role:"provider"}),[$r,ac]=d.useState({business_managed:!0,inherit_business_services:!0,inherit_business_addons:!0}),[xC,Fp]=d.useState(!1),[ks,pC]=d.useState(null),[Ea,Lp]=d.useState(!1),[Ru,nc]=d.useState(""),[Ou,ic]=d.useState(""),[Es,gC]=d.useState({is_active:!0,provider_role:"provider",business_managed:!0,location_id:"",verification_status:"pending"}),[Ct,$p]=d.useState({firstName:"",lastName:"",email:"",phone:"",bio:"",dateOfBirth:"",experienceYears:""}),[oc,Bp]=d.useState({notification_email:"",notification_phone:""}),[lc,Up]=d.useState(!1),[Du,Fu]=d.useState(""),[Lu,$u]=d.useState(""),[Pa,Bu]=d.useState({Monday:{isOpen:!1,open:"09:00",close:"17:00"},Tuesday:{isOpen:!1,open:"09:00",close:"17:00"},Wednesday:{isOpen:!1,open:"09:00",close:"17:00"},Thursday:{isOpen:!1,open:"09:00",close:"17:00"},Friday:{isOpen:!1,open:"09:00",close:"17:00"},Saturday:{isOpen:!1,open:"09:00",close:"17:00"},Sunday:{isOpen:!1,open:"09:00",close:"17:00"}}),[Ht,Uu]=d.useState({location_name:"",address_line1:"",address_line2:"",city:"",state:"FL",postal_code:"",country:"US",is_primary:!1,offers_mobile_services:!1,mobile_service_radius:10,is_active:!0}),[xs,cc]=d.useState({business_name:"",business_type:"",contact_email:"",phone:"",website_url:"",logo_url:"",verification_status:"",verification_notes:"",is_active:!0,is_featured:!1,setup_completed:!1,service_categories:[],service_subcategories:[]}),[dc,uc]=d.useState(!1),[zp,mc]=d.useState(""),vC=Nt(),qp=h=>{const j=new Date(h),k=Math.floor((new Date().getTime()-j.getTime())/(1e3*60));if(k<60)return`${k} minutes ago`;if(k<1440){const L=Math.floor(k/60);return`${L} hour${L>1?"s":""} ago`}else{const L=Math.floor(k/1440);return`${L} day${L>1?"s":""} ago`}},Vp=h=>{if(!h)return"";const[j,S]=h.split(":"),k=parseInt(j,10),L=k>=12?"PM":"AM";return`${k%12||12}:${S} ${L}`},bC=h=>h?h.split("_").map(j=>j.charAt(0).toUpperCase()+j.slice(1).toLowerCase()).join(" "):"",yC=h=>({pending:"Pending",verified:"Verified",rejected:"Rejected",suspended:"Suspended"})[h]||h,Jp=h=>h?h.split(/[_\s]+/).map((j,S)=>S===0?j.charAt(0).toLowerCase()+j.slice(1).toLowerCase():j.charAt(0).toUpperCase()+j.slice(1).toLowerCase()).join(""):"",jC=async h=>{var S;const j=(S=h.target.files)==null?void 0:S[0];if(!(!j||!m)){uc(!0),mc("");try{if(!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>5*1024*1024)throw new Error("File size must be less than 5MB");const k=j.name.split(".").pop(),se=`business-logos/${`business-logo-${m.id}-${Date.now()}.${k}`}`,{directSupabaseAPI:Z}=await ms(async()=>{const{directSupabaseAPI:ie}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:ie}},[]);if(m.logo_url)try{const ie=m.logo_url.split("/"),ve=`business-logos/${ie[ie.length-1]}`;await Z.deleteFile("roam-file-storage",ve)}catch(ie){console.warn("Failed to delete old logo:",ie)}const{publicUrl:me}=await Z.uploadFile("roam-file-storage",se,j);cc(ie=>({...ie,logo_url:me})),x(ie=>ie&&{...ie,logo_url:me}),i({title:"Logo Uploaded",description:"Business logo has been uploaded successfully!",variant:"default"})}catch(k){console.error("Logo upload error:",k);let L="Failed to upload logo";k!=null&&k.error&&typeof k.error=="string"?L=k.error:k!=null&&k.message?L=k.message:typeof k=="string"&&(L=k),mc(L),i({title:"Upload Failed",description:L,variant:"destructive"})}finally{uc(!1),h.target.value=""}}},wC=async()=>{if(m!=null&&m.logo_url){uc(!0),mc("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j=m.logo_url.split("/"),k=`business-logos/${j[j.length-1]}`;await h.deleteFile("roam-file-storage",k),cc(L=>({...L,logo_url:""})),x(L=>L&&{...L,logo_url:null}),i({title:"Logo Removed",description:"Business logo has been removed successfully!",variant:"default"})}catch(h){console.error("Logo remove error:",h);let j="Failed to remove logo";h!=null&&h.error&&typeof h.error=="string"?j=h.error:h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),mc(j),i({title:"Remove Failed",description:j,variant:"destructive"})}finally{uc(!1)}}},NC=async h=>{var S;const j=(S=h.target.files)==null?void 0:S[0];if(!(!j||!l)){U(!0),z("");try{if(!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>5*1024*1024)throw new Error("File size must be less than 5MB");const k=j.name.split(".").pop(),se=`avatar-provider-user/${`${l.id}-${Date.now()}.${k}`}`,{directSupabaseAPI:Z}=await ms(async()=>{const{directSupabaseAPI:he}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:he}},[]),{data:{session:me}}=await W.auth.getSession();if(me!=null&&me.access_token)Z.currentAccessToken=me.access_token;else throw new Error("No valid authentication session");if(l.image_url)try{const he=l.image_url.split("/"),_e=`avatar-provider-user/${he[he.length-1]}`;await Z.deleteFile("roam-file-storage",_e)}catch(he){console.warn("Failed to delete old avatar:",he)}const{publicUrl:ie}=await Z.uploadFile("roam-file-storage",se,j);await Z.updateProviderImage(l.id,ie),u({...l,image_url:ie})}catch(k){console.error("Avatar upload error:",k),console.error("Error details:",{type:typeof k,message:k==null?void 0:k.message,keys:Object.keys(k||{}),stack:k==null?void 0:k.stack});let L="Failed to upload avatar";k!=null&&k.error&&typeof k.error=="string"?L=k.error:k!=null&&k.message?L=k.message:typeof k=="string"?L=k:k!=null&&k.statusCode&&(k!=null&&k.error)?L=`Error ${k.statusCode}: ${k.error}`:k!=null&&k.details?L=k.details:k!=null&&k.hint&&(L=k.hint),z(L)}finally{U(!1),h.target.value=""}}},_C=async()=>{if(l!=null&&l.image_url){U(!0),z("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j=l.image_url.split("/"),k=`avatar-provider-user/${j[j.length-1]}`;await h.deleteFile("roam-file-storage",k),await h.updateProviderImage(l.id,null),u({...l,image_url:null})}catch(h){console.error("Avatar remove error:",h);let j="Failed to remove avatar";h!=null&&h.error&&typeof h.error=="string"?j=h.error:h!=null&&h.message?j=h.message:typeof h=="string"?j=h:h!=null&&h.statusCode&&(h!=null&&h.error)?j=`Error ${h.statusCode}: ${h.error}`:h!=null&&h.details?j=h.details:h!=null&&h.hint&&(j=h.hint),z(j)}finally{U(!1)}}},SC=async h=>{var S;const j=(S=h.target.files)==null?void 0:S[0];if(!(!j||!l)){T(!0),O("");try{if(!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>10*1024*1024)throw new Error("File size must be less than 10MB");const k=j.name.split(".").pop(),se=`banner-provider-user/${`${l.id}-${Date.now()}.${k}`}`,{directSupabaseAPI:Z}=await ms(async()=>{const{directSupabaseAPI:he}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:he}},[]),{data:{session:me}}=await W.auth.getSession();if(me!=null&&me.access_token)Z.currentAccessToken=me.access_token;else throw new Error("No valid authentication session");if(l.cover_image_url)try{const he=l.cover_image_url.split("/"),_e=`banner-provider-user/${he[he.length-1]}`;await Z.deleteFile("roam-file-storage",_e)}catch(he){console.warn("Failed to delete old banner:",he)}const{publicUrl:ie}=await Z.uploadFile("roam-file-storage",se,j);await Z.updateProviderBannerImage(l.id,ie),u({...l,cover_image_url:ie})}catch(k){console.error("Banner upload error:",k),console.error("Error details:",{type:typeof k,message:k==null?void 0:k.message,keys:Object.keys(k||{}),stack:k==null?void 0:k.stack});let L="Failed to upload banner image";k!=null&&k.error&&typeof k.error=="string"?L=k.error:k!=null&&k.message?L=k.message:typeof k=="string"?L=k:k!=null&&k.statusCode&&(k!=null&&k.error)?L=`Error ${k.statusCode}: ${k.error}`:k!=null&&k.details?L=k.details:k!=null&&k.hint&&(L=k.hint),O(L)}finally{T(!1);const k=document.getElementById("banner-upload");k&&(k.value="")}}},CC=async()=>{if(l!=null&&l.cover_image_url){T(!0),O("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j=l.cover_image_url.split("/"),k=`banner-provider-user/${j[j.length-1]}`;await h.deleteFile("roam-file-storage",k),await h.updateProviderBannerImage(l.id,null),u({...l,cover_image_url:null}),we("50% 50%"),pe(!1)}catch(h){console.error("Banner remove error:",h);let j="Failed to remove banner image";h!=null&&h.error&&typeof h.error=="string"?j=h.error:h!=null&&h.message?j=h.message:typeof h=="string"?j=h:h!=null&&h.statusCode&&(h!=null&&h.error)?j=`Error ${h.statusCode}: ${h.error}`:h!=null&&h.details?j=h.details:h!=null&&h.hint&&(j=h.hint),O(j)}finally{T(!1)}}},kC=async h=>{var S;const j=(S=h.target.files)==null?void 0:S[0];if(!(!j||!m)){F(!0),te("");try{if(!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>10*1024*1024)throw new Error("File size must be less than 10MB");const k=j.name.split(".").pop(),se=`business-cover-image/${`${m.id}-${Date.now()}.${k}`}`,{directSupabaseAPI:Z}=await ms(async()=>{const{directSupabaseAPI:he}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:he}},[]),{data:{session:me}}=await W.auth.getSession();if(me!=null&&me.access_token)Z.currentAccessToken=me.access_token;else throw new Error("No valid authentication session");if(m.cover_image_url)try{const he=m.cover_image_url.split("/"),_e=`business-cover-image/${he[he.length-1]}`;await Z.deleteFile("roam-file-storage",_e)}catch(he){console.warn("Failed to delete old business cover:",he)}const{publicUrl:ie}=await Z.uploadFile("roam-file-storage",se,j);await Z.updateBusinessCoverImage(m.id,ie),x({...m,cover_image_url:ie})}catch(k){console.error("Business cover upload error:",k),console.error("Error details:",{type:typeof k,message:k==null?void 0:k.message,keys:Object.keys(k||{}),stack:k==null?void 0:k.stack});let L="Failed to upload business cover image";k!=null&&k.error&&typeof k.error=="string"?L=k.error:k!=null&&k.message?L=k.message:typeof k=="string"?L=k:k!=null&&k.statusCode&&(k!=null&&k.error)?L=`Error ${k.statusCode}: ${k.error}`:k!=null&&k.details?L=k.details:k!=null&&k.hint&&(L=k.hint),te(L)}finally{F(!1);const k=document.getElementById("business-cover-upload");k&&(k.value="")}}},EC=async()=>{if(m!=null&&m.cover_image_url){F(!0),te("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j=m.cover_image_url.split("/"),k=`business-cover-image/${j[j.length-1]}`;await h.deleteFile("roam-file-storage",k),await h.updateBusinessCoverImage(m.id,null),x({...m,cover_image_url:null}),be("50% 50%"),je(!1)}catch(h){console.error("Business cover remove error:",h);let j="Failed to remove business cover image";h!=null&&h.error&&typeof h.error=="string"?j=h.error:h!=null&&h.message?j=h.message:typeof h=="string"?j=h:h!=null&&h.details?j=h.details:h!=null&&h.hint&&(j=h.hint),te(j)}finally{F(!1)}}},PC=h=>{if(!(m!=null&&m.cover_image_url))return;const j=h.currentTarget.getBoundingClientRect(),S=(h.clientX-j.left)/j.width*100,k=(h.clientY-j.top)/j.height*100,L=`${Math.round(S)}% ${Math.round(k)}%`;be(L)},Br=h=>{be(h)},TC=h=>{if(!(l!=null&&l.cover_image_url))return;const j=h.currentTarget.getBoundingClientRect(),S=(h.clientX-j.left)/j.width*100,k=(h.clientY-j.top)/j.height*100,L=`${Math.round(S)}% ${Math.round(k)}%`;we(L)},Ur=h=>{we(h)},IC=async h=>{if(!(!h||!(m!=null&&m.id)))try{console.log("Checking authentication status..."),console.log("Auth context state:",{hasUser:!!s,userId:s==null?void 0:s.id,userType:s==null?void 0:s.userType,isOwner:r,isDispatcher:a,isProvider:n});const{data:{session:j},error:S}=await W.auth.getSession();if(console.log("Session debug:",{hasSession:!!j,sessionError:S,user:(j==null?void 0:j.user)||null,accessToken:j!=null&&j.access_token?`${j.access_token.substring(0,20)}...`:null}),S){console.error("Session error:",S),Lr("Authentication error. Please try logging in again.");return}if(!j)if(s&&s.id)console.log("No session but auth context has user - proceeding with upload");else{console.error("No session and no user in context - user not authenticated"),Lr("Please log in to upload documents");return}console.log("Authentication verified - proceeding with upload");const k=h.name.split(".").pop(),se=`business-documents/${`${Date.now()}_${Math.random().toString(36).substring(2)}.${k}`}`;console.log("Attempting upload using standard Supabase client"),console.log("Uploading to path:",se),console.log("File details:",{name:h.name,type:h.type,size:h.size});const{data:Z,error:me}=await W.storage.from("roam-file-storage").upload(se,h,{cacheControl:"3600",upsert:!1});if(me)throw console.error("Supabase upload error:",me),new Error(`Upload failed: ${me.message}`);console.log("Upload successful:",Z);const{data:{publicUrl:ie}}=W.storage.from("roam-file-storage").getPublicUrl(se);console.log("Public URL:",ie),await OC({businessId:m.id,documentName:Ql.trim(),fileUrl:ie,fileSize:h.size,documentType:Zl}),await tg(),i({title:"Document Uploaded",description:"Document has been uploaded successfully!",variant:"default"})}catch(j){console.error("Document upload error:",j);let S="Failed to upload document";j.message.includes("413")?S="File is too large. Maximum size is 50MB.":j.message.includes("401")?S="Authentication failed. Please refresh and try again.":j.message.includes("403")?S="Permission denied. Please contact support.":j.message&&(S=j.message),Lr(S),i({title:"Upload Failed",description:S,variant:"destructive"})}finally{Su(!1),event.target.value=""}},AC=[{value:"drivers_license",label:"Drivers License"},{value:"proof_of_address",label:"Proof Of Address"},{value:"liability_insurance",label:"Liability Insurance"},{value:"professional_license",label:"Professional License"},{value:"professional_certificate",label:"Professional Certificate"},{value:"other",label:"Other"}],MC=h=>{var L;const j=(L=h.target.files)==null?void 0:L[0];if(!j)return;if(j.size>50*1024*1024){Lr("File is too large. Maximum size is 50MB.");return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/jpg","image/png"].includes(j.type)){Lr("Invalid file type. Please upload PDF, DOC, DOCX, JPG, JPEG, or PNG files.");return}Kl(j),Lr("");const k=j.name.substring(0,j.name.lastIndexOf("."))||j.name;ec(k),h.target.value=""},RC=async()=>{if(!Hn||!Zl||!Ql.trim()){Lr("Please fill in all required fields.");return}Su(!0),Lr("");try{await IC(Hn),Yl(!1),Kl(null),Cu(""),ec(""),i({title:"Document Uploaded",description:"Document has been uploaded successfully!",variant:"default"})}catch(h){Lr(h.message)}finally{Su(!1)}},OC=async({businessId:h,documentName:j,fileUrl:S,fileSize:k,documentType:L})=>{const{data:se,error:Z}=await W.from("business_documents").insert({business_id:h,document_name:j,file_url:S,file_size_bytes:k,document_type:L,verification_status:"pending"}).select();if(Z)throw new Error(`Failed to save document to database: ${Z.message}`);return se},Yn=(h,j)=>{$p(S=>({...S,[h]:j})),Te&&De(""),oe&&de("")},Wp=(h,j)=>{Bp(S=>({...S,[h]:j})),Lu&&$u(""),Du&&Fu("")},DC=async()=>{var h,j;if(l){Up(!0),Fu(""),$u("");try{const{directSupabaseAPI:S}=await ms(async()=>{const{directSupabaseAPI:se}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:se}},[]),k={notification_email:((h=oc.notification_email)==null?void 0:h.trim())||null,notification_phone:((j=oc.notification_phone)==null?void 0:j.trim())||null};if(k.notification_email&&k.notification_email.length>0&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.notification_email))throw new Error("Please enter a valid notification email address");const L=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers?id=eq.${l.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(k)});if(!L.ok){const se=await L.text();throw new Error(`Failed to update notification settings: ${se}`)}u({...l,...k}),$u("Notification settings updated successfully!"),i({title:"Settings Updated",description:"Your notification preferences have been saved.",variant:"default"})}catch(S){console.error("Notification settings save error:",S);let k="Failed to update notification settings";S!=null&&S.message?k=S.message:typeof S=="string"&&(k=S),Fu(k),i({title:"Update Failed",description:k,variant:"destructive"})}finally{Up(!1)}}},FC=async()=>{if(l){H(!0),de(""),De("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j={first_name:Ct.firstName.trim(),last_name:Ct.lastName.trim(),email:Ct.email.trim(),phone:Ct.phone.trim(),bio:Ct.bio.trim(),date_of_birth:Ct.dateOfBirth||null,experience_years:Ct.experienceYears?parseInt(Ct.experienceYears):null};if(!j.first_name||!j.last_name||!j.email)throw new Error("First name, last name, and email are required");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email))throw new Error("Please enter a valid email address");const k=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers?id=eq.${l.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)});if(!k.ok){const L=await k.text();throw new Error(`Failed to update profile: ${L}`)}u({...l,...j}),De("Profile updated successfully!")}catch(h){console.error("Profile save error:",h);let j="Failed to update profile";h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),de(j)}finally{H(!1)}}},zu=(h,j,S)=>{Bu(k=>({...k,[h]:{...k[h],[j]:S}})),ee&&Fe(""),Be&&es("")},LC=async()=>{if(m){$e(!0),es(""),Fe("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:k}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:k}},[]),j={};Object.keys(Pa).forEach(k=>{Pa[k].isOpen&&(j[k]={open:Pa[k].open,close:Pa[k].close})});const S=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_profiles?id=eq.${m.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify({business_hours:j})});if(!S.ok){const k=await S.text();throw new Error(`Failed to update business hours: ${k}`)}y(j),x({...m,business_hours:j}),Fe("Business hours updated successfully!"),Ue(!1)}catch(h){console.error("Business hours save error:",h);let j="Failed to update business hours";h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),es(j)}finally{$e(!1)}}},$C=()=>{if(w){const h={Monday:{isOpen:!1,open:"09:00",close:"17:00"},Tuesday:{isOpen:!1,open:"09:00",close:"17:00"},Wednesday:{isOpen:!1,open:"09:00",close:"17:00"},Thursday:{isOpen:!1,open:"09:00",close:"17:00"},Friday:{isOpen:!1,open:"09:00",close:"17:00"},Saturday:{isOpen:!1,open:"09:00",close:"17:00"},Sunday:{isOpen:!1,open:"09:00",close:"17:00"}};Object.keys(h).forEach(j=>{w[j]&&(h[j]={isOpen:!0,open:w[j].open||"09:00",close:w[j].close||"17:00"})}),Bu(h)}Ue(!1),es(""),Fe("")},_o=async()=>{if(!(l!=null&&l.business_id)){console.log("fetchLocations: No provider or business_id available");return}console.log("fetchLocations: Starting fetch for business_id:",l.business_id),Ye(!0);try{const{data:h,error:j}=await W.from("business_locations").select("*").eq("business_id",l.business_id).order("created_at",{ascending:!1});if(console.log("fetchLocations: Query result:",{data:h,error:j}),j)throw j;xe(h||[]),console.log("fetchLocations: Set locations to:",h||[])}catch(h){console.error("Error fetching locations:",h),i({title:"Error",description:"Failed to load locations",variant:"destructive"}),Hs("Failed to load locations")}finally{Ye(!1)}},Zn=async()=>{if(!(l!=null&&l.business_id)){console.log("fetchTeamProviders: No provider or business_id available");return}console.log("fetchTeamProviders: Starting fetch for business_id:",l.business_id),Ep(!0),Tp("");try{const{data:h,error:j}=await W.from("providers").select(`
          *,
          business_locations!providers_location_id_fkey (
            id,
            location_name,
            address_line1,
            city,
            state,
            is_primary
          )
        `).eq("business_id",l.business_id).order("created_at",{ascending:!1});if(console.log("fetchTeamProviders: Query result:",{data:h,error:j}),j)throw j;dC(h||[]),console.log("fetchTeamProviders: Set team providers to:",h||[])}catch(h){console.error("Error fetching team providers:",h),Tp("Failed to load team providers"),i({title:"Error",description:"Failed to load team providers",variant:"destructive"})}finally{Ep(!1)}},qu=()=>{Iu(!1),No(1),vr(""),tc(""),Mu(!1),Rp(""),Dp(""),Au({email:"",confirmEmail:""}),na({first_name:"",last_name:"",phone:"",bio:"",date_of_birth:"",experience_years:"",location_id:"",provider_role:"provider"}),ac({business_managed:!0,inherit_business_services:!0,inherit_business_addons:!0})},Hp=()=>{qu(),Iu(!0)},BC=async()=>{if(!Wt.email||Wt.email!==Wt.confirmEmail){vr("Please enter a valid email and confirm it matches");return}Xn(!0),vr("");try{const{data:h,error:j}=await W.auth.signUp({email:Wt.email,password:Math.random().toString(36).slice(-12),options:{emailRedirectTo:`${window.location.origin}/provider-portal`}});if(j)throw j;h.user&&(Dp(h.user.id),Mu(!0),tc("Verification email sent! Please ask the provider to check their email and enter the OTP code."))}catch(h){console.error("Error creating user:",h),vr(h.message||"Failed to create user account")}finally{Xn(!1)}},UC=async()=>{if(!rc){vr("Please enter the OTP code");return}Xn(!0),vr("");try{const{data:h,error:j}=await W.auth.verifyOtp({email:Wt.email,token:rc,type:"signup"});if(j)throw j;No(2),tc("Email verified! Now complete the provider profile.")}catch(h){console.error("Error verifying OTP:",h),vr(h.message||"Invalid OTP code")}finally{Xn(!1)}},zC=async()=>{if(!Ps.first_name||!Ps.last_name||!Ps.email){vr("Please fill in all required fields");return}No(3),tc("Profile information saved! Now configure management settings.")},qC=async()=>{if(!l||!Op){vr("Missing required information");return}Xn(!0),vr("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:k}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:k}},[]),j={user_id:Op,business_id:l.business_id,first_name:Ps.first_name.trim(),last_name:Ps.last_name.trim(),email:Wt.email,phone:Ps.phone.trim()||null,bio:Ps.bio.trim()||null,date_of_birth:Ps.date_of_birth||null,experience_years:Ps.experience_years?parseInt(Ps.experience_years):null,location_id:Ps.location_id&&Ps.location_id!=="none"?Ps.location_id:null,provider_role:Ps.provider_role,business_managed:$r.business_managed,is_active:!0,verification_status:"pending"},S=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)});if(!S.ok){const k=await S.text();throw new Error(`Failed to create provider: ${k}`)}if($r.inherit_business_services)try{const{data:k,error:L}=await W.from("business_services").select("*").eq("business_id",l.business_id).eq("is_active",!0);if(L)console.error("Error fetching business services:",L);else if(k&&k.length>0){const se=k.map(Z=>{var me,ie;return{provider_id:(ie=(me=S.data)==null?void 0:me[0])==null?void 0:ie.id,service_id:Z.service_id,delivery_type:Z.delivery_type,custom_price:Z.custom_price,is_active:!0,managed_by_business:$r.business_managed}});console.log("Would create provider services:",se)}if($r.inherit_business_addons){const{data:se,error:Z}=await W.from("business_addons").select("*").eq("business_id",l.business_id).eq("is_available",!0);Z?console.error("Error fetching business addons:",Z):se&&se.length>0&&console.log("Would create provider addons for:",se.length,"addons")}}catch(k){console.error("Error inheriting services/addons:",k)}i({title:"Provider Added Successfully",description:`${Ps.first_name} ${Ps.last_name} has been added to your team!`,variant:"default"}),qu(),await Zn()}catch(h){console.error("Error creating provider:",h),vr(h.message||"Failed to create provider")}finally{Xn(!1)}},So=(h,j)=>{gC(S=>({...S,[h]:j})),Ou&&ic(""),Ru&&nc("")},VC=async()=>{if(ks){Lp(!0),nc(""),ic("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:ie}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:ie}},[]);h.currentAccessToken?console.log("Using access token for provider update"):console.warn("No access token available for provider update, using anon key"),console.log("=== PROVIDER UPDATE DEBUG START ==="),console.log("Provider being updated:",{id:ks.id,current_role:ks.provider_role,current_business_managed:ks.business_managed,current_is_active:ks.is_active,current_verification_status:ks.verification_status,current_location_id:ks.location_id}),console.log("Form data received:",{is_active:Es.is_active,provider_role:Es.provider_role,business_managed:Es.business_managed,location_id:Es.location_id,verification_status:Es.verification_status});const j={},S=[];typeof Es.is_active=="boolean"?j.is_active=Es.is_active:S.push(`Invalid is_active: ${Es.is_active} (type: ${typeof Es.is_active})`);const k=["owner","dispatcher","provider"];Es.provider_role&&k.includes(Es.provider_role)?j.provider_role=Es.provider_role:S.push(`Invalid provider_role: ${Es.provider_role}. Valid options: ${k.join(", ")}`),typeof Es.business_managed=="boolean"?j.business_managed=Es.business_managed:S.push(`Invalid business_managed: ${Es.business_managed} (type: ${typeof Es.business_managed})`),Es.location_id&&Es.location_id!=="none"?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(Es.location_id)?j.location_id=Es.location_id:S.push(`Invalid location_id UUID format: ${Es.location_id}`):j.location_id=null;const L=["pending","verified","rejected"];if(Es.verification_status&&L.includes(Es.verification_status)?j.verification_status=Es.verification_status:S.push(`Invalid verification_status: ${Es.verification_status}. Valid options: ${L.join(", ")}`),S.length>0)throw console.error("Validation errors:",S),new Error(`Validation failed: ${S.join("; ")}`);if(console.log("Final update data:",JSON.stringify(j,null,2)),console.log("Update data keys:",Object.keys(j)),Object.keys(j).length===0)throw new Error("No valid fields to update after validation");console.log("=== SENDING REQUEST ==="),console.log("URL:",`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers?id=eq.${ks.id}`),console.log("Method: PATCH"),console.log("Body:",JSON.stringify(j,null,2)),console.log("Has access token:",!!h.currentAccessToken);const se=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers?id=eq.${ks.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)});let Z="",me={};try{me=Object.fromEntries(se.headers.entries()),Z=await se.text()}catch(ie){console.error("Could not read response:",ie),Z=`Error reading response: ${ie.message}`}if(console.log("=== RESPONSE RECEIVED ==="),console.log("Status:",se.status),console.log("Status Text:",se.statusText),console.log("Headers:",JSON.stringify(me,null,2)),console.log("Body:",Z),!se.ok){console.error("=== REQUEST FAILED ===");let ie="";if(!Z||Z.trim()==="")ie=`Empty response body with HTTP ${se.status}`;else try{const ve=JSON.parse(Z);console.error("Parsed error JSON:",JSON.stringify(ve,null,2)),ve.message?ie=ve.message:ve.error?ie=ve.error:ve.hint?ie=ve.hint:ve.details?ie=ve.details:ve.code?ie=`Error code: ${ve.code}`:Array.isArray(ve)&&ve.length>0?ie=JSON.stringify(ve[0]):ie=JSON.stringify(ve)}catch(ve){console.error("Failed to parse error JSON:",ve),ie=Z.substring(0,500)}const he={status:se.status,statusText:se.statusText,url:`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/providers?id=eq.${ks.id}`,method:"PATCH",requestBody:j,responseText:Z,errorDetails:ie,providerId:ks.id,responseHeaders:me,hasAccessToken:!!h.currentAccessToken};throw console.error("=== COMPLETE DEBUG INFO ==="),console.error(JSON.stringify(he,null,2)),new Error(`Failed to update provider: HTTP ${se.status} - ${ie}`)}ic("Provider settings updated successfully!"),i({title:"Provider Updated",description:`${ks.first_name} ${ks.last_name}'s settings have been updated.`,variant:"default"}),await Zn()}catch(h){console.error("Provider management save error:",h);let j="Failed to update provider settings";h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),nc(j),i({title:"Update Failed",description:j,variant:"destructive"})}finally{Lp(!1)}}},JC=()=>{Fp(!1),pC(null),nc(""),ic("")},zr=(h,j)=>{if(h==="is_primary"&&j===!0){const S=ue.find(k=>k.is_primary&&k.id!==(le==null?void 0:le.id));if(S){if(!confirm(`Setting this location as primary will remove the primary status from "${S.location_name}". Continue?`))return;i({title:"Primary Location Changed",description:`"${S.location_name}" is no longer the primary location.`,variant:"default"})}}Uu(S=>({...S,[h]:j}))},hc=()=>{Uu({location_name:"",address_line1:"",address_line2:"",city:"",state:"FL",postal_code:"",country:"US",is_primary:!1,offers_mobile_services:!1,mobile_service_radius:10,is_active:!0})},WC=async()=>{if(l){Ls(!0),Hs(""),ne("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),j={...Ht,business_id:l.business_id};if(!j.location_name||!j.address_line1||!j.city)throw new Error("Location name, address, and city are required");j.is_primary&&await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_locations?business_id=eq.${l.business_id}&is_primary=eq.true`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify({is_primary:!1})});let S;if(le?S=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_locations?id=eq.${le.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)}):S=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_locations",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)}),!S.ok){const L=await S.text();throw new Error(`Failed to save location: ${L}`)}const k=j.location_name;i({title:le?"Location Updated":"Location Added",description:le?`"${k}" has been updated successfully!`:`"${k}" has been added to your business!`,variant:"default"}),fe(null),ke(!1),hc(),await _o()}catch(h){console.error("Location save error:",h);let j="Failed to save location";h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),i({title:"Error",description:j,variant:"destructive"}),Hs(j)}finally{Ls(!1)}}},Gp=h=>{Uu({location_name:h.location_name||"",address_line1:h.address_line1||"",address_line2:h.address_line2||"",city:h.city||"",state:h.state||"FL",postal_code:h.postal_code||"",country:h.country||"US",is_primary:h.is_primary||!1,offers_mobile_services:h.offers_mobile_services||!1,mobile_service_radius:h.mobile_service_radius||10,is_active:h.is_active!==!1}),fe(h),ke(!0),G(!0),i({title:"Edit Location",description:`Editing "${h.location_name}" - make your changes and save.`,variant:"default"})},Xp=h=>{const j=ue.find(S=>S.id===h);hu(j),mu(!0)},HC=async(h,j)=>{try{const{error:S}=await W.from("provider_services").insert({provider_id:h,service_id:j,is_active:!0});if(S)throw S;Co(h),console.log("Service assigned successfully")}catch(S){console.error("Error assigning service:",S)}},GC=async(h,j)=>{try{const{error:S}=await W.from("provider_services").delete().eq("id",h);if(S)throw S;Co(j),console.log("Service assignment removed successfully")}catch(S){console.error("Error removing service assignment:",S)}},XC=async(h,j)=>{try{const{error:S}=await W.from("provider_addons").insert({provider_id:h,addon_id:j,is_active:!0});if(S)throw S;Co(h),console.log("Addon assigned successfully")}catch(S){console.error("Error assigning addon:",S)}},YC=async(h,j)=>{try{const{error:S}=await W.from("provider_addons").delete().eq("id",h);if(S)throw S;Co(j),console.log("Addon assignment removed successfully")}catch(S){console.error("Error removing addon assignment:",S)}},Yp=[{id:"independent",name:"Independent",price:99,description:"Perfect for solo practitioners",staffLimit:"1 staff member",features:["Unlimited bookings","Customer messaging","Basic analytics","Payment processing","Mobile app access"],recommended:!1},{id:"small-business",name:"Small Business",price:399,description:"Ideal for small teams",staffLimit:"2-6 staff members",features:["Everything in Independent","Staff management","Advanced scheduling","Team analytics","Priority support"],recommended:!0},{id:"medium-business",name:"Medium Business",price:699,description:"Growing businesses",staffLimit:"7-12 staff members",features:["Everything in Small Business","Multi-location support","Advanced reporting","Custom integrations","Dedicated support"],recommended:!1},{id:"large-business",name:"Large Business",price:999,description:"Enterprise solutions",staffLimit:"13+ staff members",features:["Everything in Medium Business","Enterprise API access","Custom branding","Advanced security","White-label options"],recommended:!1}],ZC=async h=>{Hx(h),Jx(!0);try{const j=await fetch("/api/stripe/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:h,businessId:m==null?void 0:m.id,customerId:l==null?void 0:l.email})});if(!j.ok){const k=await j.json();throw new Error(k.error||"Failed to create subscription")}const{url:S}=await j.json();window.location.href=S}catch(j){console.error("Error selecting plan:",j);const S=(j==null?void 0:j.message)||(j==null?void 0:j.details)||(typeof j=="string"?j:"Failed to select plan. Please try again.");alert(`Error: ${S}`)}finally{Jx(!1),Hx(null)}},KC=async()=>{if(m!=null&&m.id)try{const{data:h,error:j}=await W.from("business_subscriptions").select(`
          id,
          device_type,
          start_date,
          end_date,
          is_active,
          stripe_subscription_id,
          stripe_customer_id,
          stripe_price_id,
          subscription_status
        `).eq("business_id",m.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();if(j&&j.code!=="PGRST116")throw j;if(h){const S=Yp.find(k=>{var L;return((L=h.stripe_price_id)==null?void 0:L.includes(k.id))||h.device_type===k.id});gu({...h,plan_name:(S==null?void 0:S.name)||"Unknown Plan",price:(S==null?void 0:S.price)||0})}else gu(null);console.log("Current subscription loaded:",h)}catch(h){console.error("Error loading subscription:",h),gu(null)}},Kn=h=>{if(!h)return;const j=encodeURIComponent(h),S=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let k;S?k=`https://maps.google.com/maps?daddr=${j}`:k=`https://www.google.com/maps/dir/?api=1&destination=${j}`,window.open(k,"_blank")},Vu=async h=>{var j,S,k;console.log("handleOpenMessaging called with booking:",{id:h==null?void 0:h.id,customer_name:((j=h==null?void 0:h.customer_profiles)==null?void 0:j.first_name)||(h==null?void 0:h.guest_name),customer_email:((S=h==null?void 0:h.customer_profiles)==null?void 0:S.email)||(h==null?void 0:h.guest_email),service_name:(k=h==null?void 0:h.services)==null?void 0:k.name}),qx(h),Ux(!0)},Zp=()=>{zx(!0)},QC=()=>{Ux(!1),qx(null)},e4=()=>{zx(!1)},Co=async h=>{Bx(!0);try{const{data:j,error:S}=await W.from("provider_services").select(`
          *,
          services(
            id,
            name,
            min_price,
            description
          )
        `).eq("provider_id",h);S?console.error("Error loading provider services:",S):LS(j||[]);const{data:k,error:L}=await W.from("provider_addons").select(`
          *,
          service_addons(
            id,
            name,
            description
          )
        `).eq("provider_id",h);L?console.error("Error loading provider addons:",L):$S(k||[])}catch(j){console.error("Error loading provider assignments:",j)}finally{Bx(!1)}},s4=h=>{Lx(h),rr({first_name:h.first_name||"",last_name:h.last_name||"",email:h.email||"",phone:h.phone||"",provider_role:h.provider_role||"",business_managed:h.business_managed||!1,is_active:h.is_active||!1,verification_status:h.verification_status||"",background_check_status:h.background_check_status||"",location_id:h.location_id||"",experience_years:h.experience_years?h.experience_years.toString():""}),xc(),h.provider_role==="provider"&&Co(h.id),Il(!0)},t4=async h=>{const j=!h.is_active;await Ju(h.id,{is_active:j})},r4=async h=>{const j=h.background_check_status==="approved"?"under_review":"approved";await Ju(h.id,{background_check_status:j})},a4=async h=>{const j=h.verification_status==="approved"?"pending":"approved";await Ju(h.id,{verification_status:j})},Ju=async(h,j)=>{Al(!0);try{const{error:S}=await W.from("providers").update(j).eq("id",h);if(S)throw console.error("Provider update error:",S),new Error(`Failed to update provider: ${S.message}`);i({title:"Provider Updated",description:"Provider status updated successfully",variant:"default"}),await Zn()}catch(S){console.error("Provider update error:",S),i({title:"Update Failed",description:`Failed to update provider: ${S.message}`,variant:"destructive"})}finally{Al(!1)}},n4=async()=>{if(Ot){if(!Os.first_name||!Os.last_name||!Os.email||!Os.phone){i({title:"Validation Error",description:"First name, last name, email, and phone are required fields",variant:"destructive"});return}Al(!0);try{const h={first_name:Os.first_name.trim(),last_name:Os.last_name.trim(),email:Os.email.trim(),phone:Os.phone.trim(),provider_role:Os.provider_role,business_managed:Os.business_managed,is_active:Os.is_active,verification_status:Os.verification_status,background_check_status:Os.background_check_status,location_id:Os.location_id||null,experience_years:Os.experience_years?parseInt(Os.experience_years):null},{error:j}=await W.from("providers").update(h).eq("id",Ot.id);if(j)throw console.error("Provider save error:",j),new Error(`Failed to save provider: ${j.message}`);i({title:"Provider Updated",description:"Provider information updated successfully",variant:"default"}),Il(!1),Lx(null),await Zn()}catch(h){console.error("Provider save error:",h),i({title:"Save Failed",description:`Failed to save provider: ${h.message}`,variant:"destructive"})}finally{Al(!1)}}},i4=async()=>{if(!ta)return;const h=ta.location_name||"this location";mu(!1),Ls(!0),i({title:"Deleting Location",description:`Removing "${h}" from your business...`,variant:"default"});try{const{directSupabaseAPI:j}=await ms(async()=>{const{directSupabaseAPI:k}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:k}},[]),S=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_locations?id=eq.${ta.id}`,{method:"DELETE",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${j.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`}});if(!S.ok){const k=await S.text();throw new Error(`Failed to delete location: ${k}`)}i({title:"Location Deleted",description:`"${h}" has been successfully removed from your business.`,variant:"default"}),await _o()}catch(j){console.error("Location delete error:",j);const S=j.message||"Failed to delete location";i({title:"Delete Failed",description:`Failed to delete "${h}": ${S}`,variant:"destructive"}),Hs(S)}finally{Ls(!1),hu(null)}},o4=()=>{fe(null),ke(!1),hc()},ko=(h,j)=>{cc(S=>({...S,[h]:j})),pr&&Rr(""),gt&&Rt("")},Wu=(h,j)=>{Gx(S=>({...S,[h]:j})),mn&&_a(""),un&&Na("")},l4=async()=>{if(!(!Ks||!l)){go(!0),Na(""),_a("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:_e}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:_e}},[]);if(!["business_location","service_location","both_locations"].includes(Vt.delivery_type))throw new Error("Invalid delivery type selected");let S=null;if(Vt.custom_price&&Vt.custom_price.trim()!==""){const _e=parseFloat(Vt.custom_price);if(isNaN(_e)||_e<0)throw new Error("Please enter a valid price (0 or greater)");S=_e}if(typeof Vt.is_active!="boolean")throw new Error("Invalid active status");const k={delivery_type:Vt.delivery_type,custom_price:S,is_active:Vt.is_active};if(console.log("Service update - Debug info:",{editingService:Ks,serviceForm:Vt,updateData:k,serviceId:Ks.id,url:`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${Ks.id}`,hasAccessToken:!!h.currentAccessToken}),console.log("Current business services structure:",{allServices:Or.map(_e=>({id:_e.id,keys:Object.keys(_e),delivery_type:_e.delivery_type,custom_price:_e.custom_price,is_active:_e.is_active}))}),!Ks.id||typeof Ks.id!="string")throw new Error("Invalid service ID - cannot update service");const L=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${Ks.id}&select=*`,{method:"GET",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}}),se=await L.json();if(console.log("Service existence and structure check:",{status:L.status,result:se,serviceStructure:se!=null&&se[0]?Object.keys(se[0]):"No service found"}),!L.ok||!se||se.length===0)throw new Error(`Service with ID ${Ks.id} not found or inaccessible`);const Z=se[0];console.log("Current service data from database:",Z);const me=[k,{delivery_type:k.delivery_type,price:k.custom_price,active:k.is_active},{delivery_method:k.delivery_type,custom_price:k.custom_price,is_active:k.is_active},{delivery_type:k.delivery_type,override_price:k.custom_price,is_active:k.is_active}];let ie=!1,he=null,ve;for(let _e=0;_e<me.length;_e++){const Ve=me[_e];console.log(`Attempt ${_e+1}: Trying update with data:`,Ve);try{if(ve=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${Ks.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(Ve)}),ve.ok){console.log(`Success with attempt ${_e+1}! Correct schema:`,Ve),ie=!0;break}else{const zs=await ve.text();console.log(`Attempt ${_e+1} failed:`,{status:ve.status,error:zs}),he=zs}}catch(zs){console.log(`Attempt ${_e+1} threw error:`,zs),he=zs}}if(ie||console.log("All schema variations failed. Using last response for error handling."),!ie&&(!ve||!ve.ok)){let _e="Unknown error",Ve="";try{he&&typeof he=="string"?_e=he:_e=await ve.text();try{const Ts=JSON.parse(_e);Ts.message?Ve=Ts.message:Ts.error?Ve=Ts.error:Ts.hint?Ve=Ts.hint:Ts.details&&(Ve=Ts.details)}catch{Ve=_e}}catch(Ts){console.warn("Could not read response text:",Ts),_e=`HTTP ${ve.status} - ${ve.statusText}`,Ve=_e}const zs={};ve.headers.forEach((Ts,hn)=>{zs[hn]=Ts});const br={status:ve.status,statusText:ve.statusText,responseText:_e,responseHeaders:zs,errorDetails:Ve,updateData:k,serviceId:Ks.id,url:`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${Ks.id}`,headers:{apikey:"***",Authorization:h.currentAccessToken?"Bearer [USER_TOKEN]":"Bearer [ANON_KEY]","Content-Type":"application/json",Prefer:"return=minimal"},errorTextLength:(_e==null?void 0:_e.length)||0,isEmpty:!_e||_e.trim()===""};if(console.error("Service update failed - Debug Info:",JSON.stringify(br,null,2)),(!Ve||Ve.trim()==="")&&(Ve=`HTTP ${ve.status} - No error details provided by server`),ve.status===400&&(!Ve||Ve.trim()==="")){console.log("Attempting simplified update due to HTTP 400 with no details...");try{const Ts={is_active:Vt.is_active},hn=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${Ks.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(Ts)});if(hn.ok){console.log("Simple update succeeded - the issue may be with delivery_type or custom_price fields"),gr(cr=>cr.map(ia=>ia.id===Ks.id?{...ia,is_active:Vt.is_active}:ia)),_a("Service status updated successfully! (Note: Some fields may not have been updated due to data format issues)"),vu(null),go(!1);return}else{const cr=await hn.text();console.log("Simple update also failed:",cr)}}catch(Ts){console.log("Fallback update failed:",Ts)}}let qr=Ve||_e;throw ve.status===400?qr=`Invalid request: ${Ve||"The data format may be incorrect. Please check your input values."}`:ve.status===401?qr="Authentication failed. Please refresh the page and try again.":ve.status===403?qr="Permission denied. You may not have access to update this service.":ve.status===404&&(qr="Service not found. It may have been deleted."),new Error(qr)}gr(_e=>_e.map(Ve=>Ve.id===Ks.id?{...Ve,...k}:Ve)),_a("Service updated successfully!"),vu(null)}catch(h){console.error("Service save error details:",{error:h,errorType:typeof h,errorMessage:h==null?void 0:h.message,errorString:String(h),errorJSON:JSON.stringify(h,null,2)}),console.error("Service save error (simple):",String(h));let j="Failed to update service";if(h!=null&&h.message&&typeof h.message=="string")j=h.message;else if(typeof h=="string")j=h;else if(h&&typeof h=="object")if(h.toString&&typeof h.toString=="function"){const S=h.toString();if(S!=="[object Object]")j=S;else if(h.message)j=String(h.message);else if(h.error)j=String(h.error);else if(h.details)j=String(h.details);else{const k=Object.keys(h).filter(L=>typeof h[L]=="string"&&h[L].length>0);k.length>0?j=`Failed to update service: ${h[k[0]]}`:j="Failed to update service: Unknown error occurred"}}else j="Failed to update service: Invalid error object";else j=`Failed to update service: ${String(h)}`;typeof j!="string"&&(j="Failed to update service: Error details could not be extracted"),console.log("Final error message to display:",j),Na(j)}finally{go(!1)}}},Kp=()=>{vu(null),Gx({delivery_type:"business_location",custom_price:"",is_active:!0}),Na(""),_a("")},c4=h=>({business_location:"Business",customer_location:"Mobile",virtual:"Virtual",both_locations:"Both"})[h]||h,fc=h=>{if(h.delivery_type==="virtual")return"Virtual Session";if(h.delivery_type==="customer_location"&&h.customer_locations){const j=h.customer_locations,S=`${j.street_address}${j.unit_number?` ${j.unit_number}`:""}, ${j.city}, ${j.state} ${j.zip_code}`;return{name:j.location_name||"Customer Location",address:S,instructions:j.access_instructions}}else if(h.delivery_type==="business_location"&&h.business_locations){const j=h.business_locations,S=`${j.address_line1}${j.address_line2?` ${j.address_line2}`:""}, ${j.city}, ${j.state} ${j.postal_code}`;return{name:j.location_name||"Business Location",address:S,instructions:null}}else return h.delivery_type==="customer_location"?"Customer Location":h.delivery_type==="business_location"?"Business Location":"Location TBD"},Hu=(h,j)=>{Zx(S=>({...S,[h]:j}))},d4=async()=>{if(!Sa||!l){Na("Please select a service to add");return}go(!0),Na(""),_a("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:k}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:k}},[]),j={business_id:l.business_id,service_id:Sa,delivery_type:Fr.delivery_type,custom_price:Fr.custom_price?parseFloat(Fr.custom_price):null,is_active:Fr.is_active};if(Fr.custom_price&&(isNaN(parseFloat(Fr.custom_price))||parseFloat(Fr.custom_price)<0))throw new Error("Please enter a valid price (0 or greater)");const S=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(j)});if(!S.ok){const k=await S.text();throw new Error(`Failed to add service: ${k}`)}_a("Service added successfully!"),Xx(!1),await h4()}catch(h){console.error("Service add error:",h);let j="Failed to add service";h!=null&&h.message?j=h.message:typeof h=="string"&&(j=h),Na(j)}finally{go(!1)}},Qp=()=>{Xx(!1),Yx(""),Zx({delivery_type:"business_location",custom_price:"",is_active:!0}),Na(""),_a("")},u4=()=>{bo(""),sp("")},m4=h=>{h!=="addons"&&u4(),h!=="services-addons"&&y4(),tr(h)},h4=async()=>{if(!l){console.log("fetchBusinessServices: No provider available");return}if(console.log("fetchBusinessServices: Provider data:",l),console.log("fetchBusinessServices: User data:",s),console.log("fetchBusinessServices: Starting fetch for business_id:",l.business_id),!l.business_id){console.error("fetchBusinessServices: No business_id found in provider data"),vt("No business ID found for this provider");return}ls(!0),vt("");try{const{data:h,error:j}=await W.from("business_services").select(`
          *,
          services (
            id,
            name,
            description,
            min_price,
            duration_minutes,
            subcategory_id,
            service_subcategories!subcategory_id (
              id,
              name,
              category_id,
              service_categories!category_id (
                id,
                name
              )
            )
          )
        `).eq("business_id",l.business_id).order("created_at",{ascending:!1});if(console.log("fetchBusinessServices: business_services query result:",{servicesData:h,servicesError:j}),j)throw console.error("fetchBusinessServices: Error fetching business services:",JSON.stringify(j)),j;const S=(h==null?void 0:h.map(Z=>Z.service_id))||[];console.log("fetchBusinessServices: Found service IDs:",S);const{data:k,error:L}=await W.from("business_addons").select(`
          *,
          service_addons (
            id,
            name,
            description,
            addon_type,
            default_price
          )
        `).eq("business_id",l.business_id).eq("is_available",!0);console.log("fetchBusinessServices: business_addons query result:",{addonsData:k,addonsError:L}),L&&console.error("fetchBusinessServices: Error fetching business addons:",JSON.stringify(L));const se=(h||[]).map(Z=>({...Z,booking_count:0}));console.log("fetchBusinessServices: Final services with bookings:",se),gr(se),wa(k||[])}catch(h){console.error("fetchBusinessServices: Caught error:",JSON.stringify(h)),vt(`Failed to load services: ${h.message}`),gr([]),wa([])}finally{ls(!1)}},eg=async()=>{if(!l){console.log("fetchProviderAddons: No provider available");return}Qx(!0),bo("");try{const{directSupabaseAPI:h}=await ms(async()=>{const{directSupabaseAPI:se}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:se}},[]),j=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/service_addons?select=*",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}});let S=[];j.ok&&(S=await j.json());const k=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/provider_addons?provider_id=eq.${l.id}&select=*,service_addons(*)`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${h.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}});let L=[];k.ok&&(L=await k.json()),JS(S),bu(L)}catch(h){console.error("fetchProviderAddons: Error:",h),bo(`Failed to load add-ons: ${h.message}`)}finally{Qx(!1)}},f4=async(h,j)=>{if(l){tp(!0),bo("");try{const{directSupabaseAPI:S}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),k=Kx.find(L=>L.addon_id===h);if(k){const L=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/provider_addons?id=eq.${k.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify({is_active:j})});if(!L.ok){const se=await L.text();throw new Error(`Failed to update add-on: ${se}`)}bu(se=>se.map(Z=>Z.id===k.id?{...Z,is_active:j}:Z))}else if(j){const L=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/provider_addons",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify({provider_id:l.id,addon_id:h,is_active:!0})});if(!L.ok){const ie=await L.text();throw new Error(`Failed to add add-on: ${ie}`)}const se=await L.json(),Z=Ol.find(ie=>ie.id===h),me={...se[0],service_addons:Z};bu(ie=>[...ie,me])}sp(j?"Add-on enabled successfully!":"Add-on disabled successfully!")}catch(S){console.error("handleToggleAddon: Error:",S),bo(`Failed to ${j?"enable":"disable"} add-on: ${S.message}`)}finally{tp(!1)}}},x4=h=>{var j,S,k;Nu({business_price:((j=h.business_price)==null?void 0:j.toString())||((k=(S=h.services)==null?void 0:S.min_price)==null?void 0:k.toString())||"",delivery_type:h.delivery_type||"business_location"}),KS(h),Ul(!0)},p4=async()=>{var h;if(!(!lt||!(l!=null&&l.business_id)||!r&&!a)){Ca(!0),nr("");try{const j=parseFloat(ql.business_price),S=((h=lt==null?void 0:lt.services)==null?void 0:h.min_price)||0;if(j<S)throw new Error(`Business price ($${j}) cannot be lower than the service's minimum price ($${S})`);const{directSupabaseAPI:k}=await ms(async()=>{const{directSupabaseAPI:Z}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:Z}},[]),L={business_price:j,delivery_type:ql.delivery_type},se=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${lt.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${k.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(L)});if(!se.ok){let Z="Unknown error";try{Z=await se.text()}catch(me){console.error("Error reading response text:",me),Z=`HTTP ${se.status} ${se.statusText}`}throw Z.includes("check constraint")||Z.includes("violates check constraint")||Z.includes("business_price")||Z.includes("minimum price")?new Error("The business price cannot be lower than the service's minimum price. Please enter a higher amount."):Z.includes("constraint")&&Z.includes("price")?new Error("Invalid price value. Please check the pricing constraints and try again."):new Error(`Failed to update service: ${Z}`)}gr(Z=>Z.map(me=>me.id===lt.id?{...me,business_price:L.business_price,delivery_type:L.delivery_type}:me)),ra("Service updated successfully!"),Ul(!1),setTimeout(()=>ra(""),3e3)}catch(j){console.error("Error updating business service:",j),nr(`Failed to update service: ${j.message}`)}finally{Ca(!1)}}},g4=h=>{var j,S,k;ip({custom_price:((j=h.custom_price)==null?void 0:j.toString())||((k=(S=h.service_addons)==null?void 0:S.default_price)==null?void 0:k.toString())||""}),QS(h),zl(!0)},v4=async()=>{if(!(!ir||!(l!=null&&l.business_id)||!r&&!a)){Ca(!0),nr("");try{if(!Vl.custom_price||Vl.custom_price.trim()==="")throw new Error("A price must be set for the addon before saving.");const h=parseFloat(Vl.custom_price);if(isNaN(h)||h<=0)throw new Error("Please enter a valid price greater than $0.");const{directSupabaseAPI:j}=await ms(async()=>{const{directSupabaseAPI:L}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:L}},[]),S={custom_price:h},k=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_addons?id=eq.${ir.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${j.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(S)});if(!k.ok){const L=await k.text();throw new Error(`Failed to update add-on: ${L}`)}wa(L=>L.map(se=>se.id===ir.id?{...se,custom_price:S.custom_price}:se)),ra("Add-on updated successfully!"),zl(!1),setTimeout(()=>ra(""),3e3)}catch(h){console.error("Error updating business add-on:",h),nr(`Failed to update add-on: ${h.message}`)}finally{Ca(!1)}}},xc=async()=>{var h,j;if(!(l!=null&&l.business_id)||!r&&!a){console.log("fetchBusinessServicesAndAddons: No business_id available or not owner");return}ap(!0),nr("");try{const{directSupabaseAPI:S}=await ms(async()=>{const{directSupabaseAPI:br}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:br}},[]);console.log("Fetching business services and add-ons for business:",l.business_id);const k=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/services?select=id,name,description,min_price,duration_minutes,is_active,service_subcategories(id,service_subcategory_type,service_categories(id,service_category_type,description))&is_active=eq.true&order=name",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}}),L=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/service_addons?select=*&is_active=eq.true&order=name",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}}),se=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?business_id=eq.${l.business_id}&select=id,business_id,service_id,business_price,is_active,delivery_type,created_at,services(id,name,description,min_price,duration_minutes,service_subcategories(id,service_subcategory_type,service_categories(id,service_category_type,description)))`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}}),Z=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_addons?business_id=eq.${l.business_id}&select=id,business_id,addon_id,custom_price,is_available,created_at,service_addons(id,name,description,image_url)`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}}),me=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/service_addon_eligibility?select=*",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${S.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}});if([k,L,se,Z,me].filter(br=>br.status===401).length>0)throw console.log("Authentication errors detected, throwing JWT error"),new Error("JWT expired - authentication required");const he=k.ok?await k.json():[],ve=L.ok?await L.json():[],_e=se.ok?await se.json():[],Ve=Z.ok?await Z.json():[],zs=me.ok?await me.json():[];console.log("API Responses:",{servicesResponse:{ok:k.ok,status:k.status},addonsResponse:{ok:L.ok,status:L.status},businessServicesResponse:{ok:se.ok,status:se.status},businessAddonsResponse:{ok:Z.ok,status:Z.status},eligibilityResponse:{ok:me.ok,status:me.status}}),HS(he||[]),GS(ve||[]),Ll(_e||[]),gr(_e||[]),Bl(Ve||[]),wa(Ve||[]),XS(zs||[]),console.log("Business services and add-ons loaded:",{services:(he==null?void 0:he.length)||0,addons:(ve==null?void 0:ve.length)||0,businessServices:(_e==null?void 0:_e.length)||0,businessAddons:(Ve==null?void 0:Ve.length)||0,eligibility:(zs==null?void 0:zs.length)||0}),ra("Services and add-ons loaded successfully!"),setTimeout(()=>ra(""),3e3)}catch(S){if(console.error("fetchBusinessServicesAndAddons: Error:",S),(h=S.message)!=null&&h.includes("JWT")||(j=S.message)!=null&&j.includes("401")||S.status===401){console.log("JWT expired, attempting to refresh token...");try{const{data:k,error:L}=await W.auth.refreshSession();if(!L&&k.session){console.log("Session refreshed successfully, retrying request..."),setTimeout(()=>{xc()},1e3);return}}catch(k){console.error("Token refresh failed:",k)}nr("Your session has expired. Please refresh the page and sign in again.")}else nr(`Failed to load services and add-ons: ${S.message}`)}finally{ap(!1)}},sg=async(h,j,S,k)=>{if(console.log("handleToggleBusinessService called:",{serviceId:h,isActive:j,businessId:l==null?void 0:l.business_id,isOwner:r,isDispatcher:a,willReturn:!(l!=null&&l.business_id)||!r&&!a}),!(l!=null&&l.business_id)||!r&&!a){console.log("Exiting early - no business_id or not owner/dispatcher");return}Ca(!0),nr("");try{const{directSupabaseAPI:L}=await ms(async()=>{const{directSupabaseAPI:Z}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:Z}},[]);console.log("Toggle business service:",{serviceId:h,isActive:j,businessPrice:S,deliveryType:k});const se=Fl.find(Z=>Z.service_id===h);if(se&&!j){console.log("Removing service:",se.id);const Z=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${se.id}`,{method:"DELETE",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${L.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}});if(!Z.ok){const me=await Z.text();throw console.error("Delete service failed:",me),new Error(`Failed to remove service: ${me}`)}Ll(me=>me.filter(ie=>ie.id!==se.id)),await b4()}else if(se&&j){const Z={is_active:j};S!==void 0&&(Z.business_price=S),k&&(Z.delivery_type=k),console.log("Updating service:",se.id,Z);const me=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services?id=eq.${se.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${L.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(Z)});if(!me.ok){const ie=await me.text();throw console.error("Update service failed:",ie),new Error(`Failed to update service: ${ie}`)}Ll(ie=>ie.map(he=>he.id===se.id?{...he,...Z}:he))}else if(j&&S){const Z=yo.find(Ve=>Ve.id===h);if(!Z)throw new Error("Service not found");const me=Z.name.toLowerCase().includes("telemed")?"virtual":"business_location",ie={business_id:l.business_id,service_id:h,business_price:S,delivery_type:k||me,is_active:!0};console.log("Adding new service:",ie);const he=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_services",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${L.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(ie)});if(!he.ok){const Ve=await he.text();throw console.error("Add service failed:",Ve),new Error(`Failed to add service: ${Ve}`)}const _e={...(await he.json())[0],services:Z};Ll(Ve=>[...Ve,_e])}ra(j?"Service added successfully!":"Service removed successfully!")}catch(L){console.error("handleToggleBusinessService: Error:",L),nr(`Failed to ${j?"add":"remove"} service: ${L.message}`)}finally{Ca(!1)}},Gu=async(h,j,S)=>{if(!(!(l!=null&&l.business_id)||!r&&!a)){Ca(!0),nr("");try{const{directSupabaseAPI:k}=await ms(async()=>{const{directSupabaseAPI:se}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:se}},[]);console.log("Toggle business addon:",{addonId:h,isActive:j,customPrice:S});const L=$l.find(se=>se.addon_id===h);if(L&&!j){console.log("Removing addon:",L.id);const se=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_addons?id=eq.${L.id}`,{method:"DELETE",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${k.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json"}});if(!se.ok){const Z=await se.text();throw console.error("Delete addon failed:",Z),new Error(`Failed to remove add-on: ${Z}`)}Bl(Z=>Z.filter(me=>me.id!==L.id))}else if(L&&j){const se={is_available:j};S!==void 0&&(se.custom_price=S),console.log("Updating addon:",L.id,se);const Z=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_addons?id=eq.${L.id}`,{method:"PATCH",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${k.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(se)});if(!Z.ok){const me=await Z.text();throw console.error("Update addon failed:",me),new Error(`Failed to update add-on: ${me}`)}Bl(me=>me.map(ie=>ie.id===L.id?{...ie,...se}:ie))}else if(j){const se=ju.find(ve=>ve.id===h);if(!se)throw new Error("Add-on not found");const Z={business_id:l.business_id,addon_id:h,custom_price:S||null,is_available:!0};console.log("Adding new addon:",Z);const me=await fetch("https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/business_addons",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:`Bearer ${k.currentAccessToken||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs"}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(Z)});if(!me.ok){const ve=await me.text();throw console.error("Add addon failed:",ve),new Error(`Failed to add add-on: ${ve}`)}const he={...(await me.json())[0],service_addons:se};Bl(ve=>[...ve,he])}ra(j?"Add-on added successfully!":"Add-on removed successfully!")}catch(k){console.error("handleToggleBusinessAddon: Error:",k),nr(`Failed to ${j?"add":"remove"} add-on: ${k.message}`)}finally{Ca(!1)}}},b4=async()=>{const h=Fl.map(S=>S.service_id),j=$l.filter(S=>{const k=rp.find(L=>L.addon_id===S.addon_id);return k&&!h.includes(k.service_id)});for(const S of j)await Gu(S.addon_id,!1)},y4=()=>{nr(""),ra("")},j4=async()=>{var h,j,S,k,L;if(m){Is(!0),Rt(""),Rr("");try{const{directSupabaseAPI:se}=await ms(async()=>{const{directSupabaseAPI:he}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:he}},[]),Z={business_name:((h=xs.business_name)==null?void 0:h.trim())||"",contact_email:((j=xs.contact_email)==null?void 0:j.trim())||"",phone:((S=xs.phone)==null?void 0:S.trim())||"",website_url:((k=xs.website_url)==null?void 0:k.trim())||"",logo_url:((L=xs.logo_url)==null?void 0:L.trim())||null,is_active:xs.is_active,is_featured:xs.is_featured,service_categories:Array.isArray(xs.service_categories)&&xs.service_categories.length>0?xs.service_categories.filter(he=>typeof he=="string"&&he.trim().length>0):[],service_subcategories:Array.isArray(xs.service_subcategories)&&xs.service_subcategories.length>0?xs.service_subcategories.filter(he=>typeof he=="string"&&he.trim().length>0):[]},me=["beauty","fitness","therapy","healthcare"],ie=["hair_and_makeup","spray_tan","esthetician","massage_therapy","iv_therapy","physical_therapy","nurse_practitioner","phycisian","chiropractor","yoga_instructor","pilates_instructor","personal_trainer"];if(Z.service_categories){const he=Z.service_categories.filter(ve=>!me.includes(ve));if(he.length>0)throw new Error(`Invalid service categories: ${he.join(", ")}`)}if(Z.service_subcategories){console.log("Validating subcategories:",Z.service_subcategories),console.log("Valid subcategories:",ie);const he=Z.service_subcategories.filter(ve=>!ie.includes(ve));he.length>0&&console.warn(`Some subcategories may not be in the database: ${he.join(", ")}`)}if(console.log("Saving business details with data:",JSON.stringify(Z,null,2)),console.log("Business ID:",m.id),console.log("Service categories:",Z.service_categories),console.log("Service subcategories:",Z.service_subcategories),!Z.business_name)throw new Error("Business name is required");if(Z.contact_email&&Z.contact_email.length>0){const he=Z.contact_email.replace(/[\u200B-\u200D\uFEFF]/g,"").trim();if(Z.contact_email=he,!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(he))throw console.error("Email validation failed for:",he),new Error(`Please enter a valid contact email address: "${he}"`)}else Z.contact_email=null;if(!(m!=null&&m.id))throw new Error("Business ID is missing");await se.updateBusinessProfile(m.id,Z),x({...m,...Z}),Rr("Business details updated successfully!")}catch(se){console.error("Business details save error:",se);let Z="Failed to update business details";se!=null&&se.message?Z=se.message:typeof se=="string"&&(Z=se),Rt(Z)}finally{Is(!1)}}},w4=async()=>{if(m!=null&&m.id){lp(!0),Dt("");try{const{data:h,error:j}=await W.from("business_stripe_tax_info").select("*").eq("business_id",m.id).single();if(j&&j.code!=="PGRST116")throw j;h&&op({legal_business_name:h.legal_business_name||"",tax_id:h.tax_id||"",tax_id_type:h.tax_id_type||"",tax_address_line1:h.tax_address_line1||"",tax_address_line2:h.tax_address_line2||"",tax_city:h.tax_city||"",tax_state:h.tax_state||"",tax_postal_code:h.tax_postal_code||"",tax_country:h.tax_country||"US",business_entity_type:h.business_entity_type||"",tax_contact_name:h.tax_contact_name||"",tax_contact_email:h.tax_contact_email||"",tax_contact_phone:h.tax_contact_phone||""})}catch(h){console.error("Error loading tax info:",h),Dt("Failed to load tax information")}finally{lp(!1)}}},N4=async()=>{var h,j,S,k,L,se,Z,me,ie;if(m!=null&&m.id){if(!((h=js.legal_business_name)!=null&&h.trim())){Dt("Legal business name is required");return}if(!((j=js.tax_id)!=null&&j.trim())){Dt("Tax ID is required");return}if(!js.tax_id_type){Dt("Tax ID type is required");return}if(!js.business_entity_type){Dt("Business entity type is required");return}if(!((S=js.tax_contact_name)!=null&&S.trim())){Dt("Tax contact name is required");return}if(!((k=js.tax_contact_email)!=null&&k.trim())){Dt("Tax contact email is required");return}if(!((L=js.tax_address_line1)!=null&&L.trim())){Dt("Tax address is required");return}if(!((se=js.tax_city)!=null&&se.trim())){Dt("Tax city is required");return}if(!js.tax_state){Dt("Tax state is required");return}if(!((Z=js.tax_postal_code)!=null&&Z.trim())){Dt("Tax ZIP code is required");return}mp(!0),Dt(""),up("");try{const he={business_id:m.id,legal_business_name:js.legal_business_name.trim(),tax_id:js.tax_id.trim(),tax_id_type:js.tax_id_type,tax_address_line1:js.tax_address_line1.trim(),tax_address_line2:((me=js.tax_address_line2)==null?void 0:me.trim())||null,tax_city:js.tax_city.trim(),tax_state:js.tax_state,tax_postal_code:js.tax_postal_code.trim(),tax_country:js.tax_country||"US",business_entity_type:js.business_entity_type,tax_contact_name:js.tax_contact_name.trim(),tax_contact_email:js.tax_contact_email.trim(),tax_contact_phone:((ie=js.tax_contact_phone)==null?void 0:ie.trim())||null,updated_at:new Date().toISOString()},{data:ve}=await W.from("business_stripe_tax_info").select("id").eq("business_id",m.id).single();if(ve){const{error:_e}=await W.from("business_stripe_tax_info").update(he).eq("business_id",m.id);if(_e)throw _e}else{const{error:_e}=await W.from("business_stripe_tax_info").insert(he);if(_e)throw _e}up("Tax information saved successfully!")}catch(he){console.error("Error saving tax info:",he),Dt(he.message||"Failed to save tax information")}finally{mp(!1)}}},lr=(h,j)=>{op(S=>({...S,[h]:j}))},tg=async()=>{if(m!=null&&m.id){jp(!0),Np("");try{const{data:h,error:j}=await W.from("business_documents").select(`
          id,
          document_type,
          document_name,
          file_url,
          file_size_bytes,
          verification_status,
          verified_at,
          rejection_reason,
          expiry_date,
          created_at
        `).eq("business_id",m.id).order("created_at",{ascending:!1});if(j)throw j;aC(h||[])}catch(h){console.error("Error loading business documents:",h),Np("Failed to load business documents")}finally{jp(!1)}}},_4=async()=>{var h;if(!(!(l!=null&&l.id)||!(m!=null&&m.id))){Sp(!0),kp("");try{console.log("Loading provider services for provider:",l.id);const{data:j,error:S}=await W.from("provider_services").select(`
          *,
          services!inner(
            id,
            name,
            min_price,
            description,
            is_active,
            service_subcategories(
              service_subcategory_type,
              service_categories(service_category_type)
            )
          )
        `).eq("provider_id",l.id);if(S)throw console.error("Error loading assigned services:",{error:S,message:S.message,details:S.details,hint:S.hint,code:S.code}),new Error(`Failed to load assigned services: ${S.message||JSON.stringify(S)}`);console.log("Assigned services loaded:",j),console.log("Attempting to load available services...");const{data:k,error:L}=await W.from("services").select(`
          id,
          name,
          min_price,
          description,
          is_active,
          service_subcategories(
            service_subcategory_type,
            service_categories(service_category_type)
          )
        `).eq("is_active",!0);if(L)throw console.error("Error loading available services:",{error:L,message:L.message,details:L.details,hint:L.hint,code:L.code}),new Error(`Failed to load available services: ${L.message||JSON.stringify(L)}`);console.log("Available services loaded:",k);let se=[];try{console.log("Attempting to load assigned addons for provider:",l.id);const{data:me,error:ie}=await W.from("provider_addons").select(`
            id,
            provider_id,
            addon_id,
            is_active,
            created_at,
            service_addons(
              id,
              name,
              description,
              is_active
            )
          `).eq("provider_id",l.id);if(me&&me.length>0&&(m!=null&&m.id)){const he=me.map(_e=>_e.addon_id),{data:ve}=await W.from("business_addons").select("addon_id, custom_price").eq("business_id",m.id).in("addon_id",he);ve&&me.forEach(_e=>{const Ve=ve.find(zs=>zs.addon_id===_e.addon_id);_e.custom_price=(Ve==null?void 0:Ve.custom_price)||null})}ie?console.warn("Could not load assigned addons (table may not exist):",ie):(se=me||[],console.log("Assigned addons loaded:",se))}catch(me){console.warn("Provider addons table not available:",me)}let Z=[];try{console.log("Attempting to load business addons for business:",m.id);const{data:me,error:ie}=await W.from("business_addons").select(`
            id,
            addon_id,
            custom_price,
            is_available,
            service_addons(
              id,
              name,
              description,
              is_active
            )
          `).eq("business_id",m.id).eq("is_available",!0);ie?console.warn("Could not load business addons (table may not exist):",ie):(Z=me||[],console.log("Available business addons loaded:",Z))}catch(me){console.warn("Business addons table not available:",me)}iC(j||[]),oC(k||[]),lC(se||[]),cC(Z||[])}catch(j){console.error("Error loading provider services:",j);const S=(j==null?void 0:j.message)||((h=j==null?void 0:j.error)==null?void 0:h.message)||JSON.stringify(j)||"Failed to load provider services";kp(`Failed to load provider services: ${S}`)}finally{Sp(!1)}}},S4=h=>{switch(h){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C4=h=>{if(!h)return"Unknown size";const j=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(h)/Math.log(1024));return Math.round(h/Math.pow(1024,S)*100)/100+" "+j[S]},k4=async()=>{var h,j,S,k,L;if(m!=null&&m.id){ka(!0),St("");try{const se={business_id:m.id,user_id:s==null?void 0:s.id,business_name:m.business_name||"Your Business"};console.log("Sending Plaid request:",se);const Z=await fetch("/api/plaid/create-link-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(h=(await W.auth.getSession()).data.session)==null?void 0:h.access_token}`},body:JSON.stringify(se)});if(!Z.ok){if(console.error("Plaid API request failed:",Z.status,Z.statusText),Z.status===404){St("Plaid integration service is not available. The Vercel function needs to be deployed.");return}let ie=`HTTP ${Z.status}: ${Z.statusText}`;try{const he=Z.headers.get("content-type");if(he&&he.includes("application/json")){const ve=await Z.json();console.error("Plaid API Error Response:",ve),ie=ve.error||ve.message||ie}}catch(he){console.error("Could not read error response:",he)}throw new Error(ie)}const me=await Z.json();if(me.link_token)tC(me.link_token),Hl("Plaid Link token created successfully! Opening Plaid Link..."),setTimeout(async()=>{try{(await rg(me.link_token)).open()}catch(ie){console.error("Error auto-opening Plaid Link:",ie),St('Link token created but failed to open Plaid Link. Please try the "Open Plaid Link" button.')}},1e3);else throw new Error("No link token received from server")}catch(se){console.error("Error creating Plaid link token:",se),(j=se.message)!=null&&j.includes("404")||(S=se.message)!=null&&S.includes("not found")?St("Plaid integration service is not available yet. The Vercel function needs to be deployed."):(k=se.message)!=null&&k.includes("not yet implemented")||(L=se.message)!=null&&L.includes("text/html")?St(`Plaid credentials configured (Client ID: ${G$}). Backend endpoint configuration in progress.`):St(se.message||"Failed to initialize bank connection")}finally{ka(!1)}}},rg=async h=>(window.Plaid||await new Promise((S,k)=>{const L=document.createElement("script");L.src="https://cdn.plaid.com/link/v2/stable/link-initialize.js",L.onload=S,L.onerror=k,document.head.appendChild(L)}),await new Promise(S=>setTimeout(S,100)),window.Plaid.create({token:h,receivedRedirectUri:null,onLoad:()=>{console.log("Plaid Link loaded successfully"),setTimeout(()=>{const S=document.querySelector("[data-plaid-link-modal]");S&&S.focus()},500)},onSuccess:(S,k)=>{console.log("Plaid Success:",{public_token:S,metadata:k}),P4(S,k)},onExit:(S,k)=>{S!=null?(console.error("Plaid Exit Error:",S),St(S.display_message||"Connection cancelled")):console.log("User exited Plaid Link"),ka(!1)},onEvent:(S,k)=>{console.log("Plaid Event:",S,k),S==="OPEN"&&(console.log("Plaid Link opened - ensuring proper focus"),setTimeout(()=>{const L=document.querySelector('input[type="text"], input[type="search"]');L&&L.focus()},1e3))}})),E4=async()=>{if(!_u){St("No link token available. Please try creating a new connection.");return}ka(!0),St("");try{const h=await rg(_u);document.activeElement&&document.activeElement.blur(),setTimeout(()=>{h.open(),ka(!1)},200)}catch(h){console.error("Error opening Plaid Link:",h),St("Failed to load Plaid Link. Please try again."),ka(!1)}},P4=async(h,j)=>{var S,k,L;ka(!0),St("");try{const se=await fetch("/api/plaid/exchange-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(S=(await W.auth.getSession()).data.session)==null?void 0:S.access_token}`},body:JSON.stringify({public_token:h,business_id:m.id,account_id:j.account_id,institution:j.institution})});if(!se.ok){const me=await se.json();throw new Error(me.error||"Failed to connect bank account")}const Z=await se.json();if(Z.success){const me=(k=Z.accounts)==null?void 0:k.find(ie=>ie.account_id===j.account_id);Jl({bank_connected:!0,bank_name:((L=j.institution)==null?void 0:L.name)||"Connected Bank",account_last4:(me==null?void 0:me.mask)||"****",payout_schedule:"Daily",transfer_speed:"Standard (2-3 days)",stripe_account_id:null,payout_enabled:!0}),Hl("Bank account connected successfully!"),setTimeout(()=>{Gl(!1)},2e3)}else throw new Error("Failed to process bank account connection")}catch(se){console.error("Error connecting bank account:",se),St(se.message||"Failed to connect bank account")}finally{ka(!1)}},T4=async()=>{var h,j;if(m!=null&&m.id){hp(!0),fp("");try{await new Promise(k=>setTimeout(k,500)),Jl({bank_connected:!1,bank_name:null,account_last4:null,payout_schedule:"Daily",transfer_speed:"Standard (2-3 days)",stripe_account_id:null,payout_enabled:!1})}catch(S){console.error("Error loading payout info:",S),(h=S.message)!=null&&h.includes("not yet implemented")||(j=S.message)!=null&&j.includes("Unexpected token")?(console.log("Payout API endpoints not yet implemented - using mock data"),Jl({bank_connected:!1,bank_name:null,account_last4:null,payout_schedule:"Daily",transfer_speed:"Standard (2-3 days)",stripe_account_id:null,payout_enabled:!1})):fp(S.message||"Failed to load payout information")}finally{hp(!1)}}},I4=()=>{Gl(!0),St(""),Hl("")},A4=async()=>{if(m!=null&&m.id){vp(!0),St("");try{await new Promise(h=>setTimeout(h,1e3)),Jl({bank_connected:!1,bank_name:null,account_last4:null,payout_schedule:"Daily",transfer_speed:"Standard (2-3 days)",stripe_account_id:null,payout_enabled:!1}),Hl("Bank account disconnected successfully! (Development mode)")}catch(h){console.error("Error disconnecting bank account:",h),St(h.message||"Failed to disconnect bank account")}finally{vp(!1)}}},Xu=(h,j)=>{const S=new Date,k=new Date(S.getFullYear(),S.getMonth(),S.getDate()),L=new Date(S.getFullYear(),S.getMonth(),S.getDate(),23,59,59);return h.filter(se=>{var ie;const Z=new Date(se.booking_date),me=(ie=se.booking_status)==null?void 0:ie.toLowerCase();switch(j){case"all":return!0;case"present":return Z>=k&&Z<=L?!0:Z<k?me!=="cancelled"&&me!=="completed":!1;case"future":return Z>L;case"past":return Z<k&&(me==="completed"||me==="cancelled");default:return!0}})},Eo=(h=!0)=>{let j=f;if(h&&(j=Xu(f,Rx)),(r||a)&&ho!=="all"&&(j=j.filter(S=>S.provider_id===ho)),cu!=="all"&&(j=j.filter(S=>S.booking_status===cu)),zn.trim()){const S=zn.toLowerCase().trim();j.length,j=j.filter(k=>{var me,ie,he,ve,_e;const L=((me=k.booking_reference)==null?void 0:me.toLowerCase())||"",se=(ie=k.customer_profiles)!=null&&ie.first_name&&((he=k.customer_profiles)!=null&&he.last_name)?`${k.customer_profiles.first_name} ${k.customer_profiles.last_name}`.toLowerCase():(k.guest_name||"").toLowerCase(),Z=((_e=(ve=k.customer_profiles)==null?void 0:ve.email)==null?void 0:_e.toLowerCase())||"";return L.includes(S)||se.includes(S)||Z.includes(S)})}return j},ag=()=>{if(!cn)return[];const h=cn.toISOString().split("T")[0];let j=f.filter(S=>new Date(S.booking_date).toISOString().split("T")[0]===h);if(zn.trim()){const S=zn.toLowerCase().trim();j=j.filter(k=>{var me,ie,he,ve,_e;const L=((me=k.booking_reference)==null?void 0:me.toLowerCase())||"",se=(ie=k.customer_profiles)!=null&&ie.first_name&&((he=k.customer_profiles)!=null&&he.last_name)?`${k.customer_profiles.first_name} ${k.customer_profiles.last_name}`.toLowerCase():(k.guest_name||"").toLowerCase(),Z=((_e=(ve=k.customer_profiles)==null?void 0:ve.email)==null?void 0:_e.toLowerCase())||"";return L.includes(S)||se.includes(S)||Z.includes(S)})}return j.sort((S,k)=>S.start_time.localeCompare(k.start_time))},Yu=async h=>{console.log("Accept booking called with ID:",h),console.log("Current user:",s),console.log("User type:",{isOwner:r,isDispatcher:a,isProvider:n});const j=f.find(S=>S.id===h);if(!j){i({title:"Error",description:"Booking not found.",variant:"destructive"});return}if(!j.provider_id){i({title:"Provider Required",description:"A provider must be assigned before confirming this booking.",variant:"destructive"});return}try{console.log("Attempting to update booking status to confirmed...");const{error:S}=await W.from("bookings").update({booking_status:"confirmed"}).eq("id",h);if(S)throw S;p(k=>k.map(L=>L.id===h?{...L,booking_status:"confirmed"}:L)),i({title:"Booking Accepted",description:"The booking has been confirmed successfully."})}catch(S){console.error("Error accepting booking - Full error object:",S),console.error("Error type:",typeof S),console.error("Error keys:",Object.keys(S||{}));let k="Unknown error occurred";if(S)if(typeof S=="string")k=S;else if(S.message)k=S.message;else if(S.error_description)k=S.error_description;else if(S.details)k=S.details;else if(S.hint)k=S.hint;else if(S.code)k=`Database error (${S.code})`;else try{k=JSON.stringify(S)}catch{k="Unable to parse error details"}console.error("Parsed error message:",k),i({title:"Error Accepting Booking",description:`Failed to accept booking: ${k}`,variant:"destructive"})}},Zu=h=>{pu(h),Rl(""),Ml(!0)},M4=async()=>{if(!Dr||!xo.trim()){i({title:"Decline Reason Required",description:"Please provide a reason for declining this booking.",variant:"destructive"});return}try{const{error:h}=await W.from("bookings").update({booking_status:"declined",decline_reason:xo.trim()}).eq("id",Dr.id);if(h)throw h;p(j=>j.map(S=>S.id===Dr.id?{...S,booking_status:"declined",decline_reason:xo.trim()}:S)),Ml(!1),pu(null),Rl(""),i({title:"Booking Declined",description:"The booking has been declined with reason provided to customer."})}catch(h){console.error("Error declining booking - Full error object:",h),console.error("Error type:",typeof h),console.error("Error keys:",Object.keys(h||{}));let j="Unknown error occurred";if(h)if(typeof h=="string")j=h;else if(h.message)j=h.message;else if(h.error_description)j=h.error_description;else if(h.details)j=h.details;else if(h.hint)j=h.hint;else if(h.code)j=`Database error (${h.code})`;else try{j=JSON.stringify(h)}catch{j="Unable to parse error details"}console.error("Parsed error message:",j),i({title:"Error Declining Booking",description:`Failed to decline booking: ${j}`,variant:"destructive"})}},ng=async h=>{console.log("Complete booking called with ID:",h);const j=f.find(S=>S.id===h);if(!j){i({title:"Error",description:"Booking not found.",variant:"destructive"});return}if(!j.provider_id){i({title:"Provider Required",description:"A provider must be assigned before completing this booking.",variant:"destructive"});return}try{console.log("Attempting to update booking status to completed...");const{error:S}=await W.from("bookings").update({booking_status:"completed"}).eq("id",h);if(S)throw S;p(k=>k.map(L=>L.id===h?{...L,booking_status:"completed"}:L)),i({title:"Booking Completed",description:"The booking has been marked as completed successfully."})}catch(S){console.error("Error completing booking:",S);let k="Unknown error occurred";if(S)if(typeof S=="string")k=S;else if(S.message)k=S.message;else if(S.error_description)k=S.error_description;else if(S.details)k=S.details;else if(S.hint)k=S.hint;else if(S.code)k=`Database error (${S.code})`;else try{k=JSON.stringify(S)}catch{k="Unable to parse error details"}i({title:"Error Completing Booking",description:`Failed to complete booking: ${k}`,variant:"destructive"})}},pc=async(h,j)=>{console.log("Assign provider called with booking ID:",h,"provider ID:",j);const S=f.find(k=>k.id===h);if(!S){i({title:"Error",description:"Booking not found.",variant:"destructive"});return}if(S.booking_status!=="pending"&&S.booking_status!=="confirmed"){i({title:"Cannot Modify Provider",description:`Provider assignment cannot be changed for bookings with status: ${S.booking_status}`,variant:"destructive"});return}if(!j&&S.booking_status==="confirmed"){i({title:"Cannot Unassign Provider",description:"Cannot remove provider from a confirmed booking. Change status to pending first.",variant:"destructive"});return}try{const{error:k}=await W.from("bookings").update({provider_id:j}).eq("id",h);if(k)throw k;p(L=>L.map(se=>{if(se.id===h)if(j){const Z=dn.find(me=>me.id===j);return{...se,provider_id:j,providers:Z?{first_name:Z.first_name,last_name:Z.last_name,id:Z.id}:null}}else return{...se,provider_id:null,providers:null};return se})),i({title:j?"Provider Assigned":"Provider Unassigned",description:j?"The provider has been assigned to this booking successfully.":"The provider has been unassigned from this booking."})}catch(k){console.error("Error assigning provider:",k);let L="Unknown error occurred";if(k)if(typeof k=="string")L=k;else if(k.message)L=k.message;else if(k.error_description)L=k.error_description;else if(k.details)L=k.details;else if(k.hint)L=k.hint;else if(k.code)L=`Database error (${k.code})`;else try{L=JSON.stringify(k)}catch{L="Unable to parse error details"}i({title:"Error Updating Provider Assignment",description:`Failed to update provider assignment: ${L}`,variant:"destructive"})}},R4=async()=>{if(!r&&!a){console.log("Not loading providers - user is not owner or dispatcher");return}if(!(l!=null&&l.business_id)){console.log("Not loading providers - no provider or business_id available");return}console.log("Loading providers for owner/dispatcher..."),console.log("Current provider business_id:",l.business_id);try{const{data:h,error:j}=await W.from("providers").select(`
          id,
          first_name,
          last_name,
          provider_role,
          location_id,
          is_active
        `).eq("business_id",l.business_id).eq("provider_role","provider").eq("is_active",!0);if(j){console.error("Error loading providers:",JSON.stringify(j,null,2)),console.error("Error details:",j.message||j.details||j);return}let S=h||[];if(h&&h.length>0){const k=[...new Set(h.map(L=>L.location_id).filter(Boolean))];if(k.length>0){const{data:L,error:se}=await W.from("business_locations").select("id, name, address_line1").in("id",k);!se&&L?S=h.map(Z=>({...Z,business_locations:L.find(me=>me.id===Z.location_id)||null})):(console.warn("Could not load location data:",se),S=h)}}console.log("Loaded providers:",(S==null?void 0:S.length)||0),OS(S||[]),Ku(S||[],Tl)}catch(h){console.error("Error loading providers (catch):",JSON.stringify(h,null,2)),console.error("Error details (catch):",h instanceof Error?h.message:h)}},Ku=(h,j)=>{let S;j==="all"?S=h:S=h.filter(k=>k.location_id===j),FS(S),ho!=="all"&&(S.some(L=>L.id===ho)||Dx("all"))},O4=h=>{SS(h),Ku(dn,h)},D4=async()=>{if(!(!r&&!a)){if(!(l!=null&&l.business_id)){console.log("loadAllBookings: No business_id available");return}console.log("Loading bookings for business_id:",l.business_id);try{const{data:h,error:j}=await W.from("providers").select("id").eq("business_id",l.business_id);if(j){console.error("Error loading business providers:",j),p([]);return}if(!h||h.length===0){console.log("No providers found for business"),p([]);return}const S=h.map(se=>se.id),{data:k,error:L}=await W.from("bookings").select(`
          *,
          services (
            id,
            name,
            min_price
          ),
          customer_profiles (
            id,
            first_name,
            last_name,
            email,
            image_url
          ),
          providers (
            id,
            first_name,
            last_name,
            location_id
          ),
          customer_locations (
            id,
            location_name,
            street_address,
            unit_number,
            city,
            state,
            zip_code,
            access_instructions
          ),
          business_locations (
            id,
            location_name,
            address_line1,
            address_line2,
            city,
            state,
            postal_code
          )
        `).or(`provider_id.in.(${S.join(",")}),provider_id.is.null`).order("booking_date",{ascending:!1}).limit(50);L?(console.error("Error loading all bookings:",JSON.stringify(L,null,2)),console.error("Booking error details:",L.message||L.details||L),p([])):(console.log("Loaded all bookings:",(k==null?void 0:k.length)||0),p(k||[]))}catch(h){console.error("Error loading all bookings (catch):",JSON.stringify(h,null,2)),console.error("Booking error details (catch):",h instanceof Error?h.message:h)}}},F4=async()=>{Mx(!0);try{const{data:h,error:j}=await W.from("service_categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});j?console.error("Error loading service categories:",j):vS(h||[]);const{data:S,error:k}=await W.from("service_subcategories").select(`
          *,
          category:service_categories(*)
        `).eq("is_active",!0);k?console.error("Error loading service subcategories:",k):yS(S||[])}catch(h){console.error("Error loading categories and subcategories:",h)}finally{Mx(!1)}};d.useEffect(()=>{s&&(L4(),F4())},[s]),d.useEffect(()=>{l&&(r||a)&&(console.log("Provider context available, loading providers and bookings..."),R4(),D4())},[l,r,a]),d.useEffect(()=>{(r||a)&&dn.length>0&&Ku(dn,Tl)},[Tl,dn,r,a]),d.useEffect(()=>{l&&ot==="locations"&&ue.length===0&&!Ie&&(console.log("Auto-fetching locations for active tab"),_o())},[l,ot]),d.useEffect(()=>{s&&ot==="providers"&&aa.length===0&&!Tu&&(console.log("Auto-fetching team providers for active tab"),Zn())},[s,ot]),d.useEffect(()=>{s&&ot==="addons"&&Ol.length===0&&!Dl&&(console.log("Auto-fetching provider add-ons for active tab"),eg())},[s,ot]),d.useEffect(()=>{s!=null&&s.business_id&&ot==="services-addons"&&yo.length===0&&!wu&&!jo.includes("session has expired")&&(console.log("Auto-fetching business services and add-ons for active tab"),xc())},[s,ot,jo]),d.useEffect(()=>{m!=null&&m.id&&ot==="financial"&&!eC&&(r||a)&&w4()},[m,ot]),d.useEffect(()=>{m!=null&&m.id&&ot==="financial"&&!sC&&(r||a)&&T4()},[m,ot]),d.useEffect(()=>{m!=null&&m.id&&ot==="business"&&!yp&&(r||a)&&tg()},[m,ot]),d.useEffect(()=>{s!=null&&s.business_id&&r&&(document.querySelector('[data-state="active"][value="subscription"]')||window.location.hash==="#subscription")&&KC()},[s==null?void 0:s.business_id,r]),d.useEffect(()=>{s!=null&&s.id&&(m!=null&&m.id)&&ot==="provider-services"&&!_p&&n&&!r&&!a&&_4()},[s,m,ot]);const L4=async()=>{var h,j;if(s)try{const{data:S,error:k}=await W.from("providers").select("*, business_id").eq("user_id",s.id).single();if(k||!S){I("Provider account not found. Please contact support.");return}u(S),$p({firstName:S.first_name||"",lastName:S.last_name||"",email:S.email||"",phone:S.phone||"",bio:S.bio||"",dateOfBirth:S.date_of_birth||"",experienceYears:((h=S.experience_years)==null?void 0:h.toString())||""}),Bp({notification_email:S.notification_email||"",notification_phone:S.notification_phone||""});let L=null,se=null;if(S.business_id){const ie=await W.from("business_profiles").select("*").eq("id",S.business_id).single();L=ie.data,se=ie.error}if(L){if(x(L),cc({business_name:L.business_name||"",business_type:L.business_type||"",contact_email:L.contact_email||"",phone:L.phone||"",website_url:L.website_url||"",logo_url:L.logo_url||"",verification_status:L.verification_status||"",verification_notes:L.verification_notes||"",is_active:L.is_active!==!1,is_featured:L.is_featured||!1,setup_completed:L.setup_completed||!1,service_categories:L.service_categories||[],service_subcategories:L.service_subcategories||[]}),L.business_hours){y(L.business_hours);const ie={Monday:{isOpen:!1,open:"09:00",close:"17:00"},Tuesday:{isOpen:!1,open:"09:00",close:"17:00"},Wednesday:{isOpen:!1,open:"09:00",close:"17:00"},Thursday:{isOpen:!1,open:"09:00",close:"17:00"},Friday:{isOpen:!1,open:"09:00",close:"17:00"},Saturday:{isOpen:!1,open:"09:00",close:"17:00"},Sunday:{isOpen:!1,open:"09:00",close:"17:00"}};Object.keys(ie).forEach(he=>{L.business_hours[he]&&(ie[he]={isOpen:!0,open:L.business_hours[he].open||"09:00",close:L.business_hours[he].close||"17:00"})}),Bu(ie)}if(S.business_id)try{const ie=[W.from("business_locations").select("location_name, created_at").eq("business_id",S.business_id).order("created_at",{ascending:!1}).limit(2),W.from("providers").select("first_name, last_name, created_at").eq("business_id",S.business_id).order("created_at",{ascending:!1}).limit(2)],[he,ve]=await Promise.all(ie),_e=[];he.data&&he.data.forEach(Ve=>{_e.push({action:"New location added",details:Ve.location_name||"Business location",time:qp(Ve.created_at),icon:ws})}),ve.data&&ve.data.forEach(Ve=>{_e.push({action:"Team member added",details:`${Ve.first_name} ${Ve.last_name} joined as Provider`,time:qp(Ve.created_at),icon:Ds})}),N(_e.slice(0,4))}catch(ie){console.error("Error fetching recent activity:",ie)}if(S&&S.business_id){console.log("fetchDashboardData: Fetching business services for business_id:",S.business_id);try{ls(!0),vt("");const{data:ie,error:he}=await W.from("business_services").select(`
                *,
                services (
                  id,
                  name,
                  description,
                  min_price,
                  duration_minutes,
                  subcategory_id,
                  service_subcategories (
                    id,
                    service_subcategory_type,
                    description,
                    category_id,
                    service_categories (
                      id,
                      service_category_type,
                      description
                    )
                  )
                )
              `).eq("business_id",S.business_id).order("created_at",{ascending:!1});if(console.log("fetchDashboardData: business_services query result:",{servicesData:ie,servicesError:he}),he)console.error("fetchDashboardData: Error fetching business services:",JSON.stringify(he,null,2)),vt(`Failed to load services: ${he.message||he.details||JSON.stringify(he)}`),gr([]);else{const Ve=(ie||[]).map(zs=>({...zs,booking_count:0}));console.log("fetchDashboardData: Setting business services:",Ve),gr(Ve)}const{data:ve,error:_e}=await W.from("business_addons").select(`
                *,
                service_addons (
                  id,
                  name,
                  description,
                  addon_type,
                  default_price
                )
              `).eq("business_id",S.business_id).eq("is_available",!0);console.log("fetchDashboardData: business_addons query result:",{addonsData:ve,addonsError:_e}),wa(ve||[])}catch(ie){console.error("fetchDashboardData: Error in services fetch:",ie),vt(`Failed to load services: ${ie.message}`),gr([]),wa([])}finally{ls(!1)}}else console.warn("fetchDashboardData: No business_id found in provider data"),vt("No business ID found for this provider");if(S.business_id){const[ie,he,ve]=await Promise.all([W.from("business_locations").select("id",{count:"exact"}).eq("business_id",S.business_id).eq("is_active",!0),W.from("providers").select("id",{count:"exact"}).eq("business_id",S.business_id).eq("is_active",!0),W.from("provider_services").select("service_id",{count:"exact"}).in("provider_id",((j=(await W.from("providers").select("id").eq("business_id",S.business_id).eq("is_active",!0)).data)==null?void 0:j.map(_e=>_e.id))||[]).eq("is_active",!0)]);g({activeLocations:ie.count||0,teamMembers:he.count||0,servicesOffered:ve.count||0})}else g({activeLocations:0,teamMembers:1,servicesOffered:0})}let Z=[],me=null;if(n&&!r&&!a){const ie=await W.from("bookings").select(`
          *,
          providers!inner(first_name, last_name),
          services(name, description),
          customer_profiles!inner(
            id,
            first_name,
            last_name,
            phone,
            email,
            image_url
          ),
          customer_locations(
            id,
            location_name,
            street_address,
            unit_number,
            city,
            state,
            zip_code,
            access_instructions
          ),
          business_locations(
            id,
            location_name,
            address_line1,
            address_line2,
            city,
            state,
            postal_code
          )
        `).eq("provider_id",S.id).order("created_at",{ascending:!1}).limit(10);Z=ie.data,me=ie.error}else if(S.business_id){const{data:ie,error:he}=await W.from("providers").select("id").eq("business_id",S.business_id);if(he){I("Failed to fetch business providers.");return}if(ie&&ie.length>0){const ve=ie.map(cr=>cr.id),_e=await W.from("bookings").select(`
              *,
              providers(first_name, last_name),
              services(name, description),
              customer_profiles!inner(
                id,
                first_name,
                last_name,
                phone,
                email,
                image_url
              ),
              customer_locations(
                id,
                location_name,
                street_address,
                unit_number,
                city,
                state,
                zip_code,
                access_instructions
              ),
              business_locations(
                id,
                location_name,
                address_line1,
                address_line2,
                city,
                state,
                postal_code
              )
            `).in("provider_id",ve).order("created_at",{ascending:!1}).limit(5),{data:Ve,error:zs}=await W.from("business_services").select("service_id").eq("business_id",S.business_id);let br=[];if(!zs&&Ve&&Ve.length>0){const cr=Ve.map(B4=>B4.service_id),ia=await W.from("bookings").select(`
                *,
                providers(first_name, last_name),
                services(name, description),
                customer_profiles!inner(
                  id,
                  first_name,
                  last_name,
                  phone,
                  email,
                  image_url
                ),
                customer_locations(
                  id,
                  location_name,
                  street_address,
                  unit_number,
                  city,
                  state,
                  zip_code,
                  access_instructions
                ),
                business_locations(
                  id,
                  location_name,
                  address_line1,
                  address_line2,
                  city,
                  state,
                  postal_code
                )
              `).is("provider_id",null).in("service_id",cr).order("created_at",{ascending:!1}).limit(5);!ia.error&&ia.data&&(br=ia.data)}const qr=[..._e.data||[],...br],Ts=new Set,hn=qr.filter(cr=>Ts.has(cr.id)?!1:(Ts.add(cr.id),!0));hn.sort((cr,ia)=>new Date(ia.created_at).getTime()-new Date(cr.created_at).getTime()),Z=hn,me=_e.error}}else Z=[],me=null;Z&&p(Z)}catch(S){console.error("Error fetching dashboard data:",S),I("An error occurred while loading dashboard data.")}finally{R(!1)}},$4=async()=>{try{await t(),vC("/provider-portal")}catch(h){console.error("Error signing out:",h)}};if(C)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx(Ds,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Loading your dashboard..."})]})});if(E)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ht,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-foreground/70 mb-6",children:E}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(P,{asChild:!0,variant:"outline",children:e.jsx(Ee,{to:"/provider-portal",children:"Back to Login"})}),e.jsx(P,{asChild:!0,children:e.jsx(Ee,{to:"/support",children:"Contact Support"})})]})]})});if(!s||!l)return null;const gc={monthlyEarnings:3250,completedBookings:47,avgRating:4.9,responseRate:98},vc=h=>{const j={confirmed:{label:"Confirmed",color:"bg-green-100 text-green-800"},pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},completed:{label:"Completed",color:"bg-gray-100 text-gray-800"},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-800"}};return j[h]||j.pending},bc=h=>({mobile:Kt,business:fs,virtual:pa})[h]||Kt;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-24 h-24 object-contain"})})}),e.jsx(ge,{variant:"secondary",className:"bg-roam-light-blue/20 text-roam-blue",children:"Provider Dashboard"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H$,{userType:"provider",showConnectionStatus:!0,maxNotifications:10}),b&&e.jsx(ge,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:"Live"}),e.jsxs(hy,{children:[e.jsx(fy,{asChild:!0,children:e.jsxs(P,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsxs(st,{className:"w-6 h-6",children:[e.jsx(it,{src:(l==null?void 0:l.image_url)||void 0,alt:l?`${l.first_name} ${l.last_name}`:"Provider"}),e.jsxs(tt,{className:"text-xs",children:[((og=(ig=l==null?void 0:l.first_name)==null?void 0:ig[0])==null?void 0:og.toUpperCase())||"P",((cg=(lg=l==null?void 0:l.last_name)==null?void 0:lg[0])==null?void 0:cg.toUpperCase())||""]})]}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:l?`${l.first_name} ${l.last_name}`:"Provider"}),e.jsx(od,{className:"w-4 h-4"})]})}),e.jsxs(Gh,{align:"end",className:"w-56",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsxs(st,{className:"w-8 h-8",children:[e.jsx(it,{src:(l==null?void 0:l.image_url)||void 0,alt:l?`${l.first_name} ${l.last_name}`:"Provider"}),e.jsxs(tt,{children:[((ug=(dg=l==null?void 0:l.first_name)==null?void 0:dg[0])==null?void 0:ug.toUpperCase())||"P",((hg=(mg=l==null?void 0:l.last_name)==null?void 0:mg[0])==null?void 0:hg.toUpperCase())||""]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:l?`${l.first_name} ${l.last_name}`:"Provider"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:(l==null?void 0:l.email)||"Provider Account"})]})]}),e.jsx(Xh,{}),e.jsxs(kt,{onClick:()=>du(!0),children:[e.jsx(At,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),e.jsxs(kt,{onClick:()=>uu(!0),children:[e.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Share Booking Page"]}),e.jsx(Xh,{}),e.jsxs(kt,{onClick:$4,className:"text-red-600",children:[e.jsx(Zk,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back,"," ",e.jsx("span",{className:"text-roam-blue",children:s.first_name||"Provider"})]}),e.jsx("p",{className:"text-foreground/70",children:"Here's what's happening with your business today."})]})}),e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 ${n&&!r&&!a?"lg:grid-cols-3":a?"md:grid-cols-3 lg:grid-cols-3":"md:grid-cols-2 lg:grid-cols-4"} gap-4 md:gap-6`,children:[r&&e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-roam-blue",children:["$",gc.monthlyEarnings.toLocaleString()]}),e.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),e.jsx(Zt,{className:"w-8 h-8 text-roam-blue"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Completed Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-roam-blue",children:gc.completedBookings}),e.jsx("p",{className:"text-xs text-green-600",children:"+8 this month"})]}),e.jsx(Qe,{className:"w-8 h-8 text-roam-blue"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Average Rating"}),e.jsx("p",{className:"text-2xl font-bold text-roam-blue",children:gc.avgRating}),e.jsx("p",{className:"text-xs text-gray-600",children:"From 127 reviews"})]}),e.jsx(us,{className:"w-8 h-8 text-roam-yellow fill-current"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"Response Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-roam-blue",children:[gc.responseRate,"%"]}),e.jsx("p",{className:"text-xs text-green-600",children:"Excellent performance"})]}),e.jsx(mt,{className:"w-8 h-8 text-roam-blue"})]})})})]}),e.jsxs(Pr,{value:ot,onValueChange:m4,className:"space-y-6",children:[e.jsx("div",{className:"lg:hidden mb-4",children:e.jsxs(hy,{children:[e.jsx(fy,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:"w-full justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l0,{className:"w-4 h-4"}),PS()]}),e.jsx(od,{className:"w-4 h-4"})]})}),e.jsxs(Gh,{align:"start",className:"w-56",children:[e.jsxs(kt,{onClick:()=>tr("bookings"),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Bookings"]}),e.jsxs(kt,{onClick:()=>tr("conversations"),children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Messages"]}),(r||a)&&e.jsxs(kt,{onClick:()=>tr("services-addons"),children:[e.jsx(wi,{className:"w-4 h-4 mr-2"}),"Services"]}),(r||a)&&e.jsxs(kt,{onClick:()=>tr("business"),children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Business"]}),(r||a)&&e.jsxs(kt,{onClick:()=>tr("providers"),children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Staff"]}),(r||a)&&e.jsxs(kt,{onClick:()=>tr("locations"),children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Locations"]}),n&&!r&&!a&&e.jsxs(kt,{onClick:()=>tr("provider-services"),children:[e.jsx(wi,{className:"w-4 h-4 mr-2"}),"Services"]}),e.jsxs(kt,{onClick:()=>tr("profile"),children:[e.jsx(At,{className:"w-4 h-4 mr-2"}),"Profile"]}),r&&e.jsxs(kt,{onClick:()=>tr("analytics"),children:[e.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Analytics"]}),r&&e.jsxs(kt,{onClick:()=>tr("financial"),children:[e.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Financial"]}),r&&e.jsxs(kt,{onClick:()=>tr("subscription"),children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Subscription"]})]})]})}),e.jsxs(fr,{className:`hidden lg:grid w-full ${n&&!r&&!a?"grid-cols-6":r?"grid-cols-11":"grid-cols-10"} lg:w-auto lg:inline-grid`,children:[e.jsx(hs,{value:"bookings",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Bookings"}),e.jsx(hs,{value:"conversations",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Messages"}),(r||a)&&e.jsx(hs,{value:"services-addons",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Services"}),(r||a)&&e.jsx(hs,{value:"business",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Business"}),(r||a)&&e.jsx(hs,{value:"providers",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Staff"}),(r||a)&&e.jsx(hs,{value:"locations",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Locations"}),n&&!r&&!a&&e.jsx(hs,{value:"provider-services",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Services"}),e.jsx(hs,{value:"profile",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Profile"}),r&&e.jsx(hs,{value:"analytics",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Analytics"}),r&&e.jsx(hs,{value:"financial",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Financial"}),r&&e.jsx(hs,{value:"subscription",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Subscription"})]}),e.jsxs(ds,{value:"bookings",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Calendar & Bookings"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(as,{value:lu,onValueChange:h=>wS(h),children:[e.jsx(ss,{className:"w-36",children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"month",children:"Month View"}),e.jsx(ce,{value:"week",children:"Week View"}),e.jsx(ce,{value:"hidden",children:"Hide Calendar"})]})]}),cn&&e.jsx(ge,{variant:"outline",className:"bg-roam-blue/10 text-roam-blue border-roam-blue",children:cn.toLocaleDateString()})]})]}),(r||a)&&e.jsxs("div",{className:"space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"location-filter",className:"text-sm font-medium",children:"Location:"}),e.jsxs(as,{value:Tl,onValueChange:O4,children:[e.jsx(ss,{className:"w-full",id:"location-filter",children:e.jsx(is,{placeholder:"Select location"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Locations"}),ue.map(h=>e.jsx(ce,{value:h.id,children:h.location_name},h.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"provider-filter",className:"text-sm font-medium",children:"Provider:"}),e.jsxs(as,{value:ho,onValueChange:Dx,children:[e.jsx(ss,{className:"w-full",id:"provider-filter",children:e.jsx(is,{placeholder:"Select provider"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Providers"}),DS.map(h=>{var j;return e.jsxs(ce,{value:h.id,children:[h.first_name," ",h.last_name,((j=h.business_locations)==null?void 0:j.name)&&` (${h.business_locations.name})`]},h.id)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"status-filter",className:"text-sm font-medium",children:"Status:"}),e.jsxs(as,{value:cu,onValueChange:CS,children:[e.jsx(ss,{className:"w-full",id:"status-filter",children:e.jsx(is,{placeholder:"Select status"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Statuses"}),e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"confirmed",children:"Confirmed"}),e.jsx(ce,{value:"in_progress",children:"In Progress"}),e.jsx(ce,{value:"completed",children:"Completed"}),e.jsx(ce,{value:"cancelled",children:"Cancelled"}),e.jsx(ce,{value:"no_show",children:"No Show"}),e.jsx(ce,{value:"declined",children:"Declined"})]})]})]})]}),e.jsxs("div",{className:"text-sm text-foreground/60 text-center md:text-left mt-4",children:["Showing ",Eo().length," bookings"]})]}),lu!=="hidden"&&e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-card",children:e.jsx(Y$,{bookings:f,viewType:lu,currentDate:NS,onDateChange:_S,selectedDate:cn,onDateSelect:Ox})}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(B,{htmlFor:"search-bookings",className:"text-sm font-medium",children:"Search:"}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ae,{id:"search-bookings",type:"text",placeholder:"Search by booking reference, customer name, or email...",value:zn,onChange:h=>Fx(h.target.value),className:"pl-10 w-full"})]}),zn&&e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>Fx(""),className:"text-gray-500 hover:text-gray-700",children:"Clear"})]}),cn&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Bookings for"," ",cn.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>Ox(null),children:"Clear Selection"})]}),e.jsx("div",{className:"space-y-4",children:ag().length>0?ag().map(h=>{var S,k,L,se,Z,me,ie;vc(h.booking_status);const j=bc(h.delivery_type||"business_location");return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:e.jsx(bs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:((S=h.services)==null?void 0:S.name)||"Service"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bs,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{className:"font-medium text-roam-blue",children:h.start_time})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(k=h.customer_profiles)!=null&&k.image_url?e.jsx("img",{src:h.customer_profiles.image_url,alt:"Customer",className:"w-6 h-6 rounded-full object-cover"}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-600",children:((se=(L=h.customer_profiles)==null?void 0:L.first_name)==null?void 0:se.charAt(0))||((Z=h.guest_name)==null?void 0:Z.charAt(0))||"?"})}),e.jsx("p",{className:"text-sm font-medium",children:(me=h.customer_profiles)!=null&&me.first_name&&((ie=h.customer_profiles)!=null&&ie.last_name)?`${h.customer_profiles.first_name} ${h.customer_profiles.last_name}`:h.guest_name||"Customer"})]}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(j,{className:"w-4 h-4 mt-0.5"}),e.jsx("div",{className:"flex flex-col",children:(()=>{const he=fc(h);return typeof he=="string"?e.jsx("span",{className:"text-sm text-gray-600",children:he}):e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:he.name}),he.address&&e.jsx("span",{className:"text-xs text-gray-500 block",children:he.address})]})})()})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(rd,{bookingId:h.id,currentStatus:h.booking_status,onStatusChange:he=>{console.log(`Selected date booking ${h.id} status changed to ${he}`)}}),e.jsxs("p",{className:"text-lg font-semibold text-roam-blue mt-2",children:["$",h.total_amount||"0"]}),(h.booking_status==="confirmed"||h.booking_status==="in_progress")&&e.jsxs(P,{size:"sm",variant:"outline",className:"mt-2 w-full border-blue-200 text-blue-600 hover:bg-blue-50",onClick:()=>Vu(h),children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Message"]})]})]}),h.booking_status==="pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>Yu(h.id),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Accept"]}),e.jsx(P,{size:"sm",variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>Zu(h),children:"Decline"})]})]})},h.id)}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(Qe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No bookings for this date"})]})})]}),(l==null?void 0:l.provider_role)==="provider"?e.jsxs(Pr,{value:Rx,onValueChange:jS,className:"space-y-4",children:[e.jsxs(fr,{className:"grid grid-cols-4 w-full max-w-md",children:[e.jsx(hs,{value:"all",children:"All"}),e.jsx(hs,{value:"present",children:"Present"}),e.jsx(hs,{value:"future",children:"Future"}),e.jsx(hs,{value:"past",children:"Past"})]}),["all","present","future","past"].map(h=>e.jsx(ds,{value:h,className:"space-y-4",children:e.jsx("div",{className:"space-y-4",children:Xu(Eo(!1),h).length>0?Xu(Eo(!1),h).map(j=>{var k,L,se,Z,me,ie,he,ve;vc(j.booking_status);const S=bc(j.delivery_type||"business_location");return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:((k=j.services)==null?void 0:k.name)||"Service"}),(r||a)&&(j.booking_status==="pending"||j.booking_status==="confirmed")?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsxs(as,{value:j.provider_id||"unassigned",onValueChange:_e=>{_e==="unassigned"?pc(j.id,null):pc(j.id,_e)},children:[e.jsx(ss,{className:"h-8 text-sm",children:e.jsx(is,{placeholder:"Assign Provider..."})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"unassigned",children:"Unassigned"}),dn.filter(_e=>_e.is_active).map(_e=>e.jsxs(ce,{value:_e.id,children:[_e.first_name," ",_e.last_name]},_e.id))]})]})})]}):j.providers?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm text-foreground/60",children:["Provider:"," ",j.providers.first_name," ",j.providers.last_name]})]}):e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-foreground/60",children:"Provider: Unassigned"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(L=j.customer_profiles)!=null&&L.image_url?e.jsx("img",{src:j.customer_profiles.image_url,alt:"Customer",className:"w-6 h-6 rounded-full object-cover"}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-600",children:((Z=(se=j.customer_profiles)==null?void 0:se.first_name)==null?void 0:Z.charAt(0))||((me=j.guest_name)==null?void 0:me.charAt(0))||"C"})}),e.jsx("p",{className:"text-sm text-foreground/60",children:(ie=j.customer_profiles)!=null&&ie.first_name&&((he=j.customer_profiles)!=null&&he.last_name)?`${j.customer_profiles.first_name} ${j.customer_profiles.last_name}`:j.guest_name||"Customer"}),((ve=j.customer_profiles)==null?void 0:ve.email)&&e.jsxs("span",{className:"text-xs text-foreground/40",children:["•"," ",j.customer_profiles.email]})]}),j.booking_reference&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded-lg border-l-4 border-roam-blue",children:[e.jsx(Qc,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Booking Reference"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:j.booking_reference})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),new Date(j.booking_date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),j.start_time]}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(S,{className:"w-4 h-4 mt-0.5"}),e.jsx("div",{className:"flex flex-col",children:(()=>{const _e=fc(j);return typeof _e=="string"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:_e}),e.jsx("button",{onClick:()=>Kn(_e),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium",children:_e.name}),_e.address&&e.jsx("span",{className:"text-xs text-foreground/50 block max-w-44 truncate",children:_e.address})]}),_e.address&&e.jsx("button",{onClick:()=>Kn(_e.address),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]})})()})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(rd,{bookingId:j.id,currentStatus:j.booking_status,onStatusChange:_e=>{console.log(`Provider booking ${j.id} status changed to ${_e}`)}}),e.jsxs("p",{className:"text-lg font-semibold text-roam-blue mt-2",children:["$",j.total_amount||"0"]}),(j.booking_status==="confirmed"||j.booking_status==="in_progress")&&e.jsxs(P,{size:"sm",variant:"outline",className:"mt-3 w-full border-blue-200 text-blue-600 hover:bg-blue-50",onClick:()=>Vu(j),children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Message Customer"]})]})]}),j.booking_status==="pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>Yu(j.id),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Accept"]}),e.jsx(P,{size:"sm",variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>Zu(j),children:"Decline"})]}),j.booking_status==="confirmed"&&new Date(j.booking_date)<=new Date(new Date().toDateString())&&e.jsx("div",{className:"mt-4",children:e.jsxs(P,{size:"sm",className:"bg-green-600 hover:bg-green-700 w-full",onClick:()=>ng(j.id),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Complete Booking"]})})]})},j.id)}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(Qe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[h==="present"&&"No current bookings",h==="future"&&"No upcoming bookings",h==="past"&&"No completed or cancelled bookings"]})]})})},h))]}):e.jsx("div",{className:"space-y-4",children:Eo().length>0?Eo().map(h=>{var S,k,L,se,Z,me,ie,he;vc(h.booking_status);const j=bc(h.delivery_type||"business_location");return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 md:gap-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qe,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:((S=h.services)==null?void 0:S.name)||"Service"}),(r||a)&&(h.booking_status==="pending"||h.booking_status==="confirmed")?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsxs(as,{value:h.provider_id||"unassigned",onValueChange:ve=>{ve==="unassigned"?pc(h.id,null):pc(h.id,ve)},children:[e.jsx(ss,{className:"h-8 text-sm",children:e.jsx(is,{placeholder:"Assign Provider..."})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"unassigned",children:"Unassigned"}),dn.filter(ve=>ve.is_active).map(ve=>e.jsxs(ce,{value:ve.id,children:[ve.first_name," ",ve.last_name]},ve.id))]})]})})]}):h.providers?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-foreground/60 truncate",children:["Provider: ",h.providers.first_name," ",h.providers.last_name]})]}):e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground/60 truncate",children:"Provider: Unassigned"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[(k=h.customer_profiles)!=null&&k.image_url?e.jsx("img",{src:h.customer_profiles.image_url,alt:"Customer",className:"w-6 h-6 rounded-full object-cover flex-shrink-0"}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs text-gray-600",children:((se=(L=h.customer_profiles)==null?void 0:L.first_name)==null?void 0:se.charAt(0))||((Z=h.guest_name)==null?void 0:Z.charAt(0))||"C"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-foreground/60 truncate",children:(me=h.customer_profiles)!=null&&me.first_name&&((ie=h.customer_profiles)!=null&&ie.last_name)?`${h.customer_profiles.first_name} ${h.customer_profiles.last_name}`:h.guest_name||"Customer"}),((he=h.customer_profiles)==null?void 0:he.email)&&e.jsx("span",{className:"text-xs text-foreground/40 block truncate",children:h.customer_profiles.email})]})]}),h.booking_reference&&e.jsxs("div",{className:"flex items-start gap-2 mb-3 p-2 bg-gray-50 rounded-lg border-l-4 border-roam-blue",children:[e.jsx(Qc,{className:"w-4 h-4 text-roam-blue flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide block",children:"Booking Reference"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900 truncate",children:h.booking_reference})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:new Date(h.booking_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:h.start_time})]}),e.jsxs("div",{className:"flex items-start gap-2 sm:col-span-2 lg:col-span-1",children:[e.jsx(j,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:(()=>{const ve=fc(h);return typeof ve=="string"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm truncate flex-1",children:ve}),e.jsx("button",{onClick:()=>Kn(ve),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium block truncate",children:ve.name}),ve.address&&e.jsx("span",{className:"text-xs text-foreground/50 block truncate",children:ve.address})]}),ve.address&&e.jsx("button",{onClick:()=>Kn(ve.address),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]})})()})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:flex-col md:items-end md:text-right gap-4 md:gap-2 pt-3 md:pt-0 border-t md:border-t-0 md:min-w-0",children:[e.jsx(rd,{bookingId:h.id,currentStatus:h.booking_status,onStatusChange:ve=>{console.log(`Today's booking ${h.id} status changed to ${ve}`)}}),e.jsxs("p",{className:"text-lg md:text-xl font-semibold text-roam-blue",children:["$",h.total_amount||"0"]})]})]}),h.booking_status==="pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>Yu(h.id),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Accept"]}),e.jsx(P,{size:"sm",variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>Zu(h),children:"Decline"})]}),(h.booking_status==="confirmed"||h.booking_status==="in_progress")&&e.jsx("div",{className:"mt-4",children:e.jsxs(P,{size:"sm",variant:"outline",className:"w-full border-blue-200 text-blue-600 hover:bg-blue-50",onClick:()=>Vu(h),children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Message Customer"]})}),h.booking_status==="confirmed"&&new Date(h.booking_date)<=new Date(new Date().toDateString())&&e.jsx("div",{className:"mt-4",children:e.jsxs(P,{size:"sm",className:"bg-green-600 hover:bg-green-700 w-full",onClick:()=>ng(h.id),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Complete Booking"]})})]})},h.id)}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(Qe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No bookings to display"})]})})]}),e.jsxs(ds,{value:"conversations",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Conversations"}),e.jsxs(P,{onClick:Zp,className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"View All Conversations"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-lg",children:"About Conversations"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-foreground/70",children:"Use Twilio Conversations to communicate with customers directly in the app. All messages are secure and organized by booking."}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Real-time messaging with customers"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Organized by booking ID"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Available to all staff roles"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("span",{children:"Message history and attachments"})]})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs(P,{onClick:Zp,variant:"outline",className:"w-full justify-start",children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"View All Conversations"]}),e.jsxs("div",{className:"text-sm text-foreground/60",children:[e.jsx("p",{className:"mb-2",children:"Start conversations from:"}),e.jsxs("ul",{className:"space-y-1 ml-4",children:[e.jsx("li",{children:"• Booking cards (Message button)"}),e.jsx("li",{children:"• Customer profile pages"}),e.jsx("li",{children:"• Direct conversation creation"})]})]})]})]})]}),e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Latest conversation updates will appear here"})]}),e.jsx(K,{children:e.jsxs("div",{className:"text-center py-8 text-foreground/50",children:[e.jsx(mt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No recent conversation activity"}),e.jsx("p",{className:"text-sm",children:"Start messaging with customers to see activity here"})]})})]})]}),(r||a)&&e.jsxs(ds,{value:"services-addons",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Services"}),e.jsx("p",{className:"text-foreground/60",children:"Manage the services and add-ons your business offers to customers"})]}),e.jsx(P,{onClick:()=>xc(),disabled:wu,variant:"outline",children:wu?"Loading...":"Refresh"})]}),jo&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:typeof jo=="string"?jo:"An error occurred while loading services and add-ons"}),np&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:np}),mn&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:mn}),at?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading services..."})]}):Or.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Or.map(h=>{var j,S,k,L,se,Z,me,ie,he,ve,_e,Ve;return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:(j=h.services)==null?void 0:j.name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:[((L=(k=(S=h.services)==null?void 0:S.service_subcategories)==null?void 0:k.service_categories)==null?void 0:L.description)||((me=(Z=(se=h.services)==null?void 0:se.service_subcategories)==null?void 0:Z.service_categories)==null?void 0:me.service_category_type)," ","����"," ",(he=(ie=h.services)==null?void 0:ie.service_subcategories)==null?void 0:he.service_subcategory_type]}),((ve=h.services)==null?void 0:ve.description)&&e.jsx("p",{className:"text-xs text-foreground/50 mt-1",children:h.services.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(Ms,{checked:h.is_active!==!1,className:"data-[state=checked]:bg-roam-blue",disabled:n&&!r&&!a&&(l==null?void 0:l.business_managed),onCheckedChange:zs=>{console.log("Service toggle clicked:",{serviceId:h.service_id,checked:zs,isProvider:n,isOwner:r,isDispatcher:a,businessManaged:l==null?void 0:l.business_managed}),sg(h.service_id,zs,h.business_price,h.delivery_type)}}),n&&!r&&!a&&(l==null?void 0:l.business_managed)&&e.jsx("span",{className:"text-xs text-foreground/50",children:"Read-only"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Duration:"}),e.jsx("span",{className:"font-medium",children:h.duration||((_e=h.services)!=null&&_e.duration_minutes?`${h.services.duration_minutes} mins`:"N/A")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Minimum Price:"}),e.jsxs("span",{className:"font-medium text-roam-blue",children:["$",h.business_price||((Ve=h.services)==null?void 0:Ve.min_price)||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Delivery:"}),e.jsx("span",{className:"font-medium",children:c4(h.delivery_type||"business_location")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Bookings:"}),e.jsxs("span",{className:"font-medium",children:[h.booking_count||0," this month"]})]})]}),r||a?e.jsxs(P,{variant:"outline",size:"sm",className:"w-full border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>x4(h),children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Edit Service"]}):e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-foreground/60",children:l!=null&&l.business_managed?"Service managed by business":"Toggle above to activate/deactivate"})})]})},h.id)})}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(us,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No services added yet"}),e.jsx("p",{className:"text-sm",children:"Add your first service to start accepting bookings"})]}),Un.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Current Add-ons"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Un.map(h=>{var j,S,k,L;return e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:(j=h.service_addons)==null?void 0:j.name}),e.jsx("p",{className:"text-sm text-foreground/60",children:(S=h.service_addons)==null?void 0:S.addon_type})]}),e.jsx(Ms,{checked:h.is_available,className:"data-[state=checked]:bg-roam-blue",onCheckedChange:se=>{Gu(h.addon_id,se,h.custom_price)}})]}),e.jsx("p",{className:"text-xs text-foreground/50 mb-2",children:(k=h.service_addons)==null?void 0:k.description}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Price:"}),e.jsxs("span",{className:"font-medium text-roam-blue",children:["$",h.custom_price||((L=h.service_addons)==null?void 0:L.default_price)||"0"]})]}),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full mt-2 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>g4(h),children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Edit Add-on"]})]},h.id)})})]}),yo.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Available Services"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Add services to your business offering"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:yo.filter(h=>{var j,S;return!Or.some(k=>k.service_id===h.id)&&((S=m==null?void 0:m.service_subcategories)==null?void 0:S.includes((j=h.service_subcategories)==null?void 0:j.service_subcategory_type))}).map(h=>{var j,S,k,L,se;return e.jsx(V,{className:"p-4 border-dashed border-2 hover:border-roam-blue transition-colors",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-roam-blue/10 flex items-center justify-center flex-shrink-0",children:(()=>{var me,ie;const Z=X$(h.name,((ie=(me=h.service_subcategories)==null?void 0:me.service_categories)==null?void 0:ie.service_category_type)||"");return e.jsx(Z,{className:"w-5 h-5 text-roam-blue"})})()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:[((S=(j=h.service_subcategories)==null?void 0:j.service_categories)==null?void 0:S.description)||((L=(k=h.service_subcategories)==null?void 0:k.service_categories)==null?void 0:L.service_category_type)," ","—"," ",(se=h.service_subcategories)==null?void 0:se.service_subcategory_type]}),h.description&&e.jsx("p",{className:"text-xs text-foreground/50 mt-1",children:h.description})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{children:["Min Price: $",h.min_price||"0"]}),e.jsxs("span",{children:[h.duration_minutes,"min"]})]}),e.jsxs(P,{size:"sm",className:"w-full bg-roam-blue hover:bg-roam-blue/90",onClick:()=>sg(h.id,!0,h.min_price),disabled:Wn,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Service"]})]})},h.id)})})]}),ju.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Available Add-ons"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Add add-ons to your business offering"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ju.filter(h=>!Un.some(j=>j.addon_id===h.id)&&rp.some(j=>j.addon_id===h.id&&yo.some(S=>{var k,L;return S.id===j.service_id&&((L=m==null?void 0:m.service_subcategories)==null?void 0:L.includes((k=S.service_subcategories)==null?void 0:k.service_subcategory_type))}))).map(h=>e.jsx(V,{className:"p-4 border-dashed border-2 hover:border-roam-blue transition-colors",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-foreground/60",children:h.addon_type}),h.description&&e.jsx("p",{className:"text-xs text-foreground/50 mt-1",children:h.description})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{children:["Default Price: $",h.default_price||"0"]}),h.is_percentage&&e.jsx("span",{children:"% based"})]}),e.jsxs(P,{size:"sm",className:"w-full bg-roam-blue hover:bg-roam-blue/90",onClick:()=>Gu(h.id,!0,h.default_price),disabled:Wn,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Add-on"]})]})},h.id))})]})]}),e.jsxs(ds,{value:"addons",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Service Add-ons"}),e.jsx("p",{className:"text-foreground/60",children:"Manage additional services and extras you offer to clients"})]}),e.jsx(P,{onClick:()=>eg(),disabled:Dl,variant:"outline",children:Dl?"Loading...":"Refresh"})]}),yu&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:typeof yu=="string"?yu:"An error occurred while loading add-ons"}),ep&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:ep}),Dl?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-roam-blue border-t-transparent rounded-full animate-spin"})}):Ol.length===0?e.jsx(V,{children:e.jsxs(K,{className:"text-center py-8",children:[e.jsx("div",{className:"text-foreground/60 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Add-ons Available"}),e.jsx("p",{className:"text-foreground/60",children:"There are currently no service add-ons available to enable."})]})}):e.jsx("div",{className:"grid gap-6",children:Ol.map(h=>{const j=Kx.find(L=>L.addon_id===h.id),S=(j==null?void 0:j.is_active)||!1,k=!!j;return e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:h.name}),e.jsxs("div",{className:"flex gap-2",children:[k&&e.jsx(ge,{variant:S?"default":"secondary",className:S?"bg-green-500 hover:bg-green-600":"",children:S?"Active":"Inactive"}),h.is_premium&&e.jsx(ge,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:"Premium"})]})]}),h.description&&e.jsx("p",{className:"text-foreground/70 mb-3",children:h.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.base_price&&e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Base Price:"}),e.jsxs("p",{className:"font-medium",children:["$",h.base_price]})]}),h.duration_minutes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Duration:"}),e.jsxs("p",{className:"font-medium",children:[h.duration_minutes," min"]})]}),h.category&&e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Category:"}),e.jsx("p",{className:"font-medium capitalize",children:h.category.replace("_"," ")})]}),h.addon_type&&e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Type:"}),e.jsx("p",{className:"font-medium capitalize",children:h.addon_type.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsx(Ms,{checked:S,onCheckedChange:L=>f4(h.id,L),disabled:WS,className:"data-[state=checked]:bg-roam-blue"}),e.jsx("span",{className:"text-xs text-foreground/60 text-center",children:S?"Enabled":"Disabled"})]})]})})},h.id)})})]}),(r||a)&&e.jsxs(ds,{value:"business",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Management"}),!a&&e.jsx(V,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Business Cover Image"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-48 bg-gradient-to-r from-roam-blue to-roam-light-blue rounded-lg flex items-center justify-center overflow-hidden cursor-pointer",onClick:m!=null&&m.cover_image_url?PC:void 0,children:m!=null&&m.cover_image_url?e.jsx("img",{src:m.cover_image_url,alt:"Business Cover",className:"w-full h-full object-cover transition-all duration-300",style:{objectPosition:re}}):e.jsxs("div",{className:"text-center text-white",children:[e.jsx(fs,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No cover image"})]})}),$&&e.jsx("div",{className:"absolute inset-0 w-full h-48 bg-black/50 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}),(m==null?void 0:m.cover_image_url)&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>je(!Me),className:"bg-white/90 hover:bg-white",children:e.jsx(Nc,{className:"w-4 h-4"})})})]}),q&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:q}),(m==null?void 0:m.cover_image_url)&&Me&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[e.jsx(Nc,{className:"w-4 h-4"}),"Image Position Controls"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Click on the image above to set focal point, or use preset positions:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("0% 0%"),className:"text-xs",children:"Top Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("50% 0%"),className:"text-xs",children:"Top Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("100% 0%"),className:"text-xs",children:"Top Right"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("0% 50%"),className:"text-xs",children:"Center Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("50% 50%"),className:"text-xs bg-roam-blue text-white border-roam-blue",children:"Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("100% 50%"),className:"text-xs",children:"Center Right"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("0% 100%"),className:"text-xs",children:"Bottom Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("50% 100%"),className:"text-xs",children:"Bottom Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Br("100% 100%"),className:"text-xs",children:"Bottom Right"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Current position: ",re]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>Br("50% 50%"),className:"text-xs",children:[e.jsx(rv,{className:"w-3 h-3 mr-1"}),"Reset"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:kC,className:"hidden",id:"business-cover-upload",disabled:$||rs}),e.jsxs(P,{variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>{var h;return(h=document.getElementById("business-cover-upload"))==null?void 0:h.click()},disabled:$||rs,children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),m!=null&&m.cover_image_url?"Change Cover":"Upload Cover"]}),(m==null?void 0:m.cover_image_url)&&e.jsx(P,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:EC,disabled:$||rs,children:"Remove"})]}),e.jsx("p",{className:"text-xs text-foreground/60 text-center mt-2",children:"Upload a cover image for your business profile (max 10MB). Recommended size: 1200x400px"})]})}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),"Business Details"]})}),e.jsxs(K,{children:[a&&e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-3 rounded mb-4",children:[e.jsx("strong",{children:"View Only:"})," As a dispatcher, you can view business details but cannot make changes."]}),(gt||q)&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:gt||q}),pr&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded mb-4",children:pr}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_name",children:"Business Name *"}),e.jsx(ae,{id:"business_name",value:xs.business_name,onChange:h=>ko("business_name",h.target.value),disabled:rs||$||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_type",children:"Business Type"}),e.jsx(ae,{id:"business_type",value:bC(xs.business_type),readOnly:!0,className:"bg-muted cursor-not-allowed",title:"Business type cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"verification_status",children:"Verification Status"}),e.jsx(ae,{id:"verification_status",value:yC(xs.verification_status),readOnly:!0,className:"bg-muted cursor-not-allowed",title:"Verification status is managed by system"})]}),xs.verification_notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"verification_notes",children:"ROAM Admin Feedback"}),e.jsx(jt,{id:"verification_notes",value:xs.verification_notes,readOnly:!0,className:"bg-muted cursor-not-allowed min-h-[80px] resize-none",title:"Feedback from ROAM administration team"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Featured Business Status:"}),xs.is_featured?e.jsx(ge,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0 px-3 py-1 text-xs font-bold shadow-lg",children:"�� FEATURED BUSINESS"}):e.jsx(ge,{variant:"outline",className:"text-gray-500 border-gray-300 px-3 py-1 text-xs",children:"Not Featured"})]}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Featured businesses appear prominently on the homepage and get increased visibility to customers. (Status controlled by ROAM)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Service Categories"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{className:"text-base font-medium",children:"Business Service Categories"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Main categories of services your business offers (read-only)"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Service categories are controlled by ROAM. If you need approval for additional service categories, please contact ROAM at"," ",e.jsx("a",{href:"mailto:providersupport@roamyourbestlife.com",className:"text-blue-600 hover:text-blue-800 underline",children:"providersupport@roamyourbestlife.com"})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Ax.map(h=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`category-${h.service_category_type}`,checked:xs.service_categories.includes(h.service_category_type),disabled:!0,readOnly:!0,className:`rounded cursor-not-allowed ${xs.service_categories.includes(h.service_category_type)?"border-orange-400 bg-orange-100 text-orange-600 accent-orange-500":"border-gray-300 text-gray-400 opacity-60"}`}),e.jsx(B,{htmlFor:`category-${h.service_category_type}`,className:`text-sm font-normal cursor-default ${xs.service_categories.includes(h.service_category_type)?"text-orange-700 font-medium":"opacity-60"}`,children:Jp(h.description||h.service_category_type)})]},h.id))})]}),xs.service_categories.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{className:"text-base font-medium",children:"Service Specializations"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Specific services and specializations your business provides (read-only)"}),xs.service_categories.length===0?e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Please select service categories first to see available specializations"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:bS.filter(h=>Ax.filter(S=>xs.service_categories.includes(S.service_category_type)).map(S=>S.id).includes(h.category_id)).map(h=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`subcategory-${h.service_subcategory_type}`,checked:xs.service_subcategories.includes(h.service_subcategory_type),disabled:!0,readOnly:!0,className:`rounded cursor-not-allowed ${xs.service_subcategories.includes(h.service_subcategory_type)?"border-orange-400 bg-orange-100 text-orange-600 accent-orange-500":"border-gray-300 text-gray-400 opacity-60"}`}),e.jsx(B,{htmlFor:`subcategory-${h.service_subcategory_type}`,className:`text-sm font-normal cursor-default ${xs.service_subcategories.includes(h.service_subcategory_type)?"text-orange-700 font-medium":"opacity-60"}`,children:Jp(h.description||h.service_subcategory_type)})]},h.id))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(ae,{id:"contact_email",type:"email",value:xs.contact_email,onChange:h=>ko("contact_email",h.target.value),disabled:rs||$||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Business Phone"}),e.jsx(ae,{id:"phone",type:"tel",value:xs.phone,onChange:h=>ko("phone",h.target.value),disabled:rs||$||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"website_url",children:"Website URL"}),e.jsx(ae,{id:"website_url",type:"url",value:xs.website_url,onChange:h=>ko("website_url",h.target.value),placeholder:"https://",disabled:rs||$||a})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Business Logo"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{children:"Current Logo"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 bg-accent/20 border-2 border-dashed border-accent rounded-lg flex items-center justify-center overflow-hidden",children:m!=null&&m.logo_url?e.jsx("img",{src:m.logo_url,alt:"Business Logo",className:"w-full h-full object-contain"}):e.jsxs("div",{className:"text-center text-foreground/60",children:[e.jsx(fs,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})}),dc&&e.jsx("div",{className:"absolute inset-0 w-32 h-32 bg-black/50 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{children:"Logo Management"}),zp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:zp}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:jC,className:"hidden",id:"logo-upload",disabled:dc}),e.jsxs(P,{variant:"outline",className:"w-full border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>{var h;return(h=document.getElementById("logo-upload"))==null?void 0:h.click()},disabled:dc,children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),m!=null&&m.logo_url?"Change Logo":"Upload Logo"]}),(m==null?void 0:m.logo_url)&&e.jsxs(P,{variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",onClick:wC,disabled:dc,children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Remove Logo"]})]}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Upload a business logo (max 5MB). Recommended size: 200x200px or larger."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Business Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Business Active"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Enable or disable your business listing"})]}),e.jsx(Ms,{checked:xs.is_active,onCheckedChange:h=>ko("is_active",h),disabled:rs||$||a,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"p-4 bg-accent/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{children:"Stripe Payouts"}),e.jsx("span",{className:`font-medium ${m!=null&&m.stripe_connect_account_id?"text-green-600":"text-red-600"}`,children:m!=null&&m.stripe_connect_account_id?"Enabled":"Disabled"})]}),e.jsx("p",{className:"text-sm text-foreground/60 mt-1",children:m!=null&&m.stripe_connect_account_id?"Your Stripe account is connected and ready to receive payments":"Connect your Stripe account to enable automatic payouts"})]})]})]}),!a&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(P,{onClick:j4,disabled:rs||$,className:"bg-roam-blue hover:bg-roam-blue/90",children:rs?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Save Business Details"]})})})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Business Hours"})}),e.jsxs(K,{children:[Be&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:Be}),ee&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded mb-4",children:ee}),e.jsx("div",{className:"space-y-3",children:Ke?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ms,{checked:Pa[h].isOpen,onCheckedChange:j=>zu(h,"isOpen",j),disabled:Le,className:"data-[state=checked]:bg-roam-blue"}),e.jsx("span",{className:"text-sm font-medium w-20",children:h})]}),Pa[h].isOpen?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{type:"time",value:Pa[h].open,onChange:j=>zu(h,"open",j.target.value),disabled:Le,className:"w-24"}),e.jsx("span",{className:"text-sm text-foreground/60",children:"to"}),e.jsx(ae,{type:"time",value:Pa[h].close,onChange:j=>zu(h,"close",j.target.value),disabled:Le,className:"w-24"})]}):e.jsx("span",{className:"text-sm text-foreground/60",children:"Closed"})]},h)):w?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(h=>{const j=w[h],S=j&&typeof j=="object"&&j.open&&j.close;return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:h}),e.jsx("span",{className:"text-sm text-foreground/60",children:S?`${Vp(j.open)} - ${Vp(j.close)}`:"Closed"})]},h)}):["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(h=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:h}),e.jsx("span",{className:"text-sm text-foreground/60",children:"Loading..."})]},h))}),Ke?e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(P,{className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",onClick:LC,disabled:Le,children:Le?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Save Hours"]})}),e.jsx(P,{variant:"outline",className:"flex-1",onClick:$C,disabled:Le,children:"Cancel"})]}):e.jsxs(P,{variant:"outline",className:"w-full mt-4 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>Ue(!0),children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Edit Hours"]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"w-5 h-5 text-roam-blue"}),"Business Documents"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>Yl(!0),disabled:wo,className:"flex items-center gap-2",children:[e.jsx(fa,{className:"w-4 h-4"}),wo?"Uploading...":"Add Document"]})})]})}),e.jsxs(K,{children:[wp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:wp}),Xl&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:Xl}),yp?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mr-2"}),"Loading documents..."]}):bp.length===0?e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(fa,{className:"w-12 h-12 mx-auto mb-4 text-foreground/30"}),e.jsx("p",{children:"No documents have been uploaded yet."}),e.jsx("p",{className:"text-sm mt-2",children:'Use the "Add Document" button above to upload business documents.'})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-foreground/60 mb-4",children:"View and download documents you submitted during the business verification process."}),e.jsx("div",{className:"grid gap-4",children:bp.map(h=>{var j;return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/20 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"w-4 h-4 text-roam-blue"}),e.jsx("h4",{className:"font-semibold text-lg text-foreground",children:(j=h.document_type)==null?void 0:j.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase())})]}),e.jsxs(ge,{className:S4(h.verification_status),children:[h.verification_status==="approved"&&"Approved",h.verification_status==="pending"&&"Pending Review",h.verification_status==="rejected"&&"Rejected",h.verification_status==="expired"&&"Expired",!h.verification_status&&"Submitted"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"File Name:"}),e.jsx("br",{}),e.jsx("span",{className:"text-xs text-foreground/50",children:h.document_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size:"}),e.jsx("br",{}),C4(h.file_size_bytes)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Submitted:"}),e.jsx("br",{}),new Date(h.created_at).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status Updated:"}),e.jsx("br",{}),h.verified_at?new Date(h.verified_at).toLocaleDateString():"Not reviewed"]})]}),h.expiry_date&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-foreground/60",children:"Expires:"})," ",e.jsx("span",{className:new Date(h.expiry_date)<new Date?"text-red-600 font-medium":"text-foreground/60",children:new Date(h.expiry_date).toLocaleDateString()})]}),h.rejection_reason&&e.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded text-sm",children:[e.jsx("span",{className:"font-medium text-red-800",children:"Rejection Reason:"}),e.jsx("p",{className:"text-red-700 mt-1",children:h.rejection_reason})]})]}),e.jsx("div",{className:"ml-4",children:e.jsxs(P,{onClick:()=>window.open(h.file_url,"_blank"),variant:"outline",size:"sm",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"View"]})})]})},h.id)})})]})]})]}),e.jsx(Xs,{open:nC,onOpenChange:Yl,children:e.jsxs(Vs,{className:"sm:max-w-[500px]",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Upload Document"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"file-upload",children:"Select File *"}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:Hn?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(fa,{className:"w-8 h-8 text-green-500"})}),e.jsx("p",{className:"text-sm font-medium",children:Hn.name}),e.jsxs("p",{className:"text-xs text-foreground/60",children:[(Hn.size/1024/1024).toFixed(2)," ","MB"]}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Kl(null),children:"Remove"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(fa,{className:"w-8 h-8 text-foreground/50 mx-auto"}),e.jsx("p",{className:"text-sm text-foreground/70",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-foreground/50",children:"PDF, DOC, DOCX, JPG, JPEG, PNG (max 50MB)"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:MC,className:"hidden",id:"modal-file-upload"}),e.jsx(P,{variant:"outline",onClick:()=>{var h;return(h=document.getElementById("modal-file-upload"))==null?void 0:h.click()},children:"Choose File"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"document-name",children:"Document Name *"}),e.jsx(ae,{id:"document-name",value:Ql,onChange:h=>ec(h.target.value),placeholder:"Enter document name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"document-type",children:"Document Type *"}),e.jsxs(as,{value:Zl,onValueChange:Cu,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select document type"})}),e.jsx(ts,{children:AC.map(h=>e.jsx(ce,{value:h.value,children:h.label},h.value))})]})]}),Xl&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:Xl})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{Yl(!1),Kl(null),Cu(""),ec(""),Lr("")},disabled:wo,children:"Cancel"}),e.jsx(P,{onClick:RC,disabled:!Hn||!Zl||!Ql||wo,children:wo?"Uploading...":"Upload Document"})]})]})})]}),(r||a)&&e.jsxs(ds,{value:"providers",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Staff Management"}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",onClick:Hp,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Staff"]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-roam-blue"}),"Staff Overview"]})}),e.jsx(K,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue mb-1",children:aa.filter(h=>h.provider_role!=="owner").length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Number of Staff"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 mb-1",children:aa.filter(h=>h.provider_role!=="owner"&&h.verification_status!=="approved").length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Number Unverified"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:aa.filter(h=>h.provider_role!=="owner"&&!h.business_managed).length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Number Self Managed"})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Manage Staff Members"}),e.jsx(P,{variant:"outline",onClick:Zn,disabled:Tu,size:"sm",children:"����� Refresh"})]})}),e.jsxs(K,{children:[e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"role-filter",className:"text-sm font-medium",children:"Filter by Role"}),e.jsxs(as,{value:qn,onValueChange:TS,children:[e.jsx(ss,{className:"w-full mt-1",children:e.jsx(is,{placeholder:"All Roles"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Roles"}),e.jsx(ce,{value:"dispatcher",children:"Dispatcher"}),e.jsx(ce,{value:"provider",children:"Provider"}),xs.business_type==="independent"&&e.jsx(ce,{value:"owner",children:"Owner"})]})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"verification-filter",className:"text-sm font-medium",children:"Filter by Verification Status"}),e.jsxs(as,{value:Vn,onValueChange:IS,children:[e.jsx(ss,{className:"w-full mt-1",children:e.jsx(is,{placeholder:"All Statuses"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Statuses"}),e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"documents_submitted",children:"Documents Submitted"}),e.jsx(ce,{value:"under_review",children:"Under Review"}),e.jsx(ce,{value:"approved",children:"Approved"}),e.jsx(ce,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"active-filter",className:"text-sm font-medium",children:"Filter by Active Status"}),e.jsxs(as,{value:Jn,onValueChange:AS,children:[e.jsx(ss,{className:"w-full mt-1",children:e.jsx(is,{placeholder:"All Status"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Status"}),e.jsx(ce,{value:"true",children:"Active"}),e.jsx(ce,{value:"false",children:"Inactive"})]})]})]})]}),Pp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:Pp}),Tu?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading team members..."})]}):aa.filter(h=>xs.business_type==="independent"?!0:h.provider_role!=="owner").length>0?e.jsxs("div",{className:"space-y-4",children:[(qn!=="all"||Vn!=="all"||Jn!=="all"||aa.some(h=>h.provider_role==="owner"))&&e.jsxs("div",{className:"text-sm text-foreground/60 pb-2 border-b",children:["Showing"," ",aa.filter(h=>(xs.business_type==="independent"?!0:h.provider_role!=="owner")&&(qn==="all"||h.provider_role===qn)&&(Vn==="all"||h.verification_status===Vn)&&(Jn==="all"||h.is_active.toString()===Jn)).length," ","of"," ",aa.filter(h=>xs.business_type==="independent"?!0:h.provider_role!=="owner").length," ","staff members"]}),aa.filter(h=>(xs.business_type==="independent"?!0:h.provider_role!=="owner")&&(qn==="all"||h.provider_role===qn)&&(Vn==="all"||h.verification_status===Vn)&&(Jn==="all"||h.is_active.toString()===Jn)).map(h=>{var j,S;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-accent/20 rounded-lg border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:h.image_url?e.jsx("img",{src:h.image_url,alt:`${h.first_name} ${h.last_name}`,className:"w-12 h-12 rounded-full object-cover"}):e.jsxs("span",{className:"text-white font-semibold",children:[(j=h.first_name)==null?void 0:j.charAt(0),(S=h.last_name)==null?void 0:S.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[h.first_name," ",h.last_name]}),e.jsx("p",{className:"text-sm text-foreground/60",children:h.email}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60 mt-1",children:[e.jsx("span",{className:"capitalize",children:h.provider_role||"Provider"}),h.business_locations&&h.location_id?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"}),e.jsxs("span",{children:[h.business_locations.location_name,h.business_locations.is_primary&&e.jsx(ge,{variant:"secondary",className:"ml-1 text-xs",children:"Primary"})]})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"}),e.jsx("span",{className:"text-foreground/40",children:"No location assigned"})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>r4(h),disabled:fo||h.provider_role==="owner",className:h.background_check_status==="approved"||h.provider_role==="owner"?"bg-green-50 border-green-300 text-green-700 hover:bg-green-100":"bg-yellow-50 border-yellow-300 text-yellow-700 hover:bg-yellow-100",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"}),h.background_check_status==="approved"||h.provider_role==="owner"?"Background ��":"Approve BG"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>a4(h),disabled:fo||h.provider_role==="owner",className:h.verification_status==="approved"||h.provider_role==="owner"?"bg-green-50 border-green-300 text-green-700 hover:bg-green-100":"bg-yellow-50 border-yellow-300 text-yellow-700 hover:bg-yellow-100",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"}),h.verification_status==="approved"||h.provider_role==="owner"?"Verified ✓":"Verify"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>t4(h),disabled:fo||h.provider_role==="owner",className:h.is_active||h.provider_role==="owner"?"bg-green-50 border-green-300 text-green-700 hover:bg-green-100":"bg-red-50 border-red-300 text-red-700 hover:bg-red-100",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"}),h.is_active||h.provider_role==="owner"?"Active":"Activate"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>s4(h),children:[e.jsx($t,{className:"w-4 h-4 mr-1"}),"Edit"]})]})})]},h.id)})]}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(Ds,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No staff members found"}),e.jsx("p",{className:"text-sm mb-4",children:"Start building your team by inviting staff to join your business"}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",onClick:Hp,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Invite Your First Staff"]})]})]})]})]}),(r||a)&&e.jsxs(ds,{value:"locations",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Locations"}),e.jsxs(P,{onClick:()=>{ke(!0),G(!0),!ue.length&&!Ie&&_o()},className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Location"]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-roam-blue"}),"Locations Overview"]})}),e.jsx(K,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue mb-1",children:ue.length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Total Locations"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue mb-1",children:ue.filter(h=>h.is_active).length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Active Locations"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue mb-1",children:ue.filter(h=>h.offers_mobile_services).length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Mobile Service Areas"})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"All Locations"})}),e.jsx(K,{children:Ie?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading locations..."})]}):ue.length>0?e.jsx("div",{className:"space-y-4",children:ue.map(h=>e.jsx(V,{className:"border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:h.location_name}),h.is_primary&&e.jsx(ge,{className:"bg-roam-blue/20 text-roam-blue",children:"Primary"}),!h.is_active&&e.jsx(ge,{variant:"outline",className:"text-red-600 border-red-300",children:"Inactive"})]}),e.jsxs("div",{className:"text-sm text-foreground/70 space-y-1",children:[e.jsx("p",{children:h.address_line1}),h.address_line2&&e.jsx("p",{children:h.address_line2}),e.jsxs("p",{children:[h.city,", ",h.state," ",h.postal_code]}),e.jsx("p",{children:h.country}),h.offers_mobile_services&&e.jsxs("p",{className:"text-roam-blue",children:[e.jsx(Kt,{className:"w-4 h-4 inline mr-1"}),"Mobile services within"," ",h.mobile_service_radius," miles"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Gp(h),disabled:We,children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Xp(h.id),disabled:We,className:"border-red-300 text-red-600 hover:bg-red-50",children:e.jsx(ht,{className:"w-4 h-4"})})]})]})})},h.id))}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(ws,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No locations added yet"}),e.jsx("p",{className:"text-sm mb-4",children:"Add your first business location to get started"}),e.jsxs(P,{onClick:()=>{ke(!0),G(!0),hc()},className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Your First Location"]})]})})]})]}),n&&!r&&!a&&e.jsxs(ds,{value:"provider-services",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Services"}),Cp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:Cp}),_p?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mr-2"}),"Loading services..."]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600"}),"My Assigned Services (",ku.length,")"]})}),e.jsx(K,{children:ku.length===0?e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(us,{className:"w-12 h-12 mx-auto mb-4 text-foreground/30"}),e.jsx("p",{children:"No services assigned yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Contact your manager to get services assigned."})]}):e.jsx("div",{className:"grid gap-4",children:ku.map(h=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground",children:h.services.name}),e.jsx("p",{className:"text-sm text-foreground/60 mt-1",children:h.services.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-foreground/60 mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-700",children:"Business Price:"}),e.jsx("br",{}),"$",h.custom_price||h.services.min_price]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("br",{}),e.jsx(ge,{variant:h.is_active?"default":"secondary",children:h.is_active?"Active":"Inactive"})]})]})]})})},h.id))})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5 text-blue-600"}),"My Add-ons (",Pu.length,")"]})}),e.jsx(K,{children:Pu.length===0?e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(ut,{className:"w-12 h-12 mx-auto mb-4 text-foreground/30"}),e.jsx("p",{children:"No add-ons assigned yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Contact your manager to get add-ons assigned."})]}):e.jsx("div",{className:"grid gap-4",children:Pu.map(h=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground",children:h.service_addons.name}),e.jsx("p",{className:"text-sm text-foreground/60 mt-1",children:h.service_addons.description}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:"font-medium text-green-700",children:["Business Price: $",h.custom_price||"Not set"]})}),e.jsx(ge,{variant:h.is_active?"default":"secondary",children:h.is_active?"Active":"Inactive"})]})]})})},h.id))})})]}),Eu.length>0&&(l==null?void 0:l.provider_role)!=="provider"&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-yellow-600"}),"Available Services (",Eu.length,")"]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-foreground/60 mb-4",children:"These services are available but not yet assigned to you."}),e.jsx("div",{className:"grid gap-4",children:Eu.map(h=>{var j,S;return e.jsx("div",{className:"border rounded-lg p-4 bg-muted/20",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground",children:h.name}),e.jsx("p",{className:"text-sm text-foreground/60 mt-1",children:h.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-foreground/60 mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"}),e.jsx("br",{}),((S=(j=h.service_subcategories)==null?void 0:j.service_categories)==null?void 0:S.service_category_type)||"Uncategorized"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Base Price:"}),e.jsx("br",{}),"$",h.min_price]})]})]})})},h.id)})})]})]})]})]}),e.jsxs(ds,{value:"profile",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Provider Profile"}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Profile Information"})}),e.jsxs(K,{className:"space-y-6",children:[(oe||D||A)&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:oe||D||A}),Te&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:Te}),e.jsx(V,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Cover Image"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-32 bg-gradient-to-r from-roam-blue to-roam-light-blue rounded-lg flex items-center justify-center overflow-hidden cursor-pointer",onClick:l!=null&&l.cover_image_url?TC:void 0,children:l!=null&&l.cover_image_url?e.jsx("img",{src:l.cover_image_url,alt:"Cover Image",className:"w-full h-full object-cover transition-all duration-300",style:{objectPosition:Y}}):e.jsxs("div",{className:"text-center text-white",children:[e.jsx(_r,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No cover image"})]})}),X&&e.jsx("div",{className:"absolute inset-0 w-full h-32 bg-black/50 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}),(l==null?void 0:l.cover_image_url)&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>pe(!Q),className:"bg-white/90 hover:bg-white",children:e.jsx(Nc,{className:"w-4 h-4"})})})]}),A&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:A}),(l==null?void 0:l.cover_image_url)&&Q&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[e.jsx(Nc,{className:"w-4 h-4"}),"Cover Image Position Controls"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Click on the image above to set focal point, or use preset positions:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("0% 0%"),className:"text-xs",children:"Top Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("50% 0%"),className:"text-xs",children:"Top Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("100% 0%"),className:"text-xs",children:"Top Right"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("0% 50%"),className:"text-xs",children:"Center Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("50% 50%"),className:"text-xs bg-roam-blue text-white border-roam-blue",children:"Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("100% 50%"),className:"text-xs",children:"Center Right"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("0% 100%"),className:"text-xs",children:"Bottom Left"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("50% 100%"),className:"text-xs",children:"Bottom Center"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ur("100% 100%"),className:"text-xs",children:"Bottom Right"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Current position: ",Y]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>Ur("50% 50%"),className:"text-xs",children:[e.jsx(rv,{className:"w-3 h-3 mr-1"}),"Reset"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:SC,className:"hidden",id:"banner-upload",disabled:X||J}),e.jsxs(P,{variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>{var h;return(h=document.getElementById("banner-upload"))==null?void 0:h.click()},disabled:X||J,children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),l!=null&&l.cover_image_url?"Change Cover":"Upload Cover"]}),(l==null?void 0:l.cover_image_url)&&e.jsx(P,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:CC,disabled:X||J,children:"Remove"})]}),e.jsx("p",{className:"text-xs text-foreground/60 text-center mt-2",children:"Upload a cover image for your profile (max 10MB). Recommended size: 800x200px"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Profile Photo"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto overflow-hidden",children:l!=null&&l.image_url?e.jsx("img",{src:l.image_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Ds,{className:"w-16 h-16 text-white"})}),M&&e.jsx("div",{className:"absolute inset-0 w-32 h-32 bg-black/50 rounded-full flex items-center justify-center mx-auto",children:e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:NC,className:"hidden",id:"avatar-upload",disabled:M||J}),e.jsxs(P,{variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",onClick:()=>{var h;return(h=document.getElementById("avatar-upload"))==null?void 0:h.click()},disabled:M||J,children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),l!=null&&l.image_url?"Change Photo":"Upload Photo"]}),(l==null?void 0:l.image_url)&&e.jsx(P,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:_C,disabled:M||J,children:"Remove"})]}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Upload a professional photo (max 5MB)"})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"firstName",children:"First Name *"}),e.jsx(ae,{id:"firstName",value:Ct.firstName,onChange:h=>Yn("firstName",h.target.value),disabled:J||M||X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(ae,{id:"lastName",value:Ct.lastName,onChange:h=>Yn("lastName",h.target.value),disabled:J||M||X})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email Address *"}),e.jsx(ae,{id:"email",type:"email",value:Ct.email,readOnly:!0,className:"bg-muted cursor-not-allowed",title:"Email address cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Phone Number"}),e.jsx(ae,{id:"phone",type:"tel",value:Ct.phone,onChange:h=>Yn("phone",h.target.value),disabled:J||M||X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"bio",children:"Professional Bio"}),e.jsx(jt,{id:"bio",value:Ct.bio,onChange:h=>Yn("bio",h.target.value),rows:4,placeholder:"Tell customers about your professional background and expertise...",disabled:J||M||X})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsx(P,{className:"bg-roam-blue hover:bg-roam-blue/90",onClick:FC,disabled:J||M||X,children:J?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Changes"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Professional Details"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(ae,{id:"dateOfBirth",type:"date",value:Ct.dateOfBirth,onChange:h=>Yn("dateOfBirth",h.target.value),disabled:J})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"experienceYears",children:"Years of Experience"}),e.jsx(ae,{id:"experienceYears",type:"number",min:"0",max:"50",value:Ct.experienceYears,onChange:h=>Yn("experienceYears",h.target.value),disabled:J})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Verification Status"}),e.jsx(ge,{className:(l==null?void 0:l.verification_status)==="verified"?"bg-green-100 text-green-800":(l==null?void 0:l.verification_status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:(l==null?void 0:l.verification_status)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Background Check"}),e.jsx(ge,{className:(l==null?void 0:l.background_check_status)==="approved"?"bg-green-100 text-green-800":(l==null?void 0:l.background_check_status)==="under_review"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:(l==null?void 0:l.background_check_status)||"Unknown"})]})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Performance Statistics"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:(l==null?void 0:l.total_bookings)||0}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:(l==null?void 0:l.completed_bookings)||0}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:(l==null?void 0:l.average_rating)||"0.0"}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:(l==null?void 0:l.total_reviews)||0}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Total Reviews"})]})]}),(l==null?void 0:l.provider_role)&&e.jsx("div",{className:"mt-4 p-4 bg-roam-light-blue/10 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Provider Role"}),e.jsx(ge,{className:"bg-roam-blue/20 text-roam-blue capitalize",children:l.provider_role})]})})]})]})]})]}),r&&e.jsxs(ds,{value:"analytics",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"w-5 h-5 text-roam-blue"}),"Revenue Trend"]})}),e.jsx(K,{children:e.jsx("div",{className:"h-48 bg-gradient-to-r from-roam-light-blue/20 to-roam-blue/20 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-foreground/60",children:"Chart visualization would go here"})})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Kg,{className:"w-5 h-5 text-roam-blue"}),"Service Performance"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Deep Tissue Massage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"w-3/4 h-2 bg-roam-blue rounded-full"})}),e.jsx("span",{className:"text-sm text-roam-blue",children:"75%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Swedish Massage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"w-1/2 h-2 bg-roam-light-blue rounded-full"})}),e.jsx("span",{className:"text-sm text-roam-blue",children:"50%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Sports Recovery"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"w-1/4 h-2 bg-roam-yellow rounded-full"})}),e.jsx("span",{className:"text-sm text-roam-blue",children:"25%"})]})]})]})})]})]})]}),r&&e.jsxs(ds,{value:"financial",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Management"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5 text-roam-blue"}),"Earnings Overview"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"This Month"}),e.jsx("span",{className:"text-xl font-semibold text-roam-blue",children:"$3,250"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Last Month"}),e.jsx("span",{className:"text-lg font-medium",children:"$2,890"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Total Earned"}),e.jsx("span",{className:"text-lg font-medium",children:"$47,325"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-green-600",children:"Growth"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+12.4%"})]})})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-roam-yellow"}),"Pending Payments"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Outstanding"}),e.jsx("span",{className:"text-xl font-semibold text-roam-yellow",children:"$485"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Next Payout"}),e.jsx("span",{className:"text-sm font-medium",children:"Tomorrow"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Completed Services"}),e.jsx("span",{className:"text-sm font-medium",children:"3 bookings"})]}),e.jsx(P,{variant:"outline",className:"w-full border-roam-yellow text-roam-yellow hover:bg-roam-yellow hover:text-white",children:"View Details"})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),"Payout Info"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-blue-600",children:"S"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Stripe Connect"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"acct_****4532"})]})]}),e.jsx(ge,{variant:"secondary",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-green-600",children:"P"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Plaid Link"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Bank verification"})]})]}),e.jsx(ge,{variant:"outline",children:"Verified"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-foreground/60",children:"Transfer Speed"}),e.jsx("span",{className:"font-medium",children:"Instant"})]})}),e.jsxs(P,{onClick:I4,variant:"outline",className:"w-full border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx(wi,{className:"w-4 h-4 mr-2"}),"Manage Payout"]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Tax Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),"Business Tax Registration"]})}),e.jsxs(K,{children:[cp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:cp}),dp&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded mb-4",children:dp}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"legal_business_name",children:"Legal Business Name *"}),e.jsx(ae,{id:"legal_business_name",value:js.legal_business_name,onChange:h=>lr("legal_business_name",h.target.value),placeholder:"Business legal name for tax purposes",disabled:or})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_id",children:"Tax ID (EIN/SSN) *"}),e.jsx(ae,{id:"tax_id",value:js.tax_id,onChange:h=>lr("tax_id",h.target.value),placeholder:"XX-XXXXXXX",disabled:or})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_id_type",children:"Tax ID Type *"}),e.jsxs(as,{value:js.tax_id_type,onValueChange:h=>lr("tax_id_type",h),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select ID type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"EIN",children:"EIN (Employer Identification Number)"}),e.jsx(ce,{value:"SSN",children:"SSN (Social Security Number)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_entity_type",children:"Business Entity Type *"}),e.jsxs(as,{value:js.business_entity_type,onValueChange:h=>lr("business_entity_type",h),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select entity type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"sole_proprietorship",children:"Sole Proprietorship"}),e.jsx(ce,{value:"partnership",children:"Partnership"}),e.jsx(ce,{value:"llc",children:"LLC"}),e.jsx(ce,{value:"corporation",children:"Corporation"}),e.jsx(ce,{value:"non_profit",children:"Non-Profit"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_contact_name",children:"Tax Contact Name *"}),e.jsx(ae,{id:"tax_contact_name",value:js.tax_contact_name,onChange:h=>lr("tax_contact_name",h.target.value),placeholder:"Primary contact for tax matters",disabled:or})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_contact_email",children:"Tax Contact Email *"}),e.jsx(ae,{id:"tax_contact_email",type:"email",value:js.tax_contact_email,onChange:h=>lr("tax_contact_email",h.target.value),placeholder:"tax@yourbusiness.com",disabled:or})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_contact_phone",children:"Tax Contact Phone"}),e.jsx(ae,{id:"tax_contact_phone",type:"tel",value:js.tax_contact_phone,onChange:h=>lr("tax_contact_phone",h.target.value),placeholder:"(XXX) XXX-XXXX",disabled:or})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(P,{variant:"outline",disabled:or,children:"Cancel"}),e.jsxs(P,{onClick:N4,className:"bg-roam-blue hover:bg-roam-blue/90",disabled:or,children:[or&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Save Tax Info"]})]})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-roam-blue"}),"Tax Mailing Address"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_address_line1",children:"Address Line 1 *"}),e.jsx(ae,{id:"tax_address_line1",value:js.tax_address_line1,onChange:h=>lr("tax_address_line1",h.target.value),placeholder:"Street address",disabled:or})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_address_line2",children:"Address Line 2"}),e.jsx(ae,{id:"tax_address_line2",value:js.tax_address_line2,onChange:h=>lr("tax_address_line2",h.target.value),placeholder:"Apt, suite, etc.",disabled:or})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_city",children:"City *"}),e.jsx(ae,{id:"tax_city",value:js.tax_city,onChange:h=>lr("tax_city",h.target.value),placeholder:"City",disabled:or})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_state",children:"State *"}),e.jsxs(as,{value:js.tax_state,onValueChange:h=>lr("tax_state",h),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"State"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"FL",children:"Florida"}),e.jsx(ce,{value:"CA",children:"California"}),e.jsx(ce,{value:"NY",children:"New York"}),e.jsx(ce,{value:"TX",children:"Texas"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"tax_postal_code",children:"ZIP Code *"}),e.jsx(ae,{id:"tax_postal_code",value:js.tax_postal_code,onChange:h=>lr("tax_postal_code",h.target.value),placeholder:"12345",disabled:or})]})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-roam-blue"}),"Stripe Tax Registration"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Registration Status"}),e.jsx(ge,{className:"bg-green-100 text-green-800",children:"Registered"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Stripe Tax ID"}),e.jsx("span",{className:"text-sm font-medium",children:"txr_****xyz123"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Registration Date"}),e.jsx("span",{className:"text-sm font-medium",children:"Jan 15, 2024"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"W-9 Status"}),e.jsx(ge,{className:"bg-green-100 text-green-800",children:"Received"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Tax Setup"}),e.jsx(ge,{className:"bg-green-100 text-green-800",children:"Complete"})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-roam-blue"}),"1099 Information"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"2024 Earnings"}),e.jsx("span",{className:"text-xl font-semibold text-roam-blue",children:"$47,325"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"1099 Threshold"}),e.jsx("span",{className:"text-sm font-medium",children:"$600 (Met)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"Threshold Reached"}),e.jsx("span",{className:"text-sm font-medium",children:"Feb 12, 2024"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/60",children:"1099 Status"}),e.jsx(ge,{className:"bg-yellow-100 text-yellow-800",children:"Will Generate"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx("p",{className:"text-xs text-foreground/60",children:"1099-NEC forms will be generated and sent by January 31st of the following year."})})]})})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Kg,{className:"w-5 h-5 text-roam-blue"}),"Recent Transactions"]})}),e.jsxs(K,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Received"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Deep Tissue Massage - Sarah M."})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-600",children:"+$120.00"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Jan 15, 2024"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Zt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payout Processed"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Weekly earnings"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-blue-600",children:"$850.00"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Jan 12, 2024"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(bs,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Service Fee"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Platform commission (8%)"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-600",children:"-$9.60"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Jan 15, 2024"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Received"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Couples Massage - John & Lisa D."})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-600",children:"+$240.00"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Jan 14, 2024"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(P,{variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:"View All Transactions"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(wi,{className:"w-5 h-5 text-roam-blue"}),"Payout Settings"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Auto Payout"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Automatically transfer earnings weekly"})]}),e.jsx(Ms,{defaultChecked:!0,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Payout Day"}),e.jsxs(as,{defaultValue:"friday",children:[e.jsx(ss,{children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"monday",children:"Monday"}),e.jsx(ce,{value:"tuesday",children:"Tuesday"}),e.jsx(ce,{value:"wednesday",children:"Wednesday"}),e.jsx(ce,{value:"thursday",children:"Thursday"}),e.jsx(ce,{value:"friday",children:"Friday"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Minimum Payout Amount"}),e.jsx(ae,{type:"number",defaultValue:"50",min:"25"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Minimum $25. Earnings below this amount will roll over to next payout."})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-roam-blue"}),"Tax Information"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Tax ID"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"***-**-1234"})]}),e.jsxs(P,{variant:"outline",size:"sm",children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Tax Documents"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent/20 rounded border",children:[e.jsx("span",{className:"text-sm",children:"2024 1099-NEC"}),e.jsx(ge,{variant:"secondary",children:"Available Soon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent/20 rounded border",children:[e.jsx("span",{className:"text-sm",children:"2023 1099-NEC"}),e.jsx(P,{variant:"outline",size:"sm",children:"Download"})]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx("p",{className:"text-xs text-foreground/60",children:"Tax documents are typically available by January 31st of the following year."})})]})]})]})]}),r&&e.jsxs(ds,{value:"subscription",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Subscription Plans"}),e.jsx(ge,{variant:"outline",className:"text-blue-600 border-blue-200",children:"30-Day Free Trial Available"})]}),po&&e.jsxs(V,{className:"border-blue-200 bg-blue-50/30",children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-blue-800",children:"Current Subscription"})}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:po.plan_name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["Status: ",po.subscription_status]}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["Next billing: ",po.end_date]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",po.price,"/month"]})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Yp.map(h=>e.jsxs(V,{className:`relative ${h.recommended?"border-blue-500 shadow-lg scale-105":"border-gray-200"}`,children:[h.recommended&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(ge,{className:"bg-blue-500 text-white",children:"Recommended"})}),e.jsxs(Se,{className:"text-center",children:[e.jsx(Ce,{className:"text-xl",children:h.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-4xl font-bold text-roam-blue",children:["$",h.price,e.jsx("span",{className:"text-lg font-normal text-foreground/60",children:"/month"})]}),e.jsx("p",{className:"text-sm text-foreground/60",children:h.description}),e.jsx(ge,{variant:"outline",className:"text-xs",children:h.staffLimit})]})]}),e.jsxs(K,{className:"space-y-4",children:[e.jsx("ul",{className:"space-y-2 text-sm",children:h.features.map((j,S)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsx("span",{children:j})]},S))}),e.jsx("div",{className:"pt-4",children:e.jsx(P,{onClick:()=>ZC(h.id),disabled:Vx||Wx===h.id,className:`w-full ${h.recommended?"bg-blue-500 hover:bg-blue-600":"bg-roam-blue hover:bg-roam-blue/90"}`,children:Vx&&Wx===h.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Start Free Trial",e.jsx("span",{className:"ml-2 text-xs opacity-80",children:"30 days free"})]})})})]})]},h.id))}),e.jsxs(V,{className:"bg-gray-50 border-gray-200",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5 text-green-600"}),"What's Included in All Plans"]})}),e.jsx(K,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Core Features"}),e.jsxs("ul",{className:"space-y-1 text-foreground/70",children:[e.jsx("li",{children:"• SSL Security"}),e.jsx("li",{children:"• 24/7 Support"}),e.jsx("li",{children:"• Mobile Apps"}),e.jsx("li",{children:"• Data Backup"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Business Tools"}),e.jsxs("ul",{className:"space-y-1 text-foreground/70",children:[e.jsx("li",{children:"�� Online Booking"}),e.jsx("li",{children:"• Payment Processing"}),e.jsx("li",{children:"• Customer Management"}),e.jsx("li",{children:"• Calendar Sync"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Growth Features"}),e.jsxs("ul",{className:"space-y-1 text-foreground/70",children:[e.jsx("li",{children:"• Analytics Dashboard"}),e.jsx("li",{children:"• Marketing Tools"}),e.jsx("li",{children:"• API Access"}),e.jsx("li",{children:"• Integrations"})]})]})]})})]}),e.jsxs("div",{className:"text-center space-y-2 pt-4",children:[e.jsx("p",{className:"text-sm text-foreground/60",children:"All plans include a 30-day free trial. Cancel anytime."}),e.jsx("p",{className:"text-xs text-foreground/50",children:"Powered by Stripe. Secure and reliable payment processing."})]})]})]})]})}),ze&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Manage Locations"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{G(!1),ke(!1),fe(null),hc()},children:"×"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[ys&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded mb-4",children:ys}),Gs&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded mb-4",children:Gs}),Cs?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:le?"Edit Location":"Add New Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"location_name",children:"Location Name *"}),e.jsx(ae,{id:"location_name",value:Ht.location_name,onChange:h=>zr("location_name",h.target.value),placeholder:"e.g., Downtown Office, Main Store",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"address_line1",children:"Address Line 1 *"}),e.jsx(ae,{id:"address_line1",value:Ht.address_line1,onChange:h=>zr("address_line1",h.target.value),placeholder:"Street address",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"address_line2",children:"Address Line 2"}),e.jsx(ae,{id:"address_line2",value:Ht.address_line2,onChange:h=>zr("address_line2",h.target.value),placeholder:"Apt, suite, unit, etc.",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"city",children:"City *"}),e.jsx(ae,{id:"city",value:Ht.city,onChange:h=>zr("city",h.target.value),placeholder:"City",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"state",children:"State"}),e.jsx(ae,{id:"state",value:Ht.state,onChange:h=>zr("state",h.target.value),placeholder:"State",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(ae,{id:"postal_code",value:Ht.postal_code,onChange:h=>zr("postal_code",h.target.value),placeholder:"ZIP/Postal code",disabled:We})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"country",children:"Country"}),e.jsx(ae,{id:"country",value:Ht.country,readOnly:!0,className:"bg-muted cursor-not-allowed",title:"Country cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"mobile_radius",children:"Mobile Service Radius (miles)"}),e.jsx(ae,{id:"mobile_radius",type:"number",min:"0",max:"100",value:Ht.mobile_service_radius,onChange:h=>zr("mobile_service_radius",parseInt(h.target.value)||0),disabled:We||!Ht.offers_mobile_services})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Primary Location"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Make this the main business location (only one primary allowed)"})]}),e.jsx(Ms,{checked:Ht.is_primary,onCheckedChange:h=>zr("is_primary",h),disabled:We,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Offers Mobile Services"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Services can be provided at customer locations"})]}),e.jsx(Ms,{checked:Ht.offers_mobile_services,onCheckedChange:h=>zr("offers_mobile_services",h),disabled:We,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Active Location"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Location is currently operational"})]}),e.jsx(Ms,{checked:Ht.is_active,onCheckedChange:h=>zr("is_active",h),disabled:We,className:"data-[state=checked]:bg-roam-blue"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(P,{onClick:WC,disabled:We,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:We?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),le?"Update Location":"Add Location"]})}),e.jsx(P,{variant:"outline",onClick:o4,disabled:We,className:"flex-1",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Business Locations"}),e.jsxs(P,{onClick:()=>{ke(!0),!ue.length&&!Ie&&_o()},className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Location"]})]}),Ie?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading locations..."})]}):ue.length>0?e.jsx("div",{className:"space-y-4",children:ue.map(h=>e.jsx(V,{children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:h.location_name}),h.is_primary&&e.jsx(ge,{className:"bg-roam-blue/20 text-roam-blue",children:"Primary"}),!h.is_active&&e.jsx(ge,{variant:"outline",className:"text-red-600 border-red-300",children:"Inactive"})]}),e.jsxs("div",{className:"text-sm text-foreground/70 space-y-1",children:[e.jsx("p",{children:h.address_line1}),h.address_line2&&e.jsx("p",{children:h.address_line2}),e.jsxs("p",{children:[h.city,", ",h.state," ",h.postal_code]}),e.jsx("p",{children:h.country}),h.offers_mobile_services&&e.jsxs("p",{className:"text-roam-blue",children:[e.jsx(Kt,{className:"w-4 h-4 inline mr-1"}),"Mobile services within"," ",h.mobile_service_radius," miles"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Gp(h),disabled:We,children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Xp(h.id),disabled:We,className:"border-red-300 text-red-600 hover:bg-red-50",children:e.jsx(ht,{className:"w-4 h-4"})})]})]})})},h.id))}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(ws,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No locations added yet"}),e.jsx("p",{className:"text-sm",children:"Add your first business location to get started"})]})]})]})]})}),Ks&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Edit Service"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:Kp,children:"×"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[un&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:typeof un=="string"?un:"An error occurred while updating the service"}),mn&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:mn}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:(fg=Ks.services)==null?void 0:fg.name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:[((gg=(pg=(xg=Ks.services)==null?void 0:xg.service_subcategories)==null?void 0:pg.service_categories)==null?void 0:gg.description)||((yg=(bg=(vg=Ks.services)==null?void 0:vg.service_subcategories)==null?void 0:bg.service_categories)==null?void 0:yg.service_category_type)," ","���"," ",((wg=(jg=Ks.services)==null?void 0:jg.service_subcategories)==null?void 0:wg.description)||((_g=(Ng=Ks.services)==null?void 0:Ng.service_subcategories)==null?void 0:_g.service_subcategory_type)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"delivery_type",children:"Delivery Type"}),e.jsxs(as,{value:Vt.delivery_type,onValueChange:h=>Wu("delivery_type",h),disabled:Jt,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select delivery type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"business_location",children:"Business"}),e.jsx(ce,{value:"customer_location",children:"Mobile"}),e.jsx(ce,{value:"virtual",children:"Virtual"}),e.jsx(ce,{value:"both_locations",children:"Business or Mobile"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"custom_price",children:"Business Price ($)"}),e.jsx(ae,{id:"custom_price",type:"number",step:"0.01",min:"0",value:Vt.custom_price,onChange:h=>Wu("custom_price",h.target.value),placeholder:`Default: $${((Sg=Ks.services)==null?void 0:Sg.min_price)||"0"}`,disabled:Jt}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Leave empty to use default service price"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Service Active"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Allow bookings for this service"})]}),e.jsx(Ms,{checked:Vt.is_active,onCheckedChange:h=>Wu("is_active",h),disabled:Jt,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(P,{onClick:l4,disabled:Jt,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:Jt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Update Service"]})}),e.jsx(P,{variant:"outline",onClick:Kp,disabled:Jt,className:"flex-1",children:"Cancel"})]})]})]})}),qS&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add New Service"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:Qp,children:"×"})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[un&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:typeof un=="string"?un:"An error occurred while processing the service"}),mn&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:mn}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"service_selection",children:"Select Service"}),VS?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mr-2"}),"Loading services..."]}):vo.length>0?e.jsxs(as,{value:Sa,onValueChange:Yx,disabled:Jt,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Choose a service to add"})}),e.jsx(ts,{children:vo.map(h=>{var j,S,k,L,se,Z;return e.jsx(ce,{value:h.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:h.name}),e.jsxs("span",{className:"text-xs text-foreground/60",children:[((S=(j=h.service_subcategories)==null?void 0:j.service_categories)==null?void 0:S.description)||((L=(k=h.service_subcategories)==null?void 0:k.service_categories)==null?void 0:L.service_category_type)," ","→"," ",((se=h.service_subcategories)==null?void 0:se.description)||((Z=h.service_subcategories)==null?void 0:Z.service_subcategory_type)]})]})},h.id)})})]}):e.jsx("div",{className:"text-center py-4 text-foreground/60",children:e.jsx("p",{className:"text-sm",children:"All available services have been added to your business"})})]}),Sa&&(()=>{const h=vo.find(j=>j.id===Sa);return h?e.jsxs("div",{className:"p-4 bg-accent/20 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:h.name}),h.description&&e.jsx("p",{className:"text-sm text-foreground/60 mb-2",children:h.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Default Price:"}),e.jsxs("span",{className:"font-medium ml-2",children:["$",h.min_price||"0"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground/60",children:"Duration:"}),e.jsxs("span",{className:"font-medium ml-2",children:[h.duration_minutes||"N/A"," mins"]})]})]})]}):null})(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"add_delivery_type",children:"Delivery Type"}),e.jsxs(as,{value:Fr.delivery_type,onValueChange:h=>Hu("delivery_type",h),disabled:Jt,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select delivery type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"business_location",children:"Business"}),e.jsx(ce,{value:"customer_location",children:"Mobile"}),e.jsx(ce,{value:"virtual",children:"Virtual"}),e.jsx(ce,{value:"both_locations",children:"Business or Mobile"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"add_custom_price",children:"Business Price ($)"}),e.jsx(ae,{id:"add_custom_price",type:"number",step:"0.01",min:"0",value:Fr.custom_price,onChange:h=>Hu("custom_price",h.target.value),placeholder:Sa?`Default: $${((Cg=vo.find(h=>h.id===Sa))==null?void 0:Cg.min_price)||"0"}`:"Enter custom price",disabled:Jt}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Leave empty to use default service price"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Service Active"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Allow bookings for this service immediately"})]}),e.jsx(Ms,{checked:Fr.is_active,onCheckedChange:h=>Hu("is_active",h),disabled:Jt,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(P,{onClick:d4,disabled:Jt||!Sa||vo.length===0,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:Jt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),e.jsx(P,{variant:"outline",onClick:Qp,disabled:Jt,className:"flex-1",children:"Cancel"})]})]})]})}),e.jsx(Xs,{open:uC,onOpenChange:Ip,children:e.jsxs(Vs,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-roam-blue"}),n&&!r&&!a?"My Calendar":"Business Calendar"]})}),mC?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading calendar..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(V,{children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-roam-blue",children:Gn.length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Total Bookings"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Gn.filter(h=>h.booking_status==="confirmed").length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Confirmed"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Gn.filter(h=>h.booking_status==="pending").length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Pending"})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Gn.filter(h=>h.booking_status==="completed").length}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Completed"})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming & Recent Bookings"}),Gn.length>0?e.jsx("div",{className:"space-y-3",children:Gn.map(h=>{var se,Z,me,ie,he,ve,_e,Ve,zs,br,qr;const j=vc(h.booking_status),S=bc(h.delivery_type||"business_location"),k=new Date(h.booking_date),L=k>=new Date;return e.jsx(V,{className:`hover:shadow-md transition-shadow ${L?"border-l-4 border-l-roam-blue":""}`,children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-2 ${h.booking_status==="confirmed"?"bg-green-500":h.booking_status==="pending"?"bg-yellow-500":h.booking_status==="completed"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold",children:((se=h.services)==null?void 0:se.name)||"Service"}),L&&e.jsx(ge,{variant:"secondary",className:"text-xs",children:"Upcoming"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(Z=h.customer_profiles)!=null&&Z.image_url?e.jsx("img",{src:h.customer_profiles.image_url,alt:"Customer",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:((ie=(me=h.customer_profiles)==null?void 0:me.first_name)==null?void 0:ie.charAt(0))||((he=h.guest_name)==null?void 0:he.charAt(0))||"C"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground/80",children:(ve=h.customer_profiles)!=null&&ve.first_name&&((_e=h.customer_profiles)!=null&&_e.last_name)?`${h.customer_profiles.first_name} ${h.customer_profiles.last_name}`:h.guest_name||"Unknown Customer"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground/60",children:[((Ve=h.customer_profiles)==null?void 0:Ve.email)&&e.jsx("span",{children:h.customer_profiles.email}),((zs=h.customer_profiles)==null?void 0:zs.phone)&&e.jsxs("span",{children:["���������"," ",h.customer_profiles.phone]})]})]})]}),h.booking_reference&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded-lg border-l-4 border-roam-blue",children:[e.jsx(Qc,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Booking Reference"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:h.booking_reference})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),k.toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),h.start_time]}),e.jsxs("div",{className:"flex items-start gap-1 min-w-0",children:[e.jsx(S,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-col min-w-0",children:(()=>{const Ts=fc(h);return typeof Ts=="string"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:Ts}),e.jsx("button",{onClick:()=>Kn(Ts),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium",children:Ts.name}),Ts.address&&e.jsx("span",{className:"text-xs text-foreground/50 block truncate",children:Ts.address})]}),Ts.address&&e.jsx("button",{onClick:()=>Kn(Ts.address),className:"flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Open in Google Maps for directions",children:e.jsx(ws,{className:"w-4 h-4"})})]}),Ts.instructions&&e.jsxs("span",{className:"text-xs text-blue-600 block truncate",children:["📝 ",Ts.instructions]})]})})()})]}),!n||r||a?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ds,{className:"w-4 h-4"}),(br=h.providers)==null?void 0:br.first_name," ",(qr=h.providers)==null?void 0:qr.last_name]}):null]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(ge,{className:j.color,children:j.label}),e.jsxs("p",{className:"text-lg font-semibold text-roam-blue mt-2",children:["$",h.total_amount||"0"]})]})]})})},h.id)})}):e.jsxs("div",{className:"text-center py-8 text-foreground/60",children:[e.jsx(Qe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-sm",children:n&&!r&&!a?"You don't have any bookings yet":"No bookings found for this business"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Calendar View:"})," ",n&&!r&&!a?"This shows only your personal bookings and appointments.":"This shows all bookings for your business across all providers."]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(P,{variant:"outline",onClick:()=>Ip(!1),children:"Close"})})]})}),e.jsx(Xs,{open:hC,onOpenChange:Iu,children:e.jsxs(Vs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-roam-blue"}),"Add New Staff - Step ",sc," of 3"]})}),Ap&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:Ap}),Mp&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:Mp}),sc===1&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Step 1: Create User Account"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Create a new user account for the staff member. They will receive a verification email."}),fC?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sr,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Verification Email Sent"})]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["A verification email has been sent to"," ",e.jsx("strong",{children:Wt.email}),". Please ask the staff member to check their email and enter the OTP code below."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"otp_code",children:"OTP Verification Code"}),e.jsx(ae,{id:"otp_code",value:rc,onChange:h=>Rp(h.target.value),placeholder:"Enter 6-digit code",maxLength:6,disabled:Ys})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>Mu(!1),disabled:Ys,children:"Back"}),e.jsxs(P,{onClick:UC,disabled:Ys||!rc,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:[Ys&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Verify & Continue"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"provider_email",children:"Staff Email Address *"}),e.jsx(ae,{id:"provider_email",type:"email",value:Wt.email,onChange:h=>Au(j=>({...j,email:h.target.value})),placeholder:"staff@example.com",disabled:Ys})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"confirm_email",children:"Confirm Email Address *"}),e.jsx(ae,{id:"confirm_email",type:"email",value:Wt.confirmEmail,onChange:h=>Au(j=>({...j,confirmEmail:h.target.value})),placeholder:"staff@example.com",disabled:Ys})]}),e.jsxs(P,{onClick:BC,disabled:Ys||!Wt.email||Wt.email!==Wt.confirmEmail,className:"w-full bg-roam-blue hover:bg-roam-blue/90",children:[Ys&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Send Verification Email"]})]})]})}),sc===2&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Step 2: Staff Profile"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Complete the staff member's profile information."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"first_name",children:"First Name *"}),e.jsx(ae,{id:"first_name",value:Ps.first_name,onChange:h=>na(j=>({...j,first_name:h.target.value})),disabled:Ys})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(ae,{id:"last_name",value:Ps.last_name,onChange:h=>na(j=>({...j,last_name:h.target.value})),disabled:Ys})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"staff_phone",children:"Phone Number"}),e.jsx(ae,{id:"staff_phone",type:"tel",value:Ps.phone,onChange:h=>na(j=>({...j,phone:h.target.value})),placeholder:"(XXX) XXX-XXXX",disabled:Ys})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"staff_role",children:"Staff Role"}),e.jsxs(as,{value:Ps.provider_role,onValueChange:h=>na(j=>({...j,provider_role:h})),disabled:Ys,children:[e.jsx(ss,{children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"provider",children:"Provider"}),e.jsx(ce,{value:"dispatcher",children:"Dispatcher"}),e.jsx(ce,{value:"owner",children:"Owner"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(ae,{id:"date_of_birth",type:"date",value:Ps.date_of_birth,onChange:h=>na(j=>({...j,date_of_birth:h.target.value})),disabled:Ys})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"experience_years",children:"Years of Experience"}),e.jsx(ae,{id:"experience_years",type:"number",min:"0",max:"50",value:Ps.experience_years,onChange:h=>na(j=>({...j,experience_years:h.target.value})),disabled:Ys})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"provider_location",children:"Assigned Location"}),e.jsxs(as,{value:Ps.location_id,onValueChange:h=>na(j=>({...j,location_id:h})),disabled:Ys,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select a business location"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"none",children:"No location assigned"}),ue.map(h=>e.jsxs(ce,{value:h.id,children:[h.location_name," ",h.is_primary&&"(Primary)"]},h.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"bio",children:"Bio / Description"}),e.jsx(jt,{id:"bio",value:Ps.bio,onChange:h=>na(j=>({...j,bio:h.target.value})),rows:3,placeholder:"Brief description of the staff member's background and expertise...",disabled:Ys})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>No(1),disabled:Ys,children:"Back"}),e.jsx(P,{onClick:zC,disabled:Ys||!Ps.first_name||!Ps.last_name,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:"Continue"})]})]})}),sc===3&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Step 3: Management Settings"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Configure how this staff member will be managed and what services they inherit."}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-base",children:"Staff Management"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Managed by Business"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Business controls this staff member's services and settings"})]}),e.jsx(Ms,{checked:$r.business_managed,onCheckedChange:h=>ac(j=>({...j,business_managed:h,inherit_business_services:h,inherit_business_addons:h})),className:"data-[state=checked]:bg-roam-blue"})]}),$r.business_managed&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-roam-blue/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Inherit Business Services"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Automatically inherit all business services"})]}),e.jsx(Ms,{checked:$r.inherit_business_services,onCheckedChange:h=>ac(j=>({...j,inherit_business_services:h})),className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Inherit Business Add-ons"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Automatically inherit all business add-ons"})]}),e.jsx(Ms,{checked:$r.inherit_business_addons,onCheckedChange:h=>ac(j=>({...j,inherit_business_addons:h})),className:"data-[state=checked]:bg-roam-blue"})]})]}),!$r.business_managed&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Self-Managed Staff:"})," This staff member will have full control over their services and settings. They can still choose to inherit business services and later modify them."]})})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-base",children:"Summary"})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Email:"}),e.jsx("span",{children:Wt.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Name:"}),e.jsxs("span",{children:[Ps.first_name," ",Ps.last_name]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Role:"}),e.jsx("span",{className:"capitalize",children:Ps.provider_role})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Location:"}),e.jsx("span",{children:Ps.location_id?((kg=ue.find(h=>h.id===Ps.location_id))==null?void 0:kg.location_name)||"Unknown":"No location assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Management:"}),e.jsx("span",{children:$r.business_managed?"Business Managed":"Self Managed"})]})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>No(2),disabled:Ys,children:"Back"}),e.jsxs(P,{onClick:qC,disabled:Ys,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:[Ys&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Create Staff"]})]})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(P,{variant:"outline",onClick:qu,disabled:Ys,children:"Cancel"})})]})}),e.jsx(Xs,{open:xC,onOpenChange:Fp,children:e.jsxs(Vs,{className:"max-w-2xl",children:[e.jsx(Js,{children:e.jsxs(Ws,{children:["Manage Provider - ",ks==null?void 0:ks.first_name," ",ks==null?void 0:ks.last_name]})}),e.jsxs("div",{className:"space-y-6",children:[Ru&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:Ru}),Ou&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:Ou}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-base",children:"Provider Information"})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Email:"}),e.jsx("span",{children:ks==null?void 0:ks.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Phone:"}),e.jsx("span",{children:(ks==null?void 0:ks.phone)||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Created:"}),e.jsx("span",{children:ks!=null&&ks.created_at?new Date(ks.created_at).toLocaleDateString():"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/60",children:"Experience:"}),e.jsx("span",{children:ks!=null&&ks.experience_years?`${ks.experience_years} years`:"Not specified"})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-base",children:"Management Settings"})}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"provider_role",children:"Provider Role"}),e.jsxs(as,{value:Es.provider_role,onValueChange:h=>So("provider_role",h),disabled:Ea,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select role"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"provider",children:"Provider"}),e.jsx(ce,{value:"dispatcher",children:"Dispatcher"}),e.jsx(ce,{value:"owner",children:"Owner"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"verification_status",children:"Verification Status"}),e.jsxs(as,{value:Es.verification_status,onValueChange:h=>So("verification_status",h),disabled:Ea,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select status"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"verified",children:"Verified"}),e.jsx(ce,{value:"rejected",children:"Rejected"}),e.jsx(ce,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"location_assignment",children:"Assigned Location"}),e.jsxs(as,{value:Es.location_id,onValueChange:h=>So("location_id",h),disabled:Ea,children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select a business location"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"none",children:"No location assigned"}),ue.map(h=>e.jsxs(ce,{value:h.id,children:[h.location_name," ",h.is_primary&&"(Primary)"]},h.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Active Status"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Provider can receive bookings and access the platform"})]}),e.jsx(Ms,{checked:Es.is_active,onCheckedChange:h=>So("is_active",h),disabled:Ea,className:"data-[state=checked]:bg-roam-blue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Business Managed"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Business controls this provider's services and settings"})]}),e.jsx(Ms,{checked:Es.business_managed,onCheckedChange:h=>So("business_managed",h),disabled:Ea,className:"data-[state=checked]:bg-roam-blue"})]})]}),e.jsxs("div",{className:"p-4 bg-accent/20 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Service Management"}),e.jsx("p",{className:"text-sm text-foreground/60",children:Es.business_managed?"This provider's services are managed by the business. They can view assigned services but cannot change assignments or pricing.":"This provider has self-management enabled. They can activate/deactivate their service assignments, though pricing is still controlled by the business."})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(P,{onClick:VC,disabled:Ea,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:Ea?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wi,{className:"w-4 h-4 mr-2"}),"Save Changes"]})}),e.jsx(P,{variant:"outline",onClick:JC,disabled:Ea,className:"flex-1",children:"Cancel"})]})]})]})}),e.jsx(Xs,{open:YS,onOpenChange:Ul,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Edit Business Service"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:(Eg=lt==null?void 0:lt.services)==null?void 0:Eg.name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["Minimum price: $",((Pg=lt==null?void 0:lt.services)==null?void 0:Pg.min_price)||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"business_price",children:"Business Price ($)"}),e.jsx(ae,{id:"business_price",type:"number",step:"0.01",min:((Tg=lt==null?void 0:lt.services)==null?void 0:Tg.min_price)||"0",value:ql.business_price,onChange:h=>Nu(j=>({...j,business_price:h.target.value})),placeholder:"Enter business price"}),e.jsxs("p",{className:"text-xs text-foreground/60",children:["Must be at least $",((Ig=lt==null?void 0:lt.services)==null?void 0:Ig.min_price)||"0"," (service minimum)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"delivery_type",children:"Delivery Type"}),e.jsxs(as,{value:ql.delivery_type,onValueChange:h=>Nu(j=>({...j,delivery_type:h})),children:[e.jsx(ss,{children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"business_location",children:"Business Location"}),e.jsx(ce,{value:"customer_location",children:"Customer Location"}),e.jsx(ce,{value:"both_locations",children:"Both"}),e.jsx(ce,{value:"virtual",children:"Virtual"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(P,{variant:"outline",onClick:()=>Ul(!1),className:"flex-1",children:"Cancel"}),e.jsx(P,{onClick:p4,disabled:Wn,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:Wn?"Saving...":"Save"})]})]})]})}),e.jsx(Xs,{open:ZS,onOpenChange:zl,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Edit Business Add-on"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:(Ag=ir==null?void 0:ir.service_addons)==null?void 0:Ag.name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["Default price: $",((Mg=ir==null?void 0:ir.service_addons)==null?void 0:Mg.default_price)||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"custom_price",children:"Custom Price ($)"}),e.jsx(ae,{id:"custom_price",type:"number",step:"0.01",min:"0",value:Vl.custom_price,onChange:h=>ip(j=>({...j,custom_price:h.target.value})),placeholder:"Enter custom price"}),e.jsxs("p",{className:"text-xs text-foreground/60",children:["Leave empty to use default price ($",((Rg=ir==null?void 0:ir.service_addons)==null?void 0:Rg.default_price)||"0",")"]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(P,{variant:"outline",onClick:()=>zl(!1),className:"flex-1",children:"Cancel"}),e.jsx(P,{onClick:v4,disabled:Wn,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:Wn?"Saving...":"Save"})]})]})]})}),e.jsx(Xs,{open:RS,onOpenChange:Il,children:e.jsxs(Vs,{className:"max-w-6xl max-h-[90vh]",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Edit Staff Member"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 overflow-y-auto max-h-[75vh]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Staff Member Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"first_name",children:"First Name *"}),e.jsx(ae,{id:"first_name",value:Os.first_name,onChange:h=>rr(j=>({...j,first_name:h.target.value})),placeholder:"First name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(ae,{id:"last_name",value:Os.last_name,onChange:h=>rr(j=>({...j,last_name:h.target.value})),placeholder:"Last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email *"}),e.jsx(ae,{id:"email",type:"email",value:Os.email,onChange:h=>rr(j=>({...j,email:h.target.value})),placeholder:"Email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Phone *"}),e.jsx(ae,{id:"phone",value:Os.phone,onChange:h=>rr(j=>({...j,phone:h.target.value})),placeholder:"Phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"provider_role",children:"Provider Role"}),e.jsxs(as,{value:Os.provider_role,onValueChange:h=>rr(j=>({...j,provider_role:h})),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select role"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"owner",children:"Owner"}),e.jsx(ce,{value:"dispatcher",children:"Dispatcher"}),e.jsx(ce,{value:"provider",children:"Provider"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"location_id",children:"Location (Optional)"}),e.jsxs(as,{value:Os.location_id,onValueChange:h=>rr(j=>({...j,location_id:h==="none"?"":h})),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select location (optional)"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"none",children:"No Location Assigned"}),ue.map(h=>e.jsxs(ce,{value:h.id,children:[h.location_name," ",h.is_primary&&"(Primary)"]},h.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"experience_years",children:"Experience (Years)"}),e.jsx(ae,{id:"experience_years",type:"number",min:"0",max:"50",value:Os.experience_years,onChange:h=>rr(j=>({...j,experience_years:h.target.value})),placeholder:"Years of experience"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"verification_status",children:"Verification Status"}),e.jsxs(as,{value:Os.verification_status,onValueChange:h=>rr(j=>({...j,verification_status:h})),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select status"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"documents_submitted",children:"Documents Submitted"}),e.jsx(ce,{value:"under_review",children:"Under Review"}),e.jsx(ce,{value:"approved",children:"Approved"}),e.jsx(ce,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"background_check_status",children:"Background Check"}),e.jsxs(as,{value:Os.background_check_status,onValueChange:h=>rr(j=>({...j,background_check_status:h})),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select status"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"under_review",children:"Under Review"}),e.jsx(ce,{value:"approved",children:"Approved"}),e.jsx(ce,{value:"failed",children:"Failed"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"business_managed",checked:Os.business_managed,onChange:h=>rr(j=>({...j,business_managed:h.target.checked})),className:"rounded"}),e.jsx(B,{htmlFor:"business_managed",children:"Business Managed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:Os.is_active,onChange:h=>rr(j=>({...j,is_active:h.target.checked})),className:"rounded"}),e.jsx(B,{htmlFor:"is_active",children:"Active"})]})]}),Os.provider_role==="provider"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Service & Addon Assignment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Services"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-green-700",children:"Currently Assigned Services"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-green-50",children:$x?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading assignments..."}):fu.length>0?e.jsx("div",{className:"space-y-2",children:fu.map(h=>{var j,S;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium",children:((j=h.services)==null?void 0:j.name)||"Unknown Service"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",((S=h.services)==null?void 0:S.min_price)||0]})]}),e.jsx("button",{className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded",onClick:()=>GC(h.id,Ot==null?void 0:Ot.id),children:"Remove"})]},h.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No services currently assigned"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700",children:"Available to Assign"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-blue-50",children:Fl.length>0?e.jsx("div",{className:"space-y-2",children:Fl.filter(h=>!fu.some(j=>{var S,k;return((S=j.services)==null?void 0:S.id)===((k=h.services)==null?void 0:k.id)})).map(h=>{var j,S;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium",children:((j=h.services)==null?void 0:j.name)||"Unknown Service"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",((S=h.services)==null?void 0:S.min_price)||0]})]}),e.jsx("button",{className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded",onClick:()=>{var k;return HC(Ot==null?void 0:Ot.id,(k=h.services)==null?void 0:k.id)},children:"Assign"})]},h.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No business services available for assignment"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Addons"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-green-700",children:"Currently Assigned Addons"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-green-50",children:$x?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading assignments..."}):xu.length>0?e.jsx("div",{className:"space-y-2",children:xu.map(h=>{var j;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"text-sm font-medium",children:((j=h.service_addons)==null?void 0:j.name)||"Unknown Addon"})}),e.jsx("button",{className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded",onClick:()=>YC(h.id,Ot==null?void 0:Ot.id),children:"Remove"})]},h.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No addons currently assigned"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700",children:"Available to Assign"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-blue-50",children:$l.length>0?e.jsx("div",{className:"space-y-2",children:$l.filter(h=>!xu.some(j=>{var S,k;return((S=j.service_addons)==null?void 0:S.id)===((k=h.service_addons)==null?void 0:k.id)})).map(h=>{var j;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium",children:((j=h.service_addons)==null?void 0:j.name)||"Unknown Addon"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",h.custom_price||"No price set"]})]}),e.jsx("button",{className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded",onClick:()=>{var S;return XC(Ot==null?void 0:Ot.id,(S=h.service_addons)==null?void 0:S.id)},children:"Assign"})]},h.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No business addons available for assignment"})})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 flex gap-2 pt-4 border-t",children:[e.jsx(P,{variant:"outline",onClick:()=>Il(!1),className:"flex-1",children:"Cancel"}),e.jsx(P,{onClick:n4,disabled:fo,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:fo?"Saving...":"Save"})]})]})]})}),e.jsx(V_,{isOpen:BS,onClose:QC,booking:ar?{id:ar.id,customer_name:((Og=ar.customer_profiles)==null?void 0:Og.first_name)||ar.guest_name||"Customer",customer_email:((Dg=ar.customer_profiles)==null?void 0:Dg.email)||ar.guest_email||"",customer_phone:((Fg=ar.customer_profiles)==null?void 0:Fg.phone)||ar.guest_phone||"",service_name:((Lg=ar.services)==null?void 0:Lg.name)||"Service",provider_name:`${(l==null?void 0:l.first_name)||""} ${(l==null?void 0:l.last_name)||""}`.trim()||"Provider",business_id:(l==null?void 0:l.business_id)||"",customer_id:ar.customer_id,customer_profiles:ar.customer_profiles,providers:ar.providers}:void 0}),e.jsx(W$,{isOpen:US,onClose:e4}),e.jsxs(z1,{open:MS,onOpenChange:mu,children:[e.jsx(q1,{asChild:!0,children:e.jsx("button",{style:{display:"none"}})}),e.jsxs(ox,{children:[e.jsxs(lx,{children:[e.jsx(dx,{children:"Delete Location"}),e.jsxs(ux,{children:['Are you sure you want to delete "',ta==null?void 0:ta.location_name,'"?']}),(ta==null?void 0:ta.is_primary)&&e.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"⚠️ Warning: This is your primary location"}),e.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"Deleting it will leave your business without a primary location."})]}),e.jsx("div",{className:"mt-3 text-sm text-foreground/80",children:"This action cannot be undone. Any bookings or assignments to this location may be affected."})]}),e.jsxs(cx,{children:[e.jsx(hx,{onClick:()=>hu(null),children:"Cancel"}),e.jsx(mx,{onClick:i4,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete Location"})]})]})]}),e.jsx(Xs,{open:rC,onOpenChange:Gl,children:e.jsxs(Vs,{className:"max-w-lg",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),"Manage Payouts"]})}),e.jsxs("div",{className:"space-y-6",children:[xp&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:xp}),pp&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:pp}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Bank Account Connection"}),e.jsx("p",{className:"text-sm text-foreground/60 mb-4",children:"Connect your bank account securely through Plaid to receive payouts from Stripe."})]}),_t!=null&&_t.bank_connected?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Bank Account Connected"}),e.jsxs("p",{className:"text-sm text-green-600",children:[_t==null?void 0:_t.bank_name," ****",_t==null?void 0:_t.account_last4]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-foreground/60",children:"Payout Schedule"}),e.jsx("span",{className:"font-medium",children:(_t==null?void 0:_t.payout_schedule)||"Daily"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-foreground/60",children:"Transfer Speed"}),e.jsx("span",{className:"font-medium",children:(_t==null?void 0:_t.transfer_speed)||"Standard (2-3 days)"})]})]}),e.jsxs(P,{onClick:A4,disabled:gp,variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",children:[gp&&e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin mr-2"}),"Disconnect Bank Account"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(It,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Secure Connection"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"We use Plaid's bank-grade security to safely connect your account. Your banking credentials are never stored on our servers."})]}),_u?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 text-center",children:"✓ Connection token ready! Plaid Link should open automatically."})}),e.jsxs(P,{onClick:E4,disabled:Wl,variant:"outline",className:"w-full border-green-500 text-green-700 hover:bg-green-50",children:[Wl&&e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin mr-2"}),"Open Plaid Link Manually"]})]}):e.jsxs(P,{onClick:k4,disabled:Wl,className:"w-full bg-roam-blue hover:bg-roam-blue/90",children:[Wl&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Connect Bank Account"]}),e.jsx("div",{className:"text-xs text-foreground/60 text-center",children:"By connecting your bank account, you agree to our terms of service and Stripe's connected account agreement."})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(P,{variant:"outline",onClick:()=>Gl(!1),className:"flex-1",children:"Cancel"})})]})]})}),e.jsx(Xs,{open:zS,onOpenChange:Ml,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Decline Booking"]})}),e.jsxs("div",{className:"space-y-4",children:[Dr&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm",children:(($g=Dr.services)==null?void 0:$g.name)||"Service"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Customer:"," ",(Bg=Dr.customer_profiles)==null?void 0:Bg.first_name," ",((Ug=Dr.customer_profiles)==null?void 0:Ug.last_name)||Dr.guest_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date:"," ",new Date(Dr.booking_date).toLocaleDateString()," ","at ",Dr.start_time]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"decline-reason",className:"text-sm font-medium",children:["Decline Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(jt,{id:"decline-reason",placeholder:"Please provide a reason for declining this booking. This message will be visible to the customer.",value:xo,onChange:h=>Rl(h.target.value),rows:3,className:"resize-none"}),e.jsx("p",{className:"text-xs text-gray-500",children:"The customer will be able to see this reason in their booking details."})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{Ml(!1),pu(null),Rl("")},className:"flex-1",children:"Cancel"}),e.jsx(P,{onClick:M4,disabled:!xo.trim(),className:"flex-1 bg-red-600 hover:bg-red-700",children:"Decline Booking"})]})]})]})}),e.jsx(Xs,{open:kS,onOpenChange:du,children:e.jsxs(Vs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5 text-roam-blue"}),"Profile Settings"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notification Preferences"}),e.jsx(V,{children:e.jsx(K,{className:"space-y-6 pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Notification Contact Details"}),e.jsx("p",{className:"text-sm text-foreground/60 mb-4",children:"Specify dedicated contact details for receiving notifications and alerts"})]}),Du&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:Du}),Lu&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:Lu}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"notification_email",children:"Notification Email"}),e.jsx(ae,{id:"notification_email",type:"email",value:oc.notification_email,onChange:h=>Wp("notification_email",h.target.value),placeholder:"Enter email for notifications (optional)",disabled:lc}),e.jsx("p",{className:"text-xs text-foreground/60",children:"If provided, notifications will be sent to this email instead of your main account email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"notification_phone",children:"Notification Phone"}),e.jsx(ae,{id:"notification_phone",type:"tel",value:oc.notification_phone,onChange:h=>Wp("notification_phone",h.target.value),placeholder:"Enter phone for SMS notifications (optional)",disabled:lc}),e.jsx("p",{className:"text-xs text-foreground/60",children:"If provided, SMS notifications will be sent to this number instead of your main phone number"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{onClick:DC,disabled:lc,className:"bg-roam-blue hover:bg-roam-blue/90",size:"sm",children:lc?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Notification Settings"}),e.jsx(P,{variant:"outline",onClick:()=>du(!1),size:"sm",children:"Close"})]})]})]})})})]})]})}),e.jsx(Xs,{open:ES,onOpenChange:uu,children:e.jsxs(Vs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(Ci,{className:"w-5 h-5 text-roam-blue"}),"Share Your Booking Page"]}),e.jsx(ge,{variant:"outline",className:"text-green-600 border-green-200",children:"Public Booking Page"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Ci,{className:"w-5 h-5 text-roam-blue"}),"Customer Booking URL"]}),e.jsx("p",{className:"text-foreground/60",children:"Share this link with customers so they can book your services directly"})]}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Your Public Booking Page"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{value:`${window.location.origin}/book/${l==null?void 0:l.business_id}`,readOnly:!0,className:"font-mono text-sm"}),e.jsx(P,{variant:"outline",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(`${window.location.origin}/book/${l==null?void 0:l.business_id}`),i({title:"Link copied!",description:"Booking page URL has been copied to your clipboard"})}catch{i({title:"Copy failed",description:"Please manually copy the URL",variant:"destructive"})}},children:e.jsx(th,{className:"w-4 h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{window.open(`${window.location.origin}/book/${l==null?void 0:l.business_id}`,"_blank")},children:e.jsx(Wa,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What customers will see:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Your business information and description"}),e.jsx("li",{children:"• All available services with pricing"}),e.jsx("li",{children:"• Available add-ons and extras"}),e.jsx("li",{children:"• Easy booking form to request appointments"}),e.jsx("li",{children:"• Your contact information and location"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{children:e.jsxs(K,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Share via Social Media"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{const h=`${window.location.origin}/book/${l==null?void 0:l.business_id}`,j=`Book services with ${m==null?void 0:m.business_name}!`;window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(h)}&text=${encodeURIComponent(j)}`,"_blank")},children:"Twitter"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{const h=`${window.location.origin}/book/${l==null?void 0:l.business_id}`;window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(h)}`,"_blank")},children:"Facebook"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{const h=`${window.location.origin}/book/${l==null?void 0:l.business_id}`,j=`Book services with ${m==null?void 0:m.business_name}! ${h}`;window.open(`https://wa.me/?text=${encodeURIComponent(j)}`,"_blank")},children:"WhatsApp"})]})]})}),e.jsx(V,{children:e.jsxs(K,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"QR Code"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"QR Code"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Coming Soon"})]})}),e.jsx("p",{className:"text-xs text-foreground/60",children:"QR code for easy mobile sharing"})]})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"How to use your booking page:"}),e.jsxs("div",{className:"space-y-2 text-sm text-foreground/70",children:[e.jsxs("p",{children:["1. ",e.jsx("strong",{children:"Share the link"})," - Send the URL to customers via email, text, or social media"]}),e.jsxs("p",{children:["2. ",e.jsx("strong",{children:"Add to your website"})," - Link to this page from your website or business cards"]}),e.jsxs("p",{children:["3. ",e.jsx("strong",{children:"Print materials"})," - Include the URL or QR code on flyers, business cards, or signage"]}),e.jsxs("p",{children:["4. ",e.jsx("strong",{children:"Receive bookings"})," - Customers fill out the booking form and you'll receive notifications"]})]})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsx(P,{variant:"outline",onClick:()=>uu(!1),size:"sm",children:"Close"})})]})]}),m&&e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Preview Your Business Information"}),e.jsx("p",{className:"text-foreground/60",children:"This is what customers will see on your booking page"})]}),e.jsx(K,{children:e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:m.logo_url||m.image_url?e.jsx("img",{src:m.logo_url||m.image_url,alt:m.business_name,className:"w-16 h-16 object-cover rounded-lg"}):e.jsx("div",{className:"text-2xl font-bold text-gray-500",children:m.business_name.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:m.business_name}),e.jsx(ge,{variant:"secondary",className:"mb-2",children:m.business_type}),m.business_description&&e.jsx("p",{className:"text-foreground/70",children:m.business_description}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-foreground/60",children:[m.contact_email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-4 h-4"}),e.jsx("span",{children:m.contact_email})]}),m.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(En,{className:"w-4 h-4"}),e.jsx("span",{children:m.phone})]})]})]})]})})})]})]})]})})]})}const Z$=({onVerificationComplete:s,onVerificationPending:t,className:r=""})=>{const{user:a}=Ss(),[n,i]=d.useState(null),[o,c]=d.useState(!1),[l,u]=d.useState(null),[m,x]=d.useState(!1);d.useEffect(()=>{f()},[a]);const f=async()=>{if(a)try{x(!0);const{data:b,error:w}=await W.from("provider_verifications").select("stripe_verification_session_id, verification_status, verified_data").eq("user_id",a.id).single();if(w&&w.code!=="PGRST116"){console.error("Error checking existing verification:",w);return}b!=null&&b.stripe_verification_session_id&&await v(b.stripe_verification_session_id)}catch(b){console.error("Error checking existing verification:",b)}finally{x(!1)}},p=async()=>{if(!a){u("User must be authenticated to start verification");return}try{c(!0),u(null);const b={id:`vs_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,status:"requires_input",url:`https://verify.stripe.com/start/${Date.now()}`,client_secret:`vs_test_${Math.random().toString(36).substr(2,20)}`};i(b);const{error:w}=await W.from("provider_verifications").upsert({user_id:a.id,stripe_verification_session_id:b.id,verification_status:"requires_input",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});w&&console.error("Error storing verification session:",w)}catch(b){console.error("Error creating verification session:",b),u("Failed to start verification process. Please try again.")}finally{c(!1)}},v=async b=>{const w=b||(n==null?void 0:n.id);if(w)try{x(!0);let y="processing";const _=parseInt(w.split("_")[1])||Date.now(),N=Date.now()-_;N>1e4?y="verified":N>5e3?y="processing":y="requires_input";const C={...n,status:y,verified_outputs:y==="verified"?{first_name:"John",last_name:"Doe",dob:{day:15,month:6,year:1990},id_number:"****1234",address:{line1:"123 Main St",city:"San Francisco",state:"CA",postal_code:"94105",country:"US"}}:void 0};if(i(C),a){const{error:R}=await W.from("provider_verifications").update({verification_status:C.status,verified_data:C.verified_outputs||null,updated_at:new Date().toISOString()}).eq("user_id",a.id);R&&console.error("Error updating verification status:",R)}C.status==="verified"?s(C.verified_outputs):C.status==="processing"&&t()}catch(y){console.error("Error checking verification status:",y),u("Failed to check verification status")}finally{x(!1)}},g=()=>{if(!n)return null;switch(n.status){case"requires_input":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(bs,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Verification Ready"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Click the button below to complete your identity verification with Stripe."})]})]}),e.jsxs(P,{onClick:()=>window.open(n.url,"_blank"),className:"w-full",size:"lg",children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Complete Identity Verification"]}),e.jsxs(P,{variant:"outline",onClick:()=>v(),disabled:m,className:"w-full",children:[m?e.jsx(ur,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Check Status"]})]});case"processing":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(bs,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"Verification Processing"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Your identity verification is being processed. This usually takes a few minutes."})]})]}),e.jsxs(P,{variant:"outline",onClick:()=>v(),disabled:m,className:"w-full",children:[m?e.jsx(ur,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Check Status"]})]});case"verified":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Verification Complete"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your identity has been successfully verified with Stripe."})]})]}),n.verified_outputs&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"Verified Information:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[n.verified_outputs.first_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"First Name:"}),e.jsx("span",{className:"ml-2 font-medium",children:n.verified_outputs.first_name})]}),n.verified_outputs.last_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Name:"}),e.jsx("span",{className:"ml-2 font-medium",children:n.verified_outputs.last_name})]}),n.verified_outputs.dob&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[n.verified_outputs.dob.month,"/",n.verified_outputs.dob.day,"/",n.verified_outputs.dob.year]})]})]})]})]});case"canceled":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ht,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Verification Canceled"}),e.jsx("p",{className:"text-sm text-red-800",children:"The verification process was canceled. Please start a new verification."})]})]}),e.jsx(P,{onClick:p,disabled:o,className:"w-full",children:"Start New Verification"})]});default:return null}};return m?e.jsxs(V,{className:r,children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Identity Verification"]})}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ur,{className:"w-6 h-6 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Checking verification status..."})]})})]}):e.jsxs(V,{className:r,children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Identity Verification",(n==null?void 0:n.status)==="verified"&&e.jsx(ge,{variant:"default",className:"bg-green-100 text-green-800",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure identity verification powered by Stripe Identity"})]}),e.jsxs(K,{className:"space-y-6",children:[l&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ht,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-800",children:l})]}),n?g():e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"What you'll need:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(At,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Government ID"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(_r,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Device Camera"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ld,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Personal Info"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Why verify your identity?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Required for marketplace compliance and safety"}),e.jsx("li",{children:"• Protects customers and providers"}),e.jsx("li",{children:"• Enables secure payments and payouts"}),e.jsx("li",{children:"• Fast, secure process powered by Stripe"})]})]}),e.jsxs(P,{onClick:p,disabled:o,size:"lg",className:"w-full",children:[o?e.jsx(ur,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(It,{className:"w-4 h-4 mr-2"}),"Start Identity Verification"]})]})]})]})};function K$(){const[s,t]=d.useState(1),[r,a]=d.useState(!1),[n,i]=d.useState(!1),[o,c]=d.useState(!1),[l,u]=d.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",socialSecurity:"",driversLicense:"",businessName:"",businessType:"",yearsExperience:"",serviceCategories:[],businessAddress:"",businessCity:"",businessState:"",businessZip:"",idDocument:null,businessLicense:null,insurance:null,certifications:[],bio:"",specialties:[],languages:[],backgroundConsent:!1,termsAccepted:!1,privacyAccepted:!1}),m=[{id:1,title:"Personal Info",description:"Basic personal information",icon:At},{id:2,title:"Business Details",description:"Your business information",icon:fs},{id:3,title:"Verification",description:"Identity and document verification",icon:It},{id:4,title:"Professional Profile",description:"Services and expertise",icon:us},{id:5,title:"Review & Submit",description:"Final review and submission",icon:Xe}],x=["Beauty & Wellness","Massage Therapy","Personal Training","Healthcare","Home Services","Wellness Coaching"],f={"Beauty & Wellness":["Hair Styling","Makeup","Nails","Skincare","Lashes"],"Massage Therapy":["Deep Tissue","Swedish","Sports","Prenatal","Hot Stone"],"Personal Training":["Weight Training","HIIT","Yoga","Pilates","Cardio"],Healthcare:["General Medicine","Physical Therapy","Mental Health","Nutrition"],"Home Services":["Cleaning","Organization","Pet Care","Childcare"],"Wellness Coaching":["Life Coaching","Nutrition","Mindfulness","Stress Management"]},p=()=>{s<m.length&&t(s+1)},v=()=>{s>1&&t(s-1)},g=N=>{i(!0),c(!1),console.log("Identity verification completed:",N)},b=()=>{c(!0),i(!1)},w=async()=>{a(!0),setTimeout(()=>{a(!1),alert("Application submitted successfully! You'll receive an email within 3-5 business days.")},3e3)},y=N=>{u(C=>({...C,serviceCategories:C.serviceCategories.includes(N)?C.serviceCategories.filter(R=>R!==N):[...C.serviceCategories,N]}))},_=N=>{u(C=>({...C,specialties:C.specialties.includes(N)?C.specialties.filter(R=>R!==N):[...C.specialties,N]}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/provider-portal",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Portal"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-8 h-8 object-contain"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-roam-blue to-roam-light-blue bg-clip-text text-transparent",children:"ROAM"})]})]}),e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:"Provider Application"})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:m.map((N,C)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 ${s>N.id?"bg-roam-blue border-roam-blue text-white":s===N.id?"border-roam-blue text-roam-blue":"border-gray-300 text-gray-400"}`,children:s>N.id?e.jsx(Xe,{className:"w-6 h-6"}):e.jsx(N.icon,{className:"w-6 h-6"})}),C<m.length-1&&e.jsx("div",{className:`hidden md:block w-24 h-1 mx-4 ${s>N.id?"bg-roam-blue":"bg-gray-300"}`})]},N.id))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:m[s-1].title}),e.jsx("p",{className:"text-foreground/70",children:m[s-1].description})]})]}),e.jsx(V,{className:"border-border/50",children:e.jsxs(K,{className:"p-8",children:[s===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"firstName",children:"First Name *"}),e.jsx(ae,{id:"firstName",value:l.firstName,onChange:N=>u({...l,firstName:N.target.value}),placeholder:"John",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(ae,{id:"lastName",value:l.lastName,onChange:N=>u({...l,lastName:N.target.value}),placeholder:"Doe",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email Address *"}),e.jsx(ae,{id:"email",type:"email",value:l.email,onChange:N=>u({...l,email:N.target.value}),placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(ae,{id:"phone",type:"tel",value:l.phone,onChange:N=>u({...l,phone:N.target.value}),placeholder:"(555) 123-4567",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(ae,{id:"dateOfBirth",type:"date",value:l.dateOfBirth,onChange:N=>u({...l,dateOfBirth:N.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"driversLicense",children:"Driver's License # *"}),e.jsx(ae,{id:"driversLicense",value:l.driversLicense,onChange:N=>u({...l,driversLicense:N.target.value}),placeholder:"License number",required:!0})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"Why we need this information"}),e.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"This information is required for identity verification and background checks to ensure the safety and trust of our platform. All data is encrypted and securely stored."})]})]})})]}),s===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"businessName",children:"Business Name *"}),e.jsx(ae,{id:"businessName",value:l.businessName,onChange:N=>u({...l,businessName:N.target.value}),placeholder:"Your Business Name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"businessType",children:"Business Type *"}),e.jsxs(as,{value:l.businessType,onValueChange:N=>u({...l,businessType:N}),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select business type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"sole_proprietorship",children:"Sole Proprietorship"}),e.jsx(ce,{value:"llc",children:"LLC"}),e.jsx(ce,{value:"corporation",children:"Corporation"}),e.jsx(ce,{value:"partnership",children:"Partnership"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"yearsExperience",children:"Years of Experience *"}),e.jsxs(as,{value:l.yearsExperience,onValueChange:N=>u({...l,yearsExperience:N}),children:[e.jsx(ss,{children:e.jsx(is,{placeholder:"Select experience level"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"1-2",children:"1-2 years"}),e.jsx(ce,{value:"3-5",children:"3-5 years"}),e.jsx(ce,{value:"6-10",children:"6-10 years"}),e.jsx(ce,{value:"10+",children:"10+ years"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{children:"Service Categories *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(N=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hr,{id:N,checked:l.serviceCategories.includes(N),onCheckedChange:()=>y(N)}),e.jsx(B,{htmlFor:N,className:"text-sm font-normal",children:N})]},N))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{children:"Business Address *"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(ae,{placeholder:"Street Address",value:l.businessAddress,onChange:N=>u({...l,businessAddress:N.target.value})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ae,{placeholder:"City",value:l.businessCity,onChange:N=>u({...l,businessCity:N.target.value})}),e.jsx(ae,{placeholder:"State",value:l.businessState,onChange:N=>u({...l,businessState:N.target.value})}),e.jsx(ae,{placeholder:"ZIP Code",value:l.businessZip,onChange:N=>u({...l,businessZip:N.target.value})})]})]})]})]}),s===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Z$,{onVerificationComplete:g,onVerificationPending:b,className:"mb-6"}),(n||o)&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-900",children:["Identity Verification ",n?"Complete":"In Progress"]}),e.jsx("p",{className:"text-sm text-green-800 mt-1",children:n?"Your identity has been verified. Please upload your professional documents below.":"Your identity verification is being processed. You can upload professional documents while we verify your identity."})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{children:"Professional License/Certification *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-roam-blue transition-colors",children:[e.jsx(fa,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload your professional certifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Massage License, Training Certificates, etc."}),e.jsx(ae,{type:"file",accept:".jpg,.jpeg,.png,.pdf",multiple:!0,className:"mt-2"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{children:"Liability Insurance (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-roam-blue transition-colors",children:[e.jsx(fa,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Professional liability insurance certificate"}),e.jsx("p",{className:"text-xs text-gray-500",children:"We can help you get coverage if needed"}),e.jsx(ae,{type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"mt-2"})]})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Hr,{id:"backgroundConsent",checked:l.backgroundConsent,onCheckedChange:N=>u({...l,backgroundConsent:N})}),e.jsx(B,{htmlFor:"backgroundConsent",className:"text-sm leading-relaxed",children:"I consent to a comprehensive background check including criminal history, sex offender registry, and identity verification. I understand this is required for platform approval."})]})]}),s===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"bio",children:"Professional Bio *"}),e.jsx(jt,{id:"bio",value:l.bio,onChange:N=>u({...l,bio:N.target.value}),placeholder:"Tell customers about your experience, training, and what makes your services special...",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This will be shown to customers on your profile"})]}),l.serviceCategories.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{children:"Specialties"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select your specific areas of expertise:"}),l.serviceCategories.map(N=>{var C;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:N}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 ml-4",children:(C=f[N])==null?void 0:C.map(R=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hr,{id:R,checked:l.specialties.includes(R),onCheckedChange:()=>_(R)}),e.jsx(B,{htmlFor:R,className:"text-sm font-normal",children:R})]},R))})]},N)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{children:"Languages Spoken"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["English","Spanish","French","Portuguese","Italian","German"].map(N=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hr,{id:N,checked:l.languages.includes(N),onCheckedChange:C=>{u(C?R=>({...R,languages:[...R.languages,N]}):R=>({...R,languages:R.languages.filter(E=>E!==N)}))}}),e.jsx(B,{htmlFor:N,className:"text-sm font-normal",children:N})]},N))})]})]}),s===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Almost Done!"}),e.jsx("p",{className:"text-sm text-green-800 mt-1",children:"Please review your information below and agree to the final terms to submit your application."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Personal Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.firstName," ",l.lastName," •"," ",l.email," • ",l.phone]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Business Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.businessName," • ",l.businessType," •"," ",l.yearsExperience," experience"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Services: ",l.serviceCategories.join(", ")]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specialties"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.specialties.join(", ")||"None selected"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Hr,{id:"termsAccepted",checked:l.termsAccepted,onCheckedChange:N=>u({...l,termsAccepted:N})}),e.jsxs(B,{htmlFor:"termsAccepted",className:"text-sm leading-relaxed",children:["I agree to the ROAM"," ",e.jsx(P,{variant:"link",className:"p-0 h-auto text-roam-blue",children:"Terms of Service"})," ","and understand the platform fees and payment structure."]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Hr,{id:"privacyAccepted",checked:l.privacyAccepted,onCheckedChange:N=>u({...l,privacyAccepted:N})}),e.jsxs(B,{htmlFor:"privacyAccepted",className:"text-sm leading-relaxed",children:["I have read and agree to the"," ",e.jsx(P,{variant:"link",className:"p-0 h-auto text-roam-blue",children:"Privacy Policy"})," ","and consent to the processing of my personal data for verification purposes."]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bs,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-yellow-800 mt-1 space-y-1",children:[e.jsx("li",{children:"• Background check and document verification (2-3 business days)"}),e.jsx("li",{children:"• Admin review of your application (1-2 business days)"}),e.jsx("li",{children:"��� Email notification with next steps for account setup"}),e.jsx("li",{children:"• Stripe/Plaid integration for payments and payouts"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between pt-8 border-t",children:[e.jsxs(P,{variant:"outline",onClick:v,disabled:s===1,className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Previous"]}),s<m.length?e.jsxs(P,{onClick:p,className:"bg-roam-blue hover:bg-roam-blue/90",children:["Continue",e.jsx(kn,{className:"w-4 h-4 ml-2"})]}):e.jsxs(P,{onClick:w,disabled:r||!l.termsAccepted||!l.privacyAccepted||!l.backgroundConsent,className:"bg-roam-blue hover:bg-roam-blue/90",children:[r?"Submitting...":"Submit Application",e.jsx(Xe,{className:"w-4 h-4 ml-2"})]})]})]})})]})})]})}function Q$({isOpen:s,onClose:t,service:r,provider:a}){const[n,i]=d.useState("delivery"),[o,c]=d.useState(""),[l,u]=d.useState(""),[m,x]=d.useState(""),[f,p]=d.useState({address:"",city:"",state:"",zipCode:"",notes:""}),[v,g]=d.useState({firstName:"",lastName:"",email:"",phone:"",specialRequests:""});if(d.useEffect(()=>{s&&r&&(r.preselectedDeliveryType?(i("datetime"),c(r.preselectedDeliveryType)):(i("delivery"),c("")),u(""),x(""),p({address:"",city:"",state:"",zipCode:"",notes:""}),g({firstName:"",lastName:"",email:"",phone:"",specialRequests:""}))},[s,r]),!r)return null;const b=["9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"],y=(()=>{const I=[],M=new Date;for(let U=1;U<=14;U++){const D=new Date(M);D.setDate(M.getDate()+U),I.push({date:D.toISOString().split("T")[0],display:D.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}return I})(),_=()=>{switch(n){case"delivery":i("datetime");break;case"datetime":i(o==="customer_location"?"location":"details");break;case"location":i("details");break;case"details":i("confirmation");break}},N=()=>{switch(n){case"datetime":r!=null&&r.preselectedDeliveryType?t():i("delivery");break;case"location":i("datetime");break;case"details":i(o==="customer_location"?"location":"datetime");break;case"confirmation":i("details");break}},C=()=>{console.log("Booking submitted:",{service:r,provider:a,deliveryType:o,date:l,time:m,location:o==="customer_location"?f:a.businessAddress,customer:v}),alert("Booking request submitted! You will receive a confirmation email shortly."),t()},R=()=>{switch(n){case"delivery":return o!=="";case"datetime":return l!==""&&m!=="";case"location":return f.address!==""&&f.city!=="";case"details":return v.firstName!==""&&v.lastName!==""&&v.email!==""&&v.phone!=="";default:return!0}},E=()=>{switch(n){case"delivery":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Service Type"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.deliveryTypes.map(I=>e.jsx(V,{className:`cursor-pointer transition-all ${o===I?"ring-2 ring-roam-blue bg-roam-blue/5":"hover:shadow-md"}`,onClick:()=>c(I),children:e.jsxs(K,{className:"p-4 flex items-center gap-3",children:[I==="customer_location"?e.jsx(Kt,{className:"w-8 h-8 text-roam-blue"}):I==="virtual"?e.jsx(pa,{className:"w-8 h-8 text-roam-blue"}):e.jsx(fs,{className:"w-8 h-8 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:I==="customer_location"?"Mobile Service":I==="virtual"?"Virtual Service":"Business"}),e.jsx("p",{className:"text-sm text-gray-600",children:I==="customer_location"?"Service provided at your location":I==="virtual"?"Service provided online via video call":`Service at ${a.businessAddress}`})]})]})},I))})]});case"datetime":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Date & Time"}),e.jsxs("div",{children:[e.jsx(B,{className:"text-sm font-medium mb-3 block",children:"Choose Date"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:y.map(I=>e.jsxs(P,{variant:l===I.date?"default":"outline",className:`justify-start ${l===I.date?"bg-roam-blue hover:bg-roam-blue/90":""}`,onClick:()=>u(I.date),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),I.display]},I.date))})]}),l&&e.jsxs("div",{children:[e.jsx(B,{className:"text-sm font-medium mb-3 block",children:"Choose Time"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(I=>e.jsxs(P,{variant:m===I?"default":"outline",className:`justify-start ${m===I?"bg-roam-blue hover:bg-roam-blue/90":""}`,onClick:()=>x(I),children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),I]},I))})]})]});case"location":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Service Location"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please provide the address where you'd like the service performed."}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"address",children:"Street Address *"}),e.jsx(ae,{id:"address",value:f.address,onChange:I=>p({...f,address:I.target.value}),placeholder:"123 Main Street, Apt 2B"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"city",children:"City *"}),e.jsx(ae,{id:"city",value:f.city,onChange:I=>p({...f,city:I.target.value}),placeholder:"Miami"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"state",children:"State"}),e.jsx(ae,{id:"state",value:f.state,onChange:I=>p({...f,state:I.target.value}),placeholder:"FL"})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"zipCode",children:"Zip Code"}),e.jsx(ae,{id:"zipCode",value:f.zipCode,onChange:I=>p({...f,zipCode:I.target.value}),placeholder:"33101"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(jt,{id:"notes",value:f.notes,onChange:I=>p({...f,notes:I.target.value}),placeholder:"Parking instructions, building access codes, etc.",rows:3})]})]})]});case"details":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"firstName",children:"First Name *"}),e.jsx(ae,{id:"firstName",value:v.firstName,onChange:I=>g({...v,firstName:I.target.value}),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(ae,{id:"lastName",value:v.lastName,onChange:I=>g({...v,lastName:I.target.value}),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"email",children:"Email *"}),e.jsx(ae,{id:"email",type:"email",value:v.email,onChange:I=>g({...v,email:I.target.value}),placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(ae,{id:"phone",type:"tel",value:v.phone,onChange:I=>g({...v,phone:I.target.value}),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"specialRequests",children:"Special Requests"}),e.jsx(jt,{id:"specialRequests",value:v.specialRequests,onChange:I=>g({...v,specialRequests:I.target.value}),placeholder:"Any specific requirements or preferences...",rows:3})]})]});case"confirmation":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Booking Summary"}),e.jsx(V,{children:e.jsxs(K,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Service"}),e.jsx("span",{children:r.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Provider"}),e.jsx("span",{children:a.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Type"}),e.jsx(ge,{variant:"secondary",children:o==="customer_location"?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Mobile Service"]}):o==="virtual"?e.jsxs(e.Fragment,{children:[e.jsx(pa,{className:"w-3 h-3 mr-1"}),"Virtual Service"]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-3 h-3 mr-1"}),"Business"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Date & Time"}),e.jsxs("span",{children:[new Date(l).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," ","at ",m]})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Location"}),e.jsx("div",{className:"text-right max-w-xs",children:o==="customer_location"?e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:f.address}),e.jsxs("div",{children:[f.city,", ",f.state," ",f.zipCode]})]}):o==="virtual"?e.jsx("div",{className:"text-sm",children:"Online video call"}):e.jsx("div",{className:"text-sm",children:a.businessAddress})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Duration"}),e.jsx("span",{children:r.duration})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between text-lg",children:[e.jsx("span",{className:"font-bold",children:"Total"}),e.jsxs("span",{className:"font-bold text-roam-blue",children:["$",r.price]})]})})]})}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[e.jsx("p",{children:e.jsx("strong",{children:"What happens next?"})}),e.jsxs("p",{children:["• Your booking request will be sent to ",a.name]}),e.jsx("p",{children:"• You'll receive a confirmation email within 15 minutes"}),e.jsx("p",{children:"• The provider will contact you to confirm details"})]})]});default:return null}};return e.jsx(Xs,{open:s,onOpenChange:t,children:e.jsxs(Vs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsxs(Ws,{children:["Book ",r.name]})}),e.jsxs("div",{className:"space-y-6",children:[E(),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n!=="delivery"&&!(n==="datetime"&&(r!=null&&r.preselectedDeliveryType))&&e.jsxs(P,{variant:"outline",onClick:N,children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("div",{className:"ml-auto",children:n==="confirmation"?e.jsx(P,{onClick:C,className:"bg-roam-blue hover:bg-roam-blue/90",children:"Confirm Booking"}):e.jsxs(P,{onClick:_,disabled:!R(),className:"bg-roam-blue hover:bg-roam-blue/90",children:["Next",e.jsx(pt,{className:"w-4 h-4 ml-2"})]})})]})]})]})})}function e8(){const{providerId:s}=so(),{toast:t}=et(),[r,a]=d.useState(null),[n,i]=d.useState([]),[o,c]=d.useState(!0),[l,u]=d.useState(null),[m,x]=d.useState(!1),[f,p]=d.useState(!1);d.useEffect(()=>{(async()=>{if(s)try{c(!0);const{data:C,error:R}=await W.from("providers").select(`
            id,
            first_name,
            last_name,
            bio,
            experience_years,
            image_url,
            cover_image_url,
            average_rating,
            total_reviews,
            business_id,
            is_active,
            created_at
          `).eq("id",s).eq("is_active",!0).single();if(R||!C)throw new Error("Provider not found");a({id:C.id,business_id:C.business_id,name:`${C.first_name} ${C.last_name}`,title:"Service Provider",rating:C.average_rating||0,reviews:C.total_reviews||0,responseRate:"95%",responseTime:"Within 2 hours",location:"Service Area",joinedDate:new Date(C.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}),verified:!0,profileImage:C.image_url||"/api/placeholder/120/120",coverImage:C.cover_image_url||"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=800&h=300&fit=crop",bio:C.bio||"Professional service provider",specialties:[],languages:["English"],certifications:[],deliveryTypes:["mobile","business"],businessAddress:"",serviceArea:"Local Area",availableDays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]});const{data:E,error:I}=await W.from("business_services").select(`
            id,
            business_price,
            delivery_type,
            services:service_id (
              id,
              name,
              description,
              min_price,
              duration_minutes,
              image_url
            )
          `).eq("business_id",C.business_id).eq("is_active",!0);if(I)console.error("Error fetching services:",I);else if(E){const M=E.map(U=>{const D=U.services,z=(D==null?void 0:D.name)||"Professional Service";return{id:U.id,name:z,duration:`${(D==null?void 0:D.duration_minutes)||60} minutes`,price:U.business_price||(D==null?void 0:D.min_price)||50,description:(D==null?void 0:D.description)||"Professional service delivered by experienced and qualified practitioners.",deliveryTypes:U.delivery_type?[U.delivery_type]:["mobile","business"],popularity:null,image_url:(D==null?void 0:D.image_url)||"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=500&h=300&fit=crop"}});i(M)}}catch(C){console.error("Error fetching provider:",C),t({title:"Error",description:"Failed to load provider information",variant:"destructive"})}finally{c(!1)}})()},[s,t]);const v=[{id:1,customerName:"Maria L.",rating:5,date:"2 weeks ago",service:"Deep Tissue Massage",review:"Sarah is absolutely amazing! She relieved all the tension in my shoulders and back. Very professional and skilled. Will definitely book again!",verified:!0},{id:2,customerName:"John D.",rating:5,date:"1 month ago",service:"Sports Recovery Massage",review:"Perfect for post-workout recovery. Sarah knows exactly how to target problem areas. Great communication and very punctual.",verified:!0},{id:3,customerName:"Lisa K.",rating:5,date:"1 month ago",service:"Swedish Massage",review:"So relaxing! Sarah created the perfect ambiance and her technique is excellent. Love that she comes to my home.",verified:!0}],g={customer_location:_n,business_location:fs,virtual:pa},b=N=>g[N]||fs,w=N=>({customer_location:{label:"Mobile",color:"bg-green-100 text-green-800"},business_location:{label:"Business",color:"bg-blue-100 text-blue-800"},virtual:{label:"Virtual",color:"bg-purple-100 text-purple-800"}})[N]||{label:N,color:"bg-gray-100 text-gray-800"},y=N=>{const C=n.find(R=>R.id===N);C&&(C.deliveryTypes.length===1?u({...C,preselectedDeliveryType:C.deliveryTypes[0]}):u(C)),x(!0)},_=()=>{p(!0)};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading provider information..."})]})}):r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(sE,{className:"w-4 h-4 mr-2"}),"Share & QR Code"]}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:"/my-bookings",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"My Bookings"]})})]})]})})}),e.jsxs("section",{className:"relative",children:[e.jsx("div",{className:"h-64 bg-cover bg-center",style:{backgroundImage:`url(${r.coverImage})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/40"})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"relative -mt-20 pb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(st,{className:"w-32 h-32 border-4 border-white shadow-lg",children:[e.jsx(it,{src:r.profileImage,alt:r.name,className:"object-cover"}),e.jsx(tt,{className:"bg-gradient-to-br from-roam-blue to-roam-light-blue text-white text-2xl font-bold",children:r.name.split(" ").map(N=>N[0]).join("").toUpperCase()})]}),r.verified&&e.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-roam-blue rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(Xe,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4"}),r.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),"Member since ",r.joinedDate]})]})]}),e.jsxs("div",{className:"text-center md:text-right",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-end gap-1 mb-2",children:[e.jsx(us,{className:"w-5 h-5 text-roam-warning fill-current"}),e.jsx("span",{className:"text-2xl font-bold",children:r.rating}),e.jsxs("span",{className:"text-gray-600",children:["(",r.reviews," reviews)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>y(1),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book Now"]}),r.business_id&&e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs(Ee,{to:`/business/${r.business_id}?tab=team`,children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"View Business"]})})]})]})]})})})]})})})]}),e.jsx("section",{className:"py-8",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:e.jsx("p",{children:"Services"})})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:n.map(N=>e.jsx("div",{className:"border rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0",children:e.jsx("img",{src:N.image_url,alt:N.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:N.name}),N.popularity&&e.jsx(ge,{className:"bg-roam-yellow text-gray-900",children:N.popularity})]}),e.jsx("p",{className:"text-gray-600 mb-3 text-sm",children:N.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:N.deliveryTypes.map(C=>{const R=b(C),E=w(C);return e.jsxs(ge,{className:`text-xs ${E.color}`,children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),E.label]},C)})}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),N.duration]})})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-roam-blue mb-2",children:["$",N.price]}),e.jsx(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>y(N.id),children:"Book Service"})]})]})})]})},N.id))})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{children:["About ",r.name]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:r.bio}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Specialties"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.specialties.map(N=>e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:N},N))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Languages"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.languages.map(N=>e.jsx(ge,{variant:"secondary",children:N},N))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Certifications"}),e.jsx("ul",{className:"space-y-2",children:r.certifications.map((N,C)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(i0,{className:"w-4 h-4 text-roam-blue"}),N]},C))})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{children:["Reviews (",r.reviews,")"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-6",children:v.map(N=>e.jsxs("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:N.customerName}),N.verified&&e.jsxs(ge,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[e.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("div",{className:"flex",children:[...Array(N.rating)].map((C,R)=>e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"},R))}),e.jsx("span",{children:N.service}),e.jsx("span",{children:"•"}),e.jsx("span",{children:N.date})]})]})}),e.jsx("p",{className:"text-gray-700",children:N.review})]},N.id))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5 text-roam-blue"}),"Provider Stats"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Response Rate"}),e.jsx("span",{className:"font-semibold",children:r.responseRate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Response Time"}),e.jsx("span",{className:"font-semibold",children:r.responseTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Reviews"}),e.jsx("span",{className:"font-semibold",children:r.reviews})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Member Since"}),e.jsx("span",{className:"font-semibold",children:r.joinedDate})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-roam-blue"}),"Service Information"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Service Area"}),e.jsx("span",{className:"font-semibold",children:r.serviceArea})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Studio Location"}),e.jsx("span",{className:"font-semibold",children:r.businessAddress})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-2",children:"Available Days"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.availableDays.map(N=>e.jsx(ge,{variant:"secondary",className:"text-xs",children:N.slice(0,3)},N))})]})]})]})]})]})})}),e.jsx(Q$,{isOpen:m,onClose:()=>x(!1),service:l,provider:{id:r.id,name:r.name,businessAddress:r.businessAddress,serviceArea:r.serviceArea}}),e.jsx(TN,{isOpen:f,onClose:()=>p(!1),providerName:r.name,providerTitle:r.title,pageUrl:window.location.href})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-foreground text-xl mb-4",children:"Provider not found"}),e.jsx(Ee,{to:"/providers",className:"text-roam-blue hover:underline",children:"Back to Providers"})]})})}const s8=()=>{const{businessId:s}=so(),t=Nt(),{toast:r}=et(),{user:a,isCustomer:n,customer:i}=Ss(),o=new URLSearchParams(window.location.search),c=o.get("provider"),l=o.get("service"),u=o.get("date"),m=o.get("time"),x=o.get("promotion"),f=o.get("promo_code"),p=o.get("deliveryType"),v=o.get("location"),g=o.get("address"),b=o.get("city"),w=o.get("state"),y=o.get("zip"),[_,N]=d.useState(null),[C,R]=d.useState(!0),[E,I]=d.useState(!1),[M,U]=d.useState(!1),[D,z]=d.useState([]),X=D.filter(G=>G.type==="addon"),[T,A]=d.useState(null),[O,$]=d.useState(null),[F,q]=d.useState(null),[te,re]=d.useState(null),[be,Me]=d.useState({}),[je,Y]=d.useState({customerName:"",customerEmail:"",customerPhone:"",customerAddress:"",customerCity:"",customerState:"",customerZip:"",preferredDate:u||"",preferredTime:m||"",notes:"",items:[]});d.useEffect(()=>{s&&we()},[s]),d.useEffect(()=>{x&&J()},[x]),d.useEffect(()=>{if(v)p==="business_location"?pe(v):p==="customer_location"&&Q(v);else{const G=o.get("address");if(G)try{const ue=JSON.parse(decodeURIComponent(G));re(ue)}catch(ue){console.error("Error parsing address data:",ue)}else g&&b&&w&&y&&re({street_address:g,city:b,state:w,postal_code:y})}},[v,p,g,b,w,y]),d.useEffect(()=>{if(i&&n){console.log("Pre-populating customer form with authenticated customer data:",i);const G=`${i.first_name||""} ${i.last_name||""}`.trim();Y(ue=>({...ue,customerName:G,customerEmail:i.email||"",customerPhone:i.phone||""}))}else a&&!n&&(console.log("User authenticated but not in customer role, using basic auth data"),Y(G=>{var ue;return{...G,customerEmail:a.email||"",customerName:((ue=a.user_metadata)==null?void 0:ue.full_name)||""}}))},[i,n,a]),d.useEffect(()=>{a!=null&&a.email&&!je.customerEmail&&(console.log("Populating form with user email:",a.email),Y(G=>({...G,customerEmail:a.email})))},[a==null?void 0:a.email,je.customerEmail]),d.useEffect(()=>{if(M&&i&&n&&!je.customerName){console.log("Booking modal opened, ensuring customer data is populated");const G=`${i.first_name||""} ${i.last_name||""}`.trim();Y(ue=>({...ue,customerName:G,customerEmail:i.email||"",customerPhone:i.phone||""}))}},[M,i,n,je.customerName]),d.useEffect(()=>{te&&!je.customerAddress&&(console.log("Populating form with selected location:",te),Y(G=>({...G,customerAddress:te.street_address||"",customerCity:te.city||"",customerState:te.state||"",customerZip:te.postal_code||""})))},[te,je.customerAddress]);const we=async()=>{try{R(!0);const{data:G,error:ue}=await W.from("business_profiles").select("*").eq("id",s).eq("is_active",!0).eq("verification_status","approved").single();if(ue||!G)throw new Error("Business not found or not available for booking");console.log("Fetching services for business:",s,"selected service:",l);const{data:xe,error:Ie}=await W.from("business_services").select(`
          *,
          services:service_id (
            id,
            name,
            description,
            image_url,
            duration_minutes,
            is_active
          )
        `).eq("business_id",s).eq("is_active",!0);console.log("Business services query result:",{services:xe==null?void 0:xe.map(le=>{var fe,Cs;return{id:le.id,service_id:le.service_id,name:(fe=le.services)==null?void 0:fe.name,is_active:le.is_active,service_is_active:(Cs=le.services)==null?void 0:Cs.is_active}}),error:Ie}),Ie&&console.error("Error fetching services:",Ie.message||Ie);let Ye=[],We=null;if(l){console.log("Fetching addons for service:",l,"and business:",s);const{data:le,error:fe}=await W.from("service_addon_eligibility").select(`
            service_id,
            addon_id,
            is_recommended,
            service_addons:addon_id (
              id,
              name,
              description,
              image_url,
              is_active
            )
          `).eq("service_id",l);if(fe)console.error("Error fetching service addon eligibility:",fe),We=fe;else if(le&&le.length>0){console.log("Found eligible addons:",le);const Cs=le.map(He=>He.addon_id),{data:ke,error:Je}=await W.from("business_addons").select("*").eq("business_id",s).eq("is_available",!0).in("addon_id",Cs);Je?(console.error("Error fetching business addons:",Je),We=Je):(console.log("Found business addons:",ke),Ye=(ke||[]).map(He=>{const rs=le.find(gt=>gt.addon_id===He.addon_id),Is=rs==null?void 0:rs.service_addons;return{id:He.addon_id,name:(Is==null?void 0:Is.name)||"Unknown Addon",description:(Is==null?void 0:Is.description)||"",image_url:(Is==null?void 0:Is.image_url)||null,is_recommended:(rs==null?void 0:rs.is_recommended)||!1,price:He.custom_price||0,business_addon_id:He.id}}).filter(He=>He.name!=="Unknown Addon"))}else console.log("No eligible addons found for this service")}else console.log("No service selected, skipping addon fetch");We&&console.error("Error fetching addons:",We.message||We);const{data:Ls,error:ys}=await W.from("business_locations").select("*").eq("business_id",s).limit(1),Hs=Ls&&Ls.length>0?Ls[0]:null;ys&&console.error("Error fetching location:",ys.message||ys);const{data:Gs,error:ne}=await W.from("providers").select(`
          id,
          first_name,
          last_name,
          bio,
          experience_years,
          image_url,
          average_rating,
          total_reviews
        `).eq("business_id",s).eq("is_active",!0);if(ne&&console.error("Error fetching providers:",ne.message||ne),c&&Gs){const le=Gs.find(fe=>fe.id===c);A(le)}if(l&&xe){console.log("Looking for service with ID:",l),console.log("Available services:",xe.map(fe=>{var Cs;return{id:fe.id,service_id:fe.service_id,name:(Cs=fe.services)==null?void 0:Cs.name}}));const le=xe.find(fe=>fe.id===l||fe.service_id===l);if(console.log("Found service to add:",le),le)H(le,"service");else{console.warn("Service not found with ID:",l),r({title:"Service Not Available",description:"The selected service is no longer available from this business. Please choose another service.",variant:"destructive"}),console.log("Available business services:",xe.map(ke=>{var Je;return{business_service_id:ke.id,service_id:ke.service_id,service_name:(Je=ke.services)==null?void 0:Je.name,is_active:ke.is_active}}));const{data:fe,error:Cs}=await W.from("services").select("id, name, description, is_active").eq("id",l).single();if(console.log("Global service lookup:",{globalService:fe,globalServiceError:Cs}),fe){const{data:ke}=await W.from("business_services").select("id, is_active, business_price, custom_price").eq("business_id",s).eq("service_id",l);console.log("Business service mapping:",ke),ke&&ke.length>0?ke[0].is_active?r({title:"Service Found But Not Loaded",description:`"${fe.name}" exists but wasn't loaded. Please refresh the page.`,variant:"destructive"}):r({title:"Service Temporarily Unavailable",description:`"${fe.name}" is temporarily unavailable from this business. Please choose another service.`,variant:"destructive"}):r({title:"Service Not Offered",description:`This business does not currently offer "${fe.name}". Please browse their available services below.`,variant:"destructive"})}else console.log("Service does not exist in global services table"),r({title:"Service Not Found",description:"The requested service could not be found in our system.",variant:"destructive"})}}(!xe||xe.length===0)&&r({title:"No Services Available",description:"This business currently has no active services available for booking.",variant:"destructive"}),N({business:G,services:xe||[],addons:Ye||[],location:Hs||null,providers:Gs||[]})}catch(G){console.error("Error fetching provider data:",G),r({title:"Error",description:G.message||"Failed to load provider information",variant:"destructive"}),t("/providers")}finally{R(!1)}},Q=async G=>{try{const{data:ue,error:xe}=await W.from("customer_locations").select("*").eq("id",G).single();if(xe){console.error("Error fetching customer location:",xe);return}ue&&(re(ue),console.log("Loaded selected customer location:",ue))}catch(ue){console.error("Error fetching customer location:",ue)}},pe=async G=>{try{const{data:ue,error:xe}=await W.from("business_locations").select("*").eq("id",G).single();if(xe){console.error("Error fetching business location:",xe);return}ue&&(re(ue),console.log("Loaded selected business location:",ue))}catch(ue){console.error("Error fetching business location:",ue)}},J=async()=>{try{console.log("Fetching promotion data for:",{promotionId:x,promoCode:f});let{data:G,error:ue}=await W.from("promotions").select(`
          id,
          title,
          description,
          start_date,
          end_date,
          is_active,
          promo_code,
          savings_type,
          savings_amount,
          savings_max_amount,
          service_id,
          business_id
        `).eq("id",x).eq("is_active",!0).single();if(ue&&ue.code==="PGRST116"&&f){console.log("Promotion not found by ID, trying by promo code:",f);const{data:xe,error:Ie}=await W.from("promotions").select(`
            id,
            title,
            description,
            start_date,
            end_date,
            is_active,
            promo_code,
            savings_type,
            savings_amount,
            savings_max_amount,
            service_id,
            business_id
          `).eq("promo_code",f).eq("is_active",!0).or(`business_id.is.null,business_id.eq.${s}`).limit(1).maybeSingle();!Ie&&xe&&(G=xe,ue=null,console.log("Found promotion by promo code:",G))}if(ue){if(console.error("Error fetching promotion:",ue),ue.code==="PGRST116"&&(f==="BOTOX25"||f==="SAVE20")){console.log(`Creating demo promotion for ${f}`);const Ie={id:x,title:f==="SAVE20"?"Weekend Yoga Special":"Botox Special",description:f==="SAVE20"?"Get 20% off all yoga services this weekend":"25% off Botox services",promo_code:f,savings_type:"percentage",savings_amount:f==="SAVE20"?20:25,savings_max_amount:100,is_active:!0,business_id:s,service_id:l};$(Ie),console.log("Demo promotion data set:",Ie);return}return}if(G.end_date){const xe=new Date(G.end_date);if(xe.setHours(23,59,59,999),xe<new Date){console.warn("Promotion has expired");return}}if(f&&G.promo_code!==f){console.warn("Promo code mismatch:",{expected:G.promo_code,provided:f});return}$(G),console.log("Promotion data loaded:",G)}catch(G){console.error("Error fetching promotion data:",G)}},H=(G,ue)=>{console.log("Adding item to booking:",{item:G,type:ue});const xe={type:ue,id:G.id,name:ue==="service"?G.services.name:G.name,price:G.custom_price||G.business_price||G.price||0,duration:ue==="service"?G.services.duration_minutes:void 0,quantity:1};if(console.log("Created booking item:",xe),D.findIndex(Ye=>Ye.id===G.id&&Ye.type===ue)>=0){console.log("Item already in selection");return}else z([...D,xe]),console.log("Added new item to selection");r({title:"Added to booking",description:`${xe.name} has been added to your booking`})},oe=(G,ue)=>{const xe=D.findIndex(Ie=>Ie.id===G&&Ie.type===ue);if(xe>=0){const Ie=[...D];Ie.splice(xe,1),z(Ie),r({title:"Removed from booking",description:"Item has been removed from your booking"})}},de=(G,ue)=>{const xe=D.find(Ie=>Ie.id===G&&Ie.type===ue);return xe?xe.quantity:0},Te=()=>{const G=De(),ue=$e(),xe=Le();return G-ue+xe},De=()=>D.reduce((G,ue)=>G+ue.price,0),Le=()=>(De()-$e())*.15,$e=()=>{if(!O||!O.savings_type||O.savings_amount===null||O.savings_amount===void 0)return 0;const G=De();if(G<=0)return 0;if(O.savings_type==="percentage"){const ue=G*Number(O.savings_amount)/100;return O.savings_max_amount?Math.min(ue,Number(O.savings_max_amount)):ue}else if(O.savings_type==="fixed_amount")return Math.min(Number(O.savings_amount),G);return 0},Be=()=>{const G=[!je.customerName,!je.customerEmail,!je.preferredDate],ue=p==="customer_location"?[!je.customerAddress,!je.customerCity,!je.customerState,!je.customerZip]:[],Ie=[...G,...ue].some(We=>We),Ye=D.length>0;return!Ie&&Ye},es=async()=>{var G,ue;I(!0);try{const xe=[!je.customerName,!je.customerEmail,!je.preferredDate],Ie=p==="customer_location"?[!je.customerAddress,!je.customerCity,!je.customerState,!je.customerZip]:[];if([...xe,...Ie].some(ke=>ke)){const ke=p==="customer_location"&&Ie.some(Je=>Je);r({title:"Missing information",description:ke?"Please fill in all required fields including your complete address":"Please fill in all required fields",variant:"destructive"});return}console.log("Booking submission debug:",{user:a,customer:i,isCustomer:n,authUserId:a==null?void 0:a.id,customerData:i,isAuthenticated:!!(a||i)});const We=(i==null?void 0:i.customer_id)||(a==null?void 0:a.id);if(!We&&!je.customerEmail){r({title:"Customer information required",description:"Please provide your email address to complete the booking.",variant:"destructive"});return}if(console.log("Submitting booking with customer_id:",We),O&&f){const ke=$e();console.log("Applying promo code:",{promoCode:f,promotionId:x,discountAmount:ke,originalTotal:De(),finalTotal:Te(),savingsType:O.savings_type,savingsAmount:O.savings_amount})}const Ls=p==="customer_location"?te==null?void 0:te.id:null,ys=p==="business_location"?v||(Ue==null?void 0:Ue.id):null;console.log("Booking location debug:",{deliveryType:p,customerLocationId:Ls,businessLocationId:ys,selectedLocation:te==null?void 0:te.id,locationId:v,locationFromState:Ue==null?void 0:Ue.id});const Hs=l?Fe.find(ke=>ke.service_id===l||ke.id===l):null,Gs=(Hs==null?void 0:Hs.service_id)||l;console.log("Service booking debug:",{selectedServiceId:l,serviceToBook:Hs,actualServiceId:Gs,selectedItems:D.map(ke=>({id:ke.id,type:ke.type}))}),console.log("Location IDs before payload:",{customerLocationId:Ls,businessLocationId:ys,deliveryType:p,locationId:v,"location?.id":Ue==null?void 0:Ue.id,"selectedLocation?.id":te==null?void 0:te.id});const ne={business_id:s,provider_id:c||null,service_id:Gs,customer_id:We||null,customer_location_id:Ls,business_location_id:ys,delivery_type:p||"customer_location",guest_name:We?null:je.customerName,guest_email:We?null:je.customerEmail,guest_phone:We?null:je.customerPhone,booking_date:je.preferredDate,start_time:je.preferredTime||"09:00",admin_notes:je.notes,total_amount:Te(),service_fee:Te()*.15,remaining_balance:Te(),booking_status:"pending",payment_status:"pending"};console.log("Final booking payload:",ne);const{data:le,error:fe}=await W.from("bookings").insert(ne).select().single();if(fe)throw fe;if(console.log("Booking created successfully:",le),X.length>0&&le.id){console.log("Creating booking addons:",X);const ke=X.map(rs=>({booking_id:le.id,addon_id:rs.id})),{data:Je,error:He}=await W.from("booking_addons").insert(ke).select();He?console.error("Error creating booking addons:",He):console.log("Booking addons created successfully:",Je)}if(x&&O&&le.id){const ke=De(),Je=$e(),He=Te();console.log("Creating promotion usage record:",{promotion_id:x,booking_id:le.id,discount_applied:Je,original_amount:ke,final_amount:He});const{error:rs}=await W.from("promotion_usage").insert({promotion_id:x,booking_id:le.id,discount_applied:Je,original_amount:ke,final_amount:He});rs&&console.error("Error creating promotion usage record:",{error:rs,message:rs.message,details:rs.details,hint:rs.hint,code:rs.code})}const Cs=new URLSearchParams({booking_id:le.id,total_amount:Te().toString(),service_fee:(Te()*.15).toString(),customer_email:We&&((i==null?void 0:i.email)||(a==null?void 0:a.email))||je.customerEmail,customer_name:We?`${(i==null?void 0:i.first_name)||""} ${(i==null?void 0:i.last_name)||""}`.trim():je.customerName,business_name:(_==null?void 0:_.business_name)||"",service_name:((G=D.find(ke=>ke.type==="service"))==null?void 0:G.name)||"Service"});O&&f&&(Cs.set("promo_code",f),Cs.set("discount_amount",$e().toString())),t(`/payment?${Cs.toString()}`),U(!1),I(!1)}catch(xe){console.error("Error submitting booking:",xe);let Ie="Failed to submit booking. Please try again.";typeof xe=="string"?Ie=xe:xe!=null&&xe.message?Ie=xe.message:xe!=null&&xe.details?Ie=xe.details:(ue=xe==null?void 0:xe.error)!=null&&ue.message?Ie=xe.error.message:xe!=null&&xe.hint?Ie=xe.hint:xe!=null&&xe.code&&(Ie=`Database error (${xe.code}): Please try again.`),r({title:"Error",description:Ie,variant:"destructive"}),I(!1)}};if(C)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading provider information..."})]})});if(!_)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Provider Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The provider you're looking for is not available for booking."}),e.jsx(P,{onClick:()=>t("/providers"),children:"Browse Other Providers"})]})});const{business:ee,services:Fe,addons:Ke,location:Ue,providers:ze}=_;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:(()=>{const G=new URLSearchParams;l&&G.set("service",l),u&&G.set("date",u),m&&G.set("time",m),x&&G.set("promotion",x),f&&G.set("promo_code",f),p&&G.set("deliveryType",p),v&&G.set("location",v);const ue=G.toString();return`/business/${s}${ue?`?${ue}`:""}`})(),children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Provider Selection"]})}),e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})})]})})})}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(st,{className:"h-16 w-16",children:[e.jsx(it,{src:ee.logo_url||ee.image_url||void 0}),e.jsx(tt,{children:ee.business_name.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:ee.business_name}),e.jsx("p",{className:"text-gray-600",children:ee.business_description}),e.jsx("div",{className:"flex items-center space-x-4 mt-2"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[O&&e.jsx("div",{className:"mb-8 bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ge,{className:"bg-green-500 text-white",children:O.promo_code})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:O.title||"Special Promotion"}),e.jsx("p",{className:"text-green-700",children:O.description||`Save ${O.savings_type==="percentage"?`${O.savings_amount}%`:`$${O.savings_amount}`} on this service`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Promotion Active"}),$e()>0&&e.jsxs("div",{className:"text-lg font-bold text-green-800",children:["Save $",$e().toFixed(2)]})]})]})}),e.jsxs(V,{className:"mb-8 border-2 border-roam-blue bg-roam-blue/5",children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"text-2xl text-roam-blue flex items-center gap-2",children:[e.jsx(Zt,{className:"w-6 h-6"}),"Complete Your Booking"]}),e.jsx("p",{className:"text-roam-blue/80",children:"Review your service details and total cost"})]}),e.jsx(K,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Your Service"}),(()=>{const G=Fe.find(ue=>ue.service_id===l||ue.id===l);return G?e.jsx("div",{className:"p-4 border rounded-lg bg-background",children:e.jsxs("div",{className:"flex items-start gap-3",children:[G.services.image_url&&e.jsx("img",{src:G.services.image_url,alt:G.services.name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:G.services.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[G.services.duration_minutes," ","minutes"]}),u&&m&&e.jsxs("p",{className:"text-sm text-roam-blue font-medium mt-1",children:[new Date(u).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})," ","at ",m]})]})]})}):null})(),e.jsxs("div",{className:"p-4 border rounded-lg bg-background",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs(st,{className:"w-10 h-10",children:[e.jsx(it,{src:ee.logo_url||ee.image_url||void 0,alt:ee.business_name}),e.jsx(tt,{children:ee.business_name.substring(0,2).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ee.business_name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-3 h-3 text-roam-warning fill-current"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[ee.average_rating||0," (",ee.total_reviews||0," reviews)"]})]})]})]}),T&&e.jsxs("div",{className:"p-4 bg-green-50 border-green-200 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Vo,{className:"w-4 h-4 text-green-700"}),e.jsx("h4",{className:"font-semibold text-green-700",children:"Preferred Provider Selected"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(st,{className:"h-12 w-12",children:[e.jsx(it,{src:T.image_url||void 0}),e.jsxs(tt,{children:[T.first_name[0],T.last_name[0]]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-green-800",children:[T.first_name," ",T.last_name]}),T.bio&&e.jsx("p",{className:"text-sm text-green-600 line-clamp-1",children:T.bio}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[T.experience_years&&e.jsxs("span",{className:"text-xs text-green-600",children:[T.experience_years," years experience"]}),T.average_rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-3 h-3 text-green-600 fill-current"}),e.jsxs("span",{className:"text-xs text-green-600",children:[T.average_rating," (",T.total_reviews||0," ","reviews)"]})]})]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-green-100 rounded-md",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"Note:"})," This is your preferred provider for this booking. The business will try to assign this provider, but final assignment depends on availability and business approval."]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Booking Summary"}),e.jsxs("div",{className:"p-6 border-2 border-roam-blue/20 rounded-xl bg-background",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-700 text-sm uppercase tracking-wide",children:"Selected Services"}),D.filter(G=>G.type==="service").map(G=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-900",children:G.name}),e.jsxs("span",{className:"font-medium",children:["$",G.price.toFixed(2)]})]},G.id)),X.length>0&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx("h5",{className:"font-medium text-gray-600 text-xs uppercase tracking-wide",children:"Add-ons"}),X.map(G=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:G.name}),e.jsxs("span",{className:"text-gray-600",children:["+$",G.price.toFixed(2)]})]},G.id))]})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["$",De().toFixed(2)]})]}),O&&f&&e.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[e.jsxs("span",{className:"text-sm",children:["Discount (",O.savings_type==="percentage"?`${O.savings_amount}%`:`$${O.savings_amount}`," ","off)"]}),e.jsxs("span",{className:"font-medium",children:["-$",$e().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Service Fee (15%)"}),e.jsxs("span",{className:"font-medium",children:["$",(De()*.15).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Platform Fees"}),e.jsxs("span",{className:"font-medium",children:["$",Le().toFixed(2)]})]})]}),e.jsx("div",{className:"border-t-2 border-gray-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{className:"text-roam-blue",children:["$",Te().toFixed(2)]})]})}),!O&&e.jsx("div",{className:"pt-2",children:e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"cursor-pointer text-sm text-roam-blue hover:text-roam-blue/80 font-medium",children:"Have a promo code?"}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Promo codes can be applied during checkout"})})]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(P,{size:"lg",className:"w-full bg-roam-blue hover:bg-roam-blue/90 text-white font-semibold py-3",onClick:es,disabled:!Be()||E,children:E?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing Booking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-2"}),"Confirm & Checkout"]})}),e.jsx("p",{className:"text-xs text-center text-gray-500",children:"You'll be redirected to secure payment after confirmation"})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"About This Business"})}),e.jsxs(K,{className:"space-y-4",children:[ee.business_description&&e.jsx("p",{className:"text-gray-700",children:ee.business_description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ee.contact_email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sr,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:ee.contact_email})]}),ee.phone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(En,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:ee.phone})]}),ee.website_url&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Td,{className:"h-4 w-4 text-gray-500"}),e.jsx("a",{href:ee.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"Visit Website"})]}),Ue&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-700 mb-1",children:"Service Location"}),e.jsxs("div",{className:"text-gray-600",children:[Ue.address_line1||Ue.street_address,Ue.address_line2&&e.jsx("div",{children:Ue.address_line2}),e.jsxs("div",{children:[Ue.city,", ",Ue.state," ",Ue.postal_code]})]})]})]})]}),ee.years_in_business&&e.jsx("div",{className:"pt-2",children:e.jsxs(ge,{variant:"outline",children:[ee.years_in_business," years in business"]})})]})]}),Ke.length>0&&e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:l?"Available Add-ons for Selected Service":"Available Add-ons"}),l&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"These add-ons are compatible with your selected service"})]}),e.jsx(K,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ke.map(G=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:G.name}),G.is_recommended&&e.jsx(ge,{className:"bg-green-100 text-green-800 text-xs",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:G.description})]}),G.image_url&&e.jsx("img",{src:G.image_url,alt:G.name,className:"w-16 h-16 object-cover rounded ml-4"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsxs("span",{className:"font-semibold",children:["$",G.price]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:de(G.id,"addon")>0?e.jsx(P,{size:"sm",variant:"destructive",onClick:()=>oe(G.id,"addon"),children:"Remove"}):e.jsx(P,{size:"sm",onClick:()=>H(G,"addon"),children:"Add"})})]})]},G.id))})})]})]}),e.jsx("div",{className:"space-y-6"})]})]}),e.jsx(Xs,{open:M,onOpenChange:U,children:e.jsxs(Vs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Complete Your Booking"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Your Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerName",children:"Full Name *"}),e.jsx(ae,{id:"customerName",name:"customerName",autoComplete:"name",required:!0,value:je.customerName,onChange:G=>Y(ue=>({...ue,customerName:G.target.value})),placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerEmail",children:"Email *"}),e.jsx(ae,{id:"customerEmail",name:"customerEmail",type:"email",autoComplete:"email",required:!0,value:je.customerEmail,onChange:G=>Y(ue=>({...ue,customerEmail:G.target.value})),placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerPhone",children:"Phone Number"}),e.jsx(ae,{id:"customerPhone",name:"customerPhone",type:"tel",autoComplete:"tel",inputMode:"tel",pattern:"^[0-9\\-\\s\\(\\)]+$",value:je.customerPhone,onChange:G=>Y(ue=>({...ue,customerPhone:G.target.value})),placeholder:"Enter your phone number"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Service Location"}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>t(-1),className:"text-roam-blue border-roam-blue hover:bg-roam-blue hover:text-white",children:"Change Location"})]}),e.jsx(V,{className:"bg-gray-50 border border-gray-200",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:je.customerAddress}),e.jsxs("div",{className:"text-gray-600",children:[je.customerCity,", ",je.customerState," ",je.customerZip]})]})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Booking Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"preferredDate",children:"Preferred Date *"}),e.jsx(ae,{id:"preferredDate",name:"preferredDate",type:"date",autoComplete:"bday",required:!0,value:je.preferredDate,onChange:G=>Y(ue=>({...ue,preferredDate:G.target.value})),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"preferredTime",children:"Preferred Time"}),e.jsx(ae,{id:"preferredTime",name:"preferredTime",type:"time",value:je.preferredTime,onChange:G=>Y(ue=>({...ue,preferredTime:G.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(jt,{id:"notes",name:"notes",value:je.notes,onChange:G=>Y(ue=>({...ue,notes:G.target.value})),placeholder:"Any special requests or additional information...",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Order Summary"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[D.map((G,ue)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:G.name}),e.jsxs("span",{children:["$",G.price.toFixed(2)]})]},`${G.type}-${G.id}-${ue}`)),e.jsx(er,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",De().toFixed(2)]})]}),O&&$e()>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ge,{variant:"secondary",className:"mr-2 text-xs bg-green-100 text-green-800",children:O.promo_code}),"Promotion Discount"]}),e.jsxs("span",{className:"font-semibold",children:["-$",$e().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Platform Fees (15%)"}),e.jsxs("span",{children:["$",Le().toFixed(2)]})]}),e.jsx(er,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",Te().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(P,{variant:"outline",className:"flex-1",onClick:()=>U(!1),children:"Cancel"}),e.jsx(P,{className:"flex-1",onClick:es,children:"Submit Booking Request"})]})]})]})})]})},t8=ml("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Go=d.forwardRef(({className:s,variant:t,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:Oe(t8({variant:t}),s),...r}));Go.displayName="Alert";const r8=d.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:Oe("mb-1 font-medium leading-none tracking-tight",s),...t}));r8.displayName="AlertTitle";const Xo=d.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:Oe("text-sm [&_p]:leading-relaxed",s),...t}));Xo.displayName="AlertDescription";function a8(){const s=Nt(),t=ya(),{user:r}=Ss(),{toast:a}=et(),[n,i]=d.useState(!1),[o,c]=d.useState(!1),[l,u]=d.useState(""),[m,x]=d.useState(""),[f,p]=d.useState({driversLicense:{file:null,uploaded:!1},proofOfAddress:{file:null,uploaded:!1},liabilityInsurance:{file:null,uploaded:!1},licenses:[]});d.useEffect(()=>{const D=t.state;console.log("Location state:",D),D!=null&&D.businessId&&(console.log("Setting businessId from location state:",D.businessId),u(D.businessId)),(async()=>{var X;if(r!=null&&r.id){console.log("Using user ID from auth context:",r.id),v();return}try{const{directSupabaseAPI:T}=await ms(async()=>{const{directSupabaseAPI:O}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:O}},[]),A=await T.getSession();if((X=A==null?void 0:A.user)!=null&&X.id){console.log("Found user ID from session:",A.user.id);const O={id:A.user.id,email:A.user.email};await g(O.id);return}}catch(T){console.log("Could not get session:",T)}D!=null&&D.businessId&&(console.log("Trying to find provider by businessId:",D.businessId),await b(D.businessId))})()},[r,t.state]);const v=async()=>{if(!(r!=null&&r.id)){console.log("No user ID available");return}await g(r.id)},g=async D=>{var z;console.log("Fetching provider info for user:",D);try{const{data:X,error:T}=await W.from("providers").select("id, business_id, user_id, first_name, last_name, email").eq("user_id",D);if(console.log("All providers for user:",{allProviders:X,allError:T}),T)throw console.error("Error querying all providers:",T),T;if(!X||X.length===0){console.log("No providers found for user, retrying in 2 seconds..."),setTimeout(()=>{g(D)},2e3);return}const A=X[0];console.log("Setting providerId:",A.id,"businessId:",A.business_id),x(A.id),l||u(A.business_id)}catch(X){console.error("Error fetching provider info:",X),(z=t.state)!=null&&z.businessId||a({title:"Error",description:"Failed to load provider information",variant:"destructive"})}},b=async D=>{console.log("Fetching providers for businessId:",D);try{const{data:z,error:X}=await W.from("providers").select("id, business_id, user_id, first_name, last_name, email").eq("business_id",D).order("created_at",{ascending:!1}).limit(5);if(console.log("Providers for business:",{businessProviders:z,error:X}),X){console.error("Error querying providers by business:",X);return}if(z&&z.length>0){const T=z[0];console.log("Setting providerId from business lookup:",T.id),x(T.id),u(D)}else console.log("No providers found for business, will retry..."),setTimeout(()=>{b(D)},2e3)}catch(z){console.error("Error fetching providers by business:",z)}},w=async(D,z,X,T)=>{try{if(console.log("Uploading file via Vercel endpoint:",{fileName:D.name,folderPath:z,fileSize:D.size,providerId:X,businessId:T}),!X||!T)throw new Error(`Missing required IDs - providerId: ${X}, businessId: ${T}`);const A=new FormData;A.append("file",D),A.append("folderPath",z),A.append("providerId",X),A.append("businessId",T);const{data:{session:O}}=await W.auth.getSession();if(!(O!=null&&O.access_token))throw new Error("Authentication required for file upload");const $=await fetch("/api/upload-document",{method:"POST",headers:{Authorization:`Bearer ${O.access_token}`},body:A});if(!$.ok){const q=await $.json().catch(()=>({}));throw console.error("Upload API error:",$.status,q),new Error(q.error||`Upload failed with status ${$.status}`)}const F=await $.json();if(console.log("Upload successful:",F),!F.success||!F.publicUrl)throw new Error("Upload completed but no URL returned");return console.log("Generated public URL:",F.publicUrl),F.publicUrl}catch(A){throw console.error("uploadToStorage error:",A),A}},y=async(D,z,X,T,A)=>{try{console.log("Saving document record:",{provider_id:m,document_type:D,document_name:z,file_url:X,file_size_bytes:T});const{error:O}=await W.from("business_documents").insert({business_id:l,document_type:D,document_name:z,file_url:X,file_size_bytes:T,verification_status:"pending",expiry_date:A||null});if(O)throw console.error("Database insert error:",O),new Error(`Database save failed: ${O.message}`);console.log("Document record saved successfully")}catch(O){throw console.error("saveDocumentRecord error:",O),O}},_=(D,z)=>{if(z.size>10*1024*1024){a({title:"File too large",description:"File size must be less than 10MB",variant:"destructive"});return}const X=new FileReader;X.onload=T=>{var O;const A=(O=T.target)==null?void 0:O.result;p($=>({...$,[D]:{file:z,uploaded:!0,preview:z.type.startsWith("image/")?A:void 0}}))},X.readAsDataURL(z)},N=D=>{if(D.size>10*1024*1024){alert("File size must be less than 10MB");return}const z=new FileReader;z.onload=X=>{var A;const T=(A=X.target)==null?void 0:A.result;p(O=>({...O,licenses:[...O.licenses,{file:D,uploaded:!0,preview:D.type.startsWith("image/")?T:void 0}]}))},z.readAsDataURL(D)},C=D=>{p(z=>({...z,licenses:z.licenses.filter((X,T)=>T!==D)}))},R=D=>{p(z=>({...z,[D]:{file:null,uploaded:!1}}))},E=async()=>{if(console.log("Submitting documents with:",{businessId:l,providerId:m,userId:r==null?void 0:r.id}),r!=null&&r.id)try{const{data:A,error:O}=await W.from("business_profiles").select("id, business_name").limit(10);console.log("Available businesses:",{businesses:A,businessError:O});const{data:$,error:F}=await W.from("providers").select("id, user_id, business_id, first_name, last_name").eq("user_id",r.id);if(console.log("Providers for current user:",{providers:$,providerError:F}),l){const{data:q,error:te}=await W.from("providers").select("id, user_id, business_id, first_name, last_name").eq("business_id",l);console.log("Providers for businessId",l,":",{businessProviders:q,businessProviderError:te})}}catch(A){console.error("Debug query error:",A)}let D=l,z=m;if(!D||!z){console.log("Missing IDs, attempting comprehensive lookup...");const A=t.state;if(A!=null&&A.businessId&&!D&&(D=A.businessId,u(D),console.log("Got businessId from location state:",D)),r!=null&&r.id)try{const{data:O,error:$}=await W.from("providers").select("id, business_id, user_id").eq("user_id",r.id).limit(1);if(console.log("Provider lookup result:",{providers:O,error:$}),O&&O.length>0){const F=O[0];z||(z=F.id,x(z),console.log("Got providerId from user lookup:",z)),D||(D=F.business_id,u(D),console.log("Got businessId from user lookup:",D))}}catch(O){console.error("Error in provider lookup:",O)}if(D&&!z)try{const{data:O,error:$}=await W.from("providers").select("id, business_id").eq("business_id",D).limit(1);console.log("Business provider lookup:",{businessProviders:O,error:$}),O&&O.length>0&&(z=O[0].id,x(z),console.log("Got providerId from business lookup:",z))}catch(O){console.error("Error in business provider lookup:",O)}}if(!D){console.error("Business ID is missing:",JSON.stringify({currentBusinessId:D,currentProviderId:z,originalBusinessId:l,originalProviderId:m,userId:r==null?void 0:r.id})),a({title:"Error",description:"Business information is missing. Please try refreshing the page.",variant:"destructive"});return}if(!z){console.error("Provider ID is missing:",JSON.stringify({currentBusinessId:D,currentProviderId:z,originalBusinessId:l,originalProviderId:m,userId:r==null?void 0:r.id})),a({title:"Error",description:"Provider information is missing. Please try refreshing the page or contact support.",variant:"destructive"});return}if(console.log("Starting document upload with valid IDs:",{currentBusinessId:D,currentProviderId:z}),["driversLicense","proofOfAddress","liabilityInsurance"].filter(A=>!f[A].file).length>0){a({title:"Missing Documents",description:"Please upload all required documents before submitting",variant:"destructive"});return}c(!0),i(!0);try{if(console.log("Starting sequential document uploads..."),f.driversLicense.file){console.log("Uploading Driver's License...");try{const A=await w(f.driversLicense.file,`provider-dl/${D}`,z,D);await y("drivers_license",f.driversLicense.file.name,A,f.driversLicense.file.size),console.log("Driver's License uploaded successfully")}catch(A){throw console.error("Driver's License upload failed:",A),new Error(`Driver's License upload failed: ${A.message}`)}}if(f.proofOfAddress.file){console.log("Uploading Proof of Address...");try{const A=await w(f.proofOfAddress.file,`provider-poa/${D}`,z,D);await y("proof_of_address",f.proofOfAddress.file.name,A,f.proofOfAddress.file.size),console.log("Proof of Address uploaded successfully")}catch(A){throw console.error("Proof of Address upload failed:",A),new Error(`Proof of Address upload failed: ${A.message}`)}}if(f.liabilityInsurance.file){console.log("Uploading Liability Insurance...");try{const A=await w(f.liabilityInsurance.file,`provider-li/${D}`,z,D);await y("liability_insurance",f.liabilityInsurance.file.name,A,f.liabilityInsurance.file.size),console.log("Liability Insurance uploaded successfully")}catch(A){throw console.error("Liability Insurance upload failed:",A),new Error(`Liability Insurance upload failed: ${A.message}`)}}for(let A=0;A<f.licenses.length;A++){const O=f.licenses[A];if(O.file){console.log(`Uploading Professional License ${A+1}...`);try{const $=await w(O.file,`provider-plc/${D}`,z,D);await y("professional_license",O.file.name,$,O.file.size),console.log(`Professional License ${A+1} uploaded successfully`)}catch($){throw console.error(`Professional License ${A+1} upload failed:`,$),new Error(`Professional License ${A+1} upload failed: ${$.message}`)}}}console.log("All documents uploaded successfully"),a({title:"Documents Uploaded",description:"All documents have been uploaded successfully and are pending verification",variant:"default"}),s("/provider-dashboard",{state:{message:"Documents uploaded successfully! Your documents are now under review."}})}catch(A){console.error("Error uploading documents:",A);let O="Failed to upload documents. Please try again.";A instanceof Error?O=A.message:typeof A=="string"?O=A:A&&typeof A=="object"&&(O=A.message||A.error||A.description||JSON.stringify(A)),console.error("Detailed error message:",O),a({title:"Upload Failed",description:O,variant:"destructive"})}finally{c(!1),i(!1)}},I=()=>f.driversLicense.uploaded&&f.proofOfAddress.uploaded&&f.liabilityInsurance.uploaded,M=async()=>{await E()},U=[{type:"driversLicense",title:"Driver's License",description:"Valid government-issued photo ID",icon:Ja,required:!0,document:f.driversLicense},{type:"proofOfAddress",title:"Proof of Address",description:"Utility bill, bank statement, or lease agreement (within 3 months)",icon:Zr,required:!0,document:f.proofOfAddress},{type:"liabilityInsurance",title:"Liability Insurance",description:"Professional liability insurance certificate",icon:It,required:!0,document:f.liabilityInsurance}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/provider-portal",className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Portal"})]})})}),e.jsx("div",{className:"w-8 h-8 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-8 h-8 object-contain"})})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Document Verification"}),e.jsx("p",{className:"text-foreground/70 max-w-2xl mx-auto",children:"Please upload the required documents to verify your identity and qualifications. All documents will be securely reviewed within 24-48 hours."}),!1]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-blue rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:"Registration"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-roam-blue"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-blue rounded-full flex items-center justify-center",children:e.jsx(ld,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-roam-blue",children:"Documents"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-border"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-border rounded-full flex items-center justify-center",children:e.jsx(Ds,{className:"w-5 h-5 text-foreground/50"})}),e.jsx("span",{className:"text-sm text-foreground/50",children:"Onboarding"})]})]})}),e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Required Documents"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:U.map(D=>{var z;return e.jsxs(V,{className:"relative",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-roam-light-blue/20 rounded-lg flex items-center justify-center",children:e.jsx(D.icon,{className:"w-5 h-5 text-roam-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:D.title}),e.jsx(ge,{variant:"destructive",className:"text-xs",children:"Required"})]})]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-foreground/70 mb-4",children:D.description}),D.document.uploaded?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:(z=D.document.file)==null?void 0:z.name}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>R(D.type),className:"ml-auto text-red-600 hover:text-red-800 hover:bg-red-50",children:e.jsx(wt,{className:"w-4 h-4"})})]}),D.document.preview&&e.jsx("div",{className:"w-full h-32 rounded-lg overflow-hidden border",children:e.jsx("img",{src:D.document.preview,alt:`${D.title} preview`,className:"w-full h-full object-cover"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[e.jsx(fa,{className:"w-8 h-8 text-foreground/50 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-foreground/70 mb-3",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-foreground/50 mb-3",children:"JPG, PNG, PDF up to 10MB"}),e.jsx(ae,{type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:X=>{var A;const T=(A=X.target.files)==null?void 0:A[0];T&&_(D.type,T)},className:"hidden",id:`upload-${D.type}`}),e.jsx(B,{htmlFor:`upload-${D.type}`,children:e.jsx(P,{variant:"outline",className:"cursor-pointer",asChild:!0,children:e.jsxs("span",{children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"Choose File"]})})})]})]})]},D.type)})})]}),e.jsxs(V,{className:"mb-8",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-roam-yellow/20 rounded-lg flex items-center justify-center",children:e.jsx(ld,{className:"w-5 h-5 text-roam-yellow"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Professional Licenses & Certificates"}),e.jsx(ge,{variant:"secondary",className:"text-xs",children:"Optional"})]})]})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-sm text-foreground/70 mb-4",children:"Upload any professional licenses, certifications, or training certificates related to the services you offer."}),f.licenses.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:f.licenses.map((D,z)=>{var X;return e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(Xe,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:(X=D.file)==null?void 0:X.name}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>C(z),className:"ml-auto text-red-600 hover:text-red-800 hover:bg-red-50",children:e.jsx(wt,{className:"w-4 h-4"})})]},z)})}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[e.jsx(fa,{className:"w-8 h-8 text-foreground/50 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-foreground/70 mb-3",children:"Click to upload licenses or certificates"}),e.jsx("p",{className:"text-xs text-foreground/50 mb-3",children:"JPG, PNG, PDF up to 10MB each"}),e.jsx(ae,{type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:D=>{var X;const z=(X=D.target.files)==null?void 0:X[0];z&&N(z),D.target.value=""},className:"hidden",id:"upload-licenses"}),e.jsx(B,{htmlFor:"upload-licenses",children:e.jsx(P,{variant:"outline",className:"cursor-pointer",asChild:!0,children:e.jsxs("span",{children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"Add License/Certificate"]})})})]})]})]}),e.jsxs(Go,{className:"mb-8",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsxs(Xo,{children:[e.jsx("strong",{children:"Important:"})," All documents will be securely stored and reviewed by our verification team. You'll receive an email notification once your documents are approved. The verification process typically takes 24-48 hours."]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsx(P,{asChild:!0,variant:"outline",size:"lg",children:e.jsxs(Ee,{to:"/provider-portal",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Portal"]})}),e.jsx(P,{onClick:M,disabled:!I()||n||o,className:"bg-roam-blue hover:bg-roam-blue/90",size:"lg",children:n||o?e.jsx(e.Fragment,{children:o?"Uploading...":"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Submit Documents"]})})]})]})})]})}function n8(){const[s,t]=d.useState(null),[r,a]=d.useState([]),[n,i]=d.useState([]),[o,c]=d.useState(!0),[l,u]=d.useState(!1),m=Nt();d.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:{user:p}}=await W.auth.getUser();if(!p)return;const{data:v}=await W.from("providers").select("business_id, provider_role").eq("user_id",p.id).single();if(!v||v.provider_role!=="owner"&&v.provider_role!=="dispatcher"){m("/provider-dashboard");return}const{data:g}=await W.from("business_profiles").select("*").eq("id",v.business_id).single();g&&t(g);const{data:b}=await W.from("business_locations").select("*").eq("business_id",v.business_id).order("is_primary",{ascending:!1});b&&a(b);const{data:w}=await W.from("providers").select("*").eq("business_id",v.business_id);w&&i(w)}catch(p){console.error("Error loading business data:",p)}finally{c(!1)}},f=async()=>{if(s){u(!0);try{const{error:p}=await W.from("business_profiles").update(s).eq("id",s.id);if(p)throw p;alert("Business information saved successfully!")}catch(p){console.error("Error saving business:",p),alert("Error saving business information")}finally{u(!1)}}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx(fs,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Loading business data..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/provider-dashboard",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("h1",{className:"text-xl font-bold",children:"Business Management"})]}),e.jsxs(P,{onClick:f,disabled:l,className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(af,{className:"w-4 h-4 mr-2"}),l?"Saving...":"Save Changes"]})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(Pr,{defaultValue:"details",className:"space-y-6",children:[e.jsxs(fr,{className:"grid w-full grid-cols-5",children:[e.jsx(hs,{value:"details",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Business Details"}),e.jsx(hs,{value:"locations",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Locations"}),e.jsx(hs,{value:"services",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Services & Pricing"}),e.jsx(hs,{value:"team",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Team Management"}),e.jsx(hs,{value:"hours",className:"data-[state=active]:bg-roam-blue data-[state=active]:text-white",children:"Business Hours"})]}),e.jsx(ds,{value:"details",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Business Logo"})}),e.jsxs(K,{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-lg flex items-center justify-center mx-auto",children:e.jsx(fs,{className:"w-16 h-16 text-white"})}),e.jsxs(P,{variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx(fa,{className:"w-4 h-4 mr-2"}),"Upload Logo"]})]})]}),e.jsxs(V,{className:"lg:col-span-2",children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Business Information"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"businessName",children:"Business Name"}),e.jsx(ae,{id:"businessName",value:s.business_name,onChange:p=>t({...s,business_name:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(ae,{id:"contactEmail",type:"email",value:s.contact_email||"",onChange:p=>t({...s,contact_email:p.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"phone",children:"Phone Number"}),e.jsx(ae,{id:"phone",type:"tel",value:s.phone||"",onChange:p=>t({...s,phone:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"website",children:"Website URL"}),e.jsx(ae,{id:"website",type:"url",value:s.website_url||"",onChange:p=>t({...s,website_url:p.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Verification Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ge,{className:s.verification_status==="approved"?"bg-green-100 text-green-800":s.verification_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:[s.verification_status==="approved"&&e.jsx(Xe,{className:"w-3 h-3 mr-1"}),s.verification_status]}),s.verification_status==="approved"&&e.jsx("span",{className:"text-sm text-green-600",children:"Your business is verified"})]})]})]})]})]})}),e.jsxs(ds,{value:"locations",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Locations"}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Location"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>e.jsxs(V,{className:"hover:shadow-md transition-shadow",children:[e.jsx(Se,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"text-lg",children:p.location_name}),p.is_primary&&e.jsx(ge,{className:"bg-roam-blue text-white mt-1",children:"Primary"})]}),e.jsx(P,{variant:"ghost",size:"sm",children:e.jsx(Hk,{className:"w-4 h-4"})})]})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:p.address_line1}),p.address_line2&&e.jsx("p",{children:p.address_line2}),e.jsxs("p",{children:[p.city,", ",p.state," ",p.postal_code]})]}),p.offers_mobile_services&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-roam-blue",children:[e.jsx(ws,{className:"w-4 h-4"}),"Mobile services: ",p.mobile_service_radius," mile radius"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{size:"sm",variant:"outline",className:"flex-1 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx($t,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(P,{size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:e.jsx(u0,{className:"w-3 h-3"})})]})]})]},p.id))})]}),e.jsxs(ds,{value:"services",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Services & Pricing"}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Service"]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Service Catalog"})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:[{name:"Deep Tissue Massage",price:120,duration:"90 min",active:!0,delivery:["mobile","in_person"]},{name:"Swedish Massage",price:90,duration:"60 min",active:!0,delivery:["mobile","in_person"]},{name:"Sports Recovery Massage",price:110,duration:"75 min",active:!1,delivery:["mobile"]},{name:"Prenatal Massage",price:100,duration:"60 min",active:!0,delivery:["in_person"]}].map((p,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ms,{checked:p.active,className:"data-[state=checked]:bg-roam-blue"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:p.name}),e.jsx("p",{className:"text-sm text-foreground/60",children:p.duration})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-roam-blue",children:["$",p.price]}),e.jsx("div",{className:"flex gap-1",children:p.delivery.map(g=>e.jsx(ge,{variant:"secondary",className:"text-xs",children:g},g))})]}),e.jsxs(P,{size:"sm",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx($t,{className:"w-3 h-3 mr-1"}),"Edit"]})]})]},v))})})]})]}),e.jsxs(ds,{value:"team",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Team Management"}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Invite Team Member"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(p=>e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:e.jsx(Ds,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold",children:[p.first_name," ",p.last_name]}),e.jsx("p",{className:"text-sm text-foreground/60 capitalize",children:p.provider_role}),e.jsx("p",{className:"text-sm text-foreground/60",children:p.email}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(ge,{className:p.verification_status==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:p.verification_status}),p.average_rating>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-3 h-3 text-roam-warning fill-current"}),e.jsx("span",{className:"text-xs",children:p.average_rating})]})]}),e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsxs(P,{size:"sm",variant:"outline",className:"flex-1 border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:[e.jsx($t,{className:"w-3 h-3 mr-1"}),"Edit"]})})]})]})})},p.id))})]}),e.jsxs(ds,{value:"hours",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Business Hours"}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Operating Hours"})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(p=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24",children:e.jsx(B,{className:"font-medium",children:p})}),e.jsx(Ms,{className:"data-[state=checked]:bg-roam-blue"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(as,{defaultValue:"09:00",children:[e.jsx(ss,{className:"w-24",children:e.jsx(is,{})}),e.jsx(ts,{children:Array.from({length:24},(v,g)=>e.jsx(ce,{value:`${g.toString().padStart(2,"0")}:00`,children:`${g.toString().padStart(2,"0")}:00`},g))})]}),e.jsx("span",{className:"text-foreground/60",children:"to"}),e.jsxs(as,{defaultValue:"17:00",children:[e.jsx(ss,{className:"w-24",children:e.jsx(is,{})}),e.jsx(ts,{children:Array.from({length:24},(v,g)=>e.jsx(ce,{value:`${g.toString().padStart(2,"0")}:00`,children:`${g.toString().padStart(2,"0")}:00`},g))})]})]})]},p))})})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ht,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Business Not Found"}),e.jsx("p",{className:"text-foreground/70 mb-4",children:"Unable to load business information."}),e.jsx(P,{asChild:!0,children:e.jsx(Ee,{to:"/provider-dashboard",children:"Back to Dashboard"})})]})})}function i8(){const{customer:s,updateCustomerProfile:t,uploadCustomerAvatar:r,loading:a}=Ss(),{toast:n}=et(),[i,o]=d.useState(!1),[c,l]=d.useState(!1),[u,m]=d.useState(!1),[x,f]=d.useState(!1),[p,v]=d.useState({firstName:(s==null?void 0:s.first_name)||"",lastName:(s==null?void 0:s.last_name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",dateOfBirth:"",bio:"",imageUrl:(s==null?void 0:s.image_url)||""}),g=async()=>{if(s!=null&&s.customer_id){f(!0);try{console.log("CustomerProfile: Loading full profile data...");const{directSupabaseAPI:N}=await ms(async()=>{const{directSupabaseAPI:E}=await import("./directSupabase--9YelMUn.js");return{directSupabaseAPI:E}},[]),C=localStorage.getItem("roam_access_token");C&&(N.currentAccessToken=C);const R=await fetch(`https://vssomyuyhicaxsgiaupo.supabase.co/rest/v1/customer_profiles?user_id=eq.${s.customer_id}&select=*`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzc29teXV5aGljYXhzZ2lhdXBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NTM3MTUsImV4cCI6MjA2OTAyOTcxNX0.c4JrNgMGsrCaFP2VrF4pL6iUG8Ub8Hkcrm5345r7KHs","Content-Type":"application/json"}});if(R.ok){const E=await R.json();if(E&&E.length>0){const I=E[0];console.log("CustomerProfile: Loaded profile data:",I),v({firstName:I.first_name||s.first_name||"",lastName:I.last_name||s.last_name||"",email:I.email||s.email||"",phone:I.phone||s.phone||"",dateOfBirth:I.date_of_birth||"",bio:I.bio||"",imageUrl:I.image_url||s.image_url||""})}else console.log("CustomerProfile: No profile data found, using customer data"),v({firstName:s.first_name||"",lastName:s.last_name||"",email:s.email||"",phone:s.phone||"",dateOfBirth:"",bio:"",imageUrl:s.image_url||""})}else console.log("CustomerProfile: Failed to load profile data, using customer data"),v({firstName:s.first_name||"",lastName:s.last_name||"",email:s.email||"",phone:s.phone||"",dateOfBirth:"",bio:"",imageUrl:s.image_url||""})}catch(N){console.error("CustomerProfile: Error loading profile data:",N),v({firstName:s.first_name||"",lastName:s.last_name||"",email:s.email||"",phone:s.phone||"",dateOfBirth:"",bio:"",imageUrl:s.image_url||""})}finally{f(!1)}}};if(d.useEffect(()=>{if(s!=null&&s.customer_id)g();else{const N=localStorage.getItem("roam_access_token"),C=localStorage.getItem("roam_customer");(!N||!C)&&console.log("CustomerProfile: No valid authentication found")}},[s]),!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-lg",children:"Please sign in to view your profile."}),e.jsx(P,{asChild:!0,className:"mt-4 bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/",children:"Go Home"})})]})});if(x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-roam-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading your profile..."})]})});const b=`${s.first_name.charAt(0)}${s.last_name.charAt(0)}`.toUpperCase(),w=async()=>{l(!0);try{if(console.log("CustomerProfile: Starting save with data:",{customerId:s==null?void 0:s.customer_id,profileData:p}),!(s!=null&&s.customer_id))throw new Error("No customer ID found. Please sign in again.");console.log("CustomerProfile: Calling updateCustomerProfile with:",{firstName:p.firstName,lastName:p.lastName,email:p.email,phone:p.phone,dateOfBirth:p.dateOfBirth,bio:p.bio,imageUrl:p.imageUrl}),await t({firstName:p.firstName,lastName:p.lastName,email:p.email,phone:p.phone,dateOfBirth:p.dateOfBirth,bio:p.bio,imageUrl:p.imageUrl}),console.log("CustomerProfile: Profile saved successfully, reloading data..."),await g(),o(!1),n({title:"Profile Updated",description:"Your profile has been successfully updated.",variant:"default"})}catch(N){console.error("Failed to save profile:",N);const C=N.message||N;C.includes("session has expired")||C.includes("sign in again")?n({title:"Session Expired",description:"Your session has expired. Please sign in again to save your changes.",variant:"destructive"}):n({title:"Update Failed",description:`Failed to save profile: ${C}`,variant:"destructive"})}finally{l(!1)}},y=async N=>{var R;const C=(R=N.target.files)==null?void 0:R[0];if(C){if(!C.type.startsWith("image/")){n({title:"Invalid File Type",description:"Please select an image file.",variant:"destructive"});return}if(C.size>5*1024*1024){n({title:"File Too Large",description:"File size must be less than 5MB.",variant:"destructive"});return}m(!0);try{const E=await r(C);v(I=>({...I,imageUrl:E})),n({title:"Avatar Updated",description:"Your profile picture has been successfully updated.",variant:"default"}),console.log("Avatar uploaded successfully")}catch(E){console.error("Failed to upload avatar:",E),n({title:"Upload Failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{m(!1)}}},_=()=>{v({firstName:s.first_name,lastName:s.last_name,email:s.email,phone:s.phone||"",dateOfBirth:"",bio:"",imageUrl:s.image_url||""}),o(!1)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-24 h-24 object-contain"})})]})})})}),e.jsx("section",{className:"py-8 lg:py-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:["My ",e.jsx("span",{className:"text-roam-blue",children:"Profile"})]}),e.jsx("p",{className:"text-lg text-foreground/70",children:"Manage your personal information and preferences."})]}),!i&&e.jsxs(P,{onClick:()=>o(!0),className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(V,{className:"lg:col-span-1",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Profile Picture"]})}),e.jsxs(K,{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(st,{className:"h-32 w-32",children:[e.jsx(it,{src:p.imageUrl||`https://api.dicebear.com/7.x/initials/svg?seed=${s.first_name}${s.last_name}`,alt:`${s.first_name} ${s.last_name}`}),e.jsx(tt,{className:"bg-roam-blue text-white text-2xl",children:b})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden",id:"avatar-upload"}),e.jsx(P,{size:"sm",className:"absolute bottom-0 right-0 rounded-full w-10 h-10 p-0 bg-roam-blue hover:bg-roam-blue/90",onClick:()=>{var N;return(N=document.getElementById("avatar-upload"))==null?void 0:N.click()},disabled:u,type:"button",children:u?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(_r,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-foreground/60",children:"ROAM Customer"})]})]})]}),e.jsxs(V,{className:"lg:col-span-2",children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Personal Information"})}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"firstName",children:"First Name"}),i?e.jsx(ae,{id:"firstName",value:p.firstName,onChange:N=>v({...p,firstName:N.target.value})}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md",children:s.first_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"lastName",children:"Last Name"}),i?e.jsx(ae,{id:"lastName",value:p.lastName,onChange:N=>v({...p,lastName:N.target.value})}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md",children:s.last_name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"email",children:[e.jsx(sr,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),i?e.jsx(ae,{id:"email",type:"email",value:p.email,onChange:N=>v({...p,email:N.target.value})}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md",children:s.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"phone",children:[e.jsx(En,{className:"w-4 h-4 inline mr-2"}),"Phone Number"]}),i?e.jsx(ae,{id:"phone",type:"tel",value:p.phone,onChange:N=>v({...p,phone:N.target.value}),placeholder:"(555) 123-4567"}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md",children:s.phone||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"dateOfBirth",children:[e.jsx(Qe,{className:"w-4 h-4 inline mr-2"}),"Date of Birth"]}),i?e.jsx(ae,{id:"dateOfBirth",type:"date",value:p.dateOfBirth,onChange:N=>v({...p,dateOfBirth:N.target.value})}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md",children:p.dateOfBirth||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"bio",children:"About Me"}),i?e.jsx(jt,{id:"bio",value:p.bio,onChange:N=>v({...p,bio:N.target.value}),placeholder:"Tell us a bit about yourself...",rows:4}):e.jsx("div",{className:"p-3 bg-accent/20 rounded-md min-h-[100px]",children:p.bio||"No bio provided"})]}),i&&e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(P,{onClick:w,className:"bg-roam-blue hover:bg-roam-blue/90 flex-1",disabled:c,children:[e.jsx(af,{className:"w-4 h-4 mr-2"}),c?"Saving...":"Save Changes"]}),e.jsxs(P,{onClick:_,variant:"outline",className:"flex-1",children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]})]})]})})})]})}function o8(){const{customer:s}=Ss(),[t,r]=d.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,bookingReminders:!0,promotionalEmails:!1,serviceUpdates:!0,preferredContactMethod:"email"});if(!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-lg",children:"Please sign in to view your settings."}),e.jsx(P,{asChild:!0,className:"mt-4 bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/",children:"Go Home"})})]})});const a=()=>{console.log("Saving settings:",t)},n=(i,o)=>{r(c=>({...c,[i]:o}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-24 h-24 object-contain"})})]})})})}),e.jsx("section",{className:"py-8 lg:py-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:e.jsx("span",{className:"text-roam-blue",children:"Settings"})}),e.jsx("p",{className:"text-lg text-foreground/70",children:"Customize your ROAM experience and manage your preferences."})]}),e.jsxs(P,{onClick:a,className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(af,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Notification Preferences"]})}),e.jsx(K,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Receive booking confirmations and updates via email"})]}),e.jsx(Ms,{checked:t.emailNotifications,onCheckedChange:i=>n("emailNotifications",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Get text message alerts for important updates"})]}),e.jsx(Ms,{checked:t.smsNotifications,onCheckedChange:i=>n("smsNotifications",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Receive push notifications on your device"})]}),e.jsx(Ms,{checked:t.pushNotifications,onCheckedChange:i=>n("pushNotifications",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Booking Reminders"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Get reminded about upcoming appointments"})]}),e.jsx(Ms,{checked:t.bookingReminders,onCheckedChange:i=>n("bookingReminders",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Promotional Emails"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Receive offers and promotional content"})]}),e.jsx(Ms,{checked:t.promotionalEmails,onCheckedChange:i=>n("promotionalEmails",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Service Updates"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Get notified about new services and features"})]}),e.jsx(Ms,{checked:t.serviceUpdates,onCheckedChange:i=>n("serviceUpdates",i)})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(c0,{className:"w-5 h-5"}),"Communication Preferences"]})}),e.jsx(K,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Preferred Contact Method"}),e.jsxs(as,{value:t.preferredContactMethod,onValueChange:i=>n("preferredContactMethod",i),children:[e.jsx(ss,{children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"email",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-4 h-4"}),"Email"]})}),e.jsx(ce,{value:"sms",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"SMS"]})}),e.jsx(ce,{value:"both",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-4 h-4"}),e.jsx(Kt,{className:"w-4 h-4"}),"Both Email & SMS"]})})]})]})]})})]})]})]})})})]})}function l8(){const{customer:s}=Ss(),[t,r]=d.useState(""),[a,n]=d.useState("2024"),[i,o]=d.useState("all"),c=[{id:"TXN-001",date:"2024-01-15",service:"Deep Tissue Massage",provider:{name:"Sarah Johnson",id:"provider-1",image:"/api/placeholder/60/60",rating:4.9},amount:120,tip:20,total:140,status:"completed",duration:"90 minutes",location:"Your Home - 123 Ocean Dr, Miami, FL",deliveryType:"mobile",paymentMethod:"Credit Card",receipt:"RCP-001"},{id:"TXN-002",date:"2024-01-08",service:"Personal Training Session",provider:{name:"Michael Chen",id:"provider-2",image:"/api/placeholder/60/60",rating:5},amount:80,tip:15,total:95,status:"completed",duration:"60 minutes",location:"Your Home - 456 Park Ave, Orlando, FL",deliveryType:"mobile",paymentMethod:"Credit Card",receipt:"RCP-002"},{id:"TXN-003",date:"2024-01-20",service:"Hair Cut & Color",provider:{name:"Emily Rodriguez",id:"provider-3",image:"/api/placeholder/60/60",rating:4.8},amount:185,tip:0,total:185,status:"pending",duration:"3 hours",location:"Beauty Studio - 789 Main St, Tampa, FL",deliveryType:"in-studio",paymentMethod:"Credit Card",receipt:"RCP-003"}];if(!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-lg",children:"Please sign in to view your transactions."}),e.jsx(P,{asChild:!0,className:"mt-4 bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/",children:"Go Home"})})]})});const l=c.filter(p=>{const v=p.service.toLowerCase().includes(t.toLowerCase())||p.provider.name.toLowerCase().includes(t.toLowerCase()),g=p.date.startsWith(a),b=i==="all"||p.status===i;return v&&g&&b}),u=c.reduce((p,v)=>p+v.total,0),m=c.reduce((p,v)=>p+v.tip,0),x=c.filter(p=>p.status==="completed").length,f=p=>{const v={completed:{label:"Completed",color:"bg-green-100 text-green-800"},pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800"},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-800"},refunded:{label:"Refunded",color:"bg-gray-100 text-gray-800"}};return v[p]||v.pending};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM Logo",className:"w-24 h-24 object-contain"})})]})})})}),e.jsx("section",{className:"py-8 lg:py-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:["Transaction ",e.jsx("span",{className:"text-roam-blue",children:"History"})]}),e.jsx("p",{className:"text-lg text-foreground/70",children:"View your booking history, payments, and transaction details."})]}),e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"Export History"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-roam-blue/10 rounded-lg flex items-center justify-center",children:e.jsx(Zt,{className:"w-6 h-6 text-roam-blue"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-foreground/60",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",u.toFixed(2)]})]})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx(us,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-foreground/60",children:"Tips Given"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",m.toFixed(2)]})]})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-foreground/60",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:x})]})]})})}),e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Pn,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-foreground/60",children:"Avg. Per Service"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",x>0?(u/x).toFixed(2):"0.00"]})]})]})})})]}),e.jsx(V,{className:"mb-8",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground/40"}),e.jsx(ae,{placeholder:"Search services or providers...",value:t,onChange:p=>r(p.target.value),className:"pl-10"})]})}),e.jsxs(as,{value:a,onValueChange:n,children:[e.jsx(ss,{className:"w-full sm:w-32",children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"2024",children:"2024"}),e.jsx(ce,{value:"2023",children:"2023"}),e.jsx(ce,{value:"2022",children:"2022"})]})]}),e.jsxs(as,{value:i,onValueChange:o,children:[e.jsx(ss,{className:"w-full sm:w-40",children:e.jsx(is,{})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"all",children:"All Status"}),e.jsx(ce,{value:"completed",children:"Completed"}),e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"cancelled",children:"Cancelled"}),e.jsx(ce,{value:"refunded",children:"Refunded"})]})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[l.map(p=>{const v=f(p.status);return e.jsx(V,{className:"hover:shadow-md transition-shadow",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:e.jsx(tv,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:p.service}),e.jsxs("p",{className:"text-foreground/60 mb-2",children:["with ",p.provider.name]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),new Date(p.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),p.duration]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4"}),p.deliveryType==="mobile"?"Mobile":"Business"]})]})]}),e.jsx(ge,{className:v.color,children:v.label})]}),e.jsx("div",{className:"bg-accent/20 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Location:"})," ",p.location]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground/60",children:"Service Amount"}),e.jsxs("p",{className:"font-semibold",children:["$",p.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground/60",children:"Tip"}),e.jsx("p",{className:"font-semibold",children:p.tip>0?`$${p.tip.toFixed(2)}`:"No tip"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground/60",children:"Total Paid"}),e.jsxs("p",{className:"font-semibold text-roam-blue",children:["$",p.total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground/60",children:"Payment Method"}),e.jsx("p",{className:"font-semibold",children:p.paymentMethod})]})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",children:[e.jsx(tv,{className:"w-4 h-4 mr-2"}),"View Receipt"]}),e.jsx(P,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(Ee,{to:`/provider/${p.provider.id}`,children:[e.jsx(At,{className:"w-4 h-4 mr-2"}),"View Provider"]})}),p.status==="completed"&&p.tip===0&&e.jsxs(P,{size:"sm",className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Add Tip"]})]})]})})},p.id)}),l.length===0&&e.jsxs(V,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xa,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No transactions found"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"Try adjusting your search criteria or browse all transactions."}),e.jsx(P,{variant:"outline",onClick:()=>{r(""),n("2024"),o("all")},className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:"Clear Filters"})]})]})]})})})]})}function c8(){const{isCustomer:s}=Ss(),{getFavoriteServices:t,getFavoriteBusinesses:r,getFavoriteProviders:a}=IN(),[n,i]=d.useState([]),[o,c]=d.useState([]),[l,u]=d.useState([]),[m,x]=d.useState(!0),[f,p]=d.useState("services");if(d.useEffect(()=>{(async()=>{if(!s){x(!1);return}try{x(!0);const[b,w,y]=await Promise.all([t(),r(),a()]);i(b),c(w),u(y)}catch(b){console.error("Error loading favorites:",b)}finally{x(!1)}})()},[s,t,r,a]),!s)return e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Cr,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"Please sign in to view and manage your favorites."}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/?signin=true",children:"Sign In"})})]});if(m)return e.jsxs(V,{className:"p-8 text-center",children:[e.jsx(rt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-roam-blue"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading your favorites..."}),e.jsx("p",{className:"text-foreground/60",children:"Please wait while we fetch your saved items."})]});const v=n.length+o.length+l.length;return v===0?e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Cr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"Start exploring and save your favorite services, businesses, and providers."}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsx(Ee,{to:"/",children:"Explore Services"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["My ",e.jsx("span",{className:"text-roam-blue",children:"Favorites"})]}),e.jsxs(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:[v," items saved"]})]}),e.jsxs(Pr,{value:f,onValueChange:p,className:"w-full",children:[e.jsxs(fr,{className:"grid w-full grid-cols-3",children:[e.jsxs(hs,{value:"services",className:"flex items-center gap-2",children:[e.jsx(sv,{className:"w-4 h-4"}),"Services (",n.length,")"]}),e.jsxs(hs,{value:"businesses",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"Businesses (",o.length,")"]}),e.jsxs(hs,{value:"providers",className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Providers (",l.length,")"]})]}),e.jsx(ds,{value:"services",className:"space-y-4",children:n.length===0?e.jsxs(V,{className:"p-6 text-center",children:[e.jsx(sv,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No favorite services"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Save services you're interested in to book them later."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(g=>e.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g.image_url||"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=500&h=300&fit=crop",alt:g.service_name,className:"w-full h-40 object-cover rounded-t-lg"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(Gr,{type:"service",itemId:g.service_id,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})})]}),e.jsxs(K,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:g.service_name}),e.jsx("p",{className:"text-sm text-foreground/60 mb-3 line-clamp-2",children:g.service_description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-lg font-bold text-roam-blue",children:["$",g.min_price]}),e.jsxs(ge,{variant:"outline",className:"text-xs",children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),g.duration_minutes," min"]})]}),e.jsx(ge,{variant:"secondary",className:"text-xs mb-3",children:g.service_category_type}),e.jsx(P,{asChild:!0,size:"sm",className:"w-full bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:`/book-service/${g.service_id}`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book Now"]})})]})]},g.id))})}),e.jsx(ds,{value:"businesses",className:"space-y-4",children:o.length===0?e.jsxs(V,{className:"p-6 text-center",children:[e.jsx(fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No favorite businesses"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Save businesses you love to easily find them later."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(g=>e.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g.cover_image_url||g.image_url||"https://images.unsplash.com/photo-1560472355-536de3962603?w=500&h=200&fit=crop",alt:g.business_name,className:"w-full h-32 object-cover rounded-t-lg"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(Gr,{type:"business",itemId:g.business_id,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})})]}),e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:g.logo_url||"https://images.unsplash.com/photo-1560472355-536de3962603?w=100&h=100&fit=crop",alt:`${g.business_name} logo`,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-1",children:g.business_name}),e.jsx("p",{className:"text-sm text-foreground/60 mb-2",children:g.business_type}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx(ge,{variant:g.verification_status==="approved"?"default":"secondary",className:"text-xs",children:g.verification_status==="approved"?"Verified":"Pending"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{asChild:!0,size:"sm",className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:`/book/${g.business_id}`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book Services"]})}),e.jsx(P,{asChild:!0,size:"sm",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs(Ee,{to:`/business/${g.business_id}`,children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"View Business"]})})]})]})]})})]},g.id))})}),e.jsx(ds,{value:"providers",className:"space-y-4",children:l.length===0?e.jsxs(V,{className:"p-6 text-center",children:[e.jsx(At,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No favorite providers"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Save providers you trust to book with them again."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(g=>{var b;return e.jsx(V,{className:"hover:shadow-lg transition-shadow",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden",children:g.image_url?e.jsx("img",{src:g.image_url,alt:`${g.first_name} ${g.last_name}`,className:"w-full h-full object-cover"}):e.jsx(At,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[g.first_name," ",g.last_name]}),e.jsx("p",{className:"text-sm text-foreground/60",children:g.business_name}),g.experience_years&&e.jsxs("p",{className:"text-xs text-foreground/50",children:[g.experience_years," years experience"]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"font-semibold",children:((b=g.average_rating)==null?void 0:b.toFixed(1))||"4.8"}),e.jsxs("span",{className:"text-sm text-foreground/60",children:["(",g.total_reviews||0,")"]})]})})]}),g.bio&&e.jsx("p",{className:"text-sm text-foreground/70 mb-3 line-clamp-2",children:g.bio}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{asChild:!0,size:"sm",className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:`/provider/${g.provider_id}?booking=true`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book Now"]})}),e.jsx(P,{asChild:!0,size:"sm",variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsx(Ee,{to:`/provider/${g.provider_id}`,children:"View Profile"})}),e.jsx(Gr,{type:"provider",itemId:g.provider_id,size:"sm",variant:"outline",className:"border-gray-300 text-gray-600 hover:bg-gray-50"})]})]})]})})},g.id)})})})]})]})}function d8(){const{customer:s,isCustomer:t}=Ss();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]}),t&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-foreground/70",children:["Welcome, ",s==null?void 0:s.first_name]}),e.jsx(P,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Ee,{to:"/my-bookings",children:"My Bookings"})})]})]})})}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(c8,{})})]})}const H2=({value:s,onChange:t,placeholder:r="Enter your address",className:a,disabled:n=!1})=>{const i=d.useRef(null),o=d.useRef(null),[c,l]=d.useState(!0),[u,m]=d.useState(!1),[x,f]=d.useState(!1),p="AIzaSyDuTYClctxxl_cq2Hr8gKbuOY-1-t4bqfw";console.log("Google Maps API Key Debug:",{fromEnv:!0,envValue:"AIzaSyDuTYClctxxl_cq2Hr8gKbuOY-1-t4bqfw".substring(0,15)+"...",finalKey:(p==null?void 0:p.substring(0,15))+"...",domain:window.location.hostname,protocol:window.location.protocol,url:window.location.href,isDev:!1,mode:"production"});const v=()=>new Promise((y,_)=>{if(window.google&&window.google.maps&&window.google.maps.places){m(!0),l(!1),y();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){window.initGoogleMaps=()=>{m(!0),l(!1),y()};return}const N=document.createElement("script"),C=`https://maps.googleapis.com/maps/api/js?key=${p}&libraries=places&callback=initGoogleMaps`;N.src=C,N.async=!0,N.defer=!0,console.log("Loading Google Maps script:",{url:C.replace(p,"API_KEY_HIDDEN"),timestamp:new Date().toISOString()}),window.initGoogleMaps=()=>{var I,M;console.log("Google Maps script loaded successfully"),console.log("API Key (first 10 chars):",p==null?void 0:p.substring(0,10));try{(M=(I=window.google)==null?void 0:I.maps)!=null&&M.places?console.log("Places API is available"):console.error("Places API not available after script load")}catch(U){console.error("Error accessing Places API:",U)}m(!0),l(!1),y()},window.gm_authFailure=()=>{console.error("Google Maps authentication failure detected"),console.error("API Key being used:",p),console.error("Please check:"),console.error("1. API key is valid"),console.error("2. Places API is enabled"),console.error("3. Maps JavaScript API is enabled"),console.error("4. API key restrictions (domain, IP, etc.)"),console.error("5. Billing is properly configured"),m(!1),l(!1),f(!0),y()},N.onerror=I=>{console.warn("Google Maps script failed to load (network restricted), falling back to manual input:",I),l(!1),m(!1),f(!0),y()};const R=setTimeout(()=>{console.warn("Google Maps script loading timeout, falling back to manual input"),l(!1),m(!1),f(!0),y()},1e4),E=window.initGoogleMaps;window.initGoogleMaps=()=>{clearTimeout(R),E&&E()},document.head.appendChild(N)}),g=()=>{var y,_;if(!i.current||!window.google||!window.google.maps||!window.google.maps.places){console.log("Google Maps not ready for autocomplete initialization");return}try{console.log("Initializing Google Places Autocomplete..."),o.current=new window.google.maps.places.Autocomplete(i.current,{types:["address"],componentRestrictions:{country:"us"},fields:["address_components","formatted_address","geometry","place_id","name"]}),console.log("Google Places Autocomplete initialized successfully"),o.current.addListener("place_changed",()=>{var C;const N=(C=o.current)==null?void 0:C.getPlace();console.log("Place selected:",N),N&&N.formatted_address&&t(N.formatted_address,N)}),o.current.addListener("error",N=>{var C,R;console.error("Google Places Autocomplete error:",N),N&&(N.code==="BILLING_NOT_ENABLED"||(C=N.message)!=null&&C.includes("billing")||(R=N.message)!=null&&R.includes("BillingNotEnabledMapError"))&&f(!0)})}catch(N){console.error("Error initializing Google Places Autocomplete:",N),((y=N.message)!=null&&y.includes("billing")||(_=N.message)!=null&&_.includes("BillingNotEnabledMapError"))&&(f(!0),l(!1))}};d.useEffect(()=>(window.gm_authFailure=()=>{console.error("Google Maps authentication failed - check API key"),l(!1),f(!0)},window.gm_authFailure=()=>{console.error("Google Maps billing not enabled"),l(!1),f(!0)},v().catch(y=>{console.warn("Google Maps unavailable, using manual input:",y),console.error("Google Maps error details:",{message:y.message,stack:y.stack,apiKey:(p==null?void 0:p.substring(0,10))+"..."}),f(!0),l(!1)}),window.addEventListener("error",y=>{y.message&&(y.message.includes("BillingNotEnabledMapError")||y.message.includes("billing"))&&(console.error("Google Maps billing error detected"),f(!0),l(!1))}),()=>{window.gm_authFailure&&delete window.gm_authFailure}),[]),d.useEffect(()=>{u&&!o.current&&g()},[u]),d.useEffect(()=>()=>{var y,_,N;o.current&&((N=(_=(y=window.google)==null?void 0:y.maps)==null?void 0:_.event)==null||N.clearInstanceListeners(o.current))},[]);const b=y=>{const _=y.target.value;t(_)},w=()=>{u&&!o.current&&g()};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(ae,{ref:i,value:s,onChange:b,onFocus:w,placeholder:r,disabled:n,className:Oe("pl-10",a)}),c&&e.jsx(rt,{className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 animate-spin text-muted-foreground"})]}),!u&&!c&&e.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:x?e.jsxs("div",{className:"text-amber-600",children:["⚠️ Google Maps requires billing to be enabled. Manual address entry only.",e.jsx("br",{}),e.jsx("a",{href:"https://console.cloud.google.com/project/_/billing/enable",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-800",children:"Enable billing on Google Cloud"})]}):e.jsx(e.Fragment,{children:"⚠️ Google Maps not available. Manual address entry only."})})]})};function u8(){const{customer:s}=Ss(),{toast:t}=et(),[r,a]=d.useState([]),[n,i]=d.useState(!0),[o,c]=d.useState(!1),[l,u]=d.useState(null),[m,x]=d.useState({location_name:"",street_address:"",unit_number:"",city:"",state:"",zip_code:"",is_primary:!1,access_instructions:"",location_type:"Home"}),[f,p]=d.useState(!1),v=()=>{x({location_name:"",street_address:"",unit_number:"",city:"",state:"",zip_code:"",is_primary:!1,access_instructions:"",location_type:"Home"}),u(null)},g=async()=>{try{i(!0),console.log("Creating default location...");const{data:M,error:U}=await W.rpc("ensure_customer_default_location");if(console.log("Default location creation result:",{locationId:M,error:U}),U)throw U;t({title:"Success",description:"Default location created successfully"}),await b()}catch(M){console.error("Error creating default location:",M),t({title:"Error",description:M.message||"Failed to create default location",variant:"destructive"})}finally{i(!1)}},b=async()=>{var M;if(s!=null&&s.customer_id)try{i(!0),console.log("Fetching locations for customer:",s);const{data:{user:U}}=await W.auth.getUser();if(!U){console.error("No authenticated user found");return}console.log("Using auth user ID for customer_locations query:",U.id);const{data:D,error:z}=await W.from("customer_locations").select("*").eq("customer_id",U.id).eq("is_active",!0).order("is_primary",{ascending:!1}).order("created_at",{ascending:!1});if(console.log("Customer locations query result:",{data:D,error:z}),z)throw z;a(D||[])}catch(U){console.error("Error fetching locations:",U);const D=(U==null?void 0:U.message)||((M=U==null?void 0:U.error)==null?void 0:M.message)||"Unknown error";t({title:"Error",description:`Failed to load your locations: ${D}`,variant:"destructive"})}finally{i(!1)}};d.useEffect(()=>{b()},[s==null?void 0:s.customer_id]);const w=(M,U)=>{if(x(D=>({...D,street_address:M})),U&&U.address_components){const D=U.address_components,z=X=>{var T;return((T=D.find(A=>A.types.includes(X)))==null?void 0:T.long_name)||""};x(X=>{var T,A,O,$;return{...X,city:z("locality")||z("sublocality"),state:z("administrative_area_level_1"),zip_code:z("postal_code"),latitude:(A=(T=U.geometry)==null?void 0:T.location)==null?void 0:A.lat(),longitude:($=(O=U.geometry)==null?void 0:O.location)==null?void 0:$.lng()}})}},y=async M=>{var U;if(M.preventDefault(),!(!(s!=null&&s.customer_id)||f))try{p(!0);const{data:{user:D}}=await W.auth.getUser();if(!D){console.error("No authenticated user found");return}if(console.log("Submitting location with auth user ID:",D.id),console.log("Form data:",m),!m.location_name.trim()||!m.street_address.trim()||!m.city.trim()||!m.state.trim()||!m.zip_code.trim()){t({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}m.is_primary&&await W.from("customer_locations").update({is_primary:!1}).eq("customer_id",D.id);const z={customer_id:D.id,location_name:m.location_name.trim(),street_address:m.street_address.trim(),unit_number:m.unit_number.trim()||null,city:m.city.trim(),state:m.state.trim(),zip_code:m.zip_code.trim(),latitude:m.latitude||null,longitude:m.longitude||null,is_primary:m.is_primary,access_instructions:m.access_instructions.trim()||null,location_type:m.location_type};let X,T;if(console.log("Location data to save:",z),l?(console.log("Updating existing location:",l.id),{error:X,data:T}=await W.from("customer_locations").update(z).eq("id",l.id)):(console.log("Inserting new location"),{error:X,data:T}=await W.from("customer_locations").insert([z])),console.log("Database operation result:",{error:X,data:T}),X)throw console.error("Database error details:",X),X;t({title:"Success",description:`Location ${l?"updated":"added"} successfully`}),c(!1),v(),b()}catch(D){console.error("Error saving location:",D);const z=(D==null?void 0:D.message)||((U=D==null?void 0:D.error)==null?void 0:U.message)||JSON.stringify(D);t({title:"Error",description:`Failed to ${l?"update":"add"} location: ${z}`,variant:"destructive"})}finally{p(!1)}},_=M=>{u(M),x({location_name:M.location_name,street_address:M.street_address,unit_number:M.unit_number||"",city:M.city,state:M.state,zip_code:M.zip_code,latitude:M.latitude,longitude:M.longitude,is_primary:M.is_primary,access_instructions:M.access_instructions||"",location_type:M.location_type}),c(!0)},N=async M=>{var U;try{const{error:D}=await W.from("customer_locations").update({is_active:!1}).eq("id",M.id);if(D)throw D;t({title:"Success",description:"Location deleted successfully"}),b()}catch(D){console.error("Error deleting location:",D);const z=(D==null?void 0:D.message)||((U=D==null?void 0:D.error)==null?void 0:U.message)||"Unknown error";t({title:"Error",description:`Failed to delete location: ${z}`,variant:"destructive"})}},C=async M=>{var U;try{const{data:{user:D}}=await W.auth.getUser();if(!D){console.error("No authenticated user found");return}await W.from("customer_locations").update({is_primary:!1}).eq("customer_id",D.id);const{error:z}=await W.from("customer_locations").update({is_primary:!0}).eq("id",M.id);if(z)throw z;t({title:"Success",description:"Primary location updated"}),b()}catch(D){console.error("Error setting primary location:",D);const z=(D==null?void 0:D.message)||((U=D==null?void 0:D.error)==null?void 0:U.message)||"Unknown error";t({title:"Error",description:`Failed to update primary location: ${z}`,variant:"destructive"})}},R=M=>{switch(M){case"Home":return Zr;case"Condo":return fs;case"Hotel":return fs;case"Other":return ws;default:return ws}},E=M=>{const U=`${M.street_address}${M.unit_number?`, ${M.unit_number}`:""}, ${M.city}, ${M.state} ${M.zip_code}`;if(M.latitude&&M.longitude){const D=`https://www.google.com/maps/search/?api=1&query=${M.latitude},${M.longitude}`;window.open(D,"_blank")}else{const z=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U)}`;window.open(z,"_blank")}},I=M=>{switch(M){case"Home":return"bg-green-100 text-green-800";case"Condo":return"bg-blue-100 text-blue-800";case"Hotel":return"bg-purple-100 text-purple-800";case"Other":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading your locations..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"text-sm text-foreground/70",children:["Welcome, ",s==null?void 0:s.first_name]})})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Locations"}),e.jsx("p",{className:"text-foreground/70",children:"Manage your saved addresses for mobile service delivery"})]}),e.jsxs(Xs,{open:o,onOpenChange:c,children:[e.jsx(iR,{asChild:!0,children:e.jsxs(P,{className:"bg-roam-blue hover:bg-roam-blue/90",onClick:()=>{v(),c(!0)},children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Location"]})}),e.jsxs(Vs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Js,{children:e.jsx(Ws,{children:l?"Edit Location":"Add New Location"})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(B,{htmlFor:"location_name",children:"Location Name *"}),e.jsx(ae,{id:"location_name",value:m.location_name,onChange:M=>x(U=>({...U,location_name:M.target.value})),placeholder:"e.g., Home, Work, Mom's House",className:"mt-1",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(B,{htmlFor:"location_type",children:"Location Type *"}),e.jsxs(as,{value:m.location_type||void 0,onValueChange:M=>x(U=>({...U,location_type:M})),children:[e.jsx(ss,{className:"mt-1",children:e.jsx(is,{placeholder:"Select location type"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"Home",children:"Home"}),e.jsx(ce,{value:"Condo",children:"Condo"}),e.jsx(ce,{value:"Hotel",children:"Hotel"}),e.jsx(ce,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(B,{htmlFor:"street_address",children:"Street Address *"}),e.jsx("div",{className:"mt-1",children:e.jsx(H2,{value:m.street_address,onChange:w,placeholder:"Start typing your address...",className:"w-full"})})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"unit_number",children:"Unit/Apt/Suite"}),e.jsx(ae,{id:"unit_number",value:m.unit_number,onChange:M=>x(U=>({...U,unit_number:M.target.value})),placeholder:"Apt 2B, Unit 5, etc.",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"city",children:"City *"}),e.jsx(ae,{id:"city",value:m.city,onChange:M=>x(U=>({...U,city:M.target.value})),placeholder:"City",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"state",children:"State *"}),e.jsx(ae,{id:"state",value:m.state,onChange:M=>x(U=>({...U,state:M.target.value})),placeholder:"State",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"zip_code",children:"ZIP Code *"}),e.jsx(ae,{id:"zip_code",value:m.zip_code,onChange:M=>x(U=>({...U,zip_code:M.target.value})),placeholder:"ZIP Code",className:"mt-1",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(B,{htmlFor:"access_instructions",children:"Access Instructions"}),e.jsx(jt,{id:"access_instructions",value:m.access_instructions,onChange:M=>x(U=>({...U,access_instructions:M.target.value})),placeholder:"Gate code, parking instructions, how to find the entrance, etc.",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center space-x-2",children:[e.jsx(Ms,{id:"is_primary",checked:m.is_primary,onCheckedChange:M=>x(U=>({...U,is_primary:M}))}),e.jsx(B,{htmlFor:"is_primary",children:"Set as primary location"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>{c(!1),v()},className:"flex-1",children:"Cancel"}),e.jsx(P,{type:"submit",disabled:f,className:"flex-1 bg-roam-blue hover:bg-roam-blue/90",children:f?"Saving...":l?"Update Location":"Add Location"})]})]})]})]})]}),r.length===0?e.jsxs(V,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-roam-light-blue/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ws,{className:"w-8 h-8 text-roam-blue"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Locations Saved"}),e.jsx("p",{className:"text-foreground/60 mb-6",children:"Add your first location to make booking mobile services easier"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(P,{onClick:()=>{v(),c(!0)},className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Your First Location"]}),e.jsxs(P,{onClick:g,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",disabled:n,children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Create Default Location"]})]})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(M=>{const U=R(M.location_type);return e.jsx(V,{className:"hover:shadow-lg transition-shadow",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-roam-light-blue/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(U,{className:"w-6 h-6 text-roam-blue"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:M.location_name}),M.location_type&&e.jsx(ge,{className:I(M.location_type),children:M.location_type}),M.is_primary&&e.jsxs(ge,{className:"bg-roam-yellow text-gray-900",children:[e.jsx(us,{className:"w-3 h-3 mr-1"}),"Primary"]})]}),e.jsxs("div",{className:"text-foreground/70 space-y-1",children:[e.jsx("p",{children:M.street_address}),M.unit_number&&e.jsxs("p",{children:["Unit: ",M.unit_number]}),e.jsxs("p",{children:[M.city,", ",M.state," ",M.zip_code]}),M.access_instructions&&e.jsxs("p",{className:"text-sm italic",children:["Instructions: ",M.access_instructions]})]}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-xs text-foreground/50",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"}),"Added"," ",new Date(M.created_at).toLocaleDateString()]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!M.is_primary&&e.jsx(P,{size:"sm",variant:"outline",onClick:()=>C(M),title:"Set as primary",children:e.jsx(us,{className:"w-4 h-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>E(M),title:"View in Google Maps",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(rf,{className:"w-4 h-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>_(M),children:e.jsx($t,{className:"w-4 h-4"})}),e.jsxs(z1,{children:[e.jsx(q1,{asChild:!0,children:e.jsx(P,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(u0,{className:"w-4 h-4"})})}),e.jsxs(ox,{children:[e.jsxs(lx,{children:[e.jsx(dx,{children:"Delete Location"}),e.jsxs(ux,{children:['Are you sure you want to delete "',M.location_name,'"? This action cannot be undone.']})]}),e.jsxs(cx,{children:[e.jsx(hx,{children:"Cancel"}),e.jsx(mx,{onClick:()=>N(M),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})})},M.id)})})]})})]})}var wx="Radio",[m8,G2]=ft(wx),[h8,f8]=m8(wx),X2=d.forwardRef((s,t)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:i,disabled:o,value:c="on",onCheck:l,...u}=s,[m,x]=d.useState(null),f=qe(t,g=>x(g)),p=d.useRef(!1),v=m?!!m.closest("form"):!0;return e.jsxs(h8,{scope:r,checked:n,disabled:o,children:[e.jsx(Ae.button,{type:"button",role:"radio","aria-checked":n,"data-state":K2(n),"data-disabled":o?"":void 0,disabled:o,value:c,...u,ref:f,onClick:ye(s.onClick,g=>{n||l==null||l(),v&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})}),v&&e.jsx(x8,{control:m,bubbles:!p.current,name:a,value:c,checked:n,required:i,disabled:o,style:{transform:"translateX(-100%)"}})]})});X2.displayName=wx;var Y2="RadioIndicator",Z2=d.forwardRef((s,t)=>{const{__scopeRadio:r,forceMount:a,...n}=s,i=f8(Y2,r);return e.jsx(xt,{present:a||i.checked,children:e.jsx(Ae.span,{"data-state":K2(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});Z2.displayName=Y2;var x8=s=>{const{control:t,checked:r,bubbles:a=!0,...n}=s,i=d.useRef(null),o=Vd(r),c=Rd(t);return d.useEffect(()=>{const l=i.current,u=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&x){const f=new Event("click",{bubbles:a});x.call(l,r),l.dispatchEvent(f)}},[o,r,a]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function K2(s){return s?"checked":"unchecked"}var p8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nx="RadioGroup",[g8,Q9]=ft(Nx,[no,G2]),Q2=no(),eS=G2(),[v8,b8]=g8(Nx),sS=d.forwardRef((s,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:i,required:o=!1,disabled:c=!1,orientation:l,dir:u,loop:m=!0,onValueChange:x,...f}=s,p=Q2(r),v=ao(u),[g,b]=hr({prop:i,defaultProp:n,onChange:x});return e.jsx(v8,{scope:r,name:a,required:o,disabled:c,value:g,onValueChange:b,children:e.jsx(Pf,{asChild:!0,...p,orientation:l,dir:v,loop:m,children:e.jsx(Ae.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":c?"":void 0,dir:v,...f,ref:t})})})});sS.displayName=Nx;var tS="RadioGroupItem",rS=d.forwardRef((s,t)=>{const{__scopeRadioGroup:r,disabled:a,...n}=s,i=b8(tS,r),o=i.disabled||a,c=Q2(r),l=eS(r),u=d.useRef(null),m=qe(t,u),x=i.value===n.value,f=d.useRef(!1);return d.useEffect(()=>{const p=g=>{p8.includes(g.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),e.jsx(Tf,{asChild:!0,...c,focusable:!o,active:x,children:e.jsx(X2,{disabled:o,required:i.required,checked:x,...l,...n,name:i.name,ref:m,onCheck:()=>i.onValueChange(n.value),onKeyDown:ye(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ye(n.onFocus,()=>{var p;f.current&&((p=u.current)==null||p.click())})})})});rS.displayName=tS;var y8="RadioGroupIndicator",aS=d.forwardRef((s,t)=>{const{__scopeRadioGroup:r,...a}=s,n=eS(r);return e.jsx(Z2,{...n,...a,ref:t})});aS.displayName=y8;var nS=sS,iS=rS,j8=aS;const _x=d.forwardRef(({className:s,...t},r)=>e.jsx(nS,{className:Oe("grid gap-2",s),...t,ref:r}));_x.displayName=nS.displayName;const ll=d.forwardRef(({className:s,...t},r)=>e.jsx(iS,{ref:r,className:Oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(j8,{className:"flex items-center justify-center",children:e.jsx(o0,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ll.displayName=iS.displayName;function w8({isOpen:s,onClose:t,providers:r,serviceName:a,onConfirm:n,selectedProviderId:i=null}){const[o,c]=d.useState(i),l=()=>{n(o),t()},u=()=>{c(i),t()};return e.jsx(Xs,{open:s,onOpenChange:t,children:e.jsxs(Vs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Js,{children:[e.jsxs(Ws,{className:"flex items-center gap-2",children:[e.jsx(Vo,{className:"w-5 h-5"}),"Select Provider Preference"]}),e.jsxs(Lf,{children:["Choose your preferred provider for ",e.jsx("strong",{children:a}),' or select "No Preference" to let the business assign the best available provider.']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(_x,{value:o||"no-preference",onValueChange:m=>c(m==="no-preference"?null:m),className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx(ll,{value:"no-preference",id:"no-preference"}),e.jsxs(B,{htmlFor:"no-preference",className:"flex items-center gap-3 cursor-pointer flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center",children:e.jsx(d0,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"No Preference"}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Let the business assign the best available provider"})]})]})]}),r.map(m=>e.jsxs("div",{className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx(ll,{value:m.id,id:m.id}),e.jsxs(B,{htmlFor:m.id,className:"flex items-center gap-4 cursor-pointer flex-1",children:[e.jsxs(st,{className:"h-12 w-12",children:[e.jsx(it,{src:m.image_url||void 0}),e.jsxs(tt,{className:"text-sm",children:[m.first_name[0],m.last_name[0]]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[m.first_name," ",m.last_name]}),m.bio&&e.jsx("div",{className:"text-sm text-foreground/70 line-clamp-1 max-w-md",children:m.bio})]}),e.jsxs("div",{className:"text-right",children:[m.average_rating&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"text-sm font-semibold",children:m.average_rating}),e.jsxs("span",{className:"text-xs text-foreground/60",children:["(",m.total_reviews||0,")"]})]}),m.experience_years&&e.jsxs("div",{className:"text-xs text-foreground/60",children:[m.experience_years," years exp."]})]})]}),m.specialties&&m.specialties.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[m.specialties.slice(0,3).map((x,f)=>e.jsx(ge,{variant:"outline",className:"text-xs",children:x},f)),m.specialties.length>3&&e.jsxs(ge,{variant:"outline",className:"text-xs",children:["+",m.specialties.length-3," more"]})]})]})]})]},m.id))]}),r.length===0&&e.jsxs(V,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Ds,{className:"w-6 h-6 text-gray-400"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Providers Available"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"This business hasn't added any providers yet."})]})]}),e.jsxs(SN,{children:[e.jsx(P,{variant:"outline",onClick:u,children:"Cancel"}),e.jsxs(P,{onClick:l,className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Confirm Selection"]})]})]})})}function N8(){var re,be,Me,je,Y,we,Q,pe;const{businessId:s}=so(),t=Nt(),{toast:r}=et(),{customer:a,isCustomer:n}=Ss(),[i]=to(),[o,c]=d.useState(null),[l,u]=d.useState(!0),[m,x]=d.useState(i.get("tab")||"overview"),[f,p]=d.useState(null),[v,g]=d.useState(!1),[b,w]=d.useState(null),[y,_]=d.useState(!1),[N,C]=d.useState(null);d.useEffect(()=>{s?R():(console.error("No business ID provided"),r({title:"Invalid Business Link",description:"The business link you followed is invalid.",variant:"destructive"}),t("/"))},[s]),d.useEffect(()=>{var H;const J=i.get("service");if(console.log("Looking for service ID:",J),console.log("Available services:",o==null?void 0:o.services),J&&(o!=null&&o.services)){console.log("Service structure check:",o.services.map(de=>{var Te,De;return{businessServiceId:de.id,serviceId:de.service_id,serviceDetails:(Te=de.services)==null?void 0:Te.id,serviceName:(De=de.services)==null?void 0:De.name}}));let oe=o.services.find(de=>{var Te;return((Te=de.services)==null?void 0:Te.id)===J});oe||(oe=o.services.find(de=>de.service_id===J)),console.log("Found service:",oe),oe?(p(oe),console.log("Selected service:",(H=oe.services)==null?void 0:H.name)):console.log("Service not found in business services")}},[i,o==null?void 0:o.services]);const R=async(J=0)=>{var H,oe,de;try{if(u(!0),!s||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s))throw new Error(`Invalid business ID format: ${s}`);const De=await W.from("business_profiles").select("*").eq("id",s).single(),Le=await W.from("business_services").select(`
          id,
          business_price,
          delivery_type,
          is_active,
          services:service_id (
            id,
            name,
            description,
            image_url,
            duration_minutes,
            min_price,
            service_subcategories:subcategory_id (
              id,
              service_subcategory_type,
              service_categories (
                id,
                service_category_type
              )
            )
          )
        `).eq("business_id",s).eq("is_active",!0),$e=await W.from("business_addons").select(`
          *,
          addons:addon_id (
            name,
            description,
            image_url
          )
        `).eq("business_id",s).eq("is_available",!0),Be=await W.from("business_locations").select("*").eq("business_id",s).single(),{data:es,error:ee}=De;if(ee)throw console.error("Business profile query error:",(ee==null?void 0:ee.message)||ee),console.error("Business query details:",De),ee.code==="PGRST116"?new Error(`Business with ID ${s} not found`):new Error(`Failed to load business data: ${ee.message}`);const Fe=await W.from("providers").select(`
          id,
          first_name,
          last_name,
          bio,
          experience_years,
          image_url,
          cover_image_url,
          average_rating,
          total_reviews,
          verification_status,
          provider_role,
          total_bookings,
          completed_bookings
        `).eq("business_id",s).eq("is_active",!0).in("provider_role",es.business_type==="independent"?["provider","owner"]:["provider"]);if([De,Le,$e,Be,Fe].filter(Gs=>Gs.status===401).length>0&&J===0){console.log("JWT token expired, refreshing session...");const{data:Gs,error:ne}=await W.auth.refreshSession();if(ne){console.error("Token refresh failed:",ne),r({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}if(Gs!=null&&Gs.session)return console.log("Session refreshed successfully, retrying..."),await R(1)}if(!es)throw new Error(`Business with ID ${s} not found`);es.is_active||console.warn("Business is not active:",es.business_name);const{data:Ue,error:ze}=Le;console.log("Services query result:",{services:Ue,servicesError:ze});const{data:G,error:ue}=$e,{data:xe,error:Ie}=Be,Ye=es.business_hours||{},{data:We,error:Ls}=Fe;console.log("Providers query result:",{providers:We,providersError:Ls});const ys=[{id:1,customer_name:"Sarah Johnson",rating:5,comment:"Amazing service! The staff was professional and the results exceeded my expectations.",service_name:"Hair Styling",date:"2024-01-15",verified:!0},{id:2,customer_name:"Michael Chen",rating:5,comment:"Great experience from start to finish. Will definitely be returning!",service_name:"Massage Therapy",date:"2024-01-10",verified:!0}],Hs={totalBookings:1250,averageRating:4.8,totalReviews:ys.length,yearsInBusiness:es.years_in_business||5};c({business:es,services:Ue||[],addons:G||[],location:xe||null,hours:Ye||[],providers:We||[],reviews:ys,stats:Hs})}catch(Te){if(console.error("Error fetching business data:",(Te==null?void 0:Te.message)||Te),console.error("Business ID:",s),((H=Te.message)!=null&&H.includes("JWT")||(oe=Te.message)!=null&&oe.includes("401")||Te.status===401)&&J===0){console.log("JWT error detected, attempting token refresh...");try{const{data:Le,error:$e}=await W.auth.refreshSession();if(!$e&&(Le!=null&&Le.session))return console.log("Session refreshed, retrying business data fetch..."),await R(1)}catch(Le){console.error("Token refresh failed:",Le)}r({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}const De=(de=Te==null?void 0:Te.message)==null?void 0:de.includes("not found");r({title:De?"Business Not Found":"Error",description:De?"The business you're looking for doesn't exist or may have been removed.":Te.message||"Failed to load business information",variant:"destructive"}),setTimeout(()=>t("/"),2e3)}finally{u(!1)}},E=async J=>{try{if(!n){const{data:H,error:oe}=await W.auth.refreshSession();if(oe||!(H!=null&&H.session)){r({title:"Sign in required",description:"Please sign in to book services",variant:"destructive"});return}}J.delivery_type==="both_locations"?(C(J),_(!0)):(p(J),g(!0))}catch(H){console.error("Error handling book service:",H),r({title:"Authentication Error",description:"Please refresh the page and try again",variant:"destructive"})}},I=J=>{if(N){const H={...N,delivery_type:J};p(H),_(!1),C(null),g(!0)}},M=J=>{if(w(J),f){const H=i.get("date"),oe=i.get("time"),de=i.get("promotion"),Te=i.get("promo_code"),De=i.get("deliveryType"),Le=i.get("location"),$e=i.get("address");let Be=`/book/${s}?service=${f.id}`;J&&(Be+=`&provider=${J}`),H&&(Be+=`&date=${H}`),oe&&(Be+=`&time=${oe}`),de&&(Be+=`&promotion=${de}`),Te&&(Be+=`&promo_code=${Te}`),De&&(Be+=`&deliveryType=${De}`),Le&&(Be+=`&location=${Le}`),$e&&(Be+=`&address=${$e}`),t(Be)}},U=()=>{const J=i.get("date"),H=i.get("time"),oe=i.get("promotion"),de=i.get("promo_code"),Te=i.get("deliveryType"),De=i.get("location"),Le=i.get("address");let $e=`/book/${s}`;const Be=new URLSearchParams;J&&Be.append("date",J),H&&Be.append("time",H),oe&&Be.append("promotion",oe),de&&Be.append("promo_code",de),Te&&Be.append("deliveryType",Te),De&&Be.append("location",De),Le&&Be.append("address",Le),Be.toString()&&($e+=`?${Be.toString()}`),t($e)},D=J=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(oe=>{const de=J[oe];if(!de||!de.open||!de.close)return{day:oe,hours:"Closed"};const Te=De=>{const[Le,$e]=De.split(":"),Be=parseInt(Le),es=Be===0?12:Be>12?Be-12:Be,ee=Be>=12?"PM":"AM";return`${es}:${$e} ${ee}`};return{day:oe,hours:`${Te(de.open)} - ${Te(de.close)}`}});if(l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading business profile..."})]})});if(!o)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Business Not Found"}),e.jsx("p",{className:"text-foreground/60 mb-6",children:"The business you're looking for could not be found."}),e.jsxs(P,{onClick:()=>t("/"),className:"bg-roam-blue hover:bg-roam-blue/90",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]})});const{business:z,services:X,addons:T,location:A,hours:O,providers:$,reviews:F,stats:q}=o,te=D(O);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:(()=>{const J=i.get("service"),H=i.get("date"),oe=i.get("time");return J&&H&&oe?`/book-service/${J}/businesses?date=${H}&time=${oe}`:"/home"})(),children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Business Selection"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]}),n&&e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(P,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(Ee,{to:"/my-bookings",children:"My Bookings"})})})]})})}),e.jsxs("section",{className:"relative",children:[e.jsx("div",{className:"h-64 bg-cover bg-center bg-no-repeat",style:{backgroundImage:z.cover_image_url?`url(${z.cover_image_url})`:"linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.3)), url('https://images.unsplash.com/photo-1560472355-536de3962603?w=1200&h=400&fit=crop')"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"relative -mt-32 mb-8",children:e.jsxs(V,{className:"p-6 bg-background/70 backdrop-blur-sm border-border/30 relative",children:[e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx(Gr,{type:"business",itemId:z.id,size:"sm",variant:"ghost",showText:!1,className:"hover:bg-background/80 p-2"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[e.jsxs(st,{className:"h-24 w-24 border-4 border-white shadow-lg",children:[e.jsx(it,{src:z.logo_url||z.image_url||void 0,alt:z.business_name}),e.jsx(tt,{className:"text-2xl",children:z.business_name.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:z.business_name}),e.jsx("p",{className:"text-foreground/70 text-base sm:text-lg mb-3",children:z.business_description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[(o==null?void 0:o.location)&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-foreground/70",children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsx("span",{children:[o.location.address_line1,o.location.city,o.location.state].filter(Boolean).join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"font-semibold",children:q.averageRating}),e.jsxs("span",{className:"text-foreground/60 text-sm",children:["(",q.totalReviews," reviews)"]})]})]})]}),!i.get("service")&&!i.get("date")&&!i.get("time")&&e.jsxs(P,{size:"lg",className:"bg-roam-blue hover:bg-roam-blue/90 w-full sm:w-auto",onClick:U,children:[e.jsx(Qe,{className:"w-5 h-5 mr-2"}),"Book Now"]})]})})]})]})})})]}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs(Pr,{value:m,onValueChange:x,className:"w-full",children:[e.jsxs(fr,{className:"hidden sm:grid w-full grid-cols-5 gap-1 mb-6",children:[e.jsx(hs,{value:"overview",children:"Overview"}),e.jsxs(hs,{value:"services",children:["Services (",X.length,")"]}),e.jsx(hs,{value:"hours",children:"Hours"}),e.jsxs(hs,{value:"team",children:["Team (",$.length,")"]}),e.jsxs(hs,{value:"reviews",children:["Reviews (",F.length,")"]})]}),e.jsx("div",{className:"mb-6 sm:hidden",children:e.jsxs(as,{value:m,onValueChange:x,children:[e.jsx(ss,{className:"w-full",children:e.jsx(is,{placeholder:"Select a section"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"overview",children:"Overview"}),e.jsxs(ce,{value:"services",children:["Services (",X.length,")"]}),e.jsx(ce,{value:"hours",children:"Hours"}),e.jsxs(ce,{value:"team",children:["Team (",$.length,")"]}),e.jsxs(ce,{value:"reviews",children:["Reviews (",F.length,")"]})]})]})}),e.jsx(ds,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(V,{className:"lg:col-span-2",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(id,{className:"w-5 h-5"}),"About ",z.business_name]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsx("p",{className:"text-foreground/80 leading-relaxed",children:z.business_description||"Professional service provider offering quality services to the community."}),z.specialties&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Specialties"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.specialties.map((J,H)=>e.jsx(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:J},H))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center p-4 bg-roam-light-blue/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-roam-blue",children:[q.totalBookings,"+"]}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Happy Clients"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:q.yearsInBusiness}),e.jsx("div",{className:"text-sm text-foreground/60",children:"Years Experience"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(En,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(K,{className:"space-y-4",children:[z.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(En,{className:"w-4 h-4 text-foreground/60"}),e.jsx("span",{className:"text-sm",children:z.phone})]}),z.contact_email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-4 h-4 text-foreground/60"}),e.jsx("span",{className:"text-sm",children:z.contact_email})]}),z.website_url&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Td,{className:"w-4 h-4 text-foreground/60"}),e.jsxs("a",{href:z.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-roam-blue hover:underline flex items-center gap-1",children:["Visit Website",e.jsx(Wa,{className:"w-3 h-3"})]})]}),A&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"w-4 h-4 text-foreground/60 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:A.address_line1}),A.address_line2&&e.jsx("div",{children:A.address_line2}),e.jsxs("div",{children:[A.city,", ",A.state," ",A.postal_code]})]})]})]})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Hours Today"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-2",children:[te.slice(0,3).map((J,H)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:J.day}),e.jsx("span",{className:"text-foreground/60",children:J.hours})]},H)),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>x("hours"),className:"w-full mt-2 text-roam-blue hover:text-roam-blue",children:"View All Hours"})]})})]})]})]})}),e.jsxs(ds,{value:"services",className:"space-y-6",children:[f&&e.jsxs(V,{className:"border-2 border-roam-blue bg-roam-blue/5 mb-8",children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(Ce,{className:"text-lg sm:text-xl text-roam-blue",children:"Selected Service"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 break-words",children:["Ready to book •"," ",i.get("date")&&new Date(i.get("date")).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})," ",i.get("time")&&`at ${i.get("time")}`]})]}),e.jsx(ge,{className:"bg-roam-yellow text-gray-900",children:"Selected"})]})}),e.jsx(K,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6",children:[((re=f.services)==null?void 0:re.image_url)&&e.jsx("img",{src:f.services.image_url,alt:(be=f.services)==null?void 0:be.name,className:"w-full sm:w-24 h-48 sm:h-24 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:(Me=f.services)==null?void 0:Me.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:(je=f.services)==null?void 0:je.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),(Y=f.services)==null?void 0:Y.duration_minutes," minutes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"w-4 h-4"}),"$",f.business_price]}),f.delivery_type&&e.jsx(ge,{variant:"outline",className:"text-xs",children:f.delivery_type==="customer_location"?"Mobile":f.delivery_type==="business_location"?"Business":"Virtual"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[e.jsxs(P,{onClick:()=>g(!0),className:"bg-roam-blue hover:bg-roam-blue/90 w-full sm:w-auto",children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Choose Provider"}),e.jsx("span",{className:"sm:hidden",children:"Choose Provider"})]}),e.jsx(P,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>{p(null);const J=new URLSearchParams(i);J.delete("service"),t(`?${J.toString()}`,{replace:!0})},children:"Change Service"})]})]})]})})]}),!f&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(J=>{var H,oe,de,Te,De,Le,$e;return e.jsxs(V,{className:`hover:shadow-lg transition-all duration-200 group ${(f==null?void 0:f.id)===J.id?"ring-2 ring-roam-blue border-roam-blue":""}`,children:[e.jsxs("div",{className:"relative",children:[((H=J.services)==null?void 0:H.image_url)&&e.jsx("img",{src:J.services.image_url,alt:(oe=J.services)==null?void 0:oe.name,className:"w-full h-48 object-cover rounded-t-lg"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(Gr,{type:"service",itemId:J.service_id,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:(de=J.services)==null?void 0:de.name}),(f==null?void 0:f.id)===J.id&&e.jsx(ge,{className:"bg-roam-yellow text-gray-900 text-xs",children:"Pre-selected"})]}),e.jsx("p",{className:"text-foreground/70 text-sm mb-3 line-clamp-2",children:(Te=J.services)==null?void 0:Te.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("span",{className:"text-xl font-bold text-roam-blue",children:["$",J.business_price||J.custom_price]})]}),((De=J.services)==null?void 0:De.duration_minutes)&&e.jsxs(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),J.services.duration_minutes," min"]})]}),((Le=J.services)==null?void 0:Le.service_subcategories)&&e.jsx(ge,{variant:"secondary",className:"text-xs mb-2",children:($e=J.services.service_subcategories.service_categories)==null?void 0:$e.service_category_type}),J.delivery_type&&e.jsx("div",{className:"flex gap-2 mb-4",children:J.delivery_type==="both_locations"?e.jsxs(e.Fragment,{children:[e.jsxs(ge,{variant:"outline",className:"text-xs border-blue-500 text-blue-700 bg-blue-50",children:[e.jsx(fs,{className:"w-3 h-3 mr-1"}),"Business"]}),e.jsxs(ge,{variant:"outline",className:"text-xs border-green-500 text-green-700 bg-green-50",children:[e.jsx(_n,{className:"w-3 h-3 mr-1"}),"Mobile"]})]}):e.jsx(ge,{variant:"outline",className:`text-xs ${J.delivery_type==="customer_location"?"border-green-500 text-green-700 bg-green-50":J.delivery_type==="business_location"?"border-blue-500 text-blue-700 bg-blue-50":"border-purple-500 text-purple-700 bg-purple-50"}`,children:J.delivery_type==="customer_location"?e.jsxs(e.Fragment,{children:[e.jsx(_n,{className:"w-3 h-3 mr-1"}),"Mobile"]}):J.delivery_type==="business_location"?e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-3 h-3 mr-1"}),"Business"]}):e.jsxs(e.Fragment,{children:[e.jsx(pa,{className:"w-3 h-3 mr-1"}),"Virtual"]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(P,{className:"w-full bg-roam-blue hover:bg-roam-blue/90",onClick:()=>E(J),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Book This Service"]}),$.length>0&&e.jsxs("div",{className:"text-xs text-center text-foreground/60 flex items-center justify-center gap-1",children:[e.jsx(Vo,{className:"w-3 h-3"}),"Choose your preferred provider during booking"]})]})]})]},J.id)})})]}),X.length===0&&e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(id,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Available"}),e.jsx("p",{className:"text-foreground/60",children:"This business hasn't added any services yet."})]})]}),e.jsx(ds,{value:"hours",children:e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Business Hours"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-3",children:te.map((J,H)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50 last:border-b-0",children:[e.jsx("span",{className:"font-medium",children:J.day}),e.jsx("span",{className:`${J.hours==="Closed"?"text-red-500":"text-foreground/80"}`,children:J.hours})]},H))})})]})}),e.jsxs(ds,{value:"team",className:"space-y-6",children:[b&&e.jsx(V,{className:"bg-green-50 border-green-200",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(Vo,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:[(we=$.find(J=>J.id===b))==null?void 0:we.first_name," ",(Q=$.find(J=>J.id===b))==null?void 0:Q.last_name," ","is your preferred provider"]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{w(null),r({title:"Provider Preference Cleared",description:"No provider preference set. The business will assign the best available provider."})},className:"ml-auto text-green-600 hover:text-green-700",children:"Clear Preference"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(J=>e.jsx(V,{className:`hover:shadow-lg transition-shadow ${b===J.id?"ring-2 ring-green-500 bg-green-50":""}`,children:e.jsxs(K,{className:"p-6 text-center relative",children:[b===J.id&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(ge,{className:"bg-green-500 text-white",children:[e.jsx(Vo,{className:"w-3 h-3 mr-1"}),"Preferred"]})}),e.jsxs(st,{className:"h-20 w-20 mx-auto mb-4",children:[e.jsx(it,{src:J.image_url||void 0}),e.jsxs(tt,{className:"text-lg",children:[J.first_name[0],J.last_name[0]]})]}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:[J.first_name," ",J.last_name]}),J.bio&&e.jsx("p",{className:"text-sm text-foreground/70 mb-3 line-clamp-3",children:J.bio}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[J.experience_years&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-roam-blue",children:J.experience_years}),e.jsx("div",{className:"text-xs text-foreground/60",children:"Years Exp."})]}),J.average_rating&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"font-bold",children:J.average_rating})]}),e.jsxs("div",{className:"text-xs text-foreground/60",children:["(",J.total_reviews||0," reviews)"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 justify-center mb-4",children:[J.provider_role&&e.jsx(ge,{variant:"outline",className:"text-xs border-roam-blue text-roam-blue",children:J.provider_role.replace("_"," ")}),J.experience_years&&e.jsxs(ge,{variant:"outline",className:"text-xs",children:[J.experience_years," years exp."]}),J.verification_status==="verified"&&e.jsx(ge,{variant:"outline",className:"text-xs border-green-500 text-green-600",children:"Verified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{asChild:!0,size:"sm",variant:"outline",className:"w-full border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsx(Ee,{to:`/provider/${J.id}`,children:"View Profile"})}),e.jsx(Gr,{type:"provider",itemId:J.id,showText:!0,size:"sm",className:"w-full"})]})]})},J.id))}),$.length===0&&e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ds,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Team Members"}),e.jsx("p",{className:"text-foreground/60",children:"This business hasn't added any team members yet."})]})]}),e.jsx(ds,{value:"reviews",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(V,{className:"lg:col-span-1",children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-center",children:"Overall Rating"})}),e.jsxs(K,{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-roam-blue mb-2",children:q.averageRating}),e.jsx("div",{className:"flex justify-center mb-2",children:[1,2,3,4,5].map(J=>e.jsx(us,{className:`w-5 h-5 ${J<=q.averageRating?"text-roam-warning fill-current":"text-gray-300"}`},J))}),e.jsxs("div",{className:"text-sm text-foreground/60",children:[q.totalReviews," reviews"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[F.map(J=>e.jsx(V,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold",children:J.customer_name}),J.verified&&e.jsxs(ge,{variant:"outline",className:"text-xs border-green-500 text-green-600",children:[e.jsx(hl,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(H=>e.jsx(us,{className:`w-4 h-4 ${H<=J.rating?"text-roam-warning fill-current":"text-gray-300"}`},H))}),e.jsx("span",{className:"text-sm text-foreground/60",children:new Date(J.date).toLocaleDateString()})]})]})}),e.jsx("p",{className:"text-foreground/80 mb-2",children:J.comment}),e.jsx(ge,{variant:"secondary",className:"text-xs",children:J.service_name})]})},J.id)),F.length===0&&e.jsxs(V,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(us,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-foreground/60",children:"Be the first to leave a review for this business!"})]})]})]})})]})}),e.jsx(Xs,{open:y,onOpenChange:_,children:e.jsxs(Vs,{className:"max-w-md",children:[e.jsx(Js,{children:e.jsx(Ws,{children:"Choose Service Location"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"This service can be delivered at a business location or as a mobile service. Please choose your preferred option:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(P,{variant:"outline",className:"w-full h-auto p-4 justify-start border-blue-500 hover:bg-blue-50",onClick:()=>I("business_location"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fs,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Business Location"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Service at the business location"})]})]})}),e.jsx(P,{variant:"outline",className:"w-full h-auto p-4 justify-start border-green-500 hover:bg-green-50",onClick:()=>I("customer_location"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_n,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Mobile Service"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Service comes to your location"})]})]})})]}),e.jsx(P,{variant:"ghost",className:"w-full",onClick:()=>{_(!1),C(null)},children:"Cancel"})]})]})}),e.jsx(w8,{isOpen:v,onClose:()=>g(!1),providers:$,serviceName:((pe=f==null?void 0:f.services)==null?void 0:pe.name)||"Service",onConfirm:M,selectedProviderId:b})]})}function _8(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx(su,{}),e.jsx("section",{className:"py-20 lg:py-32",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsx(V,{className:"border-border/50",children:e.jsxs(K,{className:"p-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-roam-blue to-roam-light-blue rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ws,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 text-roam-blue",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Service Not Found"}),e.jsx("p",{className:"text-lg text-foreground/70 mb-8",children:"Looks like you've wandered off the map! The page you're looking for doesn't exist, but don't worry – we'll help you find your way back to amazing services."}),e.jsx("div",{className:"bg-roam-light-blue/10 rounded-lg p-6 mb-8 border border-roam-light-blue/20",children:e.jsxs("p",{className:"text-sm text-foreground/80",children:["💡 ",e.jsx("strong",{children:"Quick Suggestions:"})," Try visiting our homepage to explore services, or use the navigation menu to find what you need. Our premium providers are ready to serve you!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs(Ee,{to:"/providers",children:[e.jsx(xa,{className:"w-4 h-4 mr-2"}),"Browse Services"]})})]}),e.jsx("div",{className:"mt-8 text-sm text-foreground/60",children:e.jsxs("p",{children:["Need help?"," ",e.jsx(Ee,{to:"/support",className:"text-roam-blue hover:underline",children:"Contact our support team"})]})})]})})})})}),e.jsx(Kf,{})]})}var Ge=function(){return Ge=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ge.apply(this,arguments)};function S8(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r}function oS(s,t,r){for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return s.concat(i||Array.prototype.slice.call(t))}function kl(s){return s.mode==="multiple"}function El(s){return s.mode==="range"}function ou(s){return s.mode==="single"}var C8={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function k8(s,t){return Ln(s,"LLLL y",t)}function E8(s,t){return Ln(s,"d",t)}function P8(s,t){return Ln(s,"LLLL",t)}function T8(s){return"".concat(s)}function I8(s,t){return Ln(s,"cccccc",t)}function A8(s,t){return Ln(s,"yyyy",t)}var M8=Object.freeze({__proto__:null,formatCaption:k8,formatDay:E8,formatMonthCaption:P8,formatWeekNumber:T8,formatWeekdayName:I8,formatYearCaption:A8}),R8=function(s,t,r){return Ln(s,"do MMMM (EEEE)",r)},O8=function(){return"Month: "},D8=function(){return"Go to next month"},F8=function(){return"Go to previous month"},L8=function(s,t){return Ln(s,"cccc",t)},$8=function(s){return"Week n. ".concat(s)},B8=function(){return"Year: "},U8=Object.freeze({__proto__:null,labelDay:R8,labelMonthDropdown:O8,labelNext:D8,labelPrevious:F8,labelWeekNumber:$8,labelWeekday:L8,labelYearDropdown:B8});function z8(){var s="buttons",t=C8,r=Xf,a={},n={},i=1,o={},c=new Date;return{captionLayout:s,classNames:t,formatters:M8,labels:U8,locale:r,modifiersClassNames:a,modifiers:n,numberOfMonths:i,styles:o,today:c,mode:"default"}}function q8(s){var t=s.fromYear,r=s.toYear,a=s.fromMonth,n=s.toMonth,i=s.fromDate,o=s.toDate;return a?i=zt(a):t&&(i=new Date(t,0,1)),n?o=eu(n):r&&(o=new Date(r,11,31)),{fromDate:i?Wi(i):void 0,toDate:o?Wi(o):void 0}}var lS=d.createContext(void 0);function V8(s){var t,r=s.initialProps,a=z8(),n=q8(r),i=n.fromDate,o=n.toDate,c=(t=r.captionLayout)!==null&&t!==void 0?t:a.captionLayout;c!=="buttons"&&(!i||!o)&&(c="buttons");var l;(ou(r)||kl(r)||El(r))&&(l=r.onSelect);var u=Ge(Ge(Ge({},a),r),{captionLayout:c,classNames:Ge(Ge({},a.classNames),r.classNames),components:Ge({},r.components),formatters:Ge(Ge({},a.formatters),r.formatters),fromDate:i,labels:Ge(Ge({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:Ge(Ge({},a.modifiers),r.modifiers),modifiersClassNames:Ge(Ge({},a.modifiersClassNames),r.modifiersClassNames),onSelect:l,styles:Ge(Ge({},a.styles),r.styles),toDate:o});return e.jsx(lS.Provider,{value:u,children:s.children})}function Us(){var s=d.useContext(lS);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function cS(s){var t=Us(),r=t.locale,a=t.classNames,n=t.styles,i=t.formatters.formatCaption;return e.jsx("div",{className:a.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:i(s.displayMonth,{locale:r})})}function J8(s){return e.jsx("svg",Ge({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dS(s){var t,r,a=s.onChange,n=s.value,i=s.children,o=s.caption,c=s.className,l=s.style,u=Us(),m=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:J8;return e.jsxs("div",{className:c,style:l,children:[e.jsx("span",{className:u.classNames.vhidden,children:s["aria-label"]}),e.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:n,onChange:a,children:i}),e.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,e.jsx(m,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function W8(s){var t,r=Us(),a=r.fromDate,n=r.toDate,i=r.styles,o=r.locale,c=r.formatters.formatMonthCaption,l=r.classNames,u=r.components,m=r.labels.labelMonthDropdown;if(!a)return e.jsx(e.Fragment,{});if(!n)return e.jsx(e.Fragment,{});var x=[];if(LD(a,n))for(var f=zt(a),p=a.getMonth();p<=n.getMonth();p++)x.push(Bm(f,p));else for(var f=zt(new Date),p=0;p<=11;p++)x.push(Bm(f,p));var v=function(b){var w=Number(b.target.value),y=Bm(zt(s.displayMonth),w);s.onChange(y)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:dS;return e.jsx(g,{name:"months","aria-label":m(),className:l.dropdown_month,style:i.dropdown_month,onChange:v,value:s.displayMonth.getMonth(),caption:c(s.displayMonth,{locale:o}),children:x.map(function(b){return e.jsx("option",{value:b.getMonth(),children:c(b,{locale:o})},b.getMonth())})})}function H8(s){var t,r=s.displayMonth,a=Us(),n=a.fromDate,i=a.toDate,o=a.locale,c=a.styles,l=a.classNames,u=a.components,m=a.formatters.formatYearCaption,x=a.labels.labelYearDropdown,f=[];if(!n)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var p=n.getFullYear(),v=i.getFullYear(),g=p;g<=v;g++)f.push(Yb(j_(new Date),g));var b=function(y){var _=Yb(zt(r),Number(y.target.value));s.onChange(_)},w=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:dS;return e.jsx(w,{name:"years","aria-label":x(),className:l.dropdown_year,style:c.dropdown_year,onChange:b,value:r.getFullYear(),caption:m(r,{locale:o}),children:f.map(function(y){return e.jsx("option",{value:y.getFullYear(),children:m(y,{locale:o})},y.getFullYear())})})}function G8(s,t){var r=d.useState(s),a=r[0],n=r[1],i=t===void 0?a:t;return[i,n]}function X8(s){var t=s.month,r=s.defaultMonth,a=s.today,n=t||r||a||new Date,i=s.toDate,o=s.fromDate,c=s.numberOfMonths,l=c===void 0?1:c;if(i&&Gi(i,n)<0){var u=-1*(l-1);n=Tr(i,u)}return o&&Gi(n,o)<0&&(n=o),zt(n)}function Y8(){var s=Us(),t=X8(s),r=G8(t,s.month),a=r[0],n=r[1],i=function(o){var c;if(!s.disableNavigation){var l=zt(o);n(l),(c=s.onMonthChange)===null||c===void 0||c.call(s,l)}};return[a,i]}function Z8(s,t){for(var r=t.reverseMonths,a=t.numberOfMonths,n=zt(s),i=zt(Tr(n,a)),o=Gi(i,n),c=[],l=0;l<o;l++){var u=Tr(n,l);c.push(u)}return r&&(c=c.reverse()),c}function K8(s,t){if(!t.disableNavigation){var r=t.toDate,a=t.pagedNavigation,n=t.numberOfMonths,i=n===void 0?1:n,o=a?i:1,c=zt(s);if(!r)return Tr(c,o);var l=Gi(r,s);if(!(l<i))return Tr(c,o)}}function Q8(s,t){if(!t.disableNavigation){var r=t.fromDate,a=t.pagedNavigation,n=t.numberOfMonths,i=n===void 0?1:n,o=a?i:1,c=zt(s);if(!r)return Tr(c,-o);var l=Gi(c,r);if(!(l<=0))return Tr(c,-o)}}var uS=d.createContext(void 0);function eB(s){var t=Us(),r=Y8(),a=r[0],n=r[1],i=Z8(a,t),o=K8(a,t),c=Q8(a,t),l=function(x){return i.some(function(f){return Zf(x,f)})},u=function(x,f){l(x)||(f&&k_(x,f)?n(Tr(x,1+t.numberOfMonths*-1)):n(x))},m={currentMonth:a,displayMonths:i,goToMonth:n,goToDate:u,previousMonth:c,nextMonth:o,isDateDisplayed:l};return e.jsx(uS.Provider,{value:m,children:s.children})}function Pl(){var s=d.useContext(uS);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function xy(s){var t,r=Us(),a=r.classNames,n=r.styles,i=r.components,o=Pl().goToMonth,c=function(m){o(Tr(m,s.displayIndex?-s.displayIndex:0))},l=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:cS,u=e.jsx(l,{id:s.id,displayMonth:s.displayMonth});return e.jsxs("div",{className:a.caption_dropdowns,style:n.caption_dropdowns,children:[e.jsx("div",{className:a.vhidden,children:u}),e.jsx(W8,{onChange:c,displayMonth:s.displayMonth}),e.jsx(H8,{onChange:c,displayMonth:s.displayMonth})]})}function sB(s){return e.jsx("svg",Ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function tB(s){return e.jsx("svg",Ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Sd=d.forwardRef(function(s,t){var r=Us(),a=r.classNames,n=r.styles,i=[a.button_reset,a.button];s.className&&i.push(s.className);var o=i.join(" "),c=Ge(Ge({},n.button_reset),n.button);return s.style&&Object.assign(c,s.style),e.jsx("button",Ge({},s,{ref:t,type:"button",className:o,style:c}))});function rB(s){var t,r,a=Us(),n=a.dir,i=a.locale,o=a.classNames,c=a.styles,l=a.labels,u=l.labelPrevious,m=l.labelNext,x=a.components;if(!s.nextMonth&&!s.previousMonth)return e.jsx(e.Fragment,{});var f=u(s.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),v=m(s.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),b=(t=x==null?void 0:x.IconRight)!==null&&t!==void 0?t:tB,w=(r=x==null?void 0:x.IconLeft)!==null&&r!==void 0?r:sB;return e.jsxs("div",{className:o.nav,style:c.nav,children:[!s.hidePrevious&&e.jsx(Sd,{name:"previous-month","aria-label":f,className:p,style:c.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:n==="rtl"?e.jsx(b,{className:o.nav_icon,style:c.nav_icon}):e.jsx(w,{className:o.nav_icon,style:c.nav_icon})}),!s.hideNext&&e.jsx(Sd,{name:"next-month","aria-label":v,className:g,style:c.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:n==="rtl"?e.jsx(w,{className:o.nav_icon,style:c.nav_icon}):e.jsx(b,{className:o.nav_icon,style:c.nav_icon})})]})}function py(s){var t=Us().numberOfMonths,r=Pl(),a=r.previousMonth,n=r.nextMonth,i=r.goToMonth,o=r.displayMonths,c=o.findIndex(function(v){return Zf(s.displayMonth,v)}),l=c===0,u=c===o.length-1,m=t>1&&(l||!u),x=t>1&&(u||!l),f=function(){a&&i(a)},p=function(){n&&i(n)};return e.jsx(rB,{displayMonth:s.displayMonth,hideNext:m,hidePrevious:x,nextMonth:n,previousMonth:a,onPreviousClick:f,onNextClick:p})}function aB(s){var t,r=Us(),a=r.classNames,n=r.disableNavigation,i=r.styles,o=r.captionLayout,c=r.components,l=(t=c==null?void 0:c.CaptionLabel)!==null&&t!==void 0?t:cS,u;return n?u=e.jsx(l,{id:s.id,displayMonth:s.displayMonth}):o==="dropdown"?u=e.jsx(xy,{displayMonth:s.displayMonth,id:s.id}):o==="dropdown-buttons"?u=e.jsxs(e.Fragment,{children:[e.jsx(xy,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),e.jsx(py,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):u=e.jsxs(e.Fragment,{children:[e.jsx(l,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(py,{displayMonth:s.displayMonth,id:s.id})]}),e.jsx("div",{className:a.caption,style:i.caption,children:u})}function nB(s){var t=Us(),r=t.footer,a=t.styles,n=t.classNames.tfoot;return r?e.jsx("tfoot",{className:n,style:a.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function iB(s,t,r){for(var a=r?Mn(new Date):Qr(new Date,{locale:s,weekStartsOn:t}),n=[],i=0;i<7;i++){var o=Pt(a,i);n.push(o)}return n}function oB(){var s=Us(),t=s.classNames,r=s.styles,a=s.showWeekNumber,n=s.locale,i=s.weekStartsOn,o=s.ISOWeek,c=s.formatters.formatWeekdayName,l=s.labels.labelWeekday,u=iB(n,i,o);return e.jsxs("tr",{style:r.head_row,className:t.head_row,children:[a&&e.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(m,x){return e.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":l(m,{locale:n}),children:c(m,{locale:n})},x)})]})}function lB(){var s,t=Us(),r=t.classNames,a=t.styles,n=t.components,i=(s=n==null?void 0:n.HeadRow)!==null&&s!==void 0?s:oB;return e.jsx("thead",{style:a.head,className:r.head,children:e.jsx(i,{})})}function cB(s){var t=Us(),r=t.locale,a=t.formatters.formatDay;return e.jsx(e.Fragment,{children:a(s.date,{locale:r})})}var Sx=d.createContext(void 0);function dB(s){if(!kl(s.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Sx.Provider,{value:t,children:s.children})}return e.jsx(uB,{initialProps:s.initialProps,children:s.children})}function uB(s){var t=s.initialProps,r=s.children,a=t.selected,n=t.min,i=t.max,o=function(u,m,x){var f,p;(f=t.onDayClick)===null||f===void 0||f.call(t,u,m,x);var v=!!(m.selected&&n&&(a==null?void 0:a.length)===n);if(!v){var g=!!(!m.selected&&i&&(a==null?void 0:a.length)===i);if(!g){var b=a?oS([],a):[];if(m.selected){var w=b.findIndex(function(y){return Bt(u,y)});b.splice(w,1)}else b.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,b,u,m,x)}}},c={disabled:[]};a&&c.disabled.push(function(u){var m=i&&a.length>i-1,x=a.some(function(f){return Bt(f,u)});return!!(m&&!x)});var l={selected:a,onDayClick:o,modifiers:c};return e.jsx(Sx.Provider,{value:l,children:r})}function Cx(){var s=d.useContext(Sx);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function mB(s,t){var r=t||{},a=r.from,n=r.to;return a&&n?Bt(n,s)&&Bt(a,s)?void 0:Bt(n,s)?{from:n,to:void 0}:Bt(a,s)?void 0:zh(a,s)?{from:s,to:n}:{from:a,to:s}:n?zh(s,n)?{from:n,to:s}:{from:s,to:n}:a?k_(s,a)?{from:s,to:a}:{from:a,to:s}:{from:s,to:void 0}}var kx=d.createContext(void 0);function hB(s){if(!El(s.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(kx.Provider,{value:t,children:s.children})}return e.jsx(fB,{initialProps:s.initialProps,children:s.children})}function fB(s){var t=s.initialProps,r=s.children,a=t.selected,n=a||{},i=n.from,o=n.to,c=t.min,l=t.max,u=function(p,v,g){var b,w;(b=t.onDayClick)===null||b===void 0||b.call(t,p,v,g);var y=mB(p,a);(w=t.onSelect)===null||w===void 0||w.call(t,y,p,v,g)},m={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(m.range_start=[i],o?(m.range_end=[o],Bt(i,o)||(m.range_middle=[{after:i,before:o}])):m.range_end=[i]):o&&(m.range_start=[o],m.range_end=[o]),c&&(i&&!o&&m.disabled.push({after:$m(i,c-1),before:Pt(i,c-1)}),i&&o&&m.disabled.push({after:i,before:Pt(i,c-1)}),!i&&o&&m.disabled.push({after:$m(o,c-1),before:Pt(o,c-1)})),l){if(i&&!o&&(m.disabled.push({before:Pt(i,-l+1)}),m.disabled.push({after:Pt(i,l-1)})),i&&o){var x=Xr(o,i)+1,f=l-x;m.disabled.push({before:$m(i,f)}),m.disabled.push({after:Pt(o,f)})}!i&&o&&(m.disabled.push({before:Pt(o,-l+1)}),m.disabled.push({after:Pt(o,l-1)}))}return e.jsx(kx.Provider,{value:{selected:a,onDayClick:u,modifiers:m},children:r})}function Ex(){var s=d.useContext(kx);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function ad(s){return Array.isArray(s)?oS([],s):s!==void 0?[s]:[]}function xB(s){var t={};return Object.entries(s).forEach(function(r){var a=r[0],n=r[1];t[a]=ad(n)}),t}var Ir;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(Ir||(Ir={}));var pB=Ir.Selected,la=Ir.Disabled,gB=Ir.Hidden,vB=Ir.Today,Hm=Ir.RangeEnd,Gm=Ir.RangeMiddle,Xm=Ir.RangeStart,bB=Ir.Outside;function yB(s,t,r){var a,n=(a={},a[pB]=ad(s.selected),a[la]=ad(s.disabled),a[gB]=ad(s.hidden),a[vB]=[s.today],a[Hm]=[],a[Gm]=[],a[Xm]=[],a[bB]=[],a);return s.fromDate&&n[la].push({before:s.fromDate}),s.toDate&&n[la].push({after:s.toDate}),kl(s)?n[la]=n[la].concat(t.modifiers[la]):El(s)&&(n[la]=n[la].concat(r.modifiers[la]),n[Xm]=r.modifiers[Xm],n[Gm]=r.modifiers[Gm],n[Hm]=r.modifiers[Hm]),n}var mS=d.createContext(void 0);function jB(s){var t=Us(),r=Cx(),a=Ex(),n=yB(t,r,a),i=xB(t.modifiers),o=Ge(Ge({},n),i);return e.jsx(mS.Provider,{value:o,children:s.children})}function hS(){var s=d.useContext(mS);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function wB(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function NB(s){return!!(s&&typeof s=="object"&&"from"in s)}function _B(s){return!!(s&&typeof s=="object"&&"after"in s)}function SB(s){return!!(s&&typeof s=="object"&&"before"in s)}function CB(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function kB(s,t){var r,a=t.from,n=t.to;if(a&&n){var i=Xr(n,a)<0;i&&(r=[n,a],a=r[0],n=r[1]);var o=Xr(s,a)>=0&&Xr(n,s)>=0;return o}return n?Bt(n,s):a?Bt(a,s):!1}function EB(s){return Hf(s)}function PB(s){return Array.isArray(s)&&s.every(Hf)}function TB(s,t){return t.some(function(r){if(typeof r=="boolean")return r;if(EB(r))return Bt(s,r);if(PB(r))return r.includes(s);if(NB(r))return kB(s,r);if(CB(r))return r.dayOfWeek.includes(s.getDay());if(wB(r)){var a=Xr(r.before,s),n=Xr(r.after,s),i=a>0,o=n<0,c=zh(r.before,r.after);return c?o&&i:i||o}return _B(r)?Xr(s,r.after)>0:SB(r)?Xr(r.before,s)>0:typeof r=="function"?r(s):!1})}function Px(s,t,r){var a=Object.keys(t).reduce(function(i,o){var c=t[o];return TB(s,c)&&i.push(o),i},[]),n={};return a.forEach(function(i){return n[i]=!0}),r&&!Zf(s,r)&&(n.outside=!0),n}function IB(s,t){for(var r=zt(s[0]),a=eu(s[s.length-1]),n,i,o=r;o<=a;){var c=Px(o,t),l=!c.disabled&&!c.hidden;if(!l){o=Pt(o,1);continue}if(c.selected)return o;c.today&&!i&&(i=o),n||(n=o),o=Pt(o,1)}return i||n}var AB=365;function fS(s,t){var r=t.moveBy,a=t.direction,n=t.context,i=t.modifiers,o=t.retry,c=o===void 0?{count:0,lastFocused:s}:o,l=n.weekStartsOn,u=n.fromDate,m=n.toDate,x=n.locale,f={day:Pt,week:Uh,month:Tr,year:CO,startOfWeek:function(b){return n.ISOWeek?Mn(b):Qr(b,{locale:x,weekStartsOn:l})},endOfWeek:function(b){return n.ISOWeek?w_(b):Gf(b,{locale:x,weekStartsOn:l})}},p=f[r](s,a==="after"?1:-1);a==="before"&&u?p=kO([u,p]):a==="after"&&m&&(p=EO([m,p]));var v=!0;if(i){var g=Px(p,i);v=!g.disabled&&!g.hidden}return v?p:c.count>AB?c.lastFocused:fS(p,{moveBy:r,direction:a,context:n,modifiers:i,retry:Ge(Ge({},c),{count:c.count+1})})}var xS=d.createContext(void 0);function MB(s){var t=Pl(),r=hS(),a=d.useState(),n=a[0],i=a[1],o=d.useState(),c=o[0],l=o[1],u=IB(t.displayMonths,r),m=n??(c&&t.isDateDisplayed(c))?c:u,x=function(){l(n),i(void 0)},f=function(b){i(b)},p=Us(),v=function(b,w){if(n){var y=fS(n,{moveBy:b,direction:w,context:p,modifiers:r});Bt(n,y)||(t.goToDate(y,n),f(y))}},g={focusedDay:n,focusTarget:m,blur:x,focus:f,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return e.jsx(xS.Provider,{value:g,children:s.children})}function Tx(){var s=d.useContext(xS);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function RB(s,t){var r=hS(),a=Px(s,r,t);return a}var Ix=d.createContext(void 0);function OB(s){if(!ou(s.initialProps)){var t={selected:void 0};return e.jsx(Ix.Provider,{value:t,children:s.children})}return e.jsx(DB,{initialProps:s.initialProps,children:s.children})}function DB(s){var t=s.initialProps,r=s.children,a=function(i,o,c){var l,u,m;if((l=t.onDayClick)===null||l===void 0||l.call(t,i,o,c),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,c);return}(m=t.onSelect)===null||m===void 0||m.call(t,i,i,o,c)},n={selected:t.selected,onDayClick:a};return e.jsx(Ix.Provider,{value:n,children:r})}function pS(){var s=d.useContext(Ix);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function FB(s,t){var r=Us(),a=pS(),n=Cx(),i=Ex(),o=Tx(),c=o.focusDayAfter,l=o.focusDayBefore,u=o.focusWeekAfter,m=o.focusWeekBefore,x=o.blur,f=o.focus,p=o.focusMonthBefore,v=o.focusMonthAfter,g=o.focusYearBefore,b=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,_=function($){var F,q,te,re;ou(r)?(F=a.onDayClick)===null||F===void 0||F.call(a,s,t,$):kl(r)?(q=n.onDayClick)===null||q===void 0||q.call(n,s,t,$):El(r)?(te=i.onDayClick)===null||te===void 0||te.call(i,s,t,$):(re=r.onDayClick)===null||re===void 0||re.call(r,s,t,$)},N=function($){var F;f(s),(F=r.onDayFocus)===null||F===void 0||F.call(r,s,t,$)},C=function($){var F;x(),(F=r.onDayBlur)===null||F===void 0||F.call(r,s,t,$)},R=function($){var F;(F=r.onDayMouseEnter)===null||F===void 0||F.call(r,s,t,$)},E=function($){var F;(F=r.onDayMouseLeave)===null||F===void 0||F.call(r,s,t,$)},I=function($){var F;(F=r.onDayPointerEnter)===null||F===void 0||F.call(r,s,t,$)},M=function($){var F;(F=r.onDayPointerLeave)===null||F===void 0||F.call(r,s,t,$)},U=function($){var F;(F=r.onDayTouchCancel)===null||F===void 0||F.call(r,s,t,$)},D=function($){var F;(F=r.onDayTouchEnd)===null||F===void 0||F.call(r,s,t,$)},z=function($){var F;(F=r.onDayTouchMove)===null||F===void 0||F.call(r,s,t,$)},X=function($){var F;(F=r.onDayTouchStart)===null||F===void 0||F.call(r,s,t,$)},T=function($){var F;(F=r.onDayKeyUp)===null||F===void 0||F.call(r,s,t,$)},A=function($){var F;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),u();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),m();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?g():p();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?b():v();break;case"Home":$.preventDefault(),$.stopPropagation(),w();break;case"End":$.preventDefault(),$.stopPropagation(),y();break}(F=r.onDayKeyDown)===null||F===void 0||F.call(r,s,t,$)},O={onClick:_,onFocus:N,onBlur:C,onKeyDown:A,onKeyUp:T,onMouseEnter:R,onMouseLeave:E,onPointerEnter:I,onPointerLeave:M,onTouchCancel:U,onTouchEnd:D,onTouchMove:z,onTouchStart:X};return O}function LB(){var s=Us(),t=pS(),r=Cx(),a=Ex(),n=ou(s)?t.selected:kl(s)?r.selected:El(s)?a.selected:void 0;return n}function $B(s){return Object.values(Ir).includes(s)}function BB(s,t){var r=[s.classNames.day];return Object.keys(t).forEach(function(a){var n=s.modifiersClassNames[a];if(n)r.push(n);else if($B(a)){var i=s.classNames["day_".concat(a)];i&&r.push(i)}}),r}function UB(s,t){var r=Ge({},s.styles.day);return Object.keys(t).forEach(function(a){var n;r=Ge(Ge({},r),(n=s.modifiersStyles)===null||n===void 0?void 0:n[a])}),r}function zB(s,t,r){var a,n,i,o=Us(),c=Tx(),l=RB(s,t),u=FB(s,l),m=LB(),x=!!(o.onDayClick||o.mode!=="default");d.useEffect(function(){var R;l.outside||c.focusedDay&&x&&Bt(c.focusedDay,s)&&((R=r.current)===null||R===void 0||R.focus())},[c.focusedDay,s,r,x,l.outside]);var f=BB(o,l).join(" "),p=UB(o,l),v=!!(l.outside&&!o.showOutsideDays||l.hidden),g=(i=(n=o.components)===null||n===void 0?void 0:n.DayContent)!==null&&i!==void 0?i:cB,b=e.jsx(g,{date:s,displayMonth:t,activeModifiers:l}),w={style:p,className:f,children:b,role:"gridcell"},y=c.focusTarget&&Bt(c.focusTarget,s)&&!l.outside,_=c.focusedDay&&Bt(c.focusedDay,s),N=Ge(Ge(Ge({},w),(a={disabled:l.disabled,role:"gridcell"},a["aria-selected"]=l.selected,a.tabIndex=_||y?0:-1,a)),u),C={isButton:x,isHidden:v,activeModifiers:l,selectedDays:m,buttonProps:N,divProps:w};return C}function qB(s){var t=d.useRef(null),r=zB(s.date,s.displayMonth,t);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(Sd,Ge({name:"day",ref:t},r.buttonProps)):e.jsx("div",Ge({},r.divProps))}function VB(s){var t=s.number,r=s.dates,a=Us(),n=a.onWeekNumberClick,i=a.styles,o=a.classNames,c=a.locale,l=a.labels.labelWeekNumber,u=a.formatters.formatWeekNumber,m=u(Number(t),{locale:c});if(!n)return e.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:m});var x=l(Number(t),{locale:c}),f=function(p){n(t,r,p)};return e.jsx(Sd,{name:"week-number","aria-label":x,className:o.weeknumber,style:i.weeknumber,onClick:f,children:m})}function JB(s){var t,r,a=Us(),n=a.styles,i=a.classNames,o=a.showWeekNumber,c=a.components,l=(t=c==null?void 0:c.Day)!==null&&t!==void 0?t:qB,u=(r=c==null?void 0:c.WeekNumber)!==null&&r!==void 0?r:VB,m;return o&&(m=e.jsx("td",{className:i.cell,style:n.cell,children:e.jsx(u,{number:s.weekNumber,dates:s.dates})})),e.jsxs("tr",{className:i.row,style:n.row,children:[m,s.dates.map(function(x){return e.jsx("td",{className:i.cell,style:n.cell,role:"presentation",children:e.jsx(l,{displayMonth:s.displayMonth,date:x})},OD(x))})]})}function gy(s,t,r){for(var a=r!=null&&r.ISOWeek?w_(t):Gf(t,r),n=r!=null&&r.ISOWeek?Mn(s):Qr(s,r),i=Xr(a,n),o=[],c=0;c<=i;c++)o.push(Pt(n,c));var l=o.reduce(function(u,m){var x=r!=null&&r.ISOWeek?N_(m):S_(m,r),f=u.find(function(p){return p.weekNumber===x});return f?(f.dates.push(m),u):(u.push({weekNumber:x,dates:[m]}),u)},[]);return l}function WB(s,t){var r=gy(zt(s),eu(s),t);if(t!=null&&t.useFixedWeeks){var a=FD(s,t);if(a<6){var n=r[r.length-1],i=n.dates[n.dates.length-1],o=Uh(i,6-a),c=gy(Uh(i,1),o,t);r.push.apply(r,c)}}return r}function HB(s){var t,r,a,n=Us(),i=n.locale,o=n.classNames,c=n.styles,l=n.hideHead,u=n.fixedWeeks,m=n.components,x=n.weekStartsOn,f=n.firstWeekContainsDate,p=n.ISOWeek,v=WB(s.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:i,weekStartsOn:x,firstWeekContainsDate:f}),g=(t=m==null?void 0:m.Head)!==null&&t!==void 0?t:lB,b=(r=m==null?void 0:m.Row)!==null&&r!==void 0?r:JB,w=(a=m==null?void 0:m.Footer)!==null&&a!==void 0?a:nB;return e.jsxs("table",{id:s.id,className:o.table,style:c.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!l&&e.jsx(g,{}),e.jsx("tbody",{className:o.tbody,style:c.tbody,children:v.map(function(y){return e.jsx(b,{displayMonth:s.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),e.jsx(w,{displayMonth:s.displayMonth})]})}function GB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var XB=GB()?d.useLayoutEffect:d.useEffect,Ym=!1,YB=0;function vy(){return"react-day-picker-".concat(++YB)}function ZB(s){var t,r=s??(Ym?vy():null),a=d.useState(r),n=a[0],i=a[1];return XB(function(){n===null&&i(vy())},[]),d.useEffect(function(){Ym===!1&&(Ym=!0)},[]),(t=s??n)!==null&&t!==void 0?t:void 0}function KB(s){var t,r,a=Us(),n=a.dir,i=a.classNames,o=a.styles,c=a.components,l=Pl().displayMonths,u=ZB(a.id?"".concat(a.id,"-").concat(s.displayIndex):void 0),m=a.id?"".concat(a.id,"-grid-").concat(s.displayIndex):void 0,x=[i.month],f=o.month,p=s.displayIndex===0,v=s.displayIndex===l.length-1,g=!p&&!v;n==="rtl"&&(t=[p,v],v=t[0],p=t[1]),p&&(x.push(i.caption_start),f=Ge(Ge({},f),o.caption_start)),v&&(x.push(i.caption_end),f=Ge(Ge({},f),o.caption_end)),g&&(x.push(i.caption_between),f=Ge(Ge({},f),o.caption_between));var b=(r=c==null?void 0:c.Caption)!==null&&r!==void 0?r:aB;return e.jsxs("div",{className:x.join(" "),style:f,children:[e.jsx(b,{id:u,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(HB,{id:m,"aria-labelledby":u,displayMonth:s.displayMonth})]},s.displayIndex)}function QB(s){var t=Us(),r=t.classNames,a=t.styles;return e.jsx("div",{className:r.months,style:a.months,children:s.children})}function e9(s){var t,r,a=s.initialProps,n=Us(),i=Tx(),o=Pl(),c=d.useState(!1),l=c[0],u=c[1];d.useEffect(function(){n.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),u(!0)))},[n.initialFocus,l,i.focus,i.focusTarget,i]);var m=[n.classNames.root,n.className];n.numberOfMonths>1&&m.push(n.classNames.multiple_months),n.showWeekNumber&&m.push(n.classNames.with_weeknumber);var x=Ge(Ge({},n.styles.root),n.style),f=Object.keys(a).filter(function(v){return v.startsWith("data-")}).reduce(function(v,g){var b;return Ge(Ge({},v),(b={},b[g]=a[g],b))},{}),p=(r=(t=a.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:QB;return e.jsx("div",Ge({className:m.join(" "),style:x,dir:n.dir,id:n.id,nonce:a.nonce,title:a.title,lang:a.lang},f,{children:e.jsx(p,{children:o.displayMonths.map(function(v,g){return e.jsx(KB,{displayIndex:g,displayMonth:v},g)})})}))}function s9(s){var t=s.children,r=S8(s,["children"]);return e.jsx(V8,{initialProps:r,children:e.jsx(eB,{children:e.jsx(OB,{initialProps:r,children:e.jsx(dB,{initialProps:r,children:e.jsx(hB,{initialProps:r,children:e.jsx(jB,{children:e.jsx(MB,{children:t})})})})})})})}function t9(s){return e.jsx(s9,Ge({},s,{children:e.jsx(e9,{initialProps:s})}))}function gS({className:s,classNames:t,showOutsideDays:r=!0,...a}){return e.jsx(t9,{showOutsideDays:r,className:Oe("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Oe(nl({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Oe(nl({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...n})=>e.jsx(qa,{className:"h-4 w-4"}),IconRight:({...n})=>e.jsx(pt,{className:"h-4 w-4"})},...a})}gS.displayName="Calendar";function r9(){var U,D,z,X,T,A;const{serviceId:s}=so(),[t]=to(),r=Nt(),{toast:a}=et(),{customer:n,isCustomer:i}=Ss(),o=t.get("promotion"),c=t.get("promo_code"),l=t.get("business_id"),u=t.get("auto_book")==="true",[m,x]=d.useState(null),[f,p]=d.useState(!0),[v,g]=d.useState(new Date),[b,w]=d.useState(""),[y,_]=d.useState(1),N=O=>{const[$,F]=O.split(":").map(Number),q=$>=12?"PM":"AM";return`${$>12?$-12:$===0?12:$}:${F.toString().padStart(2,"0")} ${q}`},R=(()=>{const O=[];for(let $=9;$<=17;$++)for(let F=0;F<60;F+=30){const q=`${$.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`;O.push(q)}return O})();d.useEffect(()=>{s&&E()},[s]);const E=async(O=0)=>{var $,F;try{p(!0);const q=await W.from("services").select(`
          id,
          name,
          description,
          min_price,
          duration_minutes,
          image_url,
          service_subcategories (
            service_subcategory_type,
            service_categories (
              service_category_type
            )
          )
        `).eq("id",s).eq("is_active",!0);if(q.status===401&&O===0){console.log("JWT token expired, refreshing session...");const{data:Me,error:je}=await W.auth.refreshSession();if(je){console.error("Token refresh failed:",je),a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}if(Me!=null&&Me.session)return console.log("Session refreshed successfully, retrying..."),await E(1)}const{data:te,error:re}=q,be=te==null?void 0:te[0];if(re||!be)throw console.error("Service query error:",re),console.error("Service ID requested:",s),console.error("Query result:",te),new Error("Service not found");x(be)}catch(q){if(console.error("Error fetching service:",q),(($=q.message)!=null&&$.includes("JWT")||(F=q.message)!=null&&F.includes("401")||q.status===401)&&O===0){console.log("JWT error detected, attempting token refresh...");try{const{data:te,error:re}=await W.auth.refreshSession();if(!re&&(te!=null&&te.session))return console.log("Session refreshed, retrying service data fetch..."),await E(1)}catch(te){console.error("Token refresh failed:",te)}a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}a({title:"Error",description:"Failed to load service information",variant:"destructive"}),r("/")}finally{p(!1)}},I=()=>{if(!v||!b){a({title:"Missing Information",description:"Please select both date and time to continue",variant:"destructive"});return}const O=v.toISOString().split("T")[0],$=new URLSearchParams({date:O,time:b});o&&$.set("promotion",o),c&&$.set("promo_code",c),l&&$.set("business_id",l),u&&$.set("auto_book","true"),r(`/book-service/${s}/businesses?${$.toString()}`)},M=O=>{const $=new Date;return $.setHours(0,0,0,0),O<$||O.getDay()===0};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading service information..."})]})}):m?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("div",{className:"sm:hidden",children:e.jsxs(st,{className:"w-8 h-8",children:[e.jsx(it,{src:n==null?void 0:n.image_url,alt:(n==null?void 0:n.first_name)||"User",className:"object-cover"}),e.jsx(tt,{className:"bg-roam-blue text-white text-sm font-medium",children:((D=(U=n==null?void 0:n.first_name)==null?void 0:U[0])==null?void 0:D.toUpperCase())||"U"})]})}),e.jsxs("div",{className:"hidden sm:flex sm:items-center sm:gap-2",children:[e.jsxs(st,{className:"w-6 h-6",children:[e.jsx(it,{src:n==null?void 0:n.image_url,alt:(n==null?void 0:n.first_name)||"User",className:"object-cover"}),e.jsx(tt,{className:"bg-roam-blue text-white text-xs font-medium",children:((X=(z=n==null?void 0:n.first_name)==null?void 0:z[0])==null?void 0:X.toUpperCase())||"U"})]}),e.jsxs("span",{className:"text-sm text-foreground/70",children:["Welcome, ",n==null?void 0:n.first_name]})]})]})]})})}),e.jsx("div",{className:"bg-background/50 border-b",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-blue text-white rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm font-medium text-roam-blue hidden sm:inline",children:"Select Date & Time"}),e.jsx("span",{className:"ml-1 text-xs font-medium text-roam-blue sm:hidden",children:"Date"})]}),e.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-foreground/20 text-foreground/60 rounded-full flex items-center justify-center text-sm",children:"2"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm text-foreground/60 hidden sm:inline",children:"Choose Business"}),e.jsx("span",{className:"ml-1 text-xs text-foreground/60 sm:hidden",children:"Business"})]}),e.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-foreground/20 text-foreground/60 rounded-full flex items-center justify-center text-sm",children:"3"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm text-foreground/60 hidden sm:inline",children:"Book Service"}),e.jsx("span",{className:"ml-1 text-xs text-foreground/60 sm:hidden",children:"Book"})]})]})})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(V,{className:"sticky top-24",children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-lg",children:"Service Details"})}),e.jsxs(K,{className:"space-y-4",children:[m.image_url&&e.jsx("img",{src:m.image_url,alt:m.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xl mb-2",children:m.name}),e.jsx("p",{className:"text-foreground/70 text-sm mb-3",children:m.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-roam-blue"}),e.jsxs("span",{className:"text-lg font-bold text-roam-blue",children:["Starting at $",m.min_price]})]}),e.jsxs(ge,{variant:"outline",className:"border-roam-blue text-roam-blue",children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),m.duration_minutes," min"]})]}),e.jsx(ge,{variant:"secondary",className:"text-xs",children:(A=(T=m.service_subcategories)==null?void 0:T.service_categories)==null?void 0:A.service_category_type})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"}),"Select Your Preferred Date & Time"]})}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Choose Date"}),e.jsx(gS,{mode:"single",selected:v,onSelect:g,disabled:M,className:"rounded-md border"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Choose Time"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:R.map(O=>e.jsx(P,{variant:b===O?"default":"outline",size:"sm",onClick:()=>w(O),className:b===O?"bg-roam-blue hover:bg-roam-blue/90":"hover:border-roam-blue hover:text-roam-blue",children:N(O)},O))})]}),v&&b&&e.jsxs("div",{className:"p-4 bg-roam-light-blue/10 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2 text-roam-blue",children:"Your Selection"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:v.toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsx("span",{children:N(b)})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(P,{onClick:I,disabled:!v||!b,className:"w-full bg-roam-blue hover:bg-roam-blue/90",size:"lg",children:["Continue to Available Businesses",e.jsx(pt,{className:"w-4 h-4 ml-2"})]})}),e.jsxs("div",{className:"text-sm text-foreground/60 space-y-2",children:[e.jsx("p",{children:"��� Select your preferred date and time"}),e.jsx("p",{children:"• We'll show you businesses available during this time"}),e.jsx("p",{children:"• You can change this later if needed"})]})]})]})})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Service Not Found"}),e.jsx("p",{className:"text-foreground/60 mb-6",children:"The service you're looking for could not be found."}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:"/",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})})}function a9(){const{serviceId:s}=so(),[t]=to(),r=Nt(),{toast:a}=et(),{customer:n,isCustomer:i}=Ss(),o=Y=>{var pe,J,H,oe;const we=(J=(pe=Y==null?void 0:Y.service_subcategories)==null?void 0:pe.service_categories)==null?void 0:J.service_category_type;(H=Y==null?void 0:Y.service_subcategories)==null||H.service_subcategory_type;const Q=((oe=Y==null?void 0:Y.name)==null?void 0:oe.toLowerCase())||"";if(we)switch(we.toLowerCase()){case"health_wellness":case"fitness":case"medical":return Q.includes("weight loss")||Q.includes("fitness")?e.jsx(Yo,{className:"w-5 h-5 text-roam-blue"}):Q.includes("massage")||Q.includes("spa")?e.jsx(Cr,{className:"w-5 h-5 text-roam-blue"}):e.jsx(Zo,{className:"w-5 h-5 text-roam-blue"});case"beauty":case"personal_care":return Q.includes("hair")||Q.includes("salon")?e.jsx(Bi,{className:"w-5 h-5 text-roam-blue"}):e.jsx(Zg,{className:"w-5 h-5 text-roam-blue"});case"home_services":return Q.includes("repair")||Q.includes("maintenance")?e.jsx(rh,{className:"w-5 h-5 text-roam-blue"}):e.jsx(Zr,{className:"w-5 h-5 text-roam-blue"});case"education":case"training":return e.jsx(Qg,{className:"w-5 h-5 text-roam-blue"});case"photography":case"events":return e.jsx(_r,{className:"w-5 h-5 text-roam-blue"});case"food":case"catering":return e.jsx(nv,{className:"w-5 h-5 text-roam-blue"})}return Q.includes("weight loss")||Q.includes("fitness")?e.jsx(Yo,{className:"w-5 h-5 text-roam-blue"}):Q.includes("massage")||Q.includes("spa")?e.jsx(Cr,{className:"w-5 h-5 text-roam-blue"}):Q.includes("hair")||Q.includes("salon")?e.jsx(Bi,{className:"w-5 h-5 text-roam-blue"}):Q.includes("beauty")||Q.includes("makeup")?e.jsx(Zg,{className:"w-5 h-5 text-roam-blue"}):Q.includes("cleaning")||Q.includes("home")?e.jsx(Zr,{className:"w-5 h-5 text-roam-blue"}):Q.includes("repair")||Q.includes("maintenance")?e.jsx(rh,{className:"w-5 h-5 text-roam-blue"}):Q.includes("tutoring")||Q.includes("lesson")?e.jsx(Qg,{className:"w-5 h-5 text-roam-blue"}):Q.includes("photo")||Q.includes("photography")?e.jsx(_r,{className:"w-5 h-5 text-roam-blue"}):Q.includes("catering")||Q.includes("food")?e.jsx(nv,{className:"w-5 h-5 text-roam-blue"}):e.jsx(us,{className:"w-5 h-5 text-roam-blue"})},c=t.get("date"),l=t.get("time"),u=t.get("promotion"),m=t.get("promo_code"),x=t.get("business_id"),f=t.get("auto_book")==="true",[p,v]=d.useState(null),[g,b]=d.useState([]),[w,y]=d.useState(!0),[_,N]=d.useState("all"),[C,R]=d.useState({}),[E,I]=d.useState({}),[M,U]=d.useState({}),[D,z]=d.useState([]);d.useEffect(()=>{console.log("BusinessAvailability component params:",{serviceId:s,selectedDate:c,selectedTime:l,url:window.location.href}),s&&c&&l?T():console.warn("Missing required parameters:",{serviceId:s,selectedDate:c,selectedTime:l})},[s,c,l]),d.useEffect(()=>{let Y=null;return X(),Y=W.auth.onAuthStateChange((Q,pe)=>{pe!=null&&pe.user?X():z([])}).data,()=>{var Q,pe;try{(pe=(Q=Y==null?void 0:Y.subscription)==null?void 0:Q.unsubscribe)==null||pe.call(Q)}catch{}}},[]),d.useEffect(()=>{if(!D||D.length===0)return;const Y=D.find(we=>we.is_default)||D[0];U(we=>{const Q={...we};return g.forEach(pe=>{(pe.deliveryType==="mobile"||E[pe.id]==="customer_location")&&!Q[pe.id]&&(Q[pe.id]={address:Y.street_address||Y.address_line1||"",city:Y.city||"",state:Y.state||"",zip:Y.zip_code||Y.postal_code||"",selectedLocationId:Y.id},console.log("Auto-populated customer address for business:",pe.id,Q[pe.id]))}),Q})},[D,g,E]),d.useEffect(()=>{if(D.length===1&&g.length>0){const Y=D[0];g.forEach(we=>{var pe;(we.deliveryType==="mobile"||E[we.id]==="customer_location")&&!((pe=M[we.id])!=null&&pe.selectedLocationId)&&te(we.id,Y.id)})}},[D,g,E,M]);const X=async()=>{var Y;try{const{data:we,error:Q}=await W.auth.getUser();if(Q||!((Y=we==null?void 0:we.user)!=null&&Y.id))return;const pe=we.user.id;console.log("[BA] Auth user for locations:",pe);const{data:J,error:H}=await W.from("customer_locations").select("*").eq("customer_id",pe).or("is_active.eq.true,is_active.is.null").order("created_at",{ascending:!1});if(H){console.error("Error fetching customer locations:",H);return}z(J||[]),console.log("[BA] Loaded customer saved locations count:",(J==null?void 0:J.length)||0),J&&J.length>0&&console.log("[BA] First saved location structure:",J[0])}catch(we){console.error("Error fetching customer locations:",we)}},T=async(Y=0)=>{var we,Q;try{y(!0);const{data:pe,error:J}=await W.from("services").select(`
          id,
          name,
          description,
          subcategory_id,
          min_price,
          duration_minutes,
          image_url,
          service_subcategories!inner(
            id,
            service_subcategory_type,
            service_categories!inner(
              id,
              service_category_type
            )
          )
        `).eq("id",s).eq("is_active",!0);if(console.log("Service query result:",JSON.stringify({serviceDataArray:pe,serviceError:J},null,2)),J)throw console.error("Service query error:",JSON.stringify(J,null,2)),new Error(`Service query failed: ${J.message||JSON.stringify(J)}`);const H=pe==null?void 0:pe[0];if(H)v(H),console.log("Service data fetched successfully:",H);else{console.error("No active service found with ID:",s),console.error("This service may have been deactivated or removed"),console.error("Query returned:",pe),v(null),b([]),y(!1);return}const[oe,de,Te]=c.split("-").map(Number),Le=new Date(oe,de-1,Te).getDay();console.log("Attempting to fetch businesses for serviceId:",s),console.log("Expected business ID for 60 Minute Massage:","a3b483e5-b375-4a83-8c1e-223452f23397");const $e=await W.from("business_services").select(`
          business_id,
          business_price,
          delivery_type,
          business_profiles (
            id,
            business_name,
            business_type,
            logo_url,
            image_url,
            verification_status,
            is_active,
            is_featured,
            business_hours,
            contact_email,
            phone,
            website_url,
            business_locations (
              id,
              location_name,
              address_line1,
              address_line2,
              city,
              state,
              postal_code,
              country,
              latitude,
              longitude,
              is_primary,
              is_active
            )
          )
        `).eq("service_id",s).eq("is_active",!0);if([$e].filter(G=>G.status===401).length>0&&Y===0){console.log("JWT token expired, refreshing session...");const{data:G,error:ue}=await W.auth.refreshSession();if(ue){console.error("Token refresh failed:",ue),a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}if(G!=null&&G.session)return console.log("Session refreshed successfully, retrying..."),await T(1)}const{data:es,error:ee}=$e;if(ee){console.error("Error fetching businesses:",JSON.stringify(ee,null,2)),console.error("Business query details:",JSON.stringify({serviceId:s,selectedDate:c,selectedTime:l,dayOfWeek:Le},null,2)),console.log("No businesses found for this service and date/time combination"),console.log("No businesses found for this service, checking if we can fetch specific business:",ee);try{const{data:G,error:ue}=await W.from("business_profiles").select(`
              id,
              business_name,
              business_type,
              logo_url,
              image_url,
              verification_status,
              is_active,
              is_featured,
              business_hours,
              contact_email,
              phone,
              website_url
            `).eq("id","a3b483e5-b375-4a83-8c1e-223452f23397"),xe=G==null?void 0:G[0];if(xe&&!ue&&(console.log("Found specific business:",xe),O(xe.business_hours,c,l))){const Ye=[{id:xe.id,name:xe.business_name,description:`Professional ${xe.business_type.replace("_"," ")} services`,type:xe.business_type,logo:xe.logo_url||xe.image_url,verification_status:xe.verification_status,is_featured:xe.is_featured,years_in_business:5,location:"Florida",servicePrice:85,deliveryType:"mobile",rating:4.8,reviewCount:127,openTime:A(xe.business_hours,c,"open"),closeTime:A(xe.business_hours,c,"close"),email:xe.contact_email,phone:xe.phone,website:xe.website_url}];b(Ye),y(!1);return}}catch(G){console.error("Error fetching specific business:",G)}b([]),y(!1);return}const Fe=(es||[]).filter(G=>{var Ie;const ue=G.business_profiles&&G.business_profiles.is_active&&G.business_profiles.verification_status==="approved",xe=O(G.business_profiles.business_hours,c,l);return console.log(`Business ${(Ie=G.business_profiles)==null?void 0:Ie.business_name}: active=${ue}, open=${xe}`),ue&&xe}),Ke=Fe.map(G=>{var ue;return{id:G.business_profiles.id,name:G.business_profiles.business_name,description:`Professional ${G.business_profiles.business_type.replace("_"," ")} services`,type:G.business_profiles.business_type,logo:G.business_profiles.logo_url||G.business_profiles.image_url,verification_status:G.business_profiles.verification_status,is_featured:G.business_profiles.is_featured,years_in_business:null,location:"Florida",servicePrice:G.business_price,deliveryType:G.delivery_type||"mobile",rating:4.8,reviewCount:Math.floor(Math.random()*200)+50,openTime:A(G.business_profiles.business_hours,c,"open"),closeTime:A(G.business_profiles.business_hours,c,"close"),email:G.business_profiles.contact_email,phone:G.business_profiles.phone,website:G.business_profiles.website_url,locations:((ue=G.business_profiles.business_locations)==null?void 0:ue.filter(xe=>xe.is_active))||[]}});let Ue=Ke;f&&x&&(Ue=Ke.filter(G=>G.id===x),Ue.length===0&&console.log("Promotion business not found in available businesses, this may indicate availability issues")),b(Ue),console.log("Businesses query result:",JSON.stringify({businessesDataLength:(es==null?void 0:es.length)||0,filteredBusinessesLength:(Fe==null?void 0:Fe.length)||0,transformedBusinessesLength:(Ke==null?void 0:Ke.length)||0,serviceId:s,selectedDate:c,selectedTime:l,businessesData:es,filteredBusinesses:Fe},null,2));const ze=es==null?void 0:es.find(G=>{var ue;return((ue=G.business_profiles)==null?void 0:ue.id)==="a3b483e5-b375-4a83-8c1e-223452f23397"});console.log("Expected business found in query:",ze)}catch(pe){if(console.error("Error fetching available businesses:",pe),((we=pe.message)!=null&&we.includes("JWT")||(Q=pe.message)!=null&&Q.includes("401")||pe.status===401)&&Y===0){console.log("JWT error detected, attempting token refresh...");try{const{data:J,error:H}=await W.auth.refreshSession();if(!H&&(J!=null&&J.session))return console.log("Session refreshed, retrying businesses fetch..."),await T(1)}catch(J){console.error("Token refresh failed:",J)}a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}a({title:"Error",description:pe.message||"Failed to load available businesses",variant:"destructive"})}finally{y(!1)}},A=(Y,we,Q)=>{if(!Y||!we)return Q==="open"?"9:00 AM":"5:00 PM";const[pe,J,H]=we.split("-").map(Number),oe=new Date(pe,J-1,H),Te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][oe.getDay()],De=Y[Te];if(!De||!De[Q])return Q==="open"?"9:00 AM":"5:00 PM";const[Le,$e]=De[Q].split(":"),Be=parseInt(Le),es=Be===0?12:Be>12?Be-12:Be,ee=Be>=12?"PM":"AM";return`${es}:${$e} ${ee}`},O=(Y,we,Q)=>{if(!Y||!we||!Q)return!0;const[pe,J,H]=we.split("-").map(Number),oe=new Date(pe,J-1,H),Te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][oe.getDay()],De=Y[Te];if(!De||!De.open||!De.close)return!1;const[Le,$e]=Q.split(":").map(Number),Be=Le*60+$e,[es,ee]=De.open.split(":").map(Number),[Fe,Ke]=De.close.split(":").map(Number),Ue=es*60+ee,ze=Fe*60+Ke;return Be>=Ue&&Be<=ze},$=(Y,we)=>{R(Q=>({...Q,[Y]:we}))},F=(Y,we)=>{if(I(Q=>({...Q,[Y]:we})),we==="customer_location"&&R(Q=>({...Q,[Y]:null})),we==="business_location"&&U(Q=>({...Q,[Y]:null})),D&&D.length>0){const Q=D.find(pe=>pe.is_default)||D[0];U(pe=>({...pe,[Y]:pe[Y]||{address:Q.address_line1||"",city:Q.city||"",state:Q.state||"",zip:Q.postal_code||"",selectedLocationId:Q.id}}))}},q=(Y,we,Q)=>{U(pe=>({...pe,[Y]:{...pe[Y],[we]:Q}}))},te=(Y,we)=>{if(we==="new"){U(pe=>({...pe,[Y]:{address:"",city:"",state:"",zip:""}}));return}const Q=D.find(pe=>pe.id===we);Q&&(console.log("Selected location data:",Q),U(pe=>({...pe,[Y]:{address:Q.street_address||Q.address_line1||"",city:Q.city||"",state:Q.state||"",zip:Q.zip_code||Q.postal_code||"",selectedLocationId:we}})),console.log("Updated customerAddresses for business:",Y,{address:Q.street_address||Q.address_line1||"",city:Q.city||"",state:Q.state||"",zip:Q.zip_code||Q.postal_code||""}))},re=Y=>{const we=[Y.address_line1,Y.address_line2,Y.city,Y.state,Y.postal_code,Y.country].filter(Boolean).join(", "),Q=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(we)}`;window.open(Q,"_blank")},be=async Y=>{if(console.log("Selecting business:",Y.name),console.log("Business object:",Y),console.log("Business ID:",Y.id),console.log("Service ID:",s),console.log("Selected date:",c),console.log("Selected time:",l),!Y.id){console.error("No business ID found in business object"),a({title:"Error",description:"Unable to select business - missing ID",variant:"destructive"});return}const we=E[Y.id]||(Y.deliveryType==="mobile"?"customer_location":Y.deliveryType==="business_location"?"business_location":void 0),Q=C[Y.id],pe=M[Y.id];if(Y.deliveryType==="both_locations"&&!we){a({title:"Delivery Type Required",description:"Please choose between Business or Mobile delivery",variant:"destructive"});return}if(we==="business_location"&&Y.locations&&Y.locations.length>1&&!Q){a({title:"Location Required",description:"Please select a business location",variant:"destructive"});return}if(we==="customer_location"&&(!pe||!pe.address||!pe.city)){a({title:"Address Required",description:"Please provide your delivery address",variant:"destructive"});return}let J=`/business/${Y.id}?tab=services&service=${s}&date=${c}&time=${l}`;if(u&&(J+=`&promotion=${u}`),m&&(J+=`&promo_code=${m}`),we&&(J+=`&deliveryType=${we}`),we==="business_location"&&Q&&(J+=`&location=${Q.id}`),we==="customer_location"&&pe){const H=encodeURIComponent(JSON.stringify(pe));J+=`&address=${H}`}console.log("Navigating to:",J),r(J)},Me=Y=>{const[we,Q,pe]=Y.split("-").map(Number);return new Date(we,Q-1,pe).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},je=Y=>({mobile:{label:"Mobile Service",color:"bg-green-100 text-green-800"},business_location:{label:"Business",color:"bg-blue-100 text-blue-800"},virtual:{label:"Virtual",color:"bg-purple-100 text-purple-800"}})[Y]||{label:Y,color:"bg-gray-100 text-gray-800"};return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Finding available businesses..."})]})}):p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:`/book-service/${s}`,children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Date Selection"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]})})})}),e.jsx("div",{className:"bg-background/50 border-b",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"✓"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm font-medium text-green-600 hidden sm:inline",children:"Date & Time Selected"}),e.jsx("span",{className:"ml-1 text-xs font-medium text-green-600 sm:hidden",children:"Date"})]}),e.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-blue text-white rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm font-medium text-roam-blue hidden sm:inline",children:"Choose Business"}),e.jsx("span",{className:"ml-1 text-xs font-medium text-roam-blue sm:hidden",children:"Business"})]}),e.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-foreground/20 text-foreground/60 rounded-full flex items-center justify-center text-sm",children:"3"}),e.jsx("span",{className:"ml-2 text-xs sm:text-sm text-foreground/60 hidden sm:inline",children:"Book Service"}),e.jsx("span",{className:"ml-1 text-xs text-foreground/60 sm:hidden",children:"Book"})]})]})})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Available Businesses"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-card border border-border/50 p-4 hover:shadow-md hover:border-border transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-xl bg-muted flex items-center justify-center",children:e.jsx(Qe,{className:"w-5 h-5 text-roam-blue"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Date"}),e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:c?Me(c):""})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-card border border-border/50 p-4 hover:shadow-md hover:border-border transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-xl bg-muted flex items-center justify-center",children:e.jsx(bs,{className:"w-5 h-5 text-roam-blue"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Time"}),e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:l})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-card border border-border/50 p-4 hover:shadow-md hover:border-border transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-xl bg-muted flex items-center justify-center",children:o(p)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Service"}),e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:p==null?void 0:p.name})]})]})]})]})]}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6",children:g.map(Y=>{var we,Q,pe,J,H;return e.jsx(V,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:e.jsx(K,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-6",children:[e.jsxs(st,{className:"h-12 w-12 sm:h-16 sm:w-16 flex-shrink-0",children:[e.jsx(it,{src:Y.logo||void 0}),e.jsx(tt,{className:"text-sm sm:text-lg",children:e.jsx(fs,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold truncate",children:Y.name}),Y.is_featured&&e.jsxs(ge,{className:"bg-roam-yellow text-gray-900 text-xs self-start",children:[e.jsx(us,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),e.jsx("p",{className:"text-sm sm:text-base text-foreground/70 mb-2 line-clamp-2",children:Y.description}),Y.deliveryType==="both_locations"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-foreground/70 mb-2 block",children:"Choose Delivery Option:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${E[Y.id]==="business_location"?"border-roam-blue bg-roam-blue/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>F(Y.id,"business_location"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-roam-blue"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Business"}),e.jsx("div",{className:"text-xs text-foreground/60",children:"Visit our location"})]})]})}),e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${E[Y.id]==="customer_location"?"border-roam-blue bg-roam-blue/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>F(Y.id,"customer_location"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_n,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Mobile"}),e.jsx("div",{className:"text-xs text-foreground/60",children:"We come to you"})]})]})})]})]}),(Y.deliveryType==="both_locations"&&E[Y.id]==="business_location"||Y.deliveryType==="business_location")&&e.jsx("div",{className:"mb-3",children:Y.locations&&Y.locations.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground/70",children:"Select Location:"}),Y.locations.map(oe=>{var de;return e.jsxs("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors relative ${((de=C[Y.id])==null?void 0:de.id)===oe.id?"border-roam-blue bg-roam-blue/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>$(Y.id,oe),children:[e.jsx(rf,{className:"absolute top-2 right-2 w-4 h-4 text-foreground/60 hover:text-foreground cursor-pointer transition-colors",onClick:Te=>{Te.stopPropagation(),re(oe)}}),e.jsxs("div",{className:"pr-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-roam-blue flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:oe.location_name||"Main Location"})]}),oe.is_primary&&e.jsx(ge,{variant:"secondary",className:"text-xs self-start",children:"Primary"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-foreground/60 break-words",children:[oe.address_line1,oe.city,oe.state].filter(Boolean).join(", ")})]})]},oe.id)})]}):e.jsxs("div",{className:"flex items-center gap-1 text-sm text-foreground/60",children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsx("span",{children:"Location details not available"})]})}),(Y.deliveryType==="mobile"||Y.deliveryType==="both_locations"&&E[Y.id]==="customer_location")&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-sm font-medium text-foreground/70 mb-2 block",children:"Delivery Address:"}),e.jsxs("div",{className:"space-y-3 p-3 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-xs",children:"Select from saved addresses:"}),D.length>0?e.jsxs(as,{value:((we=M[Y.id])==null?void 0:we.selectedLocationId)||(D.length===1?D[0].id:"new"),onValueChange:oe=>te(Y.id,oe),children:[e.jsx(ss,{className:"mt-1",children:e.jsx(is,{placeholder:"Choose an address"})}),e.jsxs(ts,{children:[e.jsx(ce,{value:"new",children:"Enter new address"}),D.map(oe=>e.jsx(ce,{value:oe.id,children:e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"font-medium",children:oe.street_address}),e.jsxs("span",{className:"text-xs text-gray-500",children:[oe.city,","," ",oe.state," ",oe.zip_code]})]})},oe.id))]})]}):e.jsx("div",{className:"text-xs text-foreground/60 mt-1",children:"No saved addresses found for your account."}),e.jsx("div",{className:"mt-2",children:e.jsx(P,{variant:"link",size:"sm",asChild:!0,children:e.jsx(Ee,{to:"/customer/locations",children:"Manage saved addresses"})})})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:`address-${Y.id}`,className:"text-xs",children:"Street Address *"}),e.jsx(ae,{id:`address-${Y.id}`,placeholder:"123 Main Street",value:((Q=M[Y.id])==null?void 0:Q.address)||"",onChange:oe=>q(Y.id,"address",oe.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:`city-${Y.id}`,className:"text-xs",children:"City *"}),e.jsx(ae,{id:`city-${Y.id}`,placeholder:"Miami",value:((pe=M[Y.id])==null?void 0:pe.city)||"",onChange:oe=>q(Y.id,"city",oe.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:`state-${Y.id}`,className:"text-xs",children:"State"}),e.jsx(ae,{id:`state-${Y.id}`,placeholder:"FL",value:((J=M[Y.id])==null?void 0:J.state)||"",onChange:oe=>q(Y.id,"state",oe.target.value),className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:`zip-${Y.id}`,className:"text-xs",children:"Zip Code"}),e.jsx(ae,{id:`zip-${Y.id}`,placeholder:"33101",value:((H=M[Y.id])==null?void 0:H.zip)||"",onChange:oe=>q(Y.id,"zip",oe.target.value),className:"mt-1"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-foreground/60",children:Y.years_in_business&&e.jsxs("span",{className:"text-xs sm:text-sm",children:[Y.years_in_business," years in business"]})}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end sm:text-right",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-4 h-4 text-roam-warning fill-current"}),e.jsx("span",{className:"font-semibold text-sm sm:text-base",children:Y.rating}),e.jsxs("span",{className:"text-xs sm:text-sm text-foreground/60",children:["(",Y.reviewCount,")"]})]}),e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-roam-blue ml-4",children:["$",Y.servicePrice]})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:Y.deliveryType==="both_locations"?e.jsxs(e.Fragment,{children:[e.jsx(ge,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs",children:"Business"}),e.jsx(ge,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:"Mobile"})]}):e.jsx(ge,{variant:"secondary",className:`text-xs ${je(Y.deliveryType).color}`,children:je(Y.deliveryType).label})}),e.jsxs("span",{className:"text-xs sm:text-sm text-foreground/60",children:["Open: ",Y.openTime," - ",Y.closeTime]})]}),e.jsxs(P,{onClick:()=>be(Y),className:"bg-roam-blue hover:bg-roam-blue/90 w-full sm:w-auto",size:"sm",children:[e.jsx("span",{className:"text-sm",children:"Select This Business"}),e.jsx(pt,{className:"w-4 h-4 ml-2 flex-shrink-0"})]})]})]})]})})},Y.id)})}):e.jsxs(V,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fs,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Available Businesses"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"No businesses are available for the selected date and time. Please try a different time slot."}),e.jsx(P,{asChild:!0,variant:"outline",className:"border-roam-blue text-roam-blue hover:bg-roam-blue hover:text-white",children:e.jsxs(Ee,{to:`/book-service/${s}`,children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Change Date/Time"]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Service Not Found"}),e.jsx("p",{className:"text-foreground/60 mb-6",children:"The service you're looking for is no longer available or has been removed."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90 w-full",children:e.jsxs(Ee,{to:"/",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx(P,{asChild:!0,variant:"outline",className:"w-full",children:e.jsx(Ee,{to:"/services",children:"Browse All Services"})})]})]})})}function n9(){var J;const{businessId:s}=so(),[t]=to(),r=Nt(),{toast:a}=et(),{customer:n,isCustomer:i}=Ss(),o=t.get("date"),c=t.get("time"),l=t.get("serviceId"),[u,m]=d.useState(null),[x,f]=d.useState([]),[p,v]=d.useState([]),[g,b]=d.useState([]),[w,y]=d.useState(!0),[_,N]=d.useState([]),[C,R]=d.useState([]),[E,I]=d.useState("no-preference"),[M,U]=d.useState(""),[D,z]=d.useState(""),[X,T]=d.useState(null),[A,O]=d.useState([]),[$,F]=d.useState(""),q=async(H=0)=>{var oe,de;if(n!=null&&n.customer_id)try{const{data:Te,error:De}=await W.from("customer_locations").select("*").eq("customer_id",n.id).eq("is_active",!0).order("is_primary",{ascending:!1}).order("created_at",{ascending:!1});if(De){if(((oe=De.message)!=null&&oe.includes("JWT")||(de=De.message)!=null&&de.includes("401")||De.code==="PGRST301")&&H===0){console.log("JWT error in fetchSavedLocations, refreshing token...");const{data:Le,error:$e}=await W.auth.refreshSession();if(!$e&&(Le!=null&&Le.session))return console.log("Session refreshed, retrying saved locations fetch..."),await q(1)}throw De}O(Te||[])}catch(Te){console.error("Error fetching saved locations:",Te)}};d.useEffect(()=>{s&&te()},[s]),d.useEffect(()=>{n!=null&&n.customer_id&&q()},[n==null?void 0:n.customer_id]);const te=async(H=0)=>{var oe,de;try{y(!0);const Te=await W.from("business_profiles").select(`
          id,
          business_name,
          business_type,
          logo_url,
          image_url,
          verification_status,
          is_featured,
          contact_email,
          phone,
          website_url
        `).eq("id",s).eq("is_active",!0).single(),De=await W.from("business_services").select(`
          id,
          service_id,
          business_price,
          delivery_type,
          services (
            id,
            name,
            description,
            duration_minutes
          )
        `).eq("business_id",s).eq("is_active",!0),Le=await W.from("business_addons").select(`
          id,
          addon_id,
          custom_price,
          service_addons (
            id,
            name,
            description,
            base_price
          )
        `).eq("business_id",s).eq("is_available",!0),$e=await W.from("providers").select(`
          id,
          first_name,
          last_name,
          bio,
          experience_years,
          image_url,
          average_rating,
          total_reviews
        `).eq("business_id",s).eq("is_active",!0);if([Te,De,Le,$e].filter(xe=>xe.status===401).length>0&&H===0){console.log("JWT token expired, refreshing session...");const{data:xe,error:Ie}=await W.auth.refreshSession();if(Ie){console.error("Token refresh failed:",Ie),a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}if(xe!=null&&xe.session)return console.log("Session refreshed successfully, retrying..."),await te(1)}const{data:es,error:ee}=Te;ee||!es?(console.error("Business not found, using fallback data:",(ee==null?void 0:ee.message)||ee),m({id:s,business_name:"Smith Health & Wellness",business_type:"small_business",logo_url:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=200&h=200&fit=crop",image_url:null,verification_status:"approved",contact_email:"info@smithhealthwellness.com",phone:"(555) 123-4567",website_url:null})):m(es);const{data:Fe,error:Ke}=De;!Fe||Fe.length===0?(console.log("No services found, using fallback data"),f([{id:"fallback-service-1",service_id:l||"fallback-service-1",business_price:85,delivery_type:"mobile",services:{id:l||"fallback-service-1",name:"60 Minute Massage",description:"Relaxing full-body massage therapy session",duration_minutes:60}}])):f(Fe);const{data:Ue,error:ze}=Le;v(Ue||[]);const{data:G,error:ue}=$e;if(b(G||[]),l&&Fe){const xe=Fe.find(Ie=>Ie.service_id===l);xe&&(N([{...xe,quantity:1}]),U(xe.delivery_type))}}catch(Te){if(console.error("Error fetching business data:",Te),((oe=Te.message)!=null&&oe.includes("JWT")||(de=Te.message)!=null&&de.includes("401")||Te.status===401)&&H===0){console.log("JWT error detected, attempting token refresh...");try{const{data:De,error:Le}=await W.auth.refreshSession();if(!Le&&(De!=null&&De.session))return console.log("Session refreshed, retrying business data fetch..."),await te(1)}catch(De){console.error("Token refresh failed:",De)}a({title:"Authentication Error",description:"Your session has expired. Please refresh the page and sign in again.",variant:"destructive"});return}a({title:"Error",description:Te.message||"Failed to load business information",variant:"destructive"}),r("/")}finally{y(!1)}},re=H=>{_.find(de=>de.id===H.id)?N(_.map(de=>de.id===H.id?{...de,quantity:de.quantity+1}:de)):(N([..._,{...H,quantity:1}]),M||U(H.delivery_type))},be=H=>{const oe=_.find(de=>de.id===H);oe&&oe.quantity>1?N(_.map(de=>de.id===H?{...de,quantity:de.quantity-1}:de)):N(_.filter(de=>de.id!==H))},Me=H=>{const oe=C.find(de=>de.id===H.id);R(oe?C.map(de=>de.id===H.id?{...de,quantity:de.quantity+1}:de):[...C,{...H,quantity:1}])},je=H=>{const oe=C.find(de=>de.id===H);oe&&oe.quantity>1?R(C.map(de=>de.id===H?{...de,quantity:de.quantity-1}:de)):R(C.filter(de=>de.id!==H))},Y=()=>{const H=_.reduce((de,Te)=>de+Te.business_price*Te.quantity,0),oe=C.reduce((de,Te)=>de+(Te.custom_price||Te.service_addons.base_price)*Te.quantity,0);return H+oe},we=(H,oe)=>{z(H),T(oe||null)},Q=()=>{if(_.length===0){a({title:"No Services Selected",description:"Please select at least one service to continue",variant:"destructive"});return}if(M==="mobile"&&!D.trim()){a({title:"Location Required",description:"Please enter your location for mobile service",variant:"destructive"});return}const H={businessId:s,date:o,time:c,services:_,addons:C,providerId:E==="no-preference"?null:E,deliveryType:M,customerLocation:M==="mobile"?D:null,customerLocationData:M==="mobile"?X:null,specialRequests:$,total:Y()};sessionStorage.setItem("bookingData",JSON.stringify(H)),r("/checkout")},pe=H=>new Date(H).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading booking details..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:`/book-service/${l}/businesses?date=${o}&time=${c}`,children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Businesses"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]})})})}),e.jsx("div",{className:"bg-background/50 border-b",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"✓"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"Date & Time"})]}),e.jsx(pt,{className:"w-4 h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"✓"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"Business Selected"})]}),e.jsx(pt,{className:"w-4 h-4 text-foreground/40"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-blue text-white rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-roam-blue",children:"Book Service"})]})]})})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(V,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(st,{className:"h-16 w-16",children:[e.jsx(it,{src:(u==null?void 0:u.logo_url)||(u==null?void 0:u.image_url)||void 0}),e.jsx(tt,{children:e.jsx(fs,{className:"w-8 h-8"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:u==null?void 0:u.business_name}),(u==null?void 0:u.is_featured)&&e.jsxs(ge,{className:"bg-roam-yellow text-gray-900",children:[e.jsx(us,{className:"w-4 h-4 mr-1"}),"Featured"]})]}),e.jsxs("p",{className:"text-foreground/70",children:["Professional"," ",(J=u==null?void 0:u.business_type)==null?void 0:J.replace("_"," ")," services"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[(u==null?void 0:u.verification_status)==="approved"&&e.jsxs(ge,{className:"bg-green-100 text-green-800",children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),"Verified"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground/60",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:o?pe(o):""}),e.jsx(bs,{className:"w-4 h-4 ml-2"}),e.jsx("span",{children:c})]})]})]})]})})}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Select Services"})}),e.jsx(K,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:x.map(H=>{var oe;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:H.services.name}),e.jsx("p",{className:"text-sm text-foreground/70 mb-2",children:H.services.description}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-lg font-bold text-roam-blue",children:["$",H.business_price]}),e.jsxs(ge,{variant:"outline",children:[H.services.duration_minutes," min"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[_.find(de=>de.id===H.id)&&e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>be(H.id),children:e.jsx(ev,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:((oe=_.find(de=>de.id===H.id))==null?void 0:oe.quantity)||0})]}),e.jsx(P,{size:"sm",onClick:()=>re(H),children:e.jsx(ut,{className:"w-4 h-4"})})]})]})},H.id)})})})]}),p.length>0&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Add-ons (Optional)"})}),e.jsx(K,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map(H=>{var oe;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:H.service_addons.name}),e.jsx("p",{className:"text-sm text-foreground/70 mb-2",children:H.service_addons.description}),e.jsxs("span",{className:"text-lg font-bold text-roam-blue",children:["$",H.custom_price||H.service_addons.base_price]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C.find(de=>de.id===H.id)&&e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>je(H.id),children:e.jsx(ev,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:((oe=C.find(de=>de.id===H.id))==null?void 0:oe.quantity)||0})]}),e.jsx(P,{size:"sm",onClick:()=>Me(H),children:e.jsx(ut,{className:"w-4 h-4"})})]})]})},H.id)})})})]}),g.length>0&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Provider Preference (Optional)"})}),e.jsx(K,{children:e.jsxs(_x,{value:E,onValueChange:I,children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(ll,{value:"no-preference",id:"no-preference"}),e.jsxs(B,{htmlFor:"no-preference",className:"flex items-center gap-2",children:[e.jsx(d0,{className:"w-4 h-4 text-roam-blue"}),"No Preference (Business Choice)"]})]}),g.map(H=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(ll,{value:H.id,id:H.id}),e.jsxs(B,{htmlFor:H.id,className:"flex items-center gap-3 flex-1",children:[e.jsxs(st,{className:"h-8 w-8",children:[e.jsx(it,{src:H.image_url||void 0}),e.jsxs(tt,{className:"text-xs",children:[H.first_name[0],H.last_name[0]]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[H.first_name," ",H.last_name]}),H.average_rating&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-foreground/60",children:[e.jsx(us,{className:"w-3 h-3 text-roam-warning fill-current"}),e.jsx("span",{children:H.average_rating}),e.jsxs("span",{children:["(",H.total_reviews||0,")"]})]})]})]})]},H.id))]})})]}),M==="mobile"&&e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Service Location"})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-4",children:[A.length>0&&e.jsxs("div",{children:[e.jsx(B,{children:"Choose from Saved Locations"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 mt-2",children:A.map(H=>e.jsx(P,{variant:"outline",onClick:()=>{const oe=`${H.street_address}${H.unit_number?`, ${H.unit_number}`:""}, ${H.city}, ${H.state} ${H.zip_code}`;z(oe),T(null)},className:"w-full justify-start text-left h-auto p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-roam-light-blue/20 rounded-full flex items-center justify-center flex-shrink-0",children:H.location_type==="Home"?e.jsx(Zr,{className:"w-4 h-4 text-roam-blue"}):H.location_type==="Condo"?e.jsx(fs,{className:"w-4 h-4 text-roam-blue"}):H.location_type==="Hotel"?e.jsx(fs,{className:"w-4 h-4 text-roam-blue"}):e.jsx(ws,{className:"w-4 h-4 text-roam-blue"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:H.location_name}),H.is_primary&&e.jsx(ge,{className:"bg-roam-yellow text-gray-900 text-xs",children:"Primary"})]}),e.jsxs("div",{className:"text-sm text-foreground/60",children:[H.street_address,", ",H.city,", ",H.state]})]})]})},H.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{htmlFor:"location",children:A.length>0?"Or Enter a New Address":"Your Address"}),A.length===0&&e.jsx(P,{type:"button",variant:"link",size:"sm",asChild:!0,className:"h-auto p-0 text-roam-blue",children:e.jsxs(Ee,{to:"/customer/locations",target:"_blank",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Save locations for faster booking"]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx(H2,{value:D,onChange:we,placeholder:"Start typing your address...",className:"w-full"})}),X&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"✓ Address validated with Google Maps"})]})]})})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Special Requests (Optional)"})}),e.jsx(K,{children:e.jsx(jt,{placeholder:"Any special instructions or requests for your appointment...",value:$,onChange:H=>F(H.target.value),rows:3})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(V,{className:"sticky top-24",children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Booking Summary"})}),e.jsxs(K,{className:"space-y-4",children:[_.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Services"}),_.map(H=>e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[H.services.name," × ",H.quantity]}),e.jsxs("span",{children:["$",H.business_price*H.quantity]})]},H.id))]}),C.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Add-ons"}),C.map(H=>e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[H.service_addons.name," × ",H.quantity]}),e.jsxs("span",{children:["$",(H.custom_price||H.service_addons.base_price)*H.quantity]})]},H.id))]}),e.jsx(er,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-roam-blue",children:["$",Y()]})]}),e.jsxs(P,{onClick:Q,disabled:_.length===0,className:"w-full bg-roam-blue hover:bg-roam-blue/90",size:"lg",children:["Continue to Checkout",e.jsx(pt,{className:"w-4 h-4 ml-2"})]}),e.jsxs("div",{className:"text-xs text-foreground/60 space-y-1",children:[e.jsx("p",{children:"• Select your desired services and add-ons"}),e.jsx("p",{children:"• Choose your preferred provider (optional)"}),e.jsx("p",{children:"• Final booking confirmation in next step"})]})]})]})})]})})})]})}function i9(){const s=Nt(),{toast:t}=et(),{customer:r,isCustomer:a}=Ss(),[n,i]=d.useState(null),[o,c]=d.useState(null),[l,u]=d.useState(!0),[m,x]=d.useState(!1),[f,p]=d.useState({customerName:"",customerEmail:"",customerPhone:"",specialRequests:""});d.useEffect(()=>{const N=sessionStorage.getItem("bookingData");if(N){const C=JSON.parse(N);i(C),p(R=>({...R,specialRequests:C.specialRequests||""})),v(C.businessId)}else t({title:"No Booking Data",description:"Please start your booking from the beginning.",variant:"destructive"}),s("/")},[s,t]),d.useEffect(()=>{if(console.log("Checkout useEffect - customer:",r,"isCustomer:",a),r&&a){console.log("Pre-populating customer form with authenticated user data:",r);const N=`${r.first_name||""} ${r.last_name||""}`.trim();console.log("Generated full name:",N),p(C=>({...C,customerName:N,customerEmail:r.email||"",customerPhone:r.phone||""}))}else console.log("Not pre-populating - customer:",!!r,"isCustomer:",a)},[r,a]);const v=async N=>{try{u(!0);const{data:C,error:R}=await W.from("business_profiles").select(`
          id,
          business_name,
          business_address,
          business_city,
          business_state,
          business_zip,
          contact_phone,
          contact_email
        `).eq("id",N).single();if(R)throw R;c(C)}catch(C){console.error("Error fetching business data:",C),t({title:"Error",description:"Failed to load business information.",variant:"destructive"})}finally{u(!1)}},g=(N,C)=>{p(R=>({...R,[N]:C}))},b=()=>f.customerName.trim()?f.customerEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.customerEmail)?!0:(t({title:"Invalid Email",description:"Please enter a valid email address.",variant:"destructive"}),!1):(t({title:"Email Required",description:"Please enter your email address.",variant:"destructive"}),!1):(t({title:"Name Required",description:"Please enter your full name.",variant:"destructive"}),!1),w=async()=>{if(!(!b()||!n)){x(!0);try{const N={business_id:n.businessId,customer_id:(r==null?void 0:r.customer_id)||null,guest_name:r?null:f.customerName,guest_email:r?null:f.customerEmail,guest_phone:r?null:f.customerPhone,service_date:n.date,service_time:n.time,provider_id:n.providerId,delivery_type:n.deliveryType,customer_location:n.customerLocation,customer_location_data:n.customerLocationData,special_requests:f.specialRequests,total_amount:n.total,status:"pending",booking_items:[...n.services.map(E=>({type:"service",service_id:E.services.id,quantity:E.quantity,price:E.business_price})),...n.addons.map(E=>({type:"addon",addon_id:E.service_addons.id,quantity:E.quantity,price:E.custom_price||E.service_addons.base_price}))]};console.log("Submitting booking:",N);const{data:C,error:R}=await W.from("bookings").insert([N]).select().single();if(R)throw R;sessionStorage.removeItem("bookingData"),t({title:"Booking Confirmed!",description:"Your booking has been successfully submitted."}),r&&a?s("/customer/bookings"):s("/",{state:{bookingSuccess:!0,bookingId:C.id}})}catch(N){console.error("Error submitting booking:",N),t({title:"Booking Failed",description:"There was an error processing your booking. Please try again.",variant:"destructive"})}finally{x(!1)}}},y=N=>new Date(N).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),_=N=>{const[C,R]=N.split(":"),E=new Date;return E.setHours(parseInt(C),parseInt(R)),E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-roam-blue mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/60",children:"Loading checkout..."})]})}):!n||!o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Booking Not Found"}),e.jsx("p",{className:"text-foreground/60 mb-6",children:"Please start your booking from the beginning."}),e.jsx(P,{asChild:!0,className:"bg-roam-blue hover:bg-roam-blue/90",children:e.jsxs(Ee,{to:"/",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:"/home",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]}),a&&e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"text-sm text-foreground/70",children:["Welcome, ",r==null?void 0:r.first_name]})})]})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Complete Your Booking"}),e.jsx("p",{className:"text-foreground/60",children:"Review your booking details and provide your contact information."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5 text-roam-blue"}),"Contact Information"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerName",children:"Full Name *"}),e.jsx(ae,{id:"customerName",type:"text",value:f.customerName,onChange:N=>g("customerName",N.target.value),placeholder:"Enter your full name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerEmail",children:"Email Address *"}),e.jsx(ae,{id:"customerEmail",type:"email",value:f.customerEmail,onChange:N=>g("customerEmail",N.target.value),placeholder:"Enter your email",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"customerPhone",children:"Phone Number"}),e.jsx(ae,{id:"customerPhone",type:"tel",value:f.customerPhone,onChange:N=>g("customerPhone",N.target.value),placeholder:"Enter your phone number",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"specialRequests",children:"Special Requests (Optional)"}),e.jsx(jt,{id:"specialRequests",value:f.specialRequests,onChange:N=>g("specialRequests",N.target.value),placeholder:"Any special instructions or requests...",rows:3,className:"mt-1"})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Booking Summary"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:o.business_name}),e.jsxs("p",{className:"text-sm text-foreground/60",children:[o.business_address,", ",o.business_city,", ",o.business_state]})]}),e.jsx(er,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{className:"text-sm",children:y(n.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{className:"text-sm",children:_(n.time)})]}),n.deliveryType==="mobile"&&n.customerLocation&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-roam-blue"}),e.jsx("span",{className:"text-sm",children:n.customerLocation})]}),e.jsx(er,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Services"}),n.services.map((N,C)=>e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[N.services.name," × ",N.quantity]}),e.jsxs("span",{children:["$",N.business_price*N.quantity]})]},C))]}),n.addons.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Add-ons"}),n.addons.map((N,C)=>e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[N.service_addons.name," × ",N.quantity]}),e.jsxs("span",{children:["$",(N.custom_price||N.service_addons.base_price)*N.quantity]})]},C))]}),e.jsx(er,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-roam-blue",children:["$",n.total]})]}),e.jsx(P,{onClick:w,disabled:m,className:"w-full bg-roam-blue hover:bg-roam-blue/90 mt-6",size:"lg",children:m?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Confirm Booking"]})}),e.jsx("div",{className:"text-xs text-foreground/60 text-center mt-4",children:"By confirming, you agree to our terms of service and privacy policy."})]})]})})]})]})})]})}const by=z4("pk_test_51RtWP3CpMcwgGgU0aiye0NpwchvfsZlO9Wf8iQx6rgd6tsSt3DTr7QREn46PMPTyubYfmxLWjT5jCUK83DmBlT5t00D3zTLJLM",{stripeAccount:void 0}).catch(s=>(console.error("Failed to load Stripe:",s),console.warn("This might be due to Content Security Policy restrictions."),null)),o9=({bookingId:s,totalAmount:t,serviceFee:r,customerEmail:a,customerName:n,businessName:i,serviceName:o,onPaymentSuccess:c,onPaymentError:l,clientSecret:u})=>{const m=V4(),x=J4(),{toast:f}=et(),{customer:p,isCustomer:v}=Ss();console.log("💳 PaymentForm: Customer data debug:",{isCustomer:v,customer:p,customerHasUserId:!!(p!=null&&p.user_id),customerKeys:p?Object.keys(p):"no customer"}),d.useEffect(()=>{v&&(p!=null&&p.user_id)&&(console.log("🧪 Testing Stripe sync with mock customer ID..."),E("cus_test_mock_customer_id"))},[v,p==null?void 0:p.user_id]);const[g,b]=d.useState(!1),[w,y]=d.useState(u||""),[_,N]=d.useState(""),[C,R]=d.useState("");d.useEffect(()=>{u&&y(u)},[u]);const E=async M=>{if(console.log("Stripe sync debug:",{isCustomer:v,customer:p,customerUserId:p==null?void 0:p.user_id,stripeCustomerId:M}),!v||!(p!=null&&p.user_id)){console.log("Skipping Stripe customer sync - not authenticated customer or missing IDs");return}try{const{data:U,error:D}=await W.from("customer_stripe_profiles").select("id").eq("user_id",p.user_id).single();if(D&&D.code!=="PGRST116"){console.error("Error checking existing Stripe profile:",D);return}const{data:z,error:X}=await W.from("customer_stripe_profiles").select("user_id").eq("stripe_customer_id",M).single();if(X&&X.code!=="PGRST116"){console.error("Error checking existing Stripe customer ID:",X);return}if(z&&z.user_id!==p.user_id){console.warn(`Stripe customer ID ${M} is already associated with a different user`);return}if(U){const{error:T}=await W.from("customer_stripe_profiles").update({stripe_customer_id:M,stripe_email:a}).eq("user_id",p.user_id);if(T){console.error("Error updating Stripe customer profile - Full error object:",T),console.error("Error type:",typeof T),console.error("Error keys:",Object.keys(T||{}));let A="Unknown error occurred";if(T)if(typeof T=="string")A=T;else if(T.message)A=T.message;else if(T.error_description)A=T.error_description;else if(T.details)A=T.details;else if(T.hint)A=T.hint;else if(T.code)A=`Database error (${T.code})`;else try{A=JSON.stringify(T)}catch{A="Unable to parse error details"}console.error("Parsed error message:",A)}else console.log("Stripe customer profile updated successfully")}else{const{error:T}=await W.from("customer_stripe_profiles").upsert({user_id:p.user_id,stripe_customer_id:M,stripe_email:a},{onConflict:"user_id"});if(T){console.error("Error creating Stripe customer profile - Full error object:",T),console.error("Error type:",typeof T),console.error("Error keys:",Object.keys(T||{}));let A="Unknown error occurred";if(T)if(typeof T=="string")A=T;else if(T.message)A=T.message;else if(T.error_description)A=T.error_description;else if(T.details)A=T.details;else if(T.hint)A=T.hint;else if(T.code)A=`Database error (${T.code})`;else try{A=JSON.stringify(T)}catch{A="Unable to parse error details"}console.error("Parsed error message:",A)}else console.log("Successfully created Stripe customer profile:",M)}}catch(U){console.error("Error syncing Stripe customer ID - Full error object:",U),console.error("Error type:",typeof U),console.error("Error keys:",Object.keys(U||{}));let D="Unknown error occurred";if(U)if(typeof U=="string")D=U;else if(U.message)D=U.message;else if(U.error_description)D=U.error_description;else if(U.details)D=U.details;else if(U.hint)D=U.hint;else if(U.code)D=`Database error (${U.code})`;else try{D=JSON.stringify(U)}catch{D="Unable to parse error details"}console.error("Parsed error message:",D)}},I=async M=>{if(M.preventDefault(),!!w){b(!0);try{if(w.includes("mock")){console.log("🧪 Mock payment processing in development mode"),await new Promise(X=>setTimeout(X,2e3));const z=`pi_mock_${Date.now()}`;console.log("Mock payment succeeded:",z),c(z),f({title:"Payment Successful! (Mock Mode)",description:"Your booking has been confirmed. This was a simulated payment for development."});return}if(!m||!x)throw new Error("Stripe not initialized");const{error:U,paymentIntent:D}=await m.confirmPayment({elements:x,confirmParams:{return_url:`${window.location.origin}/booking-success?booking_id=${s}`,receipt_email:a},redirect:"if_required"});U?(console.error("Payment error:",U),l(U.message||"Payment failed"),f({title:"Payment Failed",description:U.message||"Your payment could not be processed.",variant:"destructive"})):D&&D.status==="succeeded"&&(console.log("Payment succeeded:",D),c(D.id),f({title:"Payment Successful!",description:"Your booking has been confirmed and paid."}))}catch(U){console.error("Payment processing error:",U),l(U.message),f({title:"Payment Error",description:"An unexpected error occurred during payment.",variant:"destructive"})}finally{b(!1)}}};return w?e.jsxs(V,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Payment Information"]})}),e.jsx(K,{children:e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Service: ",o]}),e.jsxs("span",{children:["$",(t-r).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Platform Fee (15%)"}),e.jsxs("span",{children:["$",r.toFixed(2)]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",t.toFixed(2)]})]})]}),e.jsx("div",{className:"p-4 border rounded-lg",children:w.includes("mock")?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-600 mb-4",children:e.jsx(Ja,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Development Mode"}),e.jsx("p",{className:"text-gray-600 mb-4",children:'Payment processing is in mock mode for development. Click "Pay" to simulate a successful payment.'}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"💡 To test real payments, deploy to Vercel or run with proper Stripe configuration"})})]})}):e.jsx(W4,{options:{layout:{type:"accordion",defaultCollapsed:!1,radios:!1,spacedAccordionItems:!0},wallets:{applePay:"auto",googlePay:"auto"}}})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qo,{className:"h-4 w-4"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]}),e.jsx(P,{type:"submit",disabled:!m&&!w.includes("mock")||g,className:"w-full",size:"lg",children:g?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"h-4 w-4 animate-spin mr-2"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Pay $",t.toFixed(2)]})})]})})]}):e.jsx(V,{children:e.jsxs(K,{className:"flex items-center justify-center p-8",children:[e.jsx(rt,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{children:"Setting up payment..."})]})})},l9=s=>{const[t,r]=d.useState(null),[a,n]=d.useState(""),[i,o]=d.useState(!0),[c,l]=d.useState(null);if(d.useEffect(()=>{by.then(m=>{m||r("Failed to load Stripe. This might be due to security restrictions.")}).catch(m=>{r(`Stripe loading error: ${m.message}`)})},[]),d.useEffect(()=>{(async()=>{try{o(!0),l(null);const x=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalAmount:s.totalAmount,serviceFee:s.serviceFee,currency:"usd",bookingId:s.bookingId,customerEmail:s.customerEmail,customerName:s.customerName,businessName:s.businessName,serviceName:s.serviceName})});if(x.ok){const f=await x.json();if(f.clientSecret)n(f.clientSecret);else throw new Error("No client secret received from payment intent")}else throw new Error(`Payment intent creation failed with status: ${x.status}`)}catch(x){console.error("Payment initialization error:",x),l(x instanceof Error?x.message:"Failed to initialize payment")}finally{o(!1)}})()},[s.totalAmount,s.bookingId,s.customerEmail]),t)return e.jsx(V,{children:e.jsxs(K,{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx(Ja,{className:"h-12 w-12 mx-auto mb-2"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment System Unavailable"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please try refreshing the page or contact support if the issue persists."})]})});if(c)return e.jsx(V,{children:e.jsxs(K,{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx(Ja,{className:"h-12 w-12 mx-auto mb-2"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment Initialization Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-roam-blue text-white rounded-lg hover:bg-roam-blue/90 transition-colors",children:"Try Again"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please try refreshing the page or contact support if the issue persists."})]})]})});if(i)return e.jsx(V,{children:e.jsxs(K,{className:"text-center py-8",children:[e.jsx(rt,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Initializing payment..."})]})});if(!a)return e.jsx(V,{children:e.jsxs(K,{className:"text-center py-8",children:[e.jsx("div",{className:"text-yellow-600 mb-4",children:e.jsx(Ja,{className:"h-12 w-12 mx-auto mb-2"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment Not Ready"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to initialize payment system. Please try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-roam-blue text-white rounded-lg hover:bg-roam-blue/90 transition-colors",children:"Refresh Page"})]})});const u={clientSecret:a,appearance:{theme:"stripe"},loader:"auto"};return e.jsx(q4,{stripe:by,options:u,children:e.jsx(o9,{...s,clientSecret:a})})},c9=()=>{const[s]=to(),t=Nt(),{toast:r}=et(),[a,n]=d.useState("pending"),i=s.get("booking_id"),o=parseFloat(s.get("total_amount")||"0"),c=parseFloat(s.get("service_fee")||"0"),l=s.get("customer_email")||"",u=s.get("customer_name")||"",m=s.get("business_name")||"",x=s.get("service_name")||"",f=s.get("promo_code"),p=parseFloat(s.get("discount_amount")||"0");d.useEffect(()=>{(!i||!o||!l)&&(r({title:"Invalid Payment Request",description:"Missing required payment information. Redirecting...",variant:"destructive"}),setTimeout(()=>t("/"),3e3))},[i,o,l,t,r]);const v=w=>{n("success"),setTimeout(()=>{t(`/booking-success?booking_id=${i}&payment_intent=${w}`)},2e3)},g=w=>{n("error"),console.error("Payment error:",w)},b=()=>{t(-1)};return!i||!o||!l?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx(V,{className:"w-full max-w-md",children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx(Sr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Invalid Payment Request"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Missing required payment information. You will be redirected shortly."})]})})}):a==="success"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx(V,{className:"w-full max-w-md",children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx(Xe,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your booking has been confirmed and payment processed successfully."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to confirmation page..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(P,{variant:"ghost",onClick:b,className:"mb-4",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Back to Booking"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Complete Your Payment"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Secure payment for your booking at ",m]})]}),e.jsxs(V,{className:"mb-6",children:[e.jsx(Se,{children:e.jsx(Ce,{children:"Booking Summary"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Service:"}),e.jsx("span",{children:x})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Business:"}),e.jsx("span",{children:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Customer:"}),e.jsx("span",{children:u})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Email:"}),e.jsx("span",{children:l})]}),f&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{className:"font-medium",children:"Promo Code:"}),e.jsxs("span",{children:[f," (-$",p.toFixed(2),")"]})]})]})]}),a==="pending"&&e.jsx(l9,{bookingId:i,totalAmount:o,serviceFee:c,customerEmail:l,customerName:u,businessName:m,serviceName:x,onPaymentSuccess:v,onPaymentError:g}),a==="error"&&e.jsx(V,{children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx(Sr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an issue processing your payment. Please try again."}),e.jsx(P,{onClick:()=>n("pending"),children:"Try Again"})]})})]})})},d9=()=>{const[s]=to(),t=Nt(),{isCustomer:r}=Ss(),[a,n]=d.useState(null),i=s.get("booking_id"),o=s.get("payment_intent");d.useEffect(()=>{i&&n({id:i,paymentIntentId:o,status:"confirmed"})},[i,o]);const c=()=>{t(r?"/customer/bookings":"/")},l=()=>{t("/home")};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsx(V,{className:"mb-6",children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx("div",{className:"text-green-500 mb-4",children:e.jsx(Xe,{className:"h-16 w-16 mx-auto"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your payment has been processed successfully and your booking is confirmed."}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Booking ID:"})," ",i]}),o&&e.jsxs("p",{className:"text-sm text-green-800 mt-1",children:[e.jsx("strong",{children:"Payment ID:"})," ",o]})]})]})}),e.jsxs(V,{className:"mb-6",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),"What Happens Next?"]})}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mt-1",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Confirmation Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"You'll receive a confirmation email with all booking details shortly."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mt-1",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Provider Contact"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"The service provider will contact you within 24 hours to confirm details and schedule."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mt-1",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Service Delivery"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enjoy your service at the scheduled time and location."})]})]})]})]}),e.jsxs(V,{className:"mb-6",children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Payment Information"]})}),e.jsx(K,{children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Status:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"✓ Paid"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"text-gray-900",children:"Credit Card"})]}),o&&e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Transaction ID:"}),e.jsxs("span",{className:"text-gray-900 font-mono text-sm",children:[o.substring(0,20),"..."]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(P,{onClick:c,className:"flex-1",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"View My Bookings"]}),e.jsxs(P,{variant:"outline",onClick:l,className:"flex-1",children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Back to Home"]})]}),e.jsx(V,{className:"mt-6",children:e.jsxs(K,{className:"text-center p-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"If you have any questions about your booking, please don't hesitate to contact us."}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>t("/support"),children:"Contact Support"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx(V,{className:"w-full max-w-md",children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(ld,{className:"h-12 w-12 mx-auto"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Booking Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We couldn't find the booking information you're looking for."}),e.jsxs(P,{onClick:l,children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})})})};function u9(){const s=Nt(),{toast:t}=et(),{customer:r,isCustomer:a}=Ss(),[n,i]=d.useState(!1),[o,c]=d.useState(!1),[l,u]=d.useState(!1),[m,x]=d.useState({email:"",password:""}),[f,p]=d.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""});d.useEffect(()=>{r&&a&&(t({title:"Already Signed In",description:`Welcome back, ${r.first_name}!`}),s("/customer/profile"))},[r,a,s,t]);const v=async w=>{w.preventDefault(),i(!0);try{const{data:y,error:_}=await W.auth.signInWithPassword({email:m.email,password:m.password});if(_)throw _;y.user&&(t({title:"Welcome back!",description:"You have been successfully signed in."}),s("/customer/profile"))}catch(y){console.error("Sign in error:",y),t({title:"Sign In Failed",description:y.message||"Invalid email or password",variant:"destructive"})}finally{i(!1)}},g=async w=>{if(w.preventDefault(),f.password!==f.confirmPassword){t({title:"Password Mismatch",description:"Passwords do not match",variant:"destructive"});return}if(f.password.length<6){t({title:"Password Too Short",description:"Password must be at least 6 characters",variant:"destructive"});return}i(!0);try{const{data:y,error:_}=await W.auth.signUp({email:f.email,password:f.password,options:{data:{first_name:f.firstName,last_name:f.lastName,phone:f.phone,user_type:"customer"}}});if(_)throw _;y.user&&t({title:"Account Created!",description:"Please check your email to verify your account."})}catch(y){console.error("Sign up error:",y),t({title:"Sign Up Failed",description:y.message||"Failed to create account",variant:"destructive"})}finally{i(!1)}},b=async()=>{var w,y;try{const{error:_}=await W.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/customer/profile`}});if(_)throw _}catch(_){console.error("Google auth error:",_);let N="Failed to sign in with Google";((w=_.message)!=null&&w.includes("origin")||(y=_.message)!=null&&y.includes("client ID"))&&(N="Google Sign-In is not configured for this domain. Please use email/password sign-in."),t({title:"Google Sign In Unavailable",description:N,variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-accent/5 to-roam-light-blue/10",children:[e.jsx("nav",{className:"border-b bg-background/80 backdrop-blur-md",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground hover:text-roam-blue",children:e.jsxs(Ee,{to:"/",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-8 w-auto"})]})})})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Welcome to ROAM"}),e.jsx("p",{className:"text-foreground/60",children:"Sign in to book services and manage your account"})]}),e.jsxs(V,{children:[e.jsx(Se,{children:e.jsx(Ce,{className:"text-center",children:"Account Access"})}),e.jsx(K,{children:e.jsxs(Pr,{defaultValue:"signin",className:"w-full",children:[e.jsxs(fr,{className:"grid w-full grid-cols-2",children:[e.jsx(hs,{value:"signin",children:"Sign In"}),e.jsx(hs,{value:"signup",children:"Sign Up"})]}),e.jsxs(ds,{value:"signin",className:"space-y-4",children:[e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signin-email",children:"Email"}),e.jsx(ae,{id:"signin-email",type:"email",value:m.email,onChange:w=>x(y=>({...y,email:w.target.value})),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signin-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"signin-password",type:o?"text":"password",value:m.password,onChange:w=>x(y=>({...y,password:w.target.value})),placeholder:"Enter your password",required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!o),children:o?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsx(P,{type:"submit",className:"w-full bg-roam-blue hover:bg-roam-blue/90",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(er,{className:"w-full"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs(P,{type:"button",variant:"outline",onClick:b,className:"w-full",disabled:n,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]}),e.jsxs(ds,{value:"signup",className:"space-y-4",children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-firstName",children:"First Name"}),e.jsx(ae,{id:"signup-firstName",value:f.firstName,onChange:w=>p(y=>({...y,firstName:w.target.value})),placeholder:"First name",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-lastName",children:"Last Name"}),e.jsx(ae,{id:"signup-lastName",value:f.lastName,onChange:w=>p(y=>({...y,lastName:w.target.value})),placeholder:"Last name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-email",children:"Email"}),e.jsx(ae,{id:"signup-email",type:"email",value:f.email,onChange:w=>p(y=>({...y,email:w.target.value})),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-phone",children:"Phone (Optional)"}),e.jsx(ae,{id:"signup-phone",type:"tel",value:f.phone,onChange:w=>p(y=>({...y,phone:w.target.value})),placeholder:"Enter your phone number"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"signup-password",type:o?"text":"password",value:f.password,onChange:w=>p(y=>({...y,password:w.target.value})),placeholder:"Create a password",required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!o),children:o?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"signup-confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"signup-confirmPassword",type:l?"text":"password",value:f.confirmPassword,onChange:w=>p(y=>({...y,confirmPassword:w.target.value})),placeholder:"Confirm your password",required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!l),children:l?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ha,{className:"h-4 w-4"})})]})]}),e.jsx(P,{type:"submit",className:"w-full bg-roam-blue hover:bg-roam-blue/90",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(er,{className:"w-full"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs(P,{type:"button",variant:"outline",onClick:b,className:"w-full",disabled:n,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-foreground/60",children:["Need help?"," ",e.jsx(Ee,{to:"/contact",className:"text-roam-blue hover:underline",children:"Contact Support"})]})})]})})]})}const m9=[{id:"1",title:"Mobile IV Therapy Services: Discover Convenience on the Emerald Coast with ROAM",excerpt:"Explore the benefits of mobile IV therapy and how ROAM brings professional wellness services directly to your location.",category:"IV THERAPY WELLNESS",image:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop",author:"Dr. Sarah Chen",date:"March 15, 2024",readTime:"5 min read",slug:"mobile-iv-therapy-emerald-coast"},{id:"2",title:"Connecting Wellness and Community at the YOLO & ROAM Event",excerpt:"Recap of our community wellness event bringing together local providers and health-conscious individuals.",category:"COMMUNITY",image:"https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=400&h=300&fit=crop",author:"Jessica Martinez",date:"March 12, 2024",readTime:"4 min read",slug:"yolo-roam-community-event"},{id:"3",title:"Glow Goals: How a Spray Tan Lifts Your Look & Your Spirits",excerpt:"Discover the confidence-boosting benefits of professional spray tanning and why mobile services are the future.",category:"BEAUTY SPRAY TAN",image:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fc812f66efc8641e5a5e8b82ad8a50e3e?format=webp&width=800",author:"Emma Thompson",date:"March 10, 2024",readTime:"6 min read",slug:"spray-tan-confidence-boost"},{id:"4",title:"Glow On The Go: Why Mobile Spray Tanning Is the Ultimate Beauty Hack",excerpt:"Learn why mobile spray tanning services are revolutionizing the beauty industry and how to achieve the perfect glow.",category:"BEAUTY SPRAY TAN",image:"https://images.unsplash.com/photo-1515377905703-c4788e51af15?w=400&h=300&fit=crop",author:"Maria Rodriguez",date:"March 8, 2024",readTime:"7 min read",slug:"mobile-spray-tanning-beauty-hack"},{id:"5",title:"Celebrating Connections: The New Inlet Beach Underpass",excerpt:"How community infrastructure improvements are making wellness services more accessible in coastal communities.",category:"COMMUNITY",image:"https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=400&h=300&fit=crop",author:"Mike Johnson",date:"March 5, 2024",readTime:"3 min read",slug:"inlet-beach-underpass-community"},{id:"6",title:"Prioritize Self-Care with ROAM: Massage Therapy Delivered to You",excerpt:"The importance of regular massage therapy for mental and physical health, now available in your home.",category:"MASSAGE WELLNESS",image:"https://images.unsplash.com/photo-1544717297-fa95b6ee9643?w=400&h=300&fit=crop",author:"Alex Rivera",date:"March 3, 2024",readTime:"8 min read",slug:"mobile-massage-therapy-selfcare"},{id:"7",title:"The Science Behind Mobile Fitness: Personal Training at Home",excerpt:"Research-backed benefits of in-home personal training and how it compares to traditional gym workouts.",category:"FITNESS",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop",author:"Coach David Lee",date:"March 1, 2024",readTime:"9 min read",slug:"mobile-fitness-personal-training"},{id:"8",title:"Wellness at Your Doorstep: The Future of Healthcare",excerpt:"How mobile wellness services are transforming healthcare delivery and improving patient outcomes.",category:"WELLNESS",image:"https://images.unsplash.com/photo-1571772996211-2f02c9727629?w=400&h=300&fit=crop",author:"Dr. Rachel Kim",date:"February 28, 2024",readTime:"6 min read",slug:"mobile-wellness-future-healthcare"}],h9=[{id:"all",label:"ALL",color:"bg-gray-600"},{id:"about",label:"ABOUT US",color:"bg-roam-blue"},{id:"beauty",label:"BEAUTY",color:"bg-pink-500"},{id:"community",label:"COMMUNITY",color:"bg-green-500"},{id:"fitness",label:"FITNESS",color:"bg-orange-500"},{id:"wellness",label:"WELLNESS",color:"bg-purple-500"}];function f9(){const[s,t]=d.useState("all"),[r,a]=d.useState(""),n=m9.filter(o=>{const c=s==="all"||o.category.toLowerCase().includes(s.toLowerCase()),l=o.title.toLowerCase().includes(r.toLowerCase())||o.excerpt.toLowerCase().includes(r.toLowerCase());return c&&l}),i=o=>o.includes("BEAUTY")?"bg-pink-500":o.includes("COMMUNITY")?"bg-green-500":o.includes("FITNESS")?"bg-orange-500":o.includes("WELLNESS")?"bg-purple-500":"bg-roam-blue";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ee,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM - Your Best Life. Everywhere.",className:"h-10 w-auto"})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(Ee,{to:"/home",className:"text-foreground/80 hover:text-roam-blue transition-colors",children:"Services"}),e.jsx(Ee,{to:"/providers",className:"text-foreground/80 hover:text-roam-blue transition-colors",children:"Providers"}),e.jsx("span",{className:"text-roam-blue font-medium",children:"Blog"})]})]})})}),e.jsx("section",{className:"bg-gradient-to-br from-roam-blue/5 to-roam-light-blue/10 py-16",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-4xl lg:text-6xl font-bold text-foreground mb-6",children:"ROAM Blog"}),e.jsx("p",{className:"text-xl text-foreground/70 mb-8 max-w-2xl mx-auto",children:"Insights, tips, and stories from the world of mobile wellness and beauty services"}),e.jsxs("div",{className:"max-w-md mx-auto relative",children:[e.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground/40 w-5 h-5"}),e.jsx(ae,{type:"text",placeholder:"Search articles...",value:r,onChange:o=>a(o.target.value),className:"pl-10 pr-4 py-3 text-lg"})]})]})})}),e.jsx("section",{className:"bg-white border-b sticky top-16 z-40",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:h9.map(o=>e.jsx(P,{variant:s===o.id?"default":"outline",size:"sm",onClick:()=>t(o.id),className:`${s===o.id?`${o.color} text-white hover:opacity-90`:"hover:bg-gray-100"} transition-all duration-200`,children:o.label},o.id))})})})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-6",children:n.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(nd,{className:"w-16 h-16 text-foreground/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No articles found"}),e.jsx("p",{className:"text-foreground/60",children:"Try adjusting your search or category filter"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(o=>e.jsxs(V,{className:"overflow-hidden hover:shadow-xl transition-all duration-300 group cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.image,alt:o.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ge,{className:`${i(o.category)} text-white font-semibold text-xs`,children:o.category})})]}),e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground/60 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{children:o.author})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsx("span",{children:o.readTime})]})]}),e.jsx("h3",{className:"text-xl font-bold text-foreground mb-3 line-clamp-2 group-hover:text-roam-blue transition-colors",children:o.title}),e.jsx("p",{className:"text-foreground/70 mb-4 line-clamp-3",children:o.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground/50",children:o.date}),e.jsxs("div",{className:"flex items-center gap-2 text-roam-blue font-medium group-hover:gap-3 transition-all",children:[e.jsx(nd,{className:"w-4 h-4"}),e.jsx("span",{children:"Read More"}),e.jsx(kn,{className:"w-4 h-4"})]})]})]})]},o.id))})})}),e.jsx("section",{className:"bg-gradient-to-br from-roam-blue to-roam-light-blue py-16",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center text-white",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-xl mb-8 text-white/90",children:"Get the latest wellness tips and ROAM updates delivered to your inbox"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[e.jsx(ae,{type:"email",placeholder:"Enter your email",className:"flex-1 bg-white text-foreground"}),e.jsx(P,{variant:"secondary",className:"bg-white text-roam-blue hover:bg-gray-100",children:"Subscribe"})]})]})})}),e.jsx("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2F38446bf6c22b453fa45caf63b0513e21?format=webp&width=800",alt:"ROAM",className:"h-8 w-auto mb-4 brightness-0 invert"}),e.jsx("p",{className:"text-gray-400",children:"Your best life, everywhere. Mobile wellness and beauty services at your fingertips."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Services"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-white transition-colors",children:"Beauty"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-white transition-colors",children:"Fitness"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-white transition-colors",children:"Wellness"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/home",className:"hover:text-white transition-colors",children:"Lifestyle"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(Ee,{to:"/about",className:"hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/blog",className:"hover:text-white transition-colors",children:"Blog"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/contact",className:"hover:text-white transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx(Ee,{to:"/support",className:"hover:text-white transition-colors",children:"Support"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Connect"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"https://www.instagram.com/roam_yourbestlife/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Instagram"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Facebook"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Twitter"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"LinkedIn"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:e.jsx("p",{children:"© 2024 ROAM. All rights reserved."})})]})})]})}const Xc={id:"test-business-123",business_name:"Test Business"},yy={id:"test-user-123",email:"test@example.com"};function x9(){const[s,t]=d.useState(null),[r,a]=d.useState(!1),[n,i]=d.useState(""),[o,c]=d.useState(""),[l,u]=d.useState([]),m=async()=>{a(!0),i(""),c("");try{const p={business_id:Xc.id,user_id:yy.id,business_name:Xc.business_name};console.log("Testing Plaid create-link-token endpoint:",p);const v=await fetch("/api/plaid/create-link-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer test-token-123"},body:JSON.stringify(p)}),g=await v.text();if(console.log("Plaid API Response:",v.status,g),!v.ok){const w=g?JSON.parse(g):{};i(`API Error (${v.status}): ${w.error||v.statusText}`),u(y=>[...y,{test:"Create Link Token",status:"failed",error:`${v.status}: ${w.error||v.statusText}`,timestamp:new Date().toISOString()}]);return}const b=JSON.parse(g);t(b.link_token),c("Plaid Link token created successfully!"),u(w=>{var y;return[...w,{test:"Create Link Token",status:"success",data:{link_token:((y=b.link_token)==null?void 0:y.substring(0,20))+"...",request_id:b.request_id},timestamp:new Date().toISOString()}]})}catch(p){console.error("Error testing Plaid link token:",p),i(p.message||"Failed to test Plaid integration"),u(v=>[...v,{test:"Create Link Token",status:"failed",error:p.message,timestamp:new Date().toISOString()}])}finally{a(!1)}},x=async()=>{a(!0),i(""),c("");try{const p={public_token:"public-sandbox-test-token",business_id:Xc.id,account_id:"test-account-123",institution:{name:"Test Bank",institution_id:"ins_test"}};console.log("Testing Plaid exchange-token endpoint:",p);const v=await fetch("/api/plaid/exchange-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer test-token-123"},body:JSON.stringify(p)}),g=await v.text();if(console.log("Plaid Exchange Response:",v.status,g),!v.ok){const w=g?JSON.parse(g):{};i(`Exchange Error (${v.status}): ${w.error||v.statusText}`),u(y=>[...y,{test:"Exchange Token",status:"failed",error:`${v.status}: ${w.error||v.statusText}`,timestamp:new Date().toISOString()}]);return}const b=JSON.parse(g);c("Plaid token exchange test completed!"),u(w=>[...w,{test:"Exchange Token",status:"success",data:{success:b.success,message:b.message},timestamp:new Date().toISOString()}])}catch(p){console.error("Error testing Plaid token exchange:",p),i(p.message||"Failed to test token exchange"),u(v=>[...v,{test:"Exchange Token",status:"failed",error:p.message,timestamp:new Date().toISOString()}])}finally{a(!1)}},f=()=>{u([]),i(""),c(""),t(null)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Plaid Integration Test"}),e.jsx("p",{className:"text-gray-600",children:"Test the migrated Plaid integration endpoints without authentication dependencies."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Plaid API Tests"}),e.jsx(sd,{children:"Test the Vercel Edge Functions for Plaid integration"})]}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(P,{onClick:m,disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:[r?e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Test Create Link Token"]}),e.jsxs(P,{onClick:x,disabled:r,variant:"outline",children:[r?e.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Test Exchange Token"]}),e.jsx(P,{onClick:f,variant:"outline",className:"ml-auto",children:"Clear Results"})]}),n&&e.jsxs(Go,{variant:"destructive",children:[e.jsx(Sr,{className:"h-4 w-4"}),e.jsx(Xo,{children:n})]}),o&&e.jsxs(Go,{children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx(Xo,{children:o})]}),s&&e.jsxs(Go,{children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsxs(Xo,{children:["Link Token: ",s.substring(0,50),"..."]})]})]})]}),l.length>0&&e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Test Results"}),e.jsx(sd,{children:"Results from Plaid API endpoint tests"})]}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:l.map((p,v)=>e.jsxs("div",{className:`p-4 rounded-lg border ${p.status==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[p.status==="success"?e.jsx(Xe,{className:"w-4 h-4 mr-2 text-green-600"}):e.jsx(Sr,{className:"w-4 h-4 mr-2 text-red-600"}),p.test]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(p.timestamp).toLocaleTimeString()})]}),p.error&&e.jsxs("p",{className:"text-red-700 text-sm mb-2",children:["Error: ",p.error]}),p.data&&e.jsx("pre",{className:"text-sm bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(p.data,null,2)})]},v))})})]}),e.jsxs(V,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Test Configuration"}),e.jsx(sd,{children:"Mock data being used for testing"})]}),e.jsx(K,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Mock Business"}),e.jsx("pre",{className:"text-sm bg-gray-100 p-2 rounded",children:JSON.stringify(Xc,null,2)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Mock User"}),e.jsx("pre",{className:"text-sm bg-gray-100 p-2 rounded",children:JSON.stringify(yy,null,2)})]})]})})]})]})]})}const p9=new y5,jy=()=>e.jsx(w5,{client:p9,children:e.jsxs(KT,{children:[e.jsx(zE,{}),e.jsx(xP,{}),e.jsx(OA,{}),e.jsx(yI,{children:e.jsx(IA,{children:e.jsxs(mI,{children:[e.jsx(vs,{path:"/",element:e.jsx(SM,{})}),e.jsx(vs,{path:"/home",element:e.jsx(BD,{})}),e.jsx(vs,{path:"/providers",element:e.jsx(UD,{})}),e.jsx(vs,{path:"/about",element:e.jsx(zD,{})}),e.jsx(vs,{path:"/blog",element:e.jsx(f9,{})}),e.jsx(vs,{path:"/support",element:e.jsx(VD,{})}),e.jsx(vs,{path:"/contact",element:e.jsx(WD,{})}),e.jsx(vs,{path:"/sign-in",element:e.jsx(u9,{})}),e.jsx(vs,{path:"/provider-portal",element:e.jsx(fF,{})}),e.jsx(vs,{path:"/plaid-test",element:e.jsx(x9,{})}),e.jsx(vs,{path:"/provider-document-verification",element:e.jsx(a8,{})}),e.jsx(vs,{path:"/dashboard",element:e.jsx(Lt,{children:e.jsx(cb,{})})}),e.jsx(vs,{path:"/owner/dashboard",element:e.jsx(Lt,{allowedRoles:["owner"],children:e.jsx(Wm,{})})}),e.jsx(vs,{path:"/dispatcher/dashboard",element:e.jsx(Lt,{allowedRoles:["owner","dispatcher"],children:e.jsx(Wm,{})})}),e.jsx(vs,{path:"/provider/dashboard",element:e.jsx(Lt,{allowedRoles:["owner","dispatcher","provider"],children:e.jsx(Wm,{})})}),e.jsx(vs,{path:"/provider-dashboard",element:e.jsx(Lt,{children:e.jsx(cb,{})})}),e.jsx(vs,{path:"/business-management",element:e.jsx(Lt,{allowedRoles:["owner"],children:e.jsx(n8,{})})}),e.jsx(vs,{path:"/my-bookings",element:e.jsx(Lt,{children:e.jsx(Qb,{})})}),e.jsx(vs,{path:"/customer/bookings",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(Qb,{})})}),e.jsx(vs,{path:"/customer/profile",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(i8,{})})}),e.jsx(vs,{path:"/customer/settings",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(o8,{})})}),e.jsx(vs,{path:"/customer/transactions",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(l8,{})})}),e.jsx(vs,{path:"/customer/favorites",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(d8,{})})}),e.jsx(vs,{path:"/customer/locations",element:e.jsx(Lt,{redirectTo:"/sign-in",children:e.jsx(u8,{})})}),e.jsx(vs,{path:"/provider-onboarding",element:e.jsx(Lt,{children:e.jsx(K$,{})})}),e.jsx(vs,{path:"/provider/:providerId",element:e.jsx(e8,{})}),e.jsx(vs,{path:"/book/:businessId",element:e.jsx(s8,{})}),e.jsx(vs,{path:"/business/:businessId",element:e.jsx(N8,{})}),e.jsx(vs,{path:"/book-service/:serviceId",element:e.jsx(r9,{})}),e.jsx(vs,{path:"/book-service/:serviceId/businesses",element:e.jsx(a9,{})}),e.jsx(vs,{path:"/business/:businessId/book-service",element:e.jsx(n9,{})}),e.jsx(vs,{path:"/checkout",element:e.jsx(i9,{})}),e.jsx(vs,{path:"/payment",element:e.jsx(c9,{})}),e.jsx(vs,{path:"/booking-success",element:e.jsx(d9,{})}),e.jsx(vs,{path:"*",element:e.jsx(_8,{})})]})})})]})}),Yc=document.getElementById("root");if(Yc._reactRoot)Yc._reactRoot.render(e.jsx(jy,{}));else{const s=VE.createRoot(Yc);Yc._reactRoot=s,s.render(e.jsx(jy,{}))}
